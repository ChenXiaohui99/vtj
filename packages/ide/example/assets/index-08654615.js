var St=(u,a,e)=>new Promise((t,n)=>{var r=o=>{try{l(e.next(o))}catch(s){n(s)}},i=o=>{try{l(e.throw(o))}catch(s){n(s)}},l=o=>o.done?t(o.value):Promise.resolve(o.value).then(r,i);l((e=e.apply(u,a)).next())});import{b as dr,u as vr}from"./vue-router-47831170.js";import{_ as fr}from"./monaco-editor-62cd2e70.js";import{b as pr,q as xe,S as pn,s as $n,D as Dn,Q as Pn,d as Tn,N as xt,t as Ft,V as Bt,y as Ge,z as Ke,a as mr,c as hr,e as gr,i as mn,u as yr,_ as br}from"./index-b92ae46a.js";import{H as kr}from"./vue-12cb05e3.js";import{Z as _r}from"./mitt-595fde69.js";import{m as wr,p as An,q as In}from"./@vueuse-a75bf2d8.js";import{D as Er,e as jr,f as Cr,u as On,B as Rn}from"./@element-plus-08099ba7.js";import{I as H,a2 as Vr,e as S,m as U,o as m,M as j,a as W,a3 as de,W as E,aj as Nn,O as _,J as me,K as se,a7 as Sr,T as x,f as pe,aJ as $r,c as A,R as ce,U as ae,V as re,X,ae as ee,u as d,ar as xn,ap as Fn,b5 as pt,i as _t,Z as Xe,a9 as wt,H as Dr,P as Je,Q as Qe,ah as mt,aw as Pr,S as Xt,ai as en,_ as Fe,E as Bn,af as Ln,a0 as ct,w as tn,ad as dt,bt as rt,h as Tr,j as hn,s as $t,n as ut,bg as Ar,be as Ir}from"./@vue-49a84096.js";import{m as ye,w as Or,x as Lt,y as Ut,z as Un,A as Rr,B as Nr,b as he,u as Ie,c as Jt,e as Mt,p as nn,o as rn,n as an,q as Jn,E as Me,C as ve,a as ue,D as ne,F as xr,G as Fr,H as un,I as ln,J as tt,K as Br,f as on,v as Lr,L as Ur,M as Jr,j as Mr,N as zr,O as Wr,P as Hr,Q as Gr,R as Kr,r as we,t as Se,S as Et,T as jt,U as qr,V as Qr,W as Zr,X as Yr,Y as lt,Z as Xr}from"./element-plus-78046a8b.js";import"./lodash-es-93fc2c10.js";import"./async-validator-b6b8d38d.js";import"./@ctrl-b0f23ca4.js";import"./@popperjs-7c8154ca.js";function Oe(u,a){return na(u)||ta(u,a)||sn(u,a)||ea()}function ea(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ta(u,a){var e=u==null?null:typeof Symbol!="undefined"&&u[Symbol.iterator]||u["@@iterator"];if(e!=null){var t,n,r,i,l=[],o=!0,s=!1;try{if(r=(e=e.call(u)).next,a===0){if(Object(e)!==e)return;o=!1}else for(;!(o=(t=r.call(e)).done)&&(l.push(t.value),l.length!==a);o=!0);}catch(c){s=!0,n=c}finally{try{if(!o&&e.return!=null&&(i=e.return(),Object(i)!==i))return}finally{if(s)throw n}}return l}}function na(u){if(Array.isArray(u))return u}function at(u){return ia(u)||aa(u)||sn(u)||ra()}function ra(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aa(u){if(typeof Symbol!="undefined"&&u[Symbol.iterator]!=null||u["@@iterator"]!=null)return Array.from(u)}function ia(u){if(Array.isArray(u))return Wt(u)}function gn(u,a){var e=Object.keys(u);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(u);a&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(u,n).enumerable})),e.push.apply(e,t)}return e}function z(u){for(var a=1;a<arguments.length;a++){var e=arguments[a]!=null?arguments[a]:{};a%2?gn(Object(e),!0).forEach(function(t){P(u,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(e)):gn(Object(e)).forEach(function(t){Object.defineProperty(u,t,Object.getOwnPropertyDescriptor(e,t))})}return u}function P(u,a,e){return a=Wn(a),a in u?Object.defineProperty(u,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):u[a]=e,u}function T(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */T=function(){return a};var u,a={},e=Object.prototype,t=e.hasOwnProperty,n=Object.defineProperty||function(J,F,M){J[F]=M.value},r=typeof Symbol=="function"?Symbol:{},i=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(J,F,M){return Object.defineProperty(J,F,{value:M,enumerable:!0,configurable:!0,writable:!0}),J[F]}try{s({},"")}catch(J){s=function(M,q,te){return M[q]=te}}function c(J,F,M,q){var te=F&&F.prototype instanceof b?F:b,Y=Object.create(te.prototype),le=new ie(q||[]);return n(Y,"_invoke",{value:R(J,M,le)}),Y}function v(J,F,M){try{return{type:"normal",arg:J.call(F,M)}}catch(q){return{type:"throw",arg:q}}}a.wrap=c;var f="suspendedStart",p="suspendedYield",y="executing",g="completed",w={};function b(){}function h(){}function k(){}var V={};s(V,i,function(){return this});var I=Object.getPrototypeOf,D=I&&I(I(Z([])));D&&D!==e&&t.call(D,i)&&(V=D);var O=k.prototype=b.prototype=Object.create(V);function C(J){["next","throw","return"].forEach(function(F){s(J,F,function(M){return this._invoke(F,M)})})}function $(J,F){function M(te,Y,le,je){var Ve=v(J[te],J,Y);if(Ve.type!=="throw"){var We=Ve.arg,Be=We.value;return Be&&typeof Be=="object"&&t.call(Be,"__await")?F.resolve(Be.__await).then(function(He){M("next",He,le,je)},function(He){M("throw",He,le,je)}):F.resolve(Be).then(function(He){We.value=He,le(We)},function(He){return M("throw",He,le,je)})}je(Ve.arg)}var q;n(this,"_invoke",{value:function(Y,le){function je(){return new F(function(Ve,We){M(Y,le,Ve,We)})}return q=q?q.then(je,je):je()}})}function R(J,F,M){var q=f;return function(te,Y){if(q===y)throw new Error("Generator is already running");if(q===g){if(te==="throw")throw Y;return{value:u,done:!0}}for(M.method=te,M.arg=Y;;){var le=M.delegate;if(le){var je=L(le,M);if(je){if(je===w)continue;return je}}if(M.method==="next")M.sent=M._sent=M.arg;else if(M.method==="throw"){if(q===f)throw q=g,M.arg;M.dispatchException(M.arg)}else M.method==="return"&&M.abrupt("return",M.arg);q=y;var Ve=v(J,F,M);if(Ve.type==="normal"){if(q=M.done?g:p,Ve.arg===w)continue;return{value:Ve.arg,done:M.done}}Ve.type==="throw"&&(q=g,M.method="throw",M.arg=Ve.arg)}}}function L(J,F){var M=F.method,q=J.iterator[M];if(q===u)return F.delegate=null,M==="throw"&&J.iterator.return&&(F.method="return",F.arg=u,L(J,F),F.method==="throw")||M!=="return"&&(F.method="throw",F.arg=new TypeError("The iterator does not provide a '"+M+"' method")),w;var te=v(q,J.iterator,F.arg);if(te.type==="throw")return F.method="throw",F.arg=te.arg,F.delegate=null,w;var Y=te.arg;return Y?Y.done?(F[J.resultName]=Y.value,F.next=J.nextLoc,F.method!=="return"&&(F.method="next",F.arg=u),F.delegate=null,w):Y:(F.method="throw",F.arg=new TypeError("iterator result is not an object"),F.delegate=null,w)}function B(J){var F={tryLoc:J[0]};1 in J&&(F.catchLoc=J[1]),2 in J&&(F.finallyLoc=J[2],F.afterLoc=J[3]),this.tryEntries.push(F)}function K(J){var F=J.completion||{};F.type="normal",delete F.arg,J.completion=F}function ie(J){this.tryEntries=[{tryLoc:"root"}],J.forEach(B,this),this.reset(!0)}function Z(J){if(J||J===""){var F=J[i];if(F)return F.call(J);if(typeof J.next=="function")return J;if(!isNaN(J.length)){var M=-1,q=function te(){for(;++M<J.length;)if(t.call(J,M))return te.value=J[M],te.done=!1,te;return te.value=u,te.done=!0,te};return q.next=q}}throw new TypeError(typeof J+" is not iterable")}return h.prototype=k,n(O,"constructor",{value:k,configurable:!0}),n(k,"constructor",{value:h,configurable:!0}),h.displayName=s(k,o,"GeneratorFunction"),a.isGeneratorFunction=function(J){var F=typeof J=="function"&&J.constructor;return!!F&&(F===h||(F.displayName||F.name)==="GeneratorFunction")},a.mark=function(J){return Object.setPrototypeOf?Object.setPrototypeOf(J,k):(J.__proto__=k,s(J,o,"GeneratorFunction")),J.prototype=Object.create(O),J},a.awrap=function(J){return{__await:J}},C($.prototype),s($.prototype,l,function(){return this}),a.AsyncIterator=$,a.async=function(J,F,M,q,te){te===void 0&&(te=Promise);var Y=new $(c(J,F,M,q),te);return a.isGeneratorFunction(F)?Y:Y.next().then(function(le){return le.done?le.value:Y.next()})},C(O),s(O,o,"Generator"),s(O,i,function(){return this}),s(O,"toString",function(){return"[object Generator]"}),a.keys=function(J){var F=Object(J),M=[];for(var q in F)M.push(q);return M.reverse(),function te(){for(;M.length;){var Y=M.pop();if(Y in F)return te.value=Y,te.done=!1,te}return te.done=!0,te}},a.values=Z,ie.prototype={constructor:ie,reset:function(F){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(K),!F)for(var M in this)M.charAt(0)==="t"&&t.call(this,M)&&!isNaN(+M.slice(1))&&(this[M]=u)},stop:function(){this.done=!0;var F=this.tryEntries[0].completion;if(F.type==="throw")throw F.arg;return this.rval},dispatchException:function(F){if(this.done)throw F;var M=this;function q(We,Be){return le.type="throw",le.arg=F,M.next=We,Be&&(M.method="next",M.arg=u),!!Be}for(var te=this.tryEntries.length-1;te>=0;--te){var Y=this.tryEntries[te],le=Y.completion;if(Y.tryLoc==="root")return q("end");if(Y.tryLoc<=this.prev){var je=t.call(Y,"catchLoc"),Ve=t.call(Y,"finallyLoc");if(je&&Ve){if(this.prev<Y.catchLoc)return q(Y.catchLoc,!0);if(this.prev<Y.finallyLoc)return q(Y.finallyLoc)}else if(je){if(this.prev<Y.catchLoc)return q(Y.catchLoc,!0)}else{if(!Ve)throw new Error("try statement without catch or finally");if(this.prev<Y.finallyLoc)return q(Y.finallyLoc)}}}},abrupt:function(F,M){for(var q=this.tryEntries.length-1;q>=0;--q){var te=this.tryEntries[q];if(te.tryLoc<=this.prev&&t.call(te,"finallyLoc")&&this.prev<te.finallyLoc){var Y=te;break}}Y&&(F==="break"||F==="continue")&&Y.tryLoc<=M&&M<=Y.finallyLoc&&(Y=null);var le=Y?Y.completion:{};return le.type=F,le.arg=M,Y?(this.method="next",this.next=Y.finallyLoc,w):this.complete(le)},complete:function(F,M){if(F.type==="throw")throw F.arg;return F.type==="break"||F.type==="continue"?this.next=F.arg:F.type==="return"?(this.rval=this.arg=F.arg,this.method="return",this.next="end"):F.type==="normal"&&M&&(this.next=M),w},finish:function(F){for(var M=this.tryEntries.length-1;M>=0;--M){var q=this.tryEntries[M];if(q.finallyLoc===F)return this.complete(q.completion,q.afterLoc),K(q),w}},catch:function(F){for(var M=this.tryEntries.length-1;M>=0;--M){var q=this.tryEntries[M];if(q.tryLoc===F){var te=q.completion;if(te.type==="throw"){var Y=te.arg;K(q)}return Y}}throw new Error("illegal catch attempt")},delegateYield:function(F,M,q){return this.delegate={iterator:Z(F),resultName:M,nextLoc:q},this.method==="next"&&(this.arg=u),w}},a}function yn(u,a,e,t,n,r,i){try{var l=u[r](i),o=l.value}catch(s){e(s);return}l.done?a(o):Promise.resolve(o).then(t,n)}function G(u){return function(){var a=this,e=arguments;return new Promise(function(t,n){var r=u.apply(a,e);function i(o){yn(r,t,n,i,l,"next",o)}function l(o){yn(r,t,n,i,l,"throw",o)}i(void 0)})}}function Mn(u,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(a&&a.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),Object.defineProperty(u,"prototype",{writable:!1}),a&&zt(u,a)}function zt(u,a){return zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},zt(u,a)}function zn(u){var a=oa();return function(){var t=ht(u),n;if(a){var r=ht(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return ua(this,n)}}function ua(u,a){if(a&&(typeof a=="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return la(u)}function la(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function oa(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(u){return!1}}function ht(u){return ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ht(u)}function bn(u,a){for(var e=0;e<a.length;e++){var t=a[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(u,Wn(t.key),t)}}function ke(u,a,e){return a&&bn(u.prototype,a),e&&bn(u,e),Object.defineProperty(u,"prototype",{writable:!1}),u}function Wn(u){var a=sa(u,"string");return typeof a=="symbol"?a:String(a)}function sa(u,a){if(typeof u!="object"||u===null)return u;var e=u[Symbol.toPrimitive];if(e!==void 0){var t=e.call(u,a||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(u)}function _e(u,a){if(!(u instanceof a))throw new TypeError("Cannot call a class as a function")}function Ne(u,a){var e=typeof Symbol!="undefined"&&u[Symbol.iterator]||u["@@iterator"];if(!e){if(Array.isArray(u)||(e=sn(u))||a&&u&&typeof u.length=="number"){e&&(u=e);var t=0,n=function(){};return{s:n,n:function(){return t>=u.length?{done:!0}:{done:!1,value:u[t++]}},e:function(s){throw s},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var r=!0,i=!1,l;return{s:function(){e=e.call(u)},n:function(){var s=e.next();return r=s.done,s},e:function(s){i=!0,l=s},f:function(){try{!r&&e.return!=null&&e.return()}finally{if(i)throw l}}}}function sn(u,a){if(u){if(typeof u=="string")return Wt(u,a);var e=Object.prototype.toString.call(u).slice(8,-1);if(e==="Object"&&u.constructor&&(e=u.constructor.name),e==="Map"||e==="Set")return Array.from(u);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Wt(u,a)}}function Wt(u,a){(a==null||a>u.length)&&(a=u.length);for(var e=0,t=new Array(a);e<a;e++)t[e]=u[e];return t}var Hn="0.6.13",kn="Vue",ca=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeUnmount","unmounted","errorCaptured","renderTracked","renderTriggered","activated","deactivated"],_n=["$el","$emit","$nextTick","$parent","$root","$attrs","$slots","$watch","$props","$options","$forceUpdate"],da=["vIf","vShow","vModel","vFor","vBind"],va=["click","dblclick","mouseenter","mouseleave","mousedown","mouseup","mouseover","contextmenu"],fa=["keydown","keyup","keypress"],pa=["stop","prevent","capture","self","once","passive"],ma=["String","Number","Boolean","Array","Object"],ha=["GET","POST","PUT","PATCH","DELETE","JSONP"];function Ye(u,a){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;try{var n=['"use strict";',"var __self = arguments[0];"];n.push("return ");var r=(u.value||"").trim();r=r.replace(/this(\W|$)/g,function(o,s){return`__self${s}`}),r=n.join(`
`)+r;var i=`with(${e?"{}":"$scope || {}"}) { ${r} }`;return new Function("$scope",i)(a)}catch(o){var l;if(console.error("parseExpression.error",o,u,(l=a==null?void 0:a.__self)!==null&&l!==void 0?l:a),t)throw o}}function it(u,a){var e,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,r=Ye(u,a,t,n);if(typeof r!="function"&&(console.error("parseFunction.error","not a function",u,(e=a==null?void 0:a.__self)!==null&&e!==void 0?e:a),n))throw new Error(`"${u.value}" not a function`);return r}function Ae(u,a){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,t=!0;try{u.type==="JSExpression"?Ye(u,a,e,!0):it(u,a,e,!0)}catch(n){t=!1,Ie.error({title:"代码错误",message:n.message})}return t}var ga=Object.prototype.toString,ya=function(a){return ga.call(a)},Dt=function(a){return ya(a).slice(8,-1)};function $e(u){return u&&u.type==="JSExpression"}function Ct(u){return typeof u=="object"&&u&&u.type==="JSFunction"}function ba(u,a){var e={};return Object.keys(u).forEach(function(t){a.includes(t)&&(e[t]=u[t])}),e}function Gn(u){return typeof u=="string"?u:JSON.stringify(u)}function Kn(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=Object.keys(u);return a?e.map(function(t){return"."+t}):e}function ka(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=u.find(function(l){return Ke(l.name)==="vIf"}),e=u.find(function(l){return Ke(l.name)==="vFor"}),t=u.find(function(l){return Ke(l.name)==="vShow"}),n=u.find(function(l){return Ke(l.name)==="vBind"}),r=u.filter(function(l){return Ke(l.name)==="vModel"}),i=u.filter(function(l){return!da.includes(Ke(l.name))});return{vIf:a,vFor:e,vShow:t,vModels:r,vBind:n,others:i}}function fe(u){return!!(u!=null&&u.__VTJ_BLOCK__)}function Pt(u){return!!(u!=null&&u.__VTJ_NODE__)}function _a(u){return/\.css$/.test(u)}function wa(u){return/\.js$/.test(u)}function Ea(u){return u.map(function(a){return`<script src="${a}"><\/script>`}).join("")}function ja(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return u.map(function(a){return`<link rel="stylesheet" href="${a}" />`}).join("")}function Ca(u){var a=u.url,e=u.method,t=e===void 0?"GET":e,n=u.settings,r=n?Ye(n,{}):void 0;return t.toLowerCase()==="jsonp"?function(i){return Pn(a,i,r)}:Tn({url:a,method:t,settings:r})}function Va(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[],r=Ne(t),i;try{for(r.s();!(i=r.n()).done;){var l=i.value;l.isDir?l.children&&l.children.length&&(n=n.concat(e(l.children))):n.push(l)}}catch(o){r.e(o)}finally{r.f()}return n};return a(u)}var qn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAQd0lEQVR4nO2dCXRVxRnHf/clIPsekBgIS1hFdqVoZbGLFNTWWgQ3bLVurRYJcTuntbW22qooKKWl2toWquygIFa01doqmBBWWcomIkhACLIKyXvcnu/eefiSNzd57y4vAfI/553wuPfNzJ3/nW9m/t83M4Yx6iTVGOlAC6AD0Bs4F2gGtFT/lmtNgLpABDgMFAN7gCJgH3AQ2ACsAz5V91RbpFfDguUAg4EewBCgLdAQqJXAb5sD7RyuHVGfpcBy4AOgADjkc/k9obq0kP7AN4CrgK7qrQ8aJrALeAt4Q/3dV7XVULWEtAauBq5ThNSpqoIo7AReBWYA/6mqQlQFId2AW4HRwHmpzjwBSMv5N/BHYAHwRSozTyUhQsS9iohGqcrUI1YDE4GXgROpyDAVhMiIKBe4I0V9QxCQgcCvgdeCzigUcPo/BN4HHjiNyRAMBBYBs4BOQWYUFCFdgIXA80DHgPKoCowE3gHuCirvIAj5AfAmcEUAaVcHZAJTgHlqjuQr/CREJm/PAH8G2pyWVZ0crlbzl8v8TNQvQrLVGP5en9I7XdBV9S0/9qu8fhDSC1isZI6zEaKjTQYe8aM+vSZwqeq8u5+lZMTiYeA5oLaXRLwQMhSYe5b0F4niR8BUL6S4VXsvAWYCGZ6Kf2bi+8oVcDuQ9KzbTQvpqQS4GjKcIVrdU25+mCwhbZWuk+WhsGcLxgEPJvusyRAi84xpNR14UhD9a1QyP0iGkEeBQcGV/YyE1O+zwPnJ/CARSEc1NrBin9kQtftFoHEiT5kIIeLj/s3ZXqsecSHwUCJJVEZIGjAJaFXVT3QG4D7ga5U9RmWEiHI7/GyvSZ8QUkPhhhUlVxEhLZUcUAP/ILFld7slJK9GFgkEuRXEjjkSIh6/O0+fZzyt0EK5tLVwIiSvMltXA0+4yWluoiOkqwrVqUFwqA/ckygholI2SCUZZhjM4/bflOYrn1IwT4AZSW3eSlLpUP4/yxPSKtWtwyyBnPPgioHQtpX93Zd0TVXZEbviddcJQ59OMHwAZDTxL+8EIWFRN5a/tTwh31UxtymBtIrhF8GiBwwWPmDw2oMGg3t5rxghIi0NLugAbcRJUKoIiEUYbhwCrz9k57sgz6BvZ7u1pBBjlPk6hdjIRSHnXeV8ChzmF3DlJfDyWIP653yZ28ZP4dKHTfYdBCPNHRndsuGpmwwGdYNjJ2DiYpMnFtheI8OwTWPnLCh43KBR3S9/u/0z+N4Ek8KNYKQu9PvbKkDEQmwL6QP0S0UJhIxhA2D6PWXJEHTNhN7t7Tc46XQj0KQRzBhrMLwPNKgDLRvDY9cZfFOeLtrywjC0B2XIELTLgNm5Br072603RRgZm00sIcNSsSRAyBjSF6b/xIirEMHRE7D7gEtfZhiG9YGe2fGXLuwY41A1oOhzfRLtW8LMcQbnd0wZKd9UC40shGL+Xhl0zkLGwJ4w816D5g7juKlvwbqPwEhkvVRs2thPcfWFhvb62h02ERZqw+vL4e//1afVuTXMGW/QpV1KSMmIDaGKEtI+GSeKGwgZ/brZZLR08AzMWgY/e8l03TqyW8PXesRf2roH3t3w5aI46UdKwnDnVJNXC/XJiemcPd4gp03gpMhr8tXol+ijDwly7iFk9Opiv3VtmuvvmZsPtzxnWp2wm85cCBnRB5pr9IXFK2F/sXImKBjpcOQY3DTJ5LWV+iQvaGOTkp0Z+Ojr8mjoUJSQnkHlJG9X9xyYO96wOk0dFq6AHzxncvS4XVFJ52FCWh24+qJ4cxU5Ca8WmpZNK39VzOKhIzDmWZO31+nT7t0OZuUaZGYESkrbaOB2SMVmBeIrlwfo0h7mjTfo6ODikrdzzCSTw8eS7zdOIQzd28JXNCs3pO94f6PzGl6jNhQfhOsnmrz3P/09F+XAy7kGGc0CmzzWV2tQLEJaqD7EVwgZHdvA/DyDLpn6lN9aCzc/a/L5YfdkWJ15BIb1soe55TEv3+SYpF9BvySkFO2D6yeZrNyuv2dQV3hpnEHTRvZcJwB0jRIieko9X8kogQ5ZMC/PoJvDss531sMNE032H7QrxDVOQq168F2NuZIh9PyCsn2HE4xzYMduuPZpk3U79Td9vQdMG2vQqF4gpAgPTUPKi+XWWMRByDivpW13ezosZ/lgC9w4yWRvsUcysGWRAZ3UPKMclm6CDTsSD5gVUrbssEnZskd/jwwc/ibqQl3fSZGl4e1DakWQLxAyWjW3Z7v9HIygmIRRT5vs2mtXgBdE9SmZe6RpTJKYq8gJe5ibKEQyWb8NrnnS5KPP9D/6dn948W6DunV8JUVc5i1Dfi3GFDKaNYaX7zUY2Fl/z4ZdMPoZk493eyfDwklo2Bgu7x1/af8ReH1VYuaqPISUNZvhe0+ZfLJff8/Ir8Cff2xwTm3f3AZS0mYhxYwnCBkNG9id3lCH6aWYgJETTDZ97BMZ2Obqki5o+6klq2H7LveDBaMurNhoi427HWSW0RfDCz8ySE/3hRSplcyQ2lXHNaQg9evB9LEGlzvMZiwV9SmTddv8U1Etc2XYc4+QxiTN+cB0sRigLISU/HU2KZ85bFFz46Uw9Q5FijcnV3qUkBZuUzBPQnoaTLnd4CoHnViavDzQ6s0+S9oRaJkBwzXm6qO98M46f/Y6ElLeXwM3PGty4Kj+nluGwiOjDatMcX6X5HCutz6kFAb1gDEO08pPDyj/woYA/Aul8PULIEsjxSxaAcX73c36dRBS3iyAMZNNDjvsfJI7Avp2scvlAVYfohHBE0QELu+lH8KImbr2GdNq8ob7HLSw3sJaemW3NAxzlml0Eq+oA4veh9ummhQfiU+rTi3VWr2ZrXohT0mY0NbB4P1qnsl7+f6TYSEM7VrDEM0AYvUOyN/i/9Zs1tC5Dsx8A/70tv6erOae34JwyNOWdwbscNjyK3eEQe+eAUnXYfttbKFRdhcWmhw/7FIxrgzH4VuD4Iav6u/bVeytA5Hd7UJqj0J3SIf5+SZhTRvrrqSTCzra8rtfkIGEKLvXDIh/G4+VJC6VJAt5hqF9Ydo9BplN4398vNTuuzzm/VlIbRjpDrVg2Qb45Vz9myHu0Hn3++wOVcruAI2y+98N8OF2/82VkHFJT5hRgafzyYWwcpMnEUoq8dOQ2r3TFSy7mgaPzoDHFuhTyGkF8+4z6OqXOzSCNcQuHxwhmP2BaanMFSm7yULI6NvV1uacPJ3P/xMemWladZGMTFMO4m3ZJUV3EAcSg/XwafDT6SYTF+t/Ij7q+fcbdMn2RoqYqzoN4Dua0dWeg7BkjZ8yqU1Gz072C6UzU4KX3oO7nzeJRDz3WzJg3ivV6SAMJA4piGlA3l9MJr+h/5n4qOfeZ9C5rQdSSuGiTtBHI1z+60PYUeRf/2F5OjvaZc52GEnOWQa3TTEt/7wPcx5pIQdCapNhzxBSIibkvmjygsOw8PwsmDXesHwlrtyhJlzV31nZlf7Fg8n4Mpvj0Dkb5uYZlsnVQYIjbplicsyl21mD9SJshNSOzw6iQHIQUkojcPcfTaY5bLTaKxvm5CUfOCA6UcMmcEXf+Gtbimzvox/mSsjIaav6PQfHxOJVth/+8FEPbud4iMHdGfJ7+20h5UQp3PUHk9nL9Pf0aWcHo2W1SoKUsK3sdtJEHr+yHD53G1wXAylL+yw70uR8h70qpJ+6aaLJwSO+kiEQV1pJdGK41M+UpQlLBMmtk00WOsQ9DciBmbkG52YkGDhgwKiB8cqutMgFBfaw24u5EjKyzrXNVG9N5KPg3xtst3PxId/JKFVbn596p1b4mrwKsREhTpq2NfrR4OLOtkOrRdOKSRGJP7OV6Gbx11Zth8Jt3syV5enMgFnjDKv16rB0M4yaYLLvcx/czvGQAwM+JIaQpZ5lMQ2EFIkokbfqPxv19wzpDjPGGTRpXIE7NGJHJLbWDD1fKTD54rB7cyVkNG1im1AnT6fldp5gsmd/IGQIlkUVk+hjFHiZIFYEeYB9B2w/+vJt+hulsl8aa9CgfjwplrKbbo+uyuPIcZi/3B7qurFWklcD8XT+xGBwN/0963fans5Pinz0dMbj1Lg0SsghdTpAIJAH2b3XJuXDT/Q5fKt3DCmxbTUCHVrDZRplV2z6+iSiSmIhZrBeXTsKf5jGyYUavUkEytZPAl0vIkrfv6JfYhv6PwLLUgUObFNv26bd+nuu7AeTbzVID8V43kTZ7QPNNBrSPHHTliTfmVuhp2nwu9sMK4JEB/HnjJQYra2BL96ReeDa6JdYQpaoIXBgkAfbuN1+67Y5SJo3D4b+nWKWoaVLKKeDVLLWpZBYCiP6w/cH6y+LS0HKuGpTQP6cspgZ23/HElKsdhgNFEKK+NdHTzLZ6aCi1a6ltE/DLuqWong1WUJ8dha5JOSkPUHVQRYLSUhpQRBu53gcjV3OhmZsMt2zVzgByIMWrFeklPPGyIx7xRZ7GGu1i3T4wxLKBELvPwwTF6m5h5sCpMGba+wJbCyk1V03yeS9tSlbYyh9R5nxZ5rR4+ex33eqLYQc3h//IJNHiaV9ax00bWBw0oRFhTDur2UXfIqafPQYvFIIoZBhEZg3zSR/o/shqKS9cw98XAz9OthL6wq22v7yd9ekdMHneGBzmbJpzg8ZpXYdTQmsCWEte3Hm3gO2qdKJddbIy1RtOux9PmD1T6XQvb3tSFu+FfbsC2yeoUOhWvFcRjzSEVJXTVQCW8RTHlblnLQru6IRU3Tk5YeieyrNUpV3ekB+eGfcDPyt/FXd/FbGxRNSWTKpYCMBb5t1n8/hPaImyDwpxWTIUUpzdBecBIeZUbGrBoHgcYnJSIYQsWu/CELfqoGliMx2qoaKJLl/qGPjauAfpMf6WUV7wlemkcrOZw7LVmrgAhPVgMkRlRGytWYjTN8gXqHHKkssES/C8zWmyzPCamfwSiN8EiEkorY23VT1z3Xa4qfquL1KkaifbZfapTR1mxadOZiTzLwuGcfn20p7qUHiWKlOcEt4BWKynugp6tiKGlSObUoX3JtMXbkJDXhYEVMDZxSpzUQ3J1tHbkPLZMTwlxpCtNinDu0vcPNjt4SE1XHcf3L5+zMV0jKuTXREpYOX4MsSNfJ6+myt/XKQSfR3YkN63MDr0pawGnkldHrMGYxCdc6KZ4Xcr7VGv1F2M9ColWoKOfR+hF8TZz+P756htprN9zHN6oxSdU7hdZ7WaZaD3wfcS6TUN1SLOZN9KavVxpW/dXO8akXwmxBUWOpDyqauCiD9qkSJImGo187bCUEQEsUSdbz3A3426SrEEhUiJWbqQFDFCJIQgewK8oTacfN36vvpBmnl10s8uCyFD7rsujCgINFDnTl+bex+59UUMtP+vQr40AYkBIFUExKFbFl5gzqLKacqCuCAQ6pveEGZqNQe8VKFhEQhiwwuA66RXVj93JAzCRxTSwJmqWBzX5aJu0VVExILWZ4vCwQuVvY6M9EDfZNERAmABao1vKP6iWpREdWJkFjUUgHfMhjopD79Vb9TW20YWdlChOPK5JSoRflr1NLjfDVfcr8LUoDwed8c3yCzYFmUIB9BM3U6prQi+UjrkY9s4CnXZGdu0dWkD5CwJZFwxO0sw20JLJCFdPIJfKmFJwD/B4g2wB0X86iqAAAAAElFTkSuQmCC",Sa=[{name:"logo",type:"Logo",region:"brand",props:{text:"Tj",icon:qn}},{name:"switcher",type:"Switcher",region:"brand",props:{link:"/"}}],$a=[{name:"toolbar",type:"Toolbar",region:"toolbar"}],Da=[{name:"actions",type:"Actions",region:"action"}],Pa=[{name:"pages",type:"Pages",region:"apps",order:1,trigger:{icon:"vtj-icon-document",label:"页面",type:"panel"}},{name:"blocks",type:"Blocks",region:"apps",order:2,trigger:{icon:"vtj-icon-components",label:"区块",type:"panel"}},{name:"components",type:"Components",region:"apps",order:3,trigger:{icon:"vtj-icon-block",label:"组件库",type:"panel"},props:{title:"组件库"}},{name:"outline",type:"Outline",region:"apps",order:4,trigger:{icon:"vtj-icon-outline",label:"大纲树",type:"panel"}},{name:"history",type:"History",region:"apps",order:4,trigger:{icon:"vtj-icon-history",label:"历史记录",type:"panel"}},{name:"api",type:"Apis",region:"apps",order:4,trigger:{icon:"vtj-icon-api",label:"Api管理",type:"panel"}},{name:"packages",type:"Dependencies",region:"apps",order:6,trigger:{icon:"vtj-icon-category",label:"依赖管理",type:"panel"}},{name:"about",type:"About",region:"apps",props:{title:"关于",width:"500px",height:"300px"},trigger:{icon:"vtj-icon-info",label:"关于",type:"dialog"}}],Ta=[{package:"vue",version:"3.3.4",library:"Vue",urls:["./libs/vue.global.js"],required:!0,official:!0,enabled:!0},{package:"@vueuse/core",version:"latest",library:"VueUse",urls:["./libs/vueuse.shared.iife.min.js","./libs/vueuse.core.iife.min.js"],required:!1,official:!0,enabled:!1},{package:"element-plus",version:"latest",library:"ElementPlus",urls:["./libs/element-plus.index.css","./libs/element-plus.full.min.js"],assetsUrl:"./libs/element-plus-assets.js",assetsLibrary:"ElementPlusAssets",required:!1,official:!0,enabled:!0},{package:"@element-plus/icons-vue",version:"latest",library:"ElementPlusIconsVue",urls:["./libs/element-plus-icons-vue.js"],required:!1,official:!0,enabled:!0},{package:"@vtj/utils",version:"latest",library:"VtjUtils",urls:["./libs/vtj-utils.js"],required:!1,official:!0,enabled:!0},{package:"@vtj/icons",version:"latest",library:"VtjIcons",urls:["./libs/vtj-icons.css","./libs/vtj-icons.js"],required:!1,official:!0,enabled:!0},{package:"@vtj/ui",version:"latest",library:"VtjUI",urls:["./libs/vtj-ui.css","./libs/vtj-ui.js"],assetsUrl:"./libs/vtj-ui-assets.js",assetsLibrary:"VtjUIAssets",required:!1,official:!0,enabled:!0}],Aa=[{name:"designer",type:"Designer",region:"workspace",disabled:!1,order:0,trigger:{label:"设计视图",type:"tab"}},{name:"schema",type:"Schema",region:"workspace",disabled:!1,order:1,trigger:{label:"Schema",type:"tab",closable:!0}},{name:"docs",type:"Docs",region:"workspace",disabled:!1,order:2,props:{url:"https://element-plus.org/zh-CN/"},trigger:{label:"帮助中心",type:"tab",closable:!0}}],Ia=[{name:"properties",type:"Properties",region:"setting",group:"Node",trigger:{label:"属性",type:"tab"}},{name:"events",type:"Events",region:"setting",group:"Node",trigger:{label:"事件",type:"tab"}},{name:"directives",type:"Directives",region:"setting",group:"Node",trigger:{label:"指令",type:"tab"}},{name:"script",type:"BlockScript",region:"setting",group:"Block",trigger:{label:"设置",type:"tab"}},{name:"dataSources",type:"DataSources",region:"setting",group:"Block",trigger:{label:"数据源",type:"tab"}},{name:"css",type:"Css",region:"setting",group:"Block",trigger:{label:"样式",type:"tab"}},{name:"advanced",type:"Advanced",region:"setting",group:"Block",trigger:{label:"定义",type:"tab"}}],Oa=[{name:"nodePath",type:"NodePath",region:"status",props:{}}],Ra={activeApp:"pages",widgets:[].concat(Sa,$a,Da,Pa,Aa,Ia,Oa),dependencies:Ta};function Na(u,a){var e=u.slice(0);return a.forEach(function(t){var n=e.findIndex(function(r){return r.name===t.name});n>-1?e.splice(n,1,$n(e[n],t)):e.push(t)}),e}function xa(u,a){var e=Na(u.widgets||[],(a==null?void 0:a.widgets)||[]);return Object.assign({},u,a||{},{widgets:e})}var Qn=ke(function u(){_e(this,u)}),wn="Project",Tt="File",At="History",Le=new pr({prefix:"__VTJ__",type:"local"}),Zn=function(u){Mn(e,u);var a=zn(e);function e(){return _e(this,e),a.apply(this,arguments)}return ke(e,[{key:"createKey",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return r.join("_")}},{key:"getProject",value:function(){var t=G(T().mark(function r(i){var l,o;return T().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(l=i.id||xe(),o=this.createKey(wn,l),c.t0=Le.get(o),c.t0){c.next=6;break}return c.next=5,this.createProject(i);case 5:c.t0=c.sent;case 6:return c.abrupt("return",c.t0);case 7:case"end":return c.stop()}},r,this)}));function n(r){return t.apply(this,arguments)}return n}()},{key:"createProject",value:function(){var t=G(T().mark(function r(i){var l,o,s,c;return T().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return l=i.id||xe(),o=i.name||"未命名项目",s=this.createKey(wn,l),c=z(z({},i),{},{id:l,name:o}),f.abrupt("return",(Le.save(s,c),c));case 2:case"end":return f.stop()}},r,this)}));function n(r){return t.apply(this,arguments)}return n}()},{key:"updateProject",value:function(){var t=G(T().mark(function r(i){var l,o;return T().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(i.id){c.next=2;break}return c.abrupt("return",!1);case 2:return c.next=4,this.getProject(i);case 4:return l=c.sent,o=Object.assign(l,i),c.abrupt("return",!!this.createProject(o));case 7:case"end":return c.stop()}},r,this)}));function n(r){return t.apply(this,arguments)}return n}()},{key:"createFile",value:function(){var t=G(T().mark(function r(i){var l,o,s;return T().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return l=i.id||xe(),o=this.createKey(Tt,l),s=z(z({},i),{},{id:l}),v.abrupt("return",(Le.save(o,s),s));case 2:case"end":return v.stop()}},r,this)}));function n(r){return t.apply(this,arguments)}return n}()},{key:"updateFile",value:function(){var t=G(T().mark(function r(i){return T().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",i.id?!!this.createFile(i):!1);case 1:case"end":return o.stop()}},r,this)}));function n(r){return t.apply(this,arguments)}return n}()},{key:"getFile",value:function(){var t=G(T().mark(function r(i){var l;return T().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return l=this.createKey(Tt,i),s.abrupt("return",Le.get(l));case 2:case"end":return s.stop()}},r,this)}));function n(r){return t.apply(this,arguments)}return n}()},{key:"removeFile",value:function(){var t=G(T().mark(function r(i){var l,o;return T().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return l=this.createKey(Tt,i),o=this.createKey(At,i),c.abrupt("return",(Le.remove(l),Le.remove(o),!0));case 2:case"end":return c.stop()}},r,this)}));function n(r){return t.apply(this,arguments)}return n}()},{key:"saveHistory",value:function(){var t=G(T().mark(function r(i){var l,o,s;return T().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return l=i.blockId,o=i.items,s=this.createKey(At,l),v.abrupt("return",(Le.save(s,o),!0));case 2:case"end":return v.stop()}},r,this)}));function n(r){return t.apply(this,arguments)}return n}()},{key:"getHistory",value:function(){var t=G(T().mark(function r(i){var l;return T().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return l=this.createKey(At,i),s.abrupt("return",Le.get(l)||[]);case 2:case"end":return s.stop()}},r,this)}));function n(r){return t.apply(this,arguments)}return n}()}]),e}(Qn),Ue=Tn({url:"/vtj/base.json",method:"post",settings:{type:"json",validSuccess:!0,originResponse:!1,validate:function(a){var e;return((e=a.data)===null||e===void 0?void 0:e.code)===0},showError:function(a){Ie.error({message:a||"未知错误"})}}}),Fa=function(u){Mn(e,u);var a=zn(e);function e(){return _e(this,e),a.apply(this,arguments)}return ke(e,[{key:"getProject",value:function(){var t=G(T().mark(function r(i){var l;return T().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return l=i.id,s.next=3,Ue({type:"getProject",data:l}).catch(function(c){return null});case 3:if(s.t0=s.sent,s.t0){s.next=8;break}return s.next=7,this.createProject(i);case 7:s.t0=s.sent;case 8:return s.abrupt("return",s.t0);case 9:case"end":return s.stop()}},r,this)}));function n(r){return t.apply(this,arguments)}return n}()},{key:"createProject",value:function(){var t=G(T().mark(function r(i){var l,o,s;return T().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return l=i.id,o=i.name||"未命名项目",s=z(z({},i),{},{id:l,name:o}),v.next=3,Ue({type:"createProject",data:s}).catch(function(f){return null});case 3:return v.abrupt("return",s);case 4:case"end":return v.stop()}},r)}));function n(r){return t.apply(this,arguments)}return n}()},{key:"updateProject",value:function(){var t=G(T().mark(function r(i){var l,o;return T().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(i.id){c.next=2;break}return c.abrupt("return",!1);case 2:return c.next=4,this.getProject(i);case 4:return l=c.sent,o=Object.assign(l,i),c.abrupt("return",!!this.createProject(o));case 7:case"end":return c.stop()}},r,this)}));function n(r){return t.apply(this,arguments)}return n}()},{key:"createFile",value:function(){var t=G(T().mark(function r(i){var l,o;return T().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return l=i.id,o=z(z({},i),{},{id:l}),c.next=3,Ue({type:"createFile",data:o});case 3:return c.abrupt("return",o);case 4:case"end":return c.stop()}},r)}));function n(r){return t.apply(this,arguments)}return n}()},{key:"updateFile",value:function(){var t=G(T().mark(function r(i){return T().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",i.id?!!this.createFile(i):!1);case 1:case"end":return o.stop()}},r,this)}));function n(r){return t.apply(this,arguments)}return n}()},{key:"getFile",value:function(){var t=G(T().mark(function r(i){return T().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Ue({type:"getFile",data:i}).catch(function(s){return null});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},r)}));function n(r){return t.apply(this,arguments)}return n}()},{key:"removeFile",value:function(){var t=G(T().mark(function r(i){return T().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Ue({type:"removeHistory",data:i});case 2:return o.next=4,Ue({type:"removeFile",data:i});case 4:return o.abrupt("return",!0);case 5:case"end":return o.stop()}},r)}));function n(r){return t.apply(this,arguments)}return n}()},{key:"saveHistory",value:function(){var t=G(T().mark(function r(i){var l,o;return T().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return l=i.blockId,o=i.items,c.next=3,Ue({type:"saveHistory",data:{blockId:l,items:o}});case 3:return c.abrupt("return",!0);case 4:case"end":return c.stop()}},r)}));function n(r){return t.apply(this,arguments)}return n}()},{key:"getHistory",value:function(){var t=G(T().mark(function r(i){return T().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Ue({type:"getHistory",data:i}).catch(function(s){return[]});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},r)}));function n(r){return t.apply(this,arguments)}return n}()}]),e}(Qn),Ba={name:"zh-cn",el:{colorpicker:{confirm:"确定",clear:"清空"},datepicker:{now:"此刻",today:"今天",cancel:"取消",clear:"清空",confirm:"确定",selectDate:"选择日期",selectTime:"选择时间",startDate:"开始日期",startTime:"开始时间",endDate:"结束日期",endTime:"结束时间",prevYear:"前一年",nextYear:"后一年",prevMonth:"上个月",nextMonth:"下个月",year:"年",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},months:{jan:"一月",feb:"二月",mar:"三月",apr:"四月",may:"五月",jun:"六月",jul:"七月",aug:"八月",sep:"九月",oct:"十月",nov:"十一月",dec:"十二月"}},select:{loading:"加载中",noMatch:"无匹配数据",noData:"无数据",placeholder:"请选择"},cascader:{noMatch:"无匹配数据",loading:"加载中",placeholder:"请选择",noData:"暂无数据"},pagination:{goto:"前往",pagesize:"条/页",total:"共 {total} 条",pageClassifier:"页",page:"页",prev:"上一页",next:"下一页",currentPage:"第 {pager} 页",prevPages:"向前 {pager} 页",nextPages:"向后 {pager} 页",deprecationWarning:"你使用了一些已被废弃的用法，请参考 el-pagination 的官方文档"},messagebox:{title:"提示",confirm:"确定",cancel:"取消",error:"输入的数据不合法!"},upload:{deleteTip:"按 delete 键可删除",delete:"删除",preview:"查看图片",continue:"继续上传"},table:{emptyText:"暂无数据",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},tree:{emptyText:"暂无数据"},transfer:{noMatch:"无匹配数据",noData:"无数据",titles:["列表 1","列表 2"],filterPlaceholder:"请输入搜索内容",noCheckedFormat:"共 {total} 项",hasCheckedFormat:"已选 {checked}/{total} 项"},image:{error:"加载失败"},pageHeader:{title:"返回"},popconfirm:{confirmButtonText:"确定",cancelButtonText:"取消"}}};function oe(){var u=Bn(fn);return{engine:u,regions:u.skeleton.regions,config:u.config,emitter:u.emitter,project:u.project,assets:u.assets}}function La(u){var a=S(""),e=U(function(){var t=a.value.toLowerCase();return!t||!u?[]:u.filter(function(n){var r;return n.name.toLowerCase().includes(t)||((r=n.title)===null||r===void 0?void 0:r.toLowerCase().includes(t))})});return{searchKey:a,searchResult:e}}var Ua=["onClick"],Ja={key:1,class:"vtj-panel__header"},Ma={class:"vtj-panel__title"},za={key:1,class:"vtj-panel__subtitle"},Wa={key:0,class:"vtj-panel__tools"},Ha=["onClick"],Ga={key:0,class:"vtj-panel__footer"},Te=H({__name:"Panel",props:{icon:{},title:{},subtitle:{},tools:{},bodyPadding:{type:Boolean,default:!0},back:{type:Boolean}},emits:["tool-click","back"],setup:function(a,e){var t=e.expose,n=e.emit,r=a,i=S(),l=S();function o(c){n("tool-click",c)}function s(){n("back")}return t({panel:i,header:l}),function(c,v){return m(),A("div",{class:"vtj-panel",ref_key:"panel",ref:i},[W("div",{ref_key:"header",ref:l,class:"vtj-panel__header-wrapper"},[r.back?(m(),A("i",{key:0,onClick:de(s,["stop"]),class:"vtj-panel__back vtj-icon-arrow-left"},null,8,Ua)):x("",!0),c.title!==null?(m(),A("div",Ja,[me(c.$slots,"title",{},function(){return[W("div",Ma,[c.icon?(m(),A("i",{key:0,class:ce(["vtj-panel__icon",c.icon])},null,2)):x("",!0),ae(" "+re(c.title)+" ",1),c.subtitle?(m(),A("span",za,re(c.subtitle),1)):x("",!0)])]}),c.tools&&c.tools.length||c.$slots.tools?(m(),A("div",Wa,[(m(!0),A(X,null,ee(c.tools,function(f){return m(),A("i",{key:f.name,class:ce(f.icon),onClick:function(y){return o(f)}},null,10,Ha)}),128)),me(c.$slots,"tools")])):x("",!0)])):x("",!0)],512),W("div",{class:ce(["vtj-panel__body",{"is-padding":r.bodyPadding}])},[me(c.$slots,"default")],2),c.$slots.footer?(m(),A("div",Ga,[me(c.$slots,"footer")])):x("",!0)],512)}}}),ge=H({__name:"Dialog",props:{modelValue:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},width:{default:"80%"},height:{},top:{default:"40%"},cancel:{type:Boolean,default:!1},submit:{type:Boolean,default:!1},clear:{type:Boolean,default:!1},closable:{type:Boolean,default:!0}},emits:["close","update:modelValue","submit","clear"],setup:function(a,e){var t=e.expose,n=e.emit,r=a,i=Vr(),l=S(),o=U(function(){var b=at(i.tools||[]);return r.closable&&b.push({name:"close",icon:"vtj-icon-close"}),b}),s=mi(l),c=s.x,v=s.y,f=U(function(){return{width:r.width,height:r.height,left:`${c.value}px`,top:`${v.value}px`}}),p=function(h){h.name==="close"&&(n("update:modelValue",!1),n("close"))};function y(){n("update:modelValue",!1),n("close")}function g(){n("submit")}function w(){n("clear")}return t({close:y}),function(b,h){return r.modelValue?(m(),j(Sr,{key:0,to:"body"},[W("div",{class:"vtj-dialog__modal",onMousemove:h[0]||(h[0]=de(function(){},["stop"]))},null,32),E(Te,se({ref_key:"panelRef",ref:l,onMousemove:h[1]||(h[1]=de(function(){},["stop"])),class:"vtj-dialog"},b.$attrs,{tools:o.value,style:f.value,draggable:"",onToolClick:p}),Nn({default:_(function(){return[me(b.$slots,"default")]}),_:2},[b.$slots.footer||b.cancel||b.submit||b.clear?{name:"footer",fn:_(function(){return[me(b.$slots,"footer",{},function(){return[W("div",null,[me(b.$slots,"action"),b.clear?(m(),j(d(ye),{key:0,type:"warning",size:"default",class:"vtj-dialog__clear",onClick:w},{default:_(function(){return[ae(" 清除绑定 ")]}),_:1})):x("",!0)]),W("div",null,[b.cancel?(m(),j(d(ye),{key:0,onClick:y,size:"default"},{default:_(function(){return[ae(" 取消 ")]}),_:1})):x("",!0),b.submit?(m(),j(d(ye),{key:1,type:"primary",onClick:g,size:"default"},{default:_(function(){return[ae(" 确定 ")]}),_:1})):x("",!0)])]})]}),key:"0"}:void 0]),1040,["tools","style"])])):x("",!0)}}}),Ka=W("div",null,"该组件支持多个插槽，请选择放置到其中一个",-1),qa={class:"vtj-designer__slots"},Qa=["onClick"],Za=H({__name:"SlotPicker",props:{slots:{default:function(){return[]}}},emits:["pick"],setup:function(a,e){var t=e.emit,n=a,r=S(!0),i=function(o){t("pick",o)};return function(l,o){return m(),j(ge,{title:"提示",width:"600px",height:"200px",modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=function(s){return r.value=s})},{default:_(function(){return[Ka,W("div",qa,[(m(!0),A(X,null,ee(n.slots,function(s){return m(),A("div",{onClick:function(v){return i(s)},class:"vtj-designer__slot"},re(s.name),9,Qa)}),256))])]}),_:1},8,["modelValue"])}}}),Ya=function(a){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=a||{},n=t.top,r=t.height,i=t.width,l=t.left;if(r>100&&i>200)return"inner";var o,s;return s=n>30?"top":"bottom",o=e||l<300&&i<300?"left":"right",[o,s].join("-")},Xa=function(a){var e=a.rect,t=a.type,n=e.left,r=e.width,i=e.top,l=e.height,o={left:n,width:r,top:i,height:l};switch(t){case"left":o.left=0,o.width=0;break;case"right":o.left=o.left+o.width-4,o.width=0;break;case"bottom":o.top=o.top+o.height-4,o.height=0;break;case"top":o.height=0;break}return o},It=function(a,e){if(!e)return null;var t=a==="dropping"?Xa(e):e.rect,n=t.left,r=t.top,i=t.width,l=t.height,o={left:`${n}px`,top:`${r}px`,width:`${i}px`,height:`${l}px`};return z(z({},e),{},{style:o,position:Ya(e.rect,a!=="selected")})},ot;function Pe(u){if(ot||!u)return ot;Xe(function(){u.dispose()});var a=U(function(){return It("hover",u.hover.value)}),e=U(function(){return It("dropping",u.dropping.value)}),t=U(function(){return It("selected",u.selected.value)}),n=function(l){var o=l.type,s=l.node;if(!s){u.selected.value=null,u.hover.value=null;return}switch(o){case"remove":u.selected.value=null;case"copy":u.setSelected(s);break;case"move":u.setSelected(s);break;case"hover":u.setHover(s);break;case"selected":u.setSelected(s);break}},r=S("pc");return N.on(nr,function(i){r.value=i}),N.on(dn,function(i){u.setSelected(i)}),N.on(vn,function(i){u.setHover(i)}),N.on(qe,function(i){u.hover.value=null,u.selected.value=null}),N.on(rr,function(){var i=G(T().mark(function l(o){return T().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,xt(100);case 2:u.hover.value=null,o&&t.value&&u.setSelected(t.value.node);case 4:case"end":return c.stop()}},l)}));return function(l){return i.apply(this,arguments)}}()),N.on(Q,G(T().mark(function i(){return T().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,xt(100);case 2:t.value&&u.setSelected(t.value.node);case 3:case"end":return o.stop()}},i)}))),ot={designer:u,hover:a,dropping:e,selected:t,onAction:n,viewportMode:r},ot}function ei(u){return new Promise(function(a,e){var t=Fn(Za,{slots:u,onClose:function(){t.unmount(),e(void 0)},onPick:function(r){t.unmount(),a(r)}});t.mount(document.createElement("div"))})}function ti(u,a){var e,t,n,r,i,l={state:(e=u.value)===null||e===void 0?void 0:e.removeState.bind(u.value),computed:(t=u.value)===null||t===void 0?void 0:t.removeComputed.bind(u.value),methods:(n=u.value)===null||n===void 0?void 0:n.removeMethods.bind(u.value),watch:(r=u.value)===null||r===void 0?void 0:r.removeWatch.bind(u.value),lifeCycles:(i=u.value)===null||i===void 0?void 0:i.removeLifeCycles.bind(u.value)},o=S(!1),s=S(Symbol()),c=S();return{list:U(function(){var v;if(a==="watch")return(((v=u.value)===null||v===void 0?void 0:v.watch)||[]).map(function(y){return{title:y.source.value,model:y}});{var f,p=(f=u.value)===null||f===void 0?void 0:f[a];return Object.entries(p!=null?p:{}).map(function(y){var g=Oe(y,2),w=g[0],b=g[1];return{title:w,model:{name:w,value:b}}})}}),visible:o,data:c,onAdd:function(f){s.value=Symbol(),c.value=null,o.value=!0},onEdit:function(f){s.value=Symbol(),c.value=z({},f),o.value=!0},onRemove:function(){var v=G(T().mark(function p(y){var g;return T().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,we.confirm("是否确定删除?","提示",{type:"warning"}).catch(function(){return!1});case 2:if(!b.sent){b.next=5;break}g=l[a],g&&g(a==="watch"?y:y.name);case 5:case"end":return b.stop()}},p)}));function f(p){return v.apply(this,arguments)}return f}(),keyRef:s}}var ni={block:{type:Object,default:null},data:{type:Object},type:{type:String,default:"state"},title:{type:String,default:""},nameLabel:{type:String,default:""},valueLabel:{type:String,default:""},dataType:{type:String,default:"JSExpression"},defaults:{type:String,default:""}};function ri(u){var a={name:"",value:{type:u.dataType,value:u.defaults}},e={state:u.block.setState.bind(u.block),computed:u.block.setComputed.bind(u.block),methods:u.block.setMethods.bind(u.block),lifeCycles:u.block.setLifeCycles.bind(u.block)},t=S(),n=S(),r=S(),i=U(function(){return u.data?`编辑${u.title}`:`新增${u.title}`}),l={name:[{required:!0,message:`${u.title}名称为必填项`}]},o=U(function(){return!!u.data}),s=Fe(u.data||Ge(a));tn(function(){Object.assign(s,u.data||Ge(a))});var c=function(f){return u.data?!1:!!u.block[u.type][f]};return{defaultJsData:a,title:i,model:s,formRef:t,dialogRef:n,editorRef:r,rules:l,disabled:o,onSubmit:function(){var v=G(T().mark(function p(){var y,g;return T().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,t.value.validate().catch(function(){return!1});case 2:if(!b.sent){b.next=8;break}if(!c(s.name)){b.next=6;break}return Ie.warning({title:"提示",message:"已存在相同名称，请更换！"}),b.abrupt("return");case 6:y=r.value.getEditor().getValue(),g=u.block.runtimeContext,g&&Ae(z(z({},s.value),{},{value:y}),g)&&(s.value.value=y,e[u.type](s.name,s.value),n.value.close());case 8:case"end":return b.stop()}},p)}));function f(){return v.apply(this,arguments)}return f}()}}var ai={block:{type:Object,default:null},data:{type:Object}};function ii(u){var a={source:{type:"JSFunction",value:"() => { }"},immediate:!1,deep:!1,handler:{type:"JSFunction",value:"() => { }"}},e=S(),t=S(),n=S(),r=S(),i=U(function(){return u.data?"编辑 Watch":"新增 Watch"}),l=Fe(u.data||Ge(a));return tn(function(){Object.assign(l,u.data||Ge(a))}),{title:i,model:l,onSubmit:function(){var o=G(T().mark(function c(){var v,f,p;return T().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:v=u.block.runtimeContext,f=n.value.getEditor().getValue(),p=r.value.getEditor().getValue(),v&&Ae(z(z({},l.source),{},{value:f}),v)&&Ae(z(z({},l.handler),{},{value:p}),v)&&(l.source.value=f,l.handler.value=p,u.block.setWatch(z({},l)),t.value.close());case 2:case"end":return g.stop()}},c)}));function s(){return o.apply(this,arguments)}return s}(),dialogRef:t,sourceRef:n,handlerRef:r,formRef:e}}function ui(u,a){var e=Pe(),t=e.selected,n=U(function(){var l;return(l=t.value)===null||l===void 0?void 0:l.node}),r=U(function(){var l,o=[];if(!u.value)return o;var s=u.value.runtimeContext,c=s==null?void 0:s.__context_refs[(l=n.value)===null||l===void 0?void 0:l.id],v=u.value.runtimeContext===c?[]:Object.keys((c==null?void 0:c.context)||{}).filter(function(k){return!["context","ref"].includes(k)}).map(function(k){return`this.context.${k}`});v.length&&o.push({title:"上下文",items:v});var f=u.value.inject.map(function(k){return`this.${k.name}`});f.length&&o.push({title:"注入",items:f});var p=u.value.props.map(function(k){return typeof k=="string"?`this.$props.${k}`:`this.$props.${k.name}`});p.length&&o.push({title:"属性",items:p});var y=Object.keys(u.value.state).map(function(k){return`this.state.${k}`});y.length&&o.push({title:"状态",items:y});var g=Object.keys(u.value.computed).map(function(k){return`this.${k}.value`});g.length&&o.push({title:"计算属性",items:g});var w=Object.keys(u.value.methods).map(function(k){return`this.${k}`});w.length&&o.push({title:"方法",items:w});var b=Object.keys(u.value.dataSources).map(function(k){return`this.${k}`});b.length&&o.push({title:"数据源",items:b});var h=Object.keys((s==null?void 0:s.$refs)||{}).map(function(k){return`this.$refs.${k}`});return h.length&&o.push({title:"refs",items:h}),o}),i=U(function(){if(!a.value)return r.value;var l=a.value.toLowerCase(),o=[];return r.value.forEach(function(s){var c=s.items.filter(function(v){return v.toLowerCase().includes(l)});c.length&&o.push({title:s.title,items:c})}),o});return{options:r,searchResult:i}}function li(u,a){var e=[{name:"InputSetter",label:"文本"},{name:"ExpressionSetter",label:"表达式"}],t=S();pe(u,function(){var o=G(T().mark(function s(c){return T().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!c){f.next=9;break}return f.next=3,a.getBlockDescription(c.from);case 3:if(f.t0=f.sent,f.t0){f.next=6;break}f.t0=void 0;case 6:t.value=f.t0,f.next=10;break;case 9:t.value=void 0;case 10:case"end":return f.stop()}},s)}));return function(s){return o.apply(this,arguments)}}(),{immediate:!0});var n=U(function(){return!u.value||!Pt(u.value)?[]:[{name:"key",setters:e,value:u.value.getPropValue("key")},{name:"ref",setters:e,value:u.value.getPropValue("ref")},{name:"class",label:"class",setters:e,value:u.value.getPropValue("class")},{name:"style",label:"样式",setters:[{name:"JSONSetter",label:"JSON"},{name:"ExpressionSetter",label:"表达式"}],value:u.value.getPropValue("style")},{name:"children",label:"文本",title:"如设置组件文本，将清空子组件",setters:e,value:Array.isArray(u.value.children)?"":u.value.children}]}),r=U(function(){if(!u.value||!Pt(u.value))return[];var o=t.value||a.componentMap[u.value.name]||a.elementsMap[u.value.name];return o?(o.props||[]).map(function(s){var c;return z(z({},s),{},{value:(c=u.value.getPropValue(s.name))!==null&&c!==void 0?c:s.defaultValue})}):[]}),i=function(s){return n.value.some(function(c){return c.name===s})||r.value.some(function(c){return c.name===s})},l=U(function(){return!u.value||!Pt(u.value)?[]:Object.keys(u.value.props).filter(function(o){return!i(o)}).map(function(o){return{name:o,setters:"InputSetter",value:u.value.getPropValue(o)}})});return{commonProps:n,componentProps:r,onChange:function(s,c){s==="children"?u.value.setChildren(c):u.value.setProp(s,c)},customProps:l,addCustom:function(s){s&&u.value.setProp(s,"")},isExist:i,removeProp:function(s){u.value.removeProp(s)},blockDescription:t}}function oi(u,a){var e=S();pe(u,function(){var i=G(T().mark(function l(o){return T().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!o){c.next=9;break}return c.next=3,a.getBlockDescription(o.from);case 3:if(c.t0=c.sent,c.t0){c.next=6;break}c.t0=void 0;case 6:e.value=c.t0,c.next=10;break;case 9:e.value=void 0;case 10:case"end":return c.stop()}},l)}));return function(l){return i.apply(this,arguments)}}(),{immediate:!0});var t=U(function(){var i;if(fe(u.value))return[];var l=((i=u.value)===null||i===void 0?void 0:i.events)||{};return va.map(function(o){return{name:o,event:l[o]}})}),n=U(function(){var i;if(fe(u.value))return[];var l=((i=u.value)===null||i===void 0?void 0:i.events)||{};return fa.map(function(o){return{name:o,event:l[o]}})}),r=U(function(){var i,l,o;if(fe(u.value))return[];var s=((i=u.value)===null||i===void 0?void 0:i.events)||{};return(((l=e.value)===null||l===void 0?void 0:l.events)||((o=a.componentMap[u.value.name])===null||o===void 0?void 0:o.events)||[]).map(function(c){var v=typeof c=="string"?c:c.name;return{name:v,event:s[v]}})});return{mouseEventList:t,keyboardEventList:n,componentEventList:r}}var Ot=function(){function u(a,e,t){_e(this,u),P(this,"isUnset",!1),this.name=a,this.value=e,this.defaultValue=t,this.setValue(e)}return ke(u,[{key:"setValue",value:function(e){this.value=e,this.isUnset=this.value===this.defaultValue}},{key:"getValue",value:function(){var e;return(e=this.value)!==null&&e!==void 0?e:this.defaultValue}}],[{key:"toDsl",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.entries(e).reduce(function(t,n){var r=Oe(n,2),i=r[0],l=r[1];return l.isUnset||(t[i]=l.getValue()),t},{})}},{key:"parse",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.entries(e).reduce(function(t,n){var r=Oe(n,2),i=r[0],l=r[1];return t[i]=new u(i,l),t},{})}}]),u}(),gt=function(){function u(a){_e(this,u),P(this,"id",void 0),P(this,"name",""),P(this,"arg",void 0),P(this,"modifiers",void 0),P(this,"value",void 0),P(this,"iterator",void 0),this.id=a.id||xe(),this.update(a)}return ke(u,[{key:"update",value:function(e){var t=e.name,n=e.arg,r=e.modifiers,i=e.value,l=e.iterator;this.name=t,this.arg=n,this.modifiers=r,this.value=i,this.iterator=l}}],[{key:"parse",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return e.map(function(t){return new u(t)})}},{key:"toDsl",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return e.map(function(t){var n=t.name,r=t.arg,i=t.modifiers,l=t.value,o=t.iterator,s=t.id;return{id:s,name:n,arg:r,modifiers:i,value:l,iterator:o}})}}]),u}(),Rt=function(){function u(a,e){_e(this,u),P(this,"handler",void 0),P(this,"modifiers",{}),this.name=a;var t=e.handler;this.handler=t,this.update(e)}return ke(u,[{key:"update",value:function(e){var t=e.handler,n=e.modifiers,r=n===void 0?{}:n;this.handler=t,this.modifiers=r}}],[{key:"toDsl",value:function(e){return Object.entries(e).reduce(function(t,n){var r=Oe(n,2),i=r[0],l=r[1],o=l.handler,s=l.modifiers;return t[i]={handler:o,modifiers:s},t},{})}},{key:"parse",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.entries(e).reduce(function(t,n){var r=Oe(n,2),i=r[0],l=r[1];return t[i]=new u(i,l),t},{})}}]),u}(),yt=function(){function u(a){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;_e(this,u),P(this,"__VTJ_NODE__",!0),P(this,"id",void 0),P(this,"name",void 0),P(this,"from",void 0),P(this,"invisible",!1),P(this,"props",{}),P(this,"children",""),P(this,"slot",void 0),P(this,"directives",[]),P(this,"events",{}),P(this,"disposed",!1),P(this,"root",null),P(this,"lock",!1),this.schema=a,this.parent=e;var t=a.id,n=a.name,r=a.from,i=r===void 0?"":r;this.id=t||xe(),this.name=n,this.from=i,e&&(this.root=fe(e)?e:e.root),this.update(a,!0),u.nodes[this.id]=this}return ke(u,[{key:"update",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;Object.assign(this.schema,e);var n=e.children,r=e.slot,i=e.props,l=e.directives,o=e.events;this.invisible=!!e.invisible,this.setChildren(n,t),this.setSlot(r,t),this.props=Ot.parse(i),this.directives=gt.parse(l),this.events=Rt.parse(o)}},{key:"dispose",value:function(){var e=this.children,t=this.disposed;t||(Array.isArray(e)&&e.forEach(function(n){return n.dispose()}),this.parent&&this.parent.removeChild(this),this.parent=null,this.root=null,this.disposed=!0,delete u.nodes[this.id])}},{key:"toDsl",value:function(){var e=this.id,t=this.name,n=this.from,r=this.invisible,i=this.slot,l=this.children,o=this.props,s=this.directives,c=this.events,v=Array.isArray(l)?l.filter(function(f){return!f.invisible}).map(function(f){return f.toDsl()}):l;return z(z({},this.schema),{},{id:e,name:t,from:n,invisible:r,slot:i,children:v,props:Ot.toDsl(o),directives:gt.toDsl(s),events:Rt.toDsl(c)})}},{key:"setChildren",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=this.disposed;r||(Array.isArray(t)?this.children=t.map(function(i){return new u(i,e)}):this.children=t,n||N.emit(Q,this))}},{key:"setSlot",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.slot=typeof e=="string"?{name:e,params:[]}:e,t||N.emit(Q,this)}},{key:"setProp",value:function(e,t){var n=this.props[e];n?n.setValue(t):this.props[e]=new Ot(e,t),N.emit(Q,this)}},{key:"removeProp",value:function(e){delete this.props[e],N.emit(Q,this)}},{key:"getPropValue",value:function(e){var t=this.props[e];if(t)return t.getValue()}},{key:"setEvent",value:function(e,t){var n=this.events[e];n?n.update(t):this.events[e]=new Rt(e,t),N.emit(Q,this)}},{key:"removeEvent",value:function(e){delete this.events[e],N.emit(Q,this)}},{key:"setDirective",value:function(e){var t=this.directives.findIndex(function(n){return n.id===e.id});t>=0?this.directives.splice(t,1,e):this.directives.push(e),N.emit(Q,this)}},{key:"removeDirective",value:function(e){var t=this.directives.findIndex(function(n){return n.id===e.id});t>=0&&this.directives.splice(t,1),N.emit(Q,this)}},{key:"appendChild",value:function(e){var t=this.children,n=this.disposed;n||(e.parent=this,e.root=this.root,Array.isArray(t)?t.push(e):this.children=[e],N.emit(Q,this))}},{key:"insertChild",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=this.children,r=this.disposed;r||(e.parent=this,e.root=this.root,Array.isArray(n)?n.splice(t,0,e):this.children=[e],N.emit(Q,this))}},{key:"removeChild",value:function(e){var t=this.children,n=this.disposed;if(!(n||!Array.isArray(t))){var r=t.findIndex(function(i){return i===e});e.parent=null,e.root=null,t.splice(r,1),N.emit(Q,this)}}},{key:"insertAfter",value:function(e){if(this.parent){var t=this.parent.children;if(Array.isArray(t)){e.parent=this.parent,e.root=this.root;var n=t.indexOf(this);t.splice(n+1,0,e),N.emit(Q,this.parent)}}}},{key:"insertBefore",value:function(e){if(this.parent){var t=this.parent.children;if(Array.isArray(t)){e.parent=this.parent,e.root=this.root;var n=t.indexOf(this);t.splice(n,0,e),N.emit(Q,this.parent)}}}},{key:"moveNext",value:function(){var e=this.parent;if(e){var t=e.children;if(Array.isArray(t)){var n=t.indexOf(this);n>-1&&n<t.length-1&&(t.splice(n,1),t.splice(n+1,0,this),N.emit(Q,e))}}}},{key:"movePrev",value:function(){var e=this.parent;if(e){var t=e.children;if(Array.isArray(t)){var n=t.indexOf(this);n>0&&(t.splice(n,1),t.splice(n-1,0,this),N.emit(Q,e))}}}},{key:"copy",value:function(){if(this.parent){var e=this.toDsl();delete e.id;var t=new u(e);return this.insertAfter(t),t}}}]),u}();P(yt,"nodes",{});var En=["name","title","inject","state","lifeCycles","methods","computed","watch","css","props","emits","slots","transform","dataSources"],Nt=function(){function u(a){_e(this,u),P(this,"__VTJ_BLOCK__",!0),P(this,"id",void 0),P(this,"name",""),P(this,"title",""),P(this,"inject",[]),P(this,"state",{}),P(this,"lifeCycles",{}),P(this,"methods",{}),P(this,"computed",{}),P(this,"watch",[]),P(this,"css",""),P(this,"props",[]),P(this,"emits",[]),P(this,"slots",[]),P(this,"transform",{}),P(this,"dataSources",{}),P(this,"children",[]),P(this,"lock",!1),P(this,"invisible",!1),P(this,"disposed",!1),P(this,"parent",null),P(this,"root",null),P(this,"runtimeContext",void 0);var e=a.id;this.id=e||xe(),this.init(a)}return ke(u,[{key:"init",value:function(e){for(var t=this,n=0,r=En;n<r.length;n++){var i=r[n],l=e[i];l&&(this[i]=l)}var o=e.children,s=o===void 0?[]:o;this.children=s.map(function(c){return new yt(c,t)})}},{key:"dispose",value:function(){this.children.map(function(e){return e.dispose()}),this.runtimeContext=void 0,this.disposed=!0}},{key:"toDsl",value:function(){var e=this,t=this.__VTJ_BLOCK__,n=this.id,r=this.children;return z(z({},En.reduce(function(i,l){return i[l]=e[l],i},{})),{},{__VTJ_BLOCK__:t,id:n,children:r.map(function(i){return i.toDsl()})})}},{key:"appendChild",value:function(e,t,n){t?n==="left"||n==="top"?t.insertBefore(e):n==="right"||n==="bottom"?t.insertAfter(e):t.appendChild(e):(e.parent=this,e.root=this,this.children.push(e),N.emit(Q,this))}},{key:"removeChild",value:function(e){if(e.parent===this){var t=this.children.findIndex(function(n){return n.id===e.id||n===e});t>-1&&(e.parent=null,e.root=null,this.children.splice(t,1),N.emit(Q,this))}else e.parent&&e.parent.removeChild(e)}},{key:"allowDrop",value:function(){var a=G(T().mark(function t(n,r,i){var l,o,s,c,v,f,p,y,g;return T().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!fe(r)){b.next=2;break}return b.abrupt("return",!0);case 2:return l=i.componentMap,b.next=5,i.getBlockDescription(r.from);case 5:if(b.t0=b.sent,b.t0){b.next=8;break}b.t0=l[r.name];case 8:if(o=b.t0,!(!o||!n)){b.next=11;break}return b.abrupt("return",!0);case 11:return s=n.parentIncludes,c=s===void 0?!0:s,v=n.name,f=o.childIncludes,p=f===void 0?!0:f,y=c===!0||Array.isArray(c)&&c.includes(r.name),g=p===!0||Array.isArray(p)&&p.includes(v),b.abrupt("return",y&&g);case 13:case"end":return b.stop()}},t)}));function e(t,n,r){return a.apply(this,arguments)}return e}()},{key:"move",value:function(e,t,n){this.removeChild(e),fe(t)?t.appendChild(e):this.appendChild(e,t,n)}},{key:"setState",value:function(e,t){this.state[e]=t,N.emit(Q,this)}},{key:"removeState",value:function(e){delete this.state[e],N.emit(Q,this)}},{key:"setComputed",value:function(e,t){this.computed[e]=t,N.emit(Q,this)}},{key:"removeComputed",value:function(e){delete this.computed[e],N.emit(Q,this)}},{key:"setMethods",value:function(e,t){this.methods[e]=t,N.emit(Q,this)}},{key:"removeMethods",value:function(e){delete this.methods[e],N.emit(Q,this)}},{key:"setLifeCycles",value:function(e,t){this.lifeCycles[e]=t,N.emit(Q,this)}},{key:"removeLifeCycles",value:function(e){delete this.lifeCycles[e],N.emit(Q,this)}},{key:"setWatch",value:function(e){e.id=e.id||xe();var t=this.watch.findIndex(function(n){return n.id&&n.id===e.id||n===e});t>-1?this.watch.splice(t,1,e):this.watch.push(e),N.emit(Q,this)}},{key:"removeWatch",value:function(e){var t=this.watch.findIndex(function(n){return n.id&&n.id===e.id||n===e});t>-1&&(this.watch.splice(t,1),N.emit(Q,this))}},{key:"setCss",value:function(e){this.css=e,N.emit(Q,this)}},{key:"setProp",value:function(e){var t=this.props.findIndex(function(n){return typeof n=="string"?n===e.name:n.name===e.name});t>-1?this.props.splice(t,1,e):this.props.push(e),N.emit(Q,this)}},{key:"removeProp",value:function(e){var t=this.props.findIndex(function(n){return typeof n=="string"?n===e.name:n.name===e.name});t>-1&&(this.props.splice(t,1),N.emit(Q,this))}},{key:"setEmit",value:function(e){var t=this.emits.findIndex(function(n){return n===e});t>-1?this.emits.splice(t,1,e):this.emits.push(e),N.emit(Q,this)}},{key:"removeEmit",value:function(e){var t=this.emits.findIndex(function(n){return n===e});t>-1&&(this.emits.splice(t,1),N.emit(Q,this))}},{key:"setSlot",value:function(e){var t=this.slots.findIndex(function(n){return n===e});t>-1?this.slots.splice(t,1,e):this.slots.push(e),N.emit(Q,this)}},{key:"removeSlot",value:function(e){var t=this.slots.findIndex(function(n){return n===e});t>-1&&(this.slots.splice(t,1),N.emit(Q,this))}},{key:"setInject",value:function(e){var t=this.inject.findIndex(function(n){return n.name===e.name});t>-1?this.inject.splice(t,1,e):this.inject.push(e),N.emit(Q,this)}},{key:"removeInject",value:function(e){var t=this.inject.findIndex(function(n){return n.name===e.name});t>-1&&(this.inject.splice(t,1),N.emit(Q,this))}},{key:"setDataSource",value:function(e){this.dataSources[e.name]=e,N.emit(Q,this)}},{key:"removeDataSource",value:function(e){delete this.dataSources[e],N.emit(Q,this)}}]),u}(),si=function(){function u(a){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];_e(this,u),P(this,"__VTJ_PROJECT__",!0),P(this,"id",""),P(this,"name",""),P(this,"description",""),P(this,"homepageId",""),P(this,"dependencies",S([])),P(this,"pages",S([])),P(this,"blocks",S([])),P(this,"apis",S([])),P(this,"current",S(null)),this.source=e,this.load(a)}return ke(u,[{key:"load",value:function(e){var t=e||{},n=t.id,r=t.description,i=r===void 0?"":r,l=t.name,o=l===void 0?"":l,s=t.homepageId,c=s===void 0?"":s,v=t.dependencies,f=v===void 0?[]:v,p=t.pages,y=p===void 0?[]:p,g=t.blocks,w=g===void 0?[]:g,b=t.apis,h=b===void 0?[]:b;this.id=n||xe(),this.description=i,this.name=o,this.homepageId=c,this.dependencies.value=this.mergeDeps(f,this.source),this.pages.value=y,this.blocks.value=w,this.apis.value=h}},{key:"update",value:function(e){var t=this.toDsl();Object.assign(t,e),this.load(t),N.emit(De,t)}},{key:"activeFile",value:function(e){this.current.value=e?new Nt(e):null,N.emit(so,this.current.value)}},{key:"mergeDeps",value:function(e,t){var n=e.filter(function(i){return!!i.official}),r=e.filter(function(i){return!i.official});return t.map(function(i){var l=n.find(function(o){return o.package===i.package});return Object.assign(i,l||{})}).concat(r)}},{key:"setDeps",value:function(e){var t=this.dependencies.value,n=t.findIndex(function(r){return r.package===e.package});n>-1?t.splice(n,1,z(z({},t[n]),e)):t.push(wt(e)),N.emit(De,this.toDsl())}},{key:"removeDeps",value:function(e){var t=this.dependencies.value,n=t.findIndex(function(r){return r.package===e.package});n>-1&&(t.splice(n,1),N.emit(De,this.toDsl()))}},{key:"toDsl",value:function(){var e=this.id,t=this.description,n=this.name,r=this.homepageId,i=this.dependencies,l=this.pages,o=this.blocks,s=this.apis,c=this.__VTJ_PROJECT__;return{__VTJ_PROJECT__:c,__VTJ_VERSION__:Hn,__VTJ_DATE__:Date.now().toString(),id:e,description:t,name:n,homepageId:r,dependencies:d(i),pages:d(l),blocks:d(o),apis:d(s)}}},{key:"findPage",value:function(e){var t=function n(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],l=Ne(i),o;try{for(l.s();!(o=l.n()).done;){var s=o.value;if(s.id===r)return s;if(s.children&&s.children.length){var c=n(r,s.children);if(c)return c}}}catch(v){l.e(v)}finally{l.f()}};return t(e,this.pages.value)}},{key:"getPages",value:function(){return Va(this.pages.value)}},{key:"getHomePage",value:function(){return this.getPages().find(function(e){return!!e.home})}},{key:"clearHomePage",value:function(){this.getPages().forEach(function(e){e.home=!1})}},{key:"addPage",value:function(e,t){var n=e.name,r=e.title,i=e.isDir,l=e.home,o=new Nt({name:n,title:r}),s=o.toDsl();if(e.id=s.id,l&&(this.clearHomePage(),e.home=!0),i&&(e.children=[]),t){var c=this.findPage(t);c&&(c.children?c.children.push(e):c.children=[e])}else this.pages.value.push(e);return i||N.emit(ft,s),N.emit(De,this.toDsl()),o}},{key:"updatePage",value:function(e,t){if(e.id){var n=this.findPage(e.id);n&&(Object.assign(n,e),n.home&&(this.clearHomePage(),n.home=!0),t&&(t.name=n.name,t.title=n.title,N.emit(Ht,t)),N.emit(De,this.toDsl()))}}},{key:"copyPage",value:function(e,t,n){var r,i=xe(),l=z(z({},e),{},{id:i}),o=z(z({},t),{},{id:i}),s=n?((r=this.findPage(n))===null||r===void 0?void 0:r.children)||[]:this.pages.value,c=s.findIndex(function(v){return v.id===e.id});s.splice(c,0,l),N.emit(ft,o),N.emit(De,this.toDsl())}},{key:"removePage",value:function(e){var t,n=function r(i,l){var o=l.findIndex(function(f){return f.id===i});if(o>=0){l.splice(o,1);return}var s=Ne(l),c;try{for(s.s();!(c=s.n()).done;){var v=c.value;if(v.children&&v.children.length)return r(i,v.children)}}catch(f){s.e(f)}finally{s.f()}};n(e,this.pages.value),((t=this.current.value)===null||t===void 0?void 0:t.id)===e&&(this.current.value=null),N.emit(Gt,e),N.emit(De,this.toDsl())}},{key:"addBlock",value:function(e){var t=new Nt(e),n=t.toDsl(),r=n.id,i=n.name,l=n.title,o={id:r,name:i,title:l};return this.blocks.value.push(o),N.emit(ft,n),N.emit(De,this.toDsl()),t}},{key:"updateBlock",value:function(e,t){var n=e.id;Object.assign(t,e);var r=this.blocks.value,i=r.findIndex(function(l){return l.id===n});i>-1&&(r.splice(i,1,e),N.emit(Ht,t),N.emit(De,this.toDsl()))}},{key:"removeBlock",value:function(e){var t,n=this.blocks.value,r=n.findIndex(function(i){return i.id===e});r>-1&&(((t=this.current.value)===null||t===void 0?void 0:t.id)===e&&this.activeFile(null),n.splice(r,1),N.emit(Gt,e),N.emit(De,this.toDsl()))}},{key:"findBlock",value:function(e){return this.blocks.value.find(function(t){return t.id===e})}},{key:"existBlockName",value:function(e){return this.blocks.value.some(function(t){return t.name===e.name&&t.id!==e.id})}},{key:"getFile",value:function(e){var t=this.findBlock(e);return t||this.findPage(e)}},{key:"isPage",value:function(e){return typeof(e==null?void 0:e.isDir)=="boolean"}},{key:"setApi",value:function(e){var t=this.apis.value,n=t.findIndex(function(r){return r.name===e.name});n>-1?t.splice(n,1,e):t.push(e),N.emit(De,this.toDsl())}},{key:"removeApi",value:function(e){var t=this.apis.value,n=t.findIndex(function(r){return r.name===e});n>-1&&(t.splice(n,1),N.emit(De,this.toDsl()))}}]),u}(),ci=function(){function u(a){_e(this,u),P(this,"index",-1),P(this,"list",[]),P(this,"max",void 0),P(this,"blockId",void 0);var e=a.history,t=a.max,n=t===void 0?50:t;this.blockId=e.blockId,this.max=n,this.refresh(e.items||[])}return ke(u,[{key:"refresh",value:function(e){this.index=-1,this.list=xn(e)}},{key:"go",value:function(){var e=this.index,t=this.list;if(!(e<0)){--this.index;var n=t[this.index];n&&(N.emit(vo,n),N.emit(Ze,n))}}},{key:"back",value:function(){var e=this.index,t=this.list;if(!(e>=t.length-1)){e<0&&(this.index=0),++this.index;var n=t[this.index];n&&(N.emit(fo,n),N.emit(Ze,n))}}},{key:"push",value:function(e){var t=this.max,n=this.list,r=this.blockId,i={id:xe(),title:new Date().toLocaleString(),block:Ge(e)};n.unshift(i),n.length>t&&(this.list=n.splice(t)),this.index=-1,N.emit(po,{blockId:r,item:i}),N.emit(bt,this.toDsl())}},{key:"load",value:function(e){var t=this.list.findIndex(function(n){return n.id===e});t>=0&&(this.index=t,N.emit(Ze,this.list[t]))}},{key:"remove",value:function(e){var t=this.list.findIndex(function(l){return l.id===e}),n=this.list,r=this.blockId;if(t>-1){var i=n.splice(t,1);t===this.index?this.index=-1:this.index>=n.length&&(this.index=n.length-1),N.emit(mo,{blockId:r,item:i[0]}),N.emit(bt,this.toDsl())}}},{key:"toDsl",value:function(){var e=this.blockId,t=this.list;return{blockId:e,items:wt(t)}}}]),u}(),di=function(a,e){return new gt({name:a,value:void 0,iterator:e})},vi=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"modelValue";return new gt({name:"vModel",value:void 0,arg:a})};function fi(u){if(!u)return[];var a=u.props,e=a===void 0?[]:a,t=u.events,n=t===void 0?[]:t;if(e.length&&n.length){var r=n.filter(function(i){return(typeof i=="string"?i:i.name).startsWith("update:")}).map(function(i){return i=typeof i=="string"?i:i.name});return r.length?e.filter(function(i){return r.some(function(l){return l.includes(i.name)})}):[]}return[]}function pi(u,a){var e=function(f){return U(function(){return u.value&&(u.value.directives||[]).find(function(p){return p.name===f})||di(f)})},t=U(function(){return fi(a.value)}),n=function(){return U(function(){return t.value.map(function(f){return(u.value.directives||[]).find(function(p){return p.name==="vModel"&&p.arg==f.name})||vi(f.name)})})},r=e("vIf"),i=e("vShow"),l=e("vBind"),o=e("vFor"),s=n(),c={vIf:r,vShow:i,vBind:l,vFor:o};return{directives:c,vIf:r,vShow:i,vBind:l,vFor:o,vModels:s,onValueChange:function(f,p){var y=c[f];p?(y.value.value=p,u.value.setDirective(y.value)):(y.value.value=void 0,u.value.removeDirective(y.value))},onForChange:function(f,p){if(f==="value"){p?(o.value.value=p,u.value.setDirective(o.value)):u.value.removeDirective(o.value);return}(f==="item"||f==="index")&&(o.value.iterator=z(z({},o.value.iterator),{},P({},f,p||void 0)),u.value.setDirective(o.value))},onModelChange:function(f,p){var y=parseInt(f),g=s.value[y];g&&(p?(g.value=p,u.value.setDirective(g)):(g.value=void 0,u.value.removeDirective(g)))}}}function mi(u){var a=S(),e=S(),t=S(),n=S(0),r=S(0),i=function(){var s=window,c=s.innerWidth,v=s.innerHeight,f=a.value;f.left,f.top;var p=f.width,y=p===void 0?0:p,g=f.height,w=g===void 0?0:g,b=Math.max((c-y)/2,0),h=Math.max((v-w)/2,0);return{x:b,y:h}},l=function(s){var c=window,v=c.innerWidth,f=c.innerHeight,p=e.value.getBoundingClientRect(),y=p.width,g=y===void 0?0:y,w=p.height,b=w===void 0?0:w;n.value=Math.max(0,s.x),s.x>v-g&&(n.value=Math.min(s.x,v-g)),r.value=Math.max(0,s.y),s.y>f-b&&(r.value=Math.min(s.y,f-b))};return pe(u,function(o){var s=o==null?void 0:o.panel;if(s){e.value=s,t.value=o==null?void 0:o.header,a.value=s.getBoundingClientRect();var c=i();n.value=c.x,r.value=c.y,wr(e,{initialValue:i(),handle:t,onMove:function(f){l(f)}})}}),{x:n,y:r}}var ze=H({name:"WidgetRenderer",props:{name:String,type:[String,Object],props:Object,disabled:Boolean,extendProps:Object,order:Number,visible:{type:Boolean,default:!0}},setup:function(a,e){e.slots;var t=Bn(fn),n=S(a.visible),r=U(function(){return a.type&&t!==null&&t!==void 0&&t.skeleton?t==null?void 0:t.skeleton.getComponent(a.type):null});return pe(function(){return a.visible},function(i){i&&(n.value=i)},{immediate:!0}),_t(function(){var i=t==null?void 0:t.skeleton;if(a.name&&i){var l=Tr();i.widgetInstances[a.name]=l==null?void 0:l.refs[a.name]}}),Xe(function(){var i=t==null?void 0:t.skeleton;a.name&&i&&delete i.widgetInstances[a.name]}),function(){return r.value&&!a.disabled&&n.value?Ln(r.value,z({ref:a.name,name:a.name,extendProps:a.extendProps,order:a.order,style:{display:a.visible?"":"none"}},a.props)):null}}}),jn=H({__name:"InputSetter",setup:function(a){return function(e,t){return m(),j(d(ue),se({clearable:""},e.$attrs),null,16)}}}),Cn=H({__name:"SelectSetter",props:{options:{default:function(){return[]}}},setup:function(a){var e=a;return function(t,n){return m(),j(d(Et),mt(en(t.$attrs)),{default:_(function(){return[(m(!0),A(X,null,ee(e.options,function(r){return m(),j(d(jt),se({key:r.label},r),null,16)}),128))]}),_:1},16)}}}),hi="{{",gi="}}",yi=H({__name:"ExpressionSetter",props:{modelValue:{default:function(){return{type:"JSExpression",value:""}}}},emits:["change"],setup:function(a,e){var t=e.emit,n=a,r=oe(),i=r.project,l=function(v){var f,p=(f=i.current.value)===null||f===void 0?void 0:f.runtimeContext;return Ae(v,p)},o=S(n.modelValue.value);pe(function(){return n.modelValue.value},function(c){o.value=c});var s=function(v){var f={type:"JSExpression",value:v};l(f)&&t("change",f)};return function(c,v){return m(),j(d(ue),{class:"vtj-expression-setter",modelValue:o.value,"onUpdate:modelValue":v[0]||(v[0]=function(f){return o.value=f}),onChange:s},{prefix:_(function(){return[ae(re(hi))]}),suffix:_(function(){return[ae(re(gi))]}),_:1},8,["modelValue"])}}}),Ce=$r(function(){return fr(()=>import("./Editor-c713e86f-99672e3d.js"),["./Editor-c713e86f-99672e3d.js","./monaco-editor-62cd2e70.js","./monaco-editor-bca7b021.css","./@vue-49a84096.js"],import.meta.url)}),bi=W("i",{class:"vtj-icon-more"},null,-1),ki={key:0,class:"vtj-tabs__check"},cn=H({__name:"Tabs",props:{items:{default:function(){return[]}},modelValue:{},more:{},stretch:{type:Boolean},checkable:{type:Boolean}},emits:["update:modelValue","more","tab-remove"],setup:function(a,e){var t,n,r=e.emit,i=a,l=S((t=i.modelValue||((n=i.items[0])===null||n===void 0?void 0:n.name))!==null&&t!==void 0?t:"");pe(l,function(){r("update:modelValue",l.value)}),pe(function(){return i.modelValue},function(c){l.value=c});var o=function(v){r("more",v)},s=function(v){r("tab-remove",v)};return function(c,v){return m(),j(Te,se({class:"vtj-tabs"},c.$attrs),{title:_(function(){return[E(d(Mt),{type:"card",modelValue:l.value,"onUpdate:modelValue":v[0]||(v[0]=function(f){return l.value=f}),onTabRemove:s,stretch:i.stretch},{default:_(function(){return[(m(!0),A(X,null,ee(i.items,function(f){return m(),j(d(Jt),{key:f.name,label:f.label,name:f.name,closable:f.closable,lazy:""},null,8,["label","name","closable"])}),128))]}),_:1},8,["modelValue","stretch"])]}),tools:_(function(){return[i.more?(m(),j(d(nn),{key:0,"hide-on-click":!1,size:"small",placement:"bottom-end",onCommand:o},{dropdown:_(function(){return[E(d(an),null,{default:_(function(){return[(m(!0),A(X,null,ee(i.more,function(f){return m(),j(d(rn),{key:f.name,command:f},{default:_(function(){return[i.checkable?(m(),A("span",ki,[W("i",{class:ce(`${f.checked?"vtj-icon-check":"none"}`)},null,2)])):x("",!0),ae(" "+re(f.label),1)]}),_:2},1032,["command"])}),128))]}),_:1})]}),default:_(function(){return[bi]}),_:1})):x("",!0)]}),default:_(function(){return[me(c.$slots,"default")]}),_:3},16)}}}),Vn=H({__name:"Icon",props:{icon:{},label:{},active:{type:Boolean,default:!1},open:{type:Boolean,default:!1}},emits:["click"],setup:function(a,e){var t=e.emit,n=a,r=U(function(){return{"is-active":n.active,"is-open":n.open}}),i=function(){t("click")};return function(l,o){return m(),j(d(Jn),{effect:"dark",placement:"right",content:l.label,"show-after":600},{default:_(function(){return[W("div",{class:ce(["vtj-icon",r.value]),onClick:i},[W("i",{class:ce(l.icon)},null,2)],2)]}),_:1},8,["content"])}}}),be=H({__name:"SubPanel",setup:function(a){return function(e,t){return m(),j(Te,se({class:"vtj-sub-panel"},e.$attrs),Nn({default:_(function(){return[me(e.$slots,"default")]}),_:2},[e.$slots.footer?{name:"footer",fn:_(function(){return[me(e.$slots,"footer")]}),key:"0"}:void 0]),1040)}}}),_i=["onClick"],wi={class:"vtj-data-item__title"},Ei={class:"vtj-data-item__action"},ji=["onClick"],Ci=["onClick"],Vi={key:0,class:"vtj-data-item__body"},Ee=H({__name:"DataItem",props:{title:{default:""},content:{default:""},editable:{type:Boolean,default:!1},removable:{type:Boolean,default:!1},active:{type:Boolean,default:!1},collapsible:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},collapsed:{type:Boolean,default:!1},background:{type:Boolean,default:!0}},emits:["click","remove","edit"],setup:function(a,e){var t=e.emit,n=a,r=S(n.collapsed),i=function(){t("edit")},l=function(){t("remove")},o=function(){n.clickable?t("click"):s()},s=function(){n.collapsible&&(r.value=!r.value)};return function(c,v){return m(),A("div",{class:ce(["vtj-data-item",{"is-current":n.active}])},[W("div",{class:ce(["vtj-data-item__header",{"is-pointer":n.clickable||n.collapsible,"is-bg":n.background}]),onClick:o},[n.collapsible?(m(),A("i",{key:0,class:ce(["vtj-icon-greater arrow",{open:!r.value}]),onClick:de(s,["stop"])},null,10,_i)):x("",!0),W("div",wi,[me(c.$slots,"title",{},function(){return[ae(re(n.title),1)]})]),W("div",Ei,[me(c.$slots,"action"),n.editable?(m(),A("i",{key:0,class:"vtj-icon-edit",title:"编辑",onClick:de(i,["stop"])},null,8,ji)):x("",!0),n.removable?(m(),A("i",{key:1,class:"vtj-icon-remove",title:"删除",onClick:de(l,["stop"])},null,8,Ci)):x("",!0)])],2),n.content||c.$slots.default?Je((m(),A("div",Vi,[me(c.$slots,"default",{},function(){return[ae(re(n.content),1)]})],512)),[[Qe,!r.value]]):x("",!0)],2)}}}),Si={class:"vtj-context-viewer"},$i=["onClick"],Di=H({__name:"ContextViewer",emits:["pick"],setup:function(a,e){var t=e.emit,n=In({}),r=n.copy,i=oe(),l=i.project,o=U(function(){var g;return(g=l.current.value)===null||g===void 0?void 0:g.runtimeContext}),s=["$provider","$apis","$components","context"],c=function(w){var b=w.value,h=Dt(b);return h==="Object"||h==="Module"?Object.keys(b||{}).length===0:h==="Array"?b.length===0:!0},v=function(w){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"this";return typeof w=="object"?Array.isArray(w)?w.map(function(h,k){var V=`[${k}]`;return{label:V,value:h,type:Dt(h),path:`${b}${V}`}}):Object.entries(w).map(function(h){var k=Oe(h,2),V=k[0],I=k[1];return{label:V,value:I,type:Dt(I),path:`${b}.${V}`}}).filter(function(h){return!h.label.startsWith("__")&&!s.includes(h.label)}):[]},f=function(w,b){if(w.level===0)b(v(o.value));else{var h=wt(w.data.value);b(v(h,w.data.path))}},p=function(w){r(w.path),Se.success({message:"已经复制到粘贴板"})},y=function(w){t("pick",w.path)};return function(g,w){return m(),A("div",Si,[o.value?(m(),j(d(un),{key:0,lazy:"",load:f,"expand-on-click-node":!1,props:{isLeaf:c}},{default:_(function(b){var h=b.data;return[E(d(Ee),{title:h.label,clickable:"",onClick:function(V){return y(h)}},{action:_(function(){return[W("i",{class:"vtj-icon-copy",title:"复制",onClick:de(function(k){return p(h)},["stop"])},null,8,$i)]}),_:2},1032,["title","onClick"])]}),_:1},8,["props"])):x("",!0)])}}}),Pi={key:0,class:"vtj-binder__common"},Ti=["onClick"],Ai={class:"vtj-binder__footer"},Vt=H({__name:"Binder",props:{clearable:{type:Boolean,default:!0}},emits:["submit","cancel","remove","pick"],setup:function(a,e){var t=e.expose,n=e.emit,r=a,i=[{name:"common",label:"常用"},{name:"viewer",label:"高级"}],l=S("common"),o=oe(),s=o.project,c=S(""),v=ui(s.current,c),f=v.searchResult,p=In({}),y=p.copy,g=S(),w=function(){n("submit")},b=function(){n("cancel"),g.value.close()},h=function(){n("remove")},k=function(D){n("pick",D)},V=function(D){y(D),Se.success({message:"已经复制到粘贴板"})};return t({close:function(){g.value.close()}}),function(I,D){return m(),j(ge,{ref_key:"dialogRef",ref:g,"body-padding":!1,width:"1000px",height:"600px"},{default:_(function(){return[E(d(Lt),{class:"vtj-binder"},{default:_(function(){return[E(d(Ut),null,{default:_(function(){return[E(cn,{items:i,modelValue:l.value,"onUpdate:modelValue":D[1]||(D[1]=function(O){return l.value=O})},{default:_(function(){return[l.value==="common"?(m(),A("div",Pi,[E(d(ue),{modelValue:c.value,"onUpdate:modelValue":D[0]||(D[0]=function(O){return c.value=O}),size:"small",clearable:"","prefix-icon":d(On),placeholder:"筛选可用项"},null,8,["modelValue","prefix-icon"]),(m(!0),A(X,null,ee(d(f),function(O){return m(),A("div",null,[E(d(on),{"border-style":"dotted"},{default:_(function(){return[ae(re(O.title),1)]}),_:2},1024),(m(!0),A(X,null,ee(O.items,function(C){return m(),j(Ee,{clickable:"",title:C,onClick:function(R){return k(C)}},{action:_(function(){return[W("i",{class:"vtj-icon-copy",title:"复制",onClick:de(function($){return V(C)},["stop"])},null,8,Ti)]}),_:2},1032,["title","onClick"])}),256))])}),256)),d(f).length?x("",!0):(m(),j(d(he),{key:0}))])):x("",!0),l.value==="viewer"?(m(),j(Di,{key:1,onPick:k})):x("",!0)]}),_:1},8,["modelValue"])]}),_:1}),E(d(Un),null,{default:_(function(){return[E(Te,{title:null},{footer:_(function(){return[W("div",Ai,[W("span",null,[r.clearable?(m(),j(d(ye),{key:0,size:"default",type:"warning",onClick:h},{default:_(function(){return[ae(" 移除绑定 ")]}),_:1})):x("",!0)]),W("span",null,[E(d(ye),{size:"default",onClick:b},{default:_(function(){return[ae("取消")]}),_:1}),E(d(ye),{size:"default",type:"primary",onClick:w},{default:_(function(){return[ae(" 确定 ")]}),_:1})])])]}),default:_(function(){return[me(I.$slots,"default")]}),_:3})]}),_:3})]}),_:3})]}),_:3},512)}}}),Ii=H({__name:"VarBinder",props:{value:{default:""},defaults:{default:""},type:{default:"JSExpression"}},emits:["submit"],setup:function(a,e){var t=e.emit,n=a,r=oe(),i=r.project,l=S(n.value||n.defaults),o=U(function(){return`绑定内容 [ ${n.type} ]`}),s=S(),c=S(),v=function(g){var w,b=(w=i.current.value)===null||w===void 0?void 0:w.runtimeContext;return Ae({value:g,type:n.type},b)},f=function(){var g=s.value.getEditor().getValue().trim();g?v(g)&&(t("submit",{type:n.type,value:g}),c.value.close()):Ie.warning({message:"请输入绑定内容"})},p=function(g){var w;!((w=s.value)===null||w===void 0)&&w.getEditor()&&(l.value=g)};return function(y,g){return m(),j(Vt,{ref_key:"binderRef",ref:c,title:"变量绑定",onSubmit:f,onPick:p},{default:_(function(){return[E(d(ve),{class:"vtj-var-binder","label-position":"top"},{default:_(function(){return[E(d(ne),{label:o.value},{default:_(function(){return[E(d(Ce),{ref_key:"editorRef",ref:s,"model-value":l.value,width:"100%",height:"100%",dark:""},null,8,["model-value"])]}),_:1},8,["label"])]}),_:1})]}),_:1},512)}}}),Oi=H({__name:"EventBinder",props:{name:{},event:{},node:{}},emits:["submit","remove"],setup:function(a,e){var t,n,r=e.emit,i=a,l=oe(),o=l.assets,s=l.project,c=S(),v=S(),f=S(Object.keys(((t=i.event)===null||t===void 0?void 0:t.modifiers)||{}));U(function(){var h,k=(h=i.node)===null||h===void 0?void 0:h.name;if(!k)return[];var V=o.componentMap[k];if(V&&V.events){var I=V.events.find(function(D){return D===i.name||D.name===i.name});if(I&&I.params)return I.params||[]}return[]});var p=S(((n=i.event)===null||n===void 0||(n=n.handler)===null||n===void 0?void 0:n.value)||`() => {\r
\r
}`),y=function(k){var V,I=(V=s.current.value)===null||V===void 0?void 0:V.runtimeContext;return Ae({value:k,type:"JSFunction"},I)},g=function(){var k=c.value.getEditor().getValue().trim();if(k){if(y(k)){var V={handler:{type:"JSFunction",value:k},modifiers:f.value.reduce(function(I,D){return I[D]=!0,I},{})};r("submit",V),v.value.close()}}else Ie.warning({message:"请输入绑定内容"})},w=function(k){var V;!((V=c.value)===null||V===void 0)&&V.getEditor()&&(p.value=k)},b=function(){r("remove",i.name)};return function(h,k){return m(),j(Vt,{ref_key:"binderRef",ref:v,title:"事件绑定",subtitle:i.name,onSubmit:g,onPick:w,onRemove:b},{default:_(function(){return[E(d(ve),{class:"vtj-event-binder","label-position":"top"},{default:_(function(){return[E(d(ne),{label:"事件修饰符"},{default:_(function(){return[E(d(Wr),{modelValue:f.value,"onUpdate:modelValue":k[0]||(k[0]=function(V){return f.value=V})},{default:_(function(){return[(m(!0),A(X,null,ee(d(pa),function(V){return m(),j(d(Hr),{key:V,label:V},null,8,["label"])}),128))]}),_:1},8,["modelValue"])]}),_:1}),E(d(ne),{label:"事件处理函数"},{default:_(function(){return[E(d(Ce),{ref_key:"editorRef",ref:c,width:"100%",height:"360px",dark:"","model-value":p.value},null,8,["model-value"])]}),_:1})]}),_:1})]}),_:1},8,["subtitle"])}}}),Ri=["draggable","onDragstart","onClick","title"],Ni=["src"],xi={key:1,class:"vtj-components__name"},Fi={key:2,class:"vtj-components__footer"},Bi=["onClick"],Li=["onClick"],vt=H({__name:"ComponentList",props:{list:{default:function(){return[]}},span:{default:6},editable:{type:Boolean},removable:{type:Boolean},active:{},type:{}},emits:["edit","remove","click"],setup:function(a,e){var t=e.emit,n=a;function r(v,f){return i.apply(this,arguments)}function i(){return i=G(T().mark(function v(f,p){return T().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:n.type==="Schema"&&(f.from={type:"Schema",id:f.id}),N.emit(Qt,f);case 1:case"end":return g.stop()}},v)})),i.apply(this,arguments)}function l(){N.emit(Zt)}function o(v){t("edit",v)}function s(v){t("remove",v)}function c(v){t("click",v)}return function(v,f){return n.list.length?(m(),j(d(Kr),{key:0,class:"vtj-components__box",gutter:10},{default:_(function(){return[(m(!0),A(X,null,ee(n.list,function(p){return m(),j(d(Gr),{span:n.span},{default:_(function(){return[W("div",{class:ce(["vtj-components__item",{"is-active":n.active&&n.active(p)}]),draggable:!(n.active&&n.active(p)),onDragstart:function(g){return r(p)},onDragend:l,onClick:function(g){return c(p)},title:p.name},[p.icon?(m(),A("img",{key:0,src:p.icon,alt:""},null,8,Ni)):(m(),A("span",xi,re(p.name),1)),W("span",null,re(p.title),1),n.editable||n.removable?(m(),A("div",Fi,[n.editable?(m(),A("i",{key:0,onClick:de(function(y){return o(p)},["stop"]),class:"vtj-icon-edit"},null,8,Bi)):x("",!0),n.removable?(m(),A("i",{key:1,onClick:de(function(y){return s(p)},["stop"]),class:"vtj-icon-remove"},null,8,Li)):x("",!0)])):x("",!0)],42,Ri)]}),_:2},1032,["span"])}),256))]}),_:1})):(m(),j(d(he),{key:1,description:"暂无数据","image-size":60}))}}}),Ui={key:0,class:"vtj-list-panel__search"},Ji=W("i",{class:"vtj-icon-search"},null,-1),Yn=H({__name:"ListPanel",props:{search:{type:[Boolean,Object],default:!1},tabs:{default:void 0},columnWidth:{default:100}},emits:["search-change"],setup:function(a,e){var t,n=e.emit,r=a,i=S(null),l=S(6),o=S("");pe(o,function(){n("search-change",o.value)});var s=S((t=r.tabs)===null||t===void 0||(t=t[0])===null||t===void 0?void 0:t.name);return An(i,function(c){var v=c[0],f=v.contentRect.width,p=Math.min(Math.floor(f/120),24);l.value=Math.floor(24/p)}),function(c,v){return m(),j(Te,{class:"vtj-list-panel",ref_key:"panel",ref:i},{default:_(function(){return[r.search?(m(),A("div",Ui,[E(d(ue),se({size:"small"},c.search,{modelValue:o.value,"onUpdate:modelValue":v[0]||(v[0]=function(f){return o.value=f}),clearable:""}),{prefix:_(function(){return[Ji]}),_:1},16,["modelValue"])])):x("",!0),r.search&&o.value?(m(),j(d(Mt),{key:1},{default:_(function(){return[E(d(Jt),{label:"搜索结果"},{default:_(function(){return[me(c.$slots,"search",{search:o.value,span:l.value})]}),_:3})]}),_:3})):x("",!0),Je(E(d(Mt),{modelValue:s.value,"onUpdate:modelValue":v[1]||(v[1]=function(f){return s.value=f}),class:"vtj-list-panel__tabs"},{default:_(function(){return[(m(!0),A(X,null,ee(r.tabs,function(f){return m(),j(d(Jt),{key:f.name,label:f.label,name:f.name,lazy:""},{default:_(function(){return[me(c.$slots,"tab",{tab:f,span:l.value},function(){return[f.component?(m(),j(Xt(f.component),se({key:0,tab:f.name,currentTab:s.value,search:o.value,span:l.value},f.props),null,16,["tab","currentTab","search","span"])):x("",!0)]})]}),_:2},1032,["label","name"])}),128))]}),_:3},8,["modelValue"]),[[Qe,r.tabs&&!o.value]]),me(c.$slots,"default",{currentTab:s.value,search:o.value,span:l.value})]}),_:3},512)}}}),Mi=H({__name:"JSONSetter",props:{modelValue:{type:[Boolean,String,Number,null,Array,Object],default:void 0}},emits:["change"],setup:function(a,e){var t=e.emit,n=a,r=S(),i=S(typeof n.modelValue=="object"?JSON.stringify(n.modelValue,null,2):void 0),l=U(function(){return!!i.value}),o=S(!1),s=function(y){var g=!0;try{if(typeof JSON.parse(y)!="object")throw new Error(`"${y}" is not a JSON`)}catch(w){g=!1,Ie.error({title:"代码错误",message:(w==null?void 0:w.message)||w})}return g},c=function(){var y,g=(y=r.value)===null||y===void 0?void 0:y.getEditor();if(g){var w=g.getValue();s(w)&&(i.value=w,t("change",JSON.parse(w)),o.value=!1)}},v=function(){i.value="",t("change",void 0),o.value=!1},f=function(){o.value=!0};return function(p,y){return m(),A("div",{class:ce(["vtj-json-setter",{"is-active":l.value}])},[E(d(ue),se({readonly:"",onFocus:f,"model-value":"JSON","suffix-icon":d(Rn)},p.$attrs),null,16,["suffix-icon"]),o.value?(m(),j(d(ge),{key:0,modelValue:o.value,"onUpdate:modelValue":y[0]||(y[0]=function(g){return o.value=g}),title:"JSON",width:"1000px",height:"600px",cancel:"",submit:"",clear:"",onSubmit:c,onClear:v},{default:_(function(){return[E(d(Ce),{ref_key:"codeEditor",ref:r,height:"100%",lang:"json",dark:"","model-value":i.value},null,8,["model-value"])]}),_:1},8,["modelValue"])):x("",!0)],2)}}}),zi=H({__name:"FunctionSetter",props:{modelValue:{default:function(){return{type:"JSFunction",value:""}}}},emits:["change"],setup:function(a,e){var t=e.emit,n=a,r=S(),i=S(n.modelValue.value),l=S(!1),o=U(function(){return!!i.value}),s=function(){var p,y=(p=r.value)===null||p===void 0?void 0:p.getEditor();if(y){var g=y.getValue(),w={type:"JSFunction",value:g};Ae(w,{})&&(i.value=g,t("change",w),l.value=!1)}},c=function(){i.value="",t("change",void 0),l.value=!1},v=function(){l.value=!0};return function(f,p){return m(),A("div",{class:ce(["vtj-function-setter",{"is-active":o.value}])},[E(d(ue),se({readonly:"",onFocus:v,"model-value":"JSFunction","suffix-icon":d(Rn)},f.$attrs),null,16,["suffix-icon"]),l.value?(m(),j(d(ge),{key:0,modelValue:l.value,"onUpdate:modelValue":p[0]||(p[0]=function(y){return l.value=y}),title:"JSFunction",width:"1000px",height:"600px",cancel:"",submit:"",clear:"",onSubmit:s,onClear:c},{default:_(function(){return[E(d(Ce),{ref_key:"codeEditor",ref:r,height:"100%","model-value":i.value,dark:""},null,8,["model-value"])]}),_:1},8,["modelValue"])):x("",!0)],2)}}}),Wi=H({__name:"BooleanSetter",setup:function(a){return function(e,t){return m(),j(d(Me),se(e.$attrs,{"model-value":!!e.$attrs.modelValue}),null,16,["model-value"])}}}),Hi=H({__name:"ColorSetter",setup:function(a){return function(e,t){return m(),j(d(Zr),mt(en(e.$attrs)),null,16)}}}),Gi=H({__name:"NumberSetter",props:{modelValue:{}},emits:["change"],setup:function(a,e){var t=e.emit,n=a,r=U(function(){return $e(n.modelValue)?void 0:Number(n.modelValue||0)}),i=function(o){t("change",o)};return function(l,o){return m(),j(d(Yr),se({class:"vtj-number-setter","controls-position":"right","model-value":r.value},l.$attrs,{onChange:i}),null,16,["model-value"])}}}),Ki={class:"vtj-icon-setter"},qi={class:"vtj-icon-setter__content"},Qi={class:"vtj-icon-setter__list"},Xn=H({__name:"IconSetter",props:{modelValue:{default:""}},emits:["change","update:modelValue"],setup:function(a,e){var t=e.emit,n=a,r=S(!1),i=S(n.modelValue),l=S(""),o=U(function(){return Bt[n.modelValue]||n.modelValue}),s=U(function(){var y=Object.entries(Bt);return l.value?y.filter(function(g){return g[0].toLowerCase().includes(l.value)}):y}),c=function(g){i.value=g},v=function(){t("change",i.value),t("update:modelValue",i.value),r.value=!1},f=function(){i.value="",t("change",""),t("update:modelValue",""),r.value=!1},p=function(){r.value=!0};return function(y,g){return m(),A("div",Ki,[E(d(ue),{size:"small",readonly:"",placeholder:"请选择图标","model-value":n.modelValue,"suffix-icon":d(Cr),onFocus:p},{prepend:_(function(){return[E(d(Ft),{icon:o.value},null,8,["icon"])]}),_:1},8,["model-value","suffix-icon"]),r.value?(m(),j(d(ge),{key:0,title:"图标选择器",width:"1000px",height:"600px",cancel:"",submit:"",clear:"",modelValue:r.value,"onUpdate:modelValue":g[1]||(g[1]=function(w){return r.value=w}),onSubmit:v,onClear:f},{default:_(function(){return[W("div",qi,[E(d(ue),{size:"small","prefix-icon":d(On),clearable:"",modelValue:l.value,"onUpdate:modelValue":g[0]||(g[0]=function(w){return l.value=w}),placeholder:"请输入查询关键字"},null,8,["prefix-icon","modelValue"]),W("div",Qi,[(m(!0),A(X,null,ee(s.value,function(w){return m(),j(d(Ft),{icon:w[1],onClick:function(h){return c(w[0])},class:ce({"is-active":i.value===w[0]})},null,8,["icon","onClick","class"])}),256)),s.value.length===0?(m(),j(d(he),{key:0})):x("",!0)])])]}),_:1},8,["modelValue"])):x("",!0)])}}}),Sn={StringSetter:jn,InputSetter:jn,SelectSetter:Cn,OptionSetter:Cn,ExpressionSetter:yi,JSONSetter:Mi,FunctionSetter:zi,BooleanSetter:Wi,ColorSetter:Hi,NumberSetter:Gi,IconSetter:Xn},er={string:["InputSetter","SelectSetter"],number:["NumberSetter"],boolean:["BooleanSetter"],object:["JSONSetter"],function:["FunctionSetter"],array:["JSONSetter"],JSFunction:["FunctionSetter"],JSExpression:["ExpressionSetter"]},Zi={key:1},Yi={class:"vtj-setter__content"},Xi={key:0,class:"vtj-setter__input"},eu={class:"vtj-setter__action"},tu=W("i",{class:"vtj-icon-switch",title:"切换设置器"},null,-1),nu={key:0,class:"vtj-icon-check"},ru={key:1,class:"vtj-icon-placeholder"},au="{{",iu="}}",uu=H({__name:"SetterView",props:{name:{},label:{default:""},title:{},setters:{},variable:{type:Boolean,default:!0},value:{},options:{default:function(){return[]}},defaultSetter:{},removable:{type:Boolean}},emits:["change","remove"],setup:function(a,e){var t=e.emit,n=a,r=S(!1),i=S(""),l=S(n.setters.find(function(h){return h.name===n.defaultSetter})||n.setters[0]),o=S(n.value),s=U(function(){return!!$e(o.value)}),c=P({},l.value.name,o.value),v=function(k){var V;c[l.value.name]=o.value,l.value=k,o.value=(V=c[k.name])!==null&&V!==void 0?V:void 0,f(o.value)};pe(function(){return n.value},function(){o.value=n.value}),pe(function(){return n.defaultSetter},function(){l.value=n.setters.find(function(h){return h.name===n.defaultSetter})||n.setters[0]});var f=function(k){t("change",k)},p=function(){t("remove",n.name)},y=function(){r.value=!0,i.value=$e(o.value)?o.value.value:""},g=function(){r.value=!1,i.value=""},w=function(k){c[l.value.name]=o.value,o.value=k,t("change",k),g()},b=function(){g(),o.value=void 0,t("change","")};return function(h,k){return m(),j(d(ne),{class:"vtj-setter",size:"small","label-positon":"left"},{label:_(function(){return[n.title?(m(),j(d(Jn),{key:0,placement:"top-start",content:n.title},{default:_(function(){return[ae(re(n.label||n.name),1)]}),_:1},8,["content"])):(m(),A("span",Zi,re(n.label||n.name),1))]}),default:_(function(){return[W("div",Yi,[l.value?(m(),A("div",Xi,[s.value?x("",!0):(m(),j(Xt(l.value.component),se({key:0},l.value.props,{options:n.options,modelValue:o.value,"onUpdate:modelValue":k[0]||(k[0]=function(V){return o.value=V}),onChange:f,disabled:s.value}),null,16,["options","modelValue","disabled"])),s.value?(m(),j(d(ue),{key:1,class:"vtj-expression-setter",disabled:"","model-value":"JSExpression"},{prefix:_(function(){return[ae(re(au))]}),suffix:_(function(){return[ae(re(iu))]}),_:1})):x("",!0)])):x("",!0),W("div",eu,[n.variable?(m(),A("i",{key:0,onClick:y,class:ce(["vtj-icon-vars",{"is-active":s.value}]),title:"绑定变量"},null,2)):x("",!0),n.setters.length>1?(m(),j(d(nn),{key:1,disabled:s.value,size:"small","popper-class":"vtj-setter-switch",onCommand:v},{dropdown:_(function(){return[E(d(an),null,{default:_(function(){return[(m(!0),A(X,null,ee(n.setters,function(V){return m(),j(d(rn),{command:V,key:V.name},{default:_(function(){return[V.name==l.value.name?(m(),A("i",nu)):(m(),A("i",ru)),ae(" "+re(V.label),1)]}),_:2},1032,["command"])}),128))]}),_:1})]}),default:_(function(){return[tu]}),_:1},8,["disabled"])):x("",!0),n.removable?(m(),A("i",{key:2,onClick:p,class:"vtj-icon-remove",title:"删除"})):x("",!0)])]),r.value?(m(),j(Ii,{key:0,type:"JSExpression",value:i.value,modelValue:r.value,"onUpdate:modelValue":k[1]||(k[1]=function(V){return r.value=V}),onSubmit:w,onRemove:b},null,8,["value","modelValue"])):x("",!0)]}),_:1})}}}),Re=H({name:"SetterRenderer",props:{name:String,label:String,title:String,value:{type:[String,Object,Array,Number,Boolean],default:void 0},setters:{type:[String,Object,Array],required:!0,default:function(){return[]}},options:{type:Array,default:function(){return[]}},variable:{type:Boolean,default:!0},removable:{type:Boolean,default:!1}},computed:{computedSetters:function(){var a=this;return(Array.isArray(this.setters)?this.setters:[this.setters]).map(function(e){var t;if(typeof e=="string")return t=a.getComopnent(e),{component:pt(t),name:e,label:e,props:{}};{var n=e;return t=n.component||a.getComopnent(n.name),{component:pt(t),name:n.name,label:n.label||n.name,props:n.props}}})},computedOptions:function(){return(this.options||[]).map(function(a){return typeof a=="string"?{label:a,value:a}:a})},defaultSetter:function(){var a,e,t=this.value,n=this.computedSetters,r=typeof t;r==="object"&&(Array.isArray(t)?r="array":$e(t)?r="JSExpression":Ct(t)&&(r="JSFunction"));var i=er[r]||[];return i.length?(a=n.find(function(l){return i.includes(l.name)})||n[0])===null||a===void 0?void 0:a.name:(e=n[0])===null||e===void 0?void 0:e.name}},render:function(){var a=this.name,e=this.label,t=this.title,n=this.value,r=this.computedSetters,i=this.computedOptions,l=this.variable,o=this.changeValue,s=this.defaultSetter,c=this.removable,v=this.onRemove;return Ln(uu,{name:a,label:e,title:t,setters:r,defaultSetter:s,variable:l,value:n,removable:c,options:i,onChange:o,onRemove:v})},emits:["change","remove"],methods:{getComopnent:function(a){return typeof a=="string"?Sn[a]||Sn.InputSetter:a},changeValue:function(a){this.$emit("change",this.name,a)},onRemove:function(a){this.$emit("remove",a)}}}),lu={class:"vtj-action"},ou=H({__name:"action",setup:function(a){var e=oe(),t=e.regions,n=U(function(){return t.value.action});return function(r,i){return m(),A("div",lu,[(m(!0),A(X,null,ee(n.value,function(l){return m(),j(d(ze),se({key:l.name},z({},l)),null,16)}),128))])}}}),su=function(a,e){var t=a.__vccOpts||a,n=Ne(e),r;try{for(n.s();!(r=n.n()).done;){var i=Oe(r.value,2),l=i[0],o=i[1];t[l]=o}}catch(s){n.e(s)}finally{n.f()}return t},cu={};function du(u,a){return m(),A("div",null,"Empty")}var vu=su(cu,[["render",du]]),fu=["title","src"],pu={key:1},mu=H({__name:"Logo",props:{icon:{},text:{default:"Vtj"},link:{}},setup:function(a,e){var t=e.expose,n=a,r=function(){n.link&&(location.href=n.link)};return t({props:n}),function(i,l){return m(),A("div",{class:"vtj-logo",onClick:r},[n.icon?(m(),A("img",{key:0,title:n.text,class:"vtj-logo__icon",src:n.icon},null,8,fu)):(m(),A("span",pu,re(n.text),1))])}}}),hu=W("div",null,"多个资源可换行输入",-1),gu=H({__name:"Dependencies",setup:function(a){var e=oe(),t=e.project,n=[{name:"add",icon:"vtj-icon-plus"}],r={package:{required:!0,message:"包名不能为空"},version:{required:!0,message:"版本不能为空"},library:{required:!0,message:"导出变量名称不能为空"},urls:{required:!0,message:"资源URL不能为空"}},i=S(),l=S(),o=S(!1),s=S(!1),c=U(function(){return t.dependencies.value}),v=function(b){t.setDeps(b)},f=function(){o.value=!0,s.value=!1,i.value={package:"",version:"",library:"",urls:"",assetsUrl:"",assetsLibrary:""}},p=function(b){o.value=!0,s.value=!0,i.value={package:b.package,version:b.version,library:b.library,urls:b.urls.join(`
`),assetsUrl:b.assetsUrl||"",assetsLibrary:b.assetsLibrary||""}},y=function(b){we.confirm("确定删除该依赖项？","提示",{type:"warning"}).then(function(){t.removeDeps(b)})},g=function(){l.value.validate(function(b){var h,k;if(b){var V=i.value,I=V.version,D=V.library,O=V.urls,C=V.assetsUrl,$=V.assetsLibrary;if((h=i.value)!==null&&h!==void 0&&h.package){var R={package:(k=i.value)===null||k===void 0?void 0:k.package,version:I,library:D,urls:O.trim().split(`
`),assetsUrl:C,assetsLibrary:$};t.dependencies.value.find(function(L){return L.package===R.package})&&!s.value?Se.warning({message:"已存在相同名称的依赖包"}):(t.setDeps(wt(R)),o.value=!1)}}})};return function(w,b){return m(),j(Te,{class:"vtj-deps",title:"依赖管理",tools:n,onToolClick:f},{default:_(function(){return[(m(!0),A(X,null,ee(c.value,function(h){return m(),j(Ee,{key:h.package,removable:!h.official,editable:!h.official,class:ce({"vtj-deps__disabled":!h.enabled}),onEdit:function(V){return p(h)},onRemove:function(V){return y(h)}},{action:_(function(){return[!h.required&&h.official?(m(),j(d(Me),{key:0,size:"small",modelValue:h.enabled,"onUpdate:modelValue":function(V){return h.enabled=V},onChange:function(V){return v(h)}},null,8,["modelValue","onUpdate:modelValue","onChange"])):x("",!0)]}),title:_(function(){return[ae(re(h.package)+"@"+re(h.version),1)]}),_:2},1032,["removable","editable","class","onEdit","onRemove"])}),128)),o.value?(m(),j(ge,{key:0,modelValue:o.value,"onUpdate:modelValue":b[6]||(b[6]=function(h){return o.value=h}),title:`${s.value?"编辑":"新增"}依赖`,width:"1000px",height:"500px",submit:"",cancel:"",onSubmit:g},{default:_(function(){return[i.value?(m(),j(d(ve),{key:0,ref_key:"form",ref:l,size:"small","label-width":"80px",model:i.value,rules:r},{default:_(function(){return[E(d(ne),{label:"npm包名",prop:"package"},{default:_(function(){return[E(d(ue),{modelValue:i.value.package,"onUpdate:modelValue":b[0]||(b[0]=function(h){return i.value.package=h}),modelModifiers:{trim:!0},readonly:s.value,disabled:s.value},null,8,["modelValue","readonly","disabled"])]}),_:1}),E(d(ne),{label:"版本号",prop:"version"},{default:_(function(){return[E(d(ue),{modelValue:i.value.version,"onUpdate:modelValue":b[1]||(b[1]=function(h){return i.value.version=h}),modelModifiers:{trim:!0}},null,8,["modelValue"])]}),_:1}),E(d(ne),{label:"导出名称",prop:"library"},{default:_(function(){return[E(d(ue),{modelValue:i.value.library,"onUpdate:modelValue":b[2]||(b[2]=function(h){return i.value.library=h}),modelModifiers:{trim:!0}},null,8,["modelValue"])]}),_:1}),E(d(ne),{label:"资源URL",prop:"urls"},{default:_(function(){return[E(d(ue),{type:"textarea",rows:5,modelValue:i.value.urls,"onUpdate:modelValue":b[3]||(b[3]=function(h){return i.value.urls=h})},null,8,["modelValue"]),hu]}),_:1}),E(d(ne),{label:"资产URL",prop:"assetsUrl"},{default:_(function(){return[E(d(ue),{modelValue:i.value.assetsUrl,"onUpdate:modelValue":b[4]||(b[4]=function(h){return i.value.assetsUrl=h}),modelModifiers:{trim:!0}},null,8,["modelValue"])]}),_:1}),E(d(ne),{label:"资产名称",prop:"assetsLibrary"},{default:_(function(){return[E(d(ue),{modelValue:i.value.assetsLibrary,"onUpdate:modelValue":b[5]||(b[5]=function(h){return i.value.assetsLibrary=h}),modelModifiers:{trim:!0}},null,8,["modelValue"])]}),_:1})]}),_:1},8,["model"])):x("",!0)]}),_:1},8,["modelValue","title"])):x("",!0)]}),_:1})}}}),yu=H({__name:"Viewport",props:{mode:{default:"pc"},width:{},height:{}},setup:function(a){var e=a,t={width:390,height:844},n={width:1180,height:820},r=U(function(){return[`is-${e.mode}`]}),i=U(function(){if(e.mode==="pc")return 1;var o=e.mode==="mobile"?t:n,s=o.width,c=o.height,v=s>0?(e.width||0)/s:1,f=c>0?(e.height||0)/c:1;return Math.min(v,f)}),l=U(function(){if(e.mode==="pc")return{};var o=e.mode==="mobile"?t:n,s=o.width,c=o.height;return{width:`${s}px`,height:`${c}px`,left:"50%",top:"50%",transform:`translate(-50%, -50%) scale(${i.value})`}});return function(o,s){return m(),A("div",{class:ce(["vtj-viewport",r.value]),style:ct(l.value)},[me(o.$slots,"default")],6)}}}),bu={class:"vtj-actions__layers"},ku=W("i",{class:"vtj-icon-layers"},null,-1),_u={key:0,class:"vtj-actions__tools"},wu=H({__name:"Actions",props:{position:{default:"left-top"},node:{},title:{default:""},path:{default:function(){return[]}}},emits:["action"],setup:function(a,e){var t=e.emit,n=a,r=U(function(){return fe(n.node)}),i=U(function(){return n.path});function l(y){return fe(y)?"Block":"Node"}function o(){if(n.node.lock){Se.warning({message:"该节点已被锁定，不能删除"});return}we.confirm("确定删除吗？","提示",{type:"warning"}).then(function(){n.node.dispose(),ut(function(){t("action",{type:"remove"})})})}function s(){n.node.moveNext(),ut(function(){t("action",{type:"move",next:!0,node:n.node})})}function c(){n.node.movePrev(),ut(function(){t("action",{type:"move",prev:!0,node:n.node})})}function v(){var y=n.node.copy();ut(function(){t("action",{type:"copy",node:y})})}function f(y){t("action",{type:"hover",node:y})}function p(y){t("action",{type:"selected",node:y})}return function(y,g){return m(),A("div",{class:ce(["vtj-actions",[`is-${n.position}`]])},[W("div",bu,[E(d(nn),{size:"small",onCommand:p},{dropdown:_(function(){return[i.value&&i.value.length?(m(),j(d(an),{key:0},{default:_(function(){return[(m(!0),A(X,null,ee(i.value,function(w){return m(),j(d(rn),{key:w.id,command:w,onMouseenter:function(h){return f(w)}},{default:_(function(){return[ae(re(w.name)+" ",1),W("i",{class:ce(`is-${l(w)}`)},re(l(w)),3)]}),_:2},1032,["command","onMouseenter"])}),128))]}),_:1})):x("",!0)]}),default:_(function(){return[W("div",null,[ku,ae(re(n.title),1)])]}),_:1})]),r.value?x("",!0):(m(),A("div",_u,[W("i",{class:"vtj-icon-arrow-up",title:"向前移动",onClick:c}),W("i",{class:"vtj-icon-arrow-down",title:"向后移动",onClick:s}),W("i",{onClick:v,class:"vtj-icon-copy",title:"复制"}),W("i",{onClick:o,class:"vtj-icon-remove",title:"删除"})]))],2)}}}),Eu={key:1,class:"vtj-designer__placeholder"},ju=H({__name:"Designer",setup:function(a,e){var t=e.expose,n=oe(),r=n.engine,i=S(),l=S(),o=S({width:0,height:0});An(l,function(I){var D=I[0];o.value=D.contentRect});var s=new Ho(r,i,ei),c=Pe(s),v=c.hover,f=c.dropping,p=c.selected,y=c.onAction,g=c.viewportMode,w=r.project.current,b=U(function(){var I;return((I=w.value)===null||I===void 0?void 0:I.children.length)===0}),h=U(function(){var I;return fe((I=v.value)===null||I===void 0?void 0:I.node)}),k=U(function(){var I;return fe((I=p.value)===null||I===void 0?void 0:I.node)}),V=U(function(){var I,D=((I=p.value)===null||I===void 0?void 0:I.rect)||{},O=D.width,C=O===void 0?0:O,$=D.height,R=$===void 0?0:$;return C>0||R>0});return t({designer:s,selected:p}),function(I,D){return m(),A("div",{ref_key:"container",ref:l,class:"vtj-designer"},[Je(E(yu,{mode:d(g),width:o.value.width,height:o.value.height},{default:_(function(){return[W("iframe",{ref_key:"iframe",ref:i,frameborder:"0"},null,512),d(f)?(m(),A("div",{key:0,class:ce(["vtj-designer__dropping","is-inner"]),style:ct(d(f).style)},null,4)):x("",!0),d(v)?(m(),A("div",{key:1,class:"vtj-designer__hover",style:ct(d(v).style)},[Je(W("span",{class:ce(["vtj-designer__hover-title",`is-${d(v).position}`])},[ae(re(d(v).node.name)+": ",1),W("i",null,re(d(v).node.id),1)],2),[[Qe,!h.value]])],4)):x("",!0),d(p)?Je((m(),A("div",{key:2,class:"vtj-designer__selected",style:ct(d(p).style)},[k.value?x("",!0):(m(),j(wu,{key:0,title:d(p).node.name,node:d(p).node,path:d(p).path,position:d(p).position,onAction:d(y)},null,8,["title","node","path","position","onAction"]))],4)),[[Qe,V.value]]):x("",!0)]}),_:1},8,["mode","width","height"]),[[Qe,d(w)]]),d(w)?x("",!0):(m(),j(d(he),{key:0,description:"请在文档管理器新建或打开文件"})),b.value?(m(),A("div",Eu," 您可以拖拽组件放置到这里 ")):x("",!0)],512)}}}),Cu=H({__name:"Components",setup:function(a){var e={placeholder:"搜索组件"},t=oe(),n=t.engine,r=n.assets||{},i=r.componentGroups,l=r.components,o=U(function(){var w={};return i&&i.forEach(function(b){w[b.name]=b}),w}),s=U(function(){return i?i.map(function(w){var b;return{label:`${w.label} (${w.count})`,name:w.name,disabled:!((b=w.children)!==null&&b!==void 0&&b.length)}}):[]}),c=function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return b.map(function(h,k){return k})},v=Fe({});tn(function(){var w=s.value.reduce(function(b,h){return b[h.name]=c(o.value[h.name].children),b},{});Object.assign(v,w)});var f=La(l),p=f.searchKey,y=f.searchResult,g=function(b){p.value=b};return function(w,b){return m(),j(Yn,{class:"vtj-components",title:"组件库",search:e,tabs:s.value,onSearchChange:g},{search:_(function(h){var k=h.span;return[E(vt,{list:d(y),span:k},null,8,["list","span"])]}),tab:_(function(h){var k,V,I=h.tab,D=h.span;return[o.value[I.name].components?(m(),j(vt,{key:0,list:o.value[I.name].components,span:D},null,8,["list","span"])):x("",!0),(k=o.value[I.name].children)!==null&&k!==void 0&&k.length?(m(),j(d(xr),{key:1,modelValue:v[I.name],"onUpdate:modelValue":function(C){return v[I.name]=C}},{default:_(function(){return[(m(!0),A(X,null,ee(o.value[I.name].children,function(O,C){return m(),j(d(Fr),{key:O.name,title:`${O.label} (${O.count})`,name:C},{default:_(function(){return[E(vt,{list:O.components,span:D},null,8,["list","span"])]}),_:2},1032,["title","name"])}),128))]}),_:2},1032,["modelValue","onUpdate:modelValue"])):x("",!0),!o.value[I.name].components&&((V=o.value[I.name].children)===null||V===void 0?void 0:V.length)===0?(m(),j(d(he),{key:2,description:"暂无数据"})):x("",!0)]}),default:_(function(){return[!d(i)||d(i).length===0?(m(),j(d(he),{key:0,description:"暂无数据"})):x("",!0)]}),_:1},8,["tabs"])}}}),Vu=["onClick"],Su=["onClick"],$u={class:"vtj-pages__name"},Du={key:0,class:"vtj-pages__home"},Pu=H({__name:"Pages",setup:function(a){var e=oe(),t=e.project,n=e.engine,r=[{name:"add",icon:"vtj-icon-plus"}],i={name:[{required:!0,message:"名称为必填项"}],title:[{required:!0,message:"标题为必填项"}]},l=U(function(){return t.pages.value}),o=function(C){var $;return C===(($=t.current.value)===null||$===void 0?void 0:$.id)},s={id:"",name:"",title:"",isDir:!1,icon:"",mask:!0,home:!1,hidden:!1},c=S(),v=S(!1),f=S(),p=S(),y=function(){var O=G(T().mark(function C($){var R,L;return T().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(!$.isDir){K.next=2;break}return K.abrupt("return");case 2:return R=$.id,K.next=5,n.service.getFile(R);case 5:L=K.sent,t.activeFile(L);case 7:case"end":return K.stop()}},C)}));return function($){return O.apply(this,arguments)}}(),g=function(){p.value=void 0,c.value=z({},s),v.value=!0},w=function(C){p.value=C.id,c.value=z({},s),v.value=!0},b=function(C){c.value=z({},C),v.value=!0},h=function(){var O=G(T().mark(function C($,R){var L,B,K,ie;return T().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return B=$.id,K=(L=R.parent)===null||L===void 0?void 0:L.data.id,J.next=4,n.service.getFile(B);case 4:ie=J.sent,t.copyPage($,ie,K);case 6:case"end":return J.stop()}},C)}));return function($,R){return O.apply(this,arguments)}}(),k=function(){var O=G(T().mark(function C($){return T().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if($.id){L.next=2;break}return L.abrupt("return");case 2:if(!($.children&&$.children.length>0)){L.next=5;break}return Se.warning({message:"该目录有子页面文件，不能删除。"}),L.abrupt("return");case 5:return L.next=7,we.confirm("确定删除？","提示",{type:"warning"}).catch(function(B){return!1});case 7:if(L.t0=L.sent,!L.t0){L.next=10;break}t.removePage($.id);case 10:case"end":return L.stop()}},C)}));return function($){return O.apply(this,arguments)}}(),V=function(){var O=G(T().mark(function C(){var $,R;return T().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,f.value.validate().catch(function(K){return!1});case 2:if(!B.sent){B.next=18;break}if(!c.value.id){B.next=15;break}if(!c.value.isDir){B.next=8;break}B.t0=void 0,B.next=11;break;case 8:return B.next=10,n.service.getFile(c.value.id);case 10:B.t0=B.sent;case 11:$=B.t0,t.updatePage(c.value,$),B.next=17;break;case 15:R=t.addPage(c.value,p.value),!t.current.value&&!c.value.isDir&&t.activeFile(R.toDsl());case 17:v.value=!1;case 18:case"end":return B.stop()}},C)}));return function(){return O.apply(this,arguments)}}(),I=function(C,$,R){return R==="inner"?!!$.data.isDir:!0},D=function(){t.update({pages:l.value})};return function(O,C){return m(),j(d(Te),{title:"页面管理",tools:r,onToolClick:g},{default:_(function(){return[l.value.length===0?(m(),j(d(he),{key:0,description:"您还没创建文件"})):x("",!0),l.value.length?(m(),j(d(un),{key:1,"node-key":"id","default-expand-all":!0,data:l.value,draggable:"","allow-drop":I,onNodeDrop:D,class:"vtj-pages-items"},{default:_(function($){var R=$.node,L=$.data;return[E(d(Ee),{title:L.title,active:o(L.id),onClick:function(K){return y(L)},onEdit:function(K){return b(L)},onRemove:function(K){return k(L)},clickable:!L.isDir,editable:"",removable:""},{action:_(function(){return[L.isDir?(m(),A("i",{key:0,onClick:de(function(B){return w(L)},["stop"]),class:"vtj-icon-plus",title:"新增"},null,8,Vu)):x("",!0),L.isDir?x("",!0):(m(),A("i",{key:1,onClick:de(function(B){return h(L,R)},["stop"]),class:"vtj-icon-copy",title:"复制"},null,8,Su))]}),title:_(function(){return[E(d(Ft),{icon:d(Bt)[L.icon]||L.icon},null,8,["icon"]),ae(" "+re(L.title)+" ",1),W("i",$u,re(L.name),1),L.home?(m(),A("span",Du,"首页 ")):x("",!0)]}),_:2},1032,["title","active","onClick","onEdit","onRemove","clickable"])]}),_:1},8,["data"])):x("",!0),v.value?(m(),j(d(ge),{key:2,modelValue:v.value,"onUpdate:modelValue":C[7]||(C[7]=function($){return v.value=$}),width:"600px",title:c.value.id?"修改页面":"新增页面",submit:"",cancel:"",onSubmit:V},{default:_(function(){return[E(d(ve),{ref_key:"formRef",ref:f,model:c.value,rules:i,size:"small","label-position":"right","label-width":"80px"},{default:_(function(){return[E(d(ne),{label:"类型",prop:"isDir"},{default:_(function(){return[E(d(ln),{modelValue:c.value.isDir,"onUpdate:modelValue":C[0]||(C[0]=function($){return c.value.isDir=$}),disabled:!!c.value.id},{default:_(function(){return[E(d(tt),{label:!1},{default:_(function(){return[ae("页面")]}),_:1}),E(d(tt),{label:!0},{default:_(function(){return[ae("目录")]}),_:1})]}),_:1},8,["modelValue","disabled"])]}),_:1}),E(d(ne),{label:"标题描述",prop:"title"},{default:_(function(){return[E(d(ue),{modelValue:c.value.title,"onUpdate:modelValue":C[1]||(C[1]=function($){return c.value.title=$})},null,8,["modelValue"])]}),_:1}),E(d(ne),{label:"名称编码",prop:"name"},{default:_(function(){return[E(d(ue),{modelValue:c.value.name,"onUpdate:modelValue":C[2]||(C[2]=function($){return c.value.name=$})},null,8,["modelValue"])]}),_:1}),E(d(ne),{label:"菜单图标",prop:"icon"},{default:_(function(){return[E(Xn,{modelValue:c.value.icon,"onUpdate:modelValue":C[3]||(C[3]=function($){return c.value.icon=$})},null,8,["modelValue"])]}),_:1}),c.value.isDir?x("",!0):(m(),j(d(ne),{key:0,label:"包含母版",prop:"mask"},{default:_(function(){return[E(d(Me),{modelValue:c.value.mask,"onUpdate:modelValue":C[4]||(C[4]=function($){return c.value.mask=$})},null,8,["modelValue"])]}),_:1})),c.value.isDir?x("",!0):(m(),j(d(ne),{key:1,label:"站点首页",prop:"mask"},{default:_(function(){return[E(d(Me),{modelValue:c.value.home,"onUpdate:modelValue":C[5]||(C[5]=function($){return c.value.home=$})},null,8,["modelValue"])]}),_:1})),c.value.isDir?x("",!0):(m(),j(d(ne),{key:2,label:"隐藏菜单",prop:"mask"},{default:_(function(){return[E(d(Me),{modelValue:c.value.hidden,"onUpdate:modelValue":C[6]||(C[6]=function($){return c.value.hidden=$})},null,8,["modelValue"])]}),_:1}))]}),_:1},8,["model"])]}),_:1},8,["modelValue","title"])):x("",!0)]}),_:1})}}}),Tu=H({__name:"Blocks",setup:function(a){var e=oe(),t=e.project,n=e.engine,r=[{name:"add",icon:"vtj-icon-plus"}],i={id:"",name:"",title:""},l={name:[{required:!0,message:"请输入组件名称",trigger:"blur"}],title:[{required:!0,message:"请输入标题备注",trigger:"blur"}]},o=S(),s=S(),c=U(function(){return t.blocks.value}),v=S(!1),f=function(k){var V;return k.id===((V=t.current.value)===null||V===void 0?void 0:V.id)},p=function(){s.value=z({},i),v.value=!0},y=function(){var h=G(T().mark(function k(){var V;return T().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,o.value.validate().catch(function(O){return!1});case 2:if(!D.sent){D.next=15;break}if(!t.existBlockName(s.value)){D.next=6;break}return Se.warning({message:"已存在相同名称的区块，请更换名称"}),D.abrupt("return");case 6:if(!s.value.id){D.next=13;break}return D.next=9,n.service.getFile(s.value.id);case 9:V=D.sent,t.updateBlock(s.value,V),D.next=14;break;case 13:t.addBlock(s.value);case 14:v.value=!1;case 15:case"end":return D.stop()}},k)}));return function(){return h.apply(this,arguments)}}(),g=function(k){s.value=k,v.value=!0},w=function(){var h=G(T().mark(function k(V){return T().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,we.confirm("确定删除？","提示",{type:"warning"});case 2:if(D.t0=D.sent,!D.t0){D.next=5;break}t.removeBlock(V.id);case 5:case"end":return D.stop()}},k)}));return function(V){return h.apply(this,arguments)}}(),b=function(){var h=G(T().mark(function k(V){var I,D;return T().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return I=V.id,C.next=3,n.service.getFile(I);case 3:D=C.sent,t.activeFile(D);case 5:case"end":return C.stop()}},k)}));return function(V){return h.apply(this,arguments)}}();return function(h,k){return m(),j(d(Yn),{title:"区块管理",tools:r,onToolClick:p},{default:_(function(V){var I=V.span;return[E(d(vt),{list:c.value,span:I,active:f,type:"Schema",editable:"",removable:"",onEdit:g,onRemove:w,onClick:b},null,8,["list","span"]),v.value?(m(),j(d(ge),{key:0,modelValue:v.value,"onUpdate:modelValue":k[2]||(k[2]=function(D){return v.value=D}),title:s.value.id?"修改":"新增",width:"500px",submit:"",cancel:"",onSubmit:y},{default:_(function(){return[E(d(ve),{ref_key:"formRef",ref:o,size:"small",model:s.value,rules:l},{default:_(function(){return[E(d(ne),{label:"组件名称",prop:"name"},{default:_(function(){return[E(d(ue),{modelValue:s.value.name,"onUpdate:modelValue":k[0]||(k[0]=function(D){return s.value.name=D})},null,8,["modelValue"])]}),_:1}),E(d(ne),{label:"标题备注",prop:"title"},{default:_(function(){return[E(d(ue),{modelValue:s.value.title,"onUpdate:modelValue":k[1]||(k[1]=function(D){return s.value.title=D})},null,8,["modelValue"])]}),_:1})]}),_:1},8,["model"])]}),_:1},8,["modelValue","title"])):x("",!0)]}),_:1})}}}),Au=W("i",{class:"vtj-icon-pc"},null,-1),Iu=W("i",{class:"vtj-icon-phone"},null,-1),Ou=W("i",{class:"vtj-icon-pad"},null,-1),Ru=W("i",{class:"vtj-icon-undo"},null,-1),Nu=W("i",{class:"vtj-icon-redo"},null,-1),xu=H({__name:"Toolbar",setup:function(a){var e=oe(),t=e.engine,n=S("pc"),r=U(function(){var c=t.simulator.history.value||{},v=c.index,f=v===void 0?0:v,p=c.list,y=p===void 0?[]:p;return f<y.length-1}),i=U(function(){var c=t.simulator.history.value||{},v=c.index,f=v===void 0?0:v;return c.list,f>0}),l=function(){var v;(v=t.simulator.history.value)===null||v===void 0||v.back()},o=function(){var v;(v=t.simulator.history.value)===null||v===void 0||v.go()},s=function(v){N.emit(nr,v)};return function(c,v){return m(),A("div",null,[E(d(ln),{size:"small",modelValue:n.value,"onUpdate:modelValue":v[0]||(v[0]=function(f){return n.value=f}),onChange:s},{default:_(function(){return[E(d(tt),{label:"pc"},{default:_(function(){return[Au]}),_:1}),E(d(tt),{label:"mobile"},{default:_(function(){return[Iu]}),_:1}),E(d(tt),{label:"pad"},{default:_(function(){return[Ou]}),_:1})]}),_:1},8,["modelValue"]),x("",!0),E(d(Br),null,{default:_(function(){return[E(d(ye),{type:"default",size:"small",onClick:l,disabled:!r.value},{default:_(function(){return[Ru]}),_:1},8,["disabled"]),E(d(ye),{type:"default",size:"small",onClick:o,disabled:!i.value},{default:_(function(){return[Nu]}),_:1},8,["disabled"])]}),_:1})])}}}),Fu={key:0,class:"vtj-outline__actions"},Bu=["onClick"],Lu=["onClick"],Uu=["onClick"],Ju=["onClick"],Mu=["onClick"],zu=["onClick"],Wu={class:"vtj-outline__status"},Hu={key:0,class:"vtj-icon-invisible",title:"不可见"},Gu={key:1,class:"vtj-icon-lock",title:"已锁定"},Ku=H({__name:"Outline",setup:function(a){var e=oe(),t=e.engine,n=e.project,r=e.assets,i=U(function(){var D;return(D=t.skeleton.widgetInstances.designer)===null||D===void 0?void 0:D.designer}),l=U(function(){var D;return(D=i.value.selected)===null||D===void 0||(D=D.value)===null||D===void 0?void 0:D.node.id}),o=function(O){return O.root===null},s=S([]);function c(D){return fe(D)?"Block":D.slot&&D.slot.name?`#${D.slot.name}`:"Node"}function v(D){var O=[];return D.forEach(function(C){var $={id:C.id,label:C.name,nodeType:c(C),node:C,children:[]};Array.isArray(C.children)&&($.children=v(C.children)),O.push($)}),O}function f(){s.value=n.current.value?v([n.current.value]):[]}pe(n.current,f,{immediate:!0}),N.on(Q,f),Xe(function(){N.off(Q,f)});var p=function(){var D=G(T().mark(function O(C,$,R){var L,B,K,ie,Z;return T().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(L=C.data,B=$.data.node,K=n.current.value,!(!K||!i.value||!B)){F.next=3;break}return F.abrupt("return");case 3:return ie=L.node,F.next=6,i.value.getDropSlot(R==="inner"?B:B.parent);case 6:ie.slot=F.sent,Z={before:"left",after:"right"}[R]||"inner",K.move(ie,B,Z),N.emit(qe,ie);case 9:case"end":return F.stop()}},O)}));return function(C,$,R){return D.apply(this,arguments)}}(),y=function(O){var C=O.data;return fe(C.node)||C.node.lock?!1:C.node.name!=="template"},g=function(O,C,$){var R=O.data,L=C.data;if(L.node.lock||fe(L.node)&&["prev","next"].includes($))return!1;var B=n.current.value;if(!B)return!1;var K=r.componentMap[R.node.name];if($==="inner")return B.allowDrop(K,L.node,r);{var ie=L.node.parent;return ie&&B.allowDrop(K,ie,r)}},w=function(O,C){O.invisible=C,N.emit(Q,O),N.emit(qe,O)},b=function(O,C){O.lock=C,N.emit(Q,O),N.emit(qe,O)},h=function(O){var C=O==null?void 0:O.node;!C||C.invisible||N.emit(dn,C)},k=function(O){var C,$,R=(C=O.target)===null||C===void 0?void 0:C.__vueParentComponent;if(R){var L=($=R.ctx)===null||$===void 0||($=$.node)===null||$===void 0?void 0:$.data;L&&(L.node.invisible||N.emit(vn,L.node))}},V=function(O){O.copy(),N.emit(qe,O)},I=function(O){we.confirm("确定删除吗？","提示",{type:"warning"}).then(function(){O.dispose(),N.emit(qe,O)})};return function(D,O){return m(),j(Te,{title:"大纲树",class:"vtj-outline"},{default:_(function(){return[E(d(un),{data:s.value,"node-key":"id","default-expand-all":"",draggable:"","empty-text":"请新建或打开文件","current-node-key":l.value,"highlight-current":!0,"expand-on-click-node":!1,"allow-drop":g,"allow-drag":y,onCurrentChange:h,onNodeDrop:p,onMouseover:k},{default:_(function(C){var $=C.data;return[(m(),A("div",{key:$.node.id,class:"vtj-outline__item"},[W("span",null,[ae(re($.label)+": ",1),W("i",{class:ce(`is-${$.nodeType}`)},re($.nodeType),3)]),o($.node)?x("",!0):(m(),A("span",Fu,[$.node.lock?x("",!0):(m(),A("i",{key:0,onClick:de(function(R){return b($.node,!0)},["stop"]),class:"vtj-icon-lock",title:"锁定"},null,8,Bu)),$.node.lock?(m(),A("i",{key:1,onClick:de(function(R){return b($.node,!1)},["stop"]),class:"vtj-icon-unlock",title:"解锁"},null,8,Lu)):x("",!0),!$.node.invisible&&!$.node.lock?(m(),A("i",{key:2,onClick:de(function(R){return w($.node,!0)},["stop"]),class:"vtj-icon-invisible",title:"设置隐藏"},null,8,Uu)):x("",!0),$.node.invisible&&!$.node.lock?(m(),A("i",{key:3,onClick:de(function(R){return w($.node,!1)},["stop"]),class:"vtj-icon-visible",title:"设置显示"},null,8,Ju)):x("",!0),$.node.root!==$.node&&!$.node.lock?(m(),A("i",{key:4,onClick:function(L){return V($.node)},class:"vtj-icon-copy",title:"复制"},null,8,Mu)):x("",!0),$.node.root!==$.node&&!$.node.lock?(m(),A("i",{key:5,onClick:de(function(R){return I($.node)},["stop"]),class:"vtj-icon-remove",title:"删除"},null,8,zu)):x("",!0)])),W("span",Wu,[$.node.invisible?(m(),A("i",Hu)):x("",!0),$.node.lock?(m(),A("i",Gu)):x("",!0)])]))]}),_:1},8,["data","current-node-key"])]}),_:1})}}}),qu={class:"vtj-setting-panel"},Qu=H({__name:"Properties",setup:function(a){var e=oe(),t=e.assets,n=Pe(),r=n.selected,i=U(function(){var D;return(D=r.value)===null||D===void 0?void 0:D.node}),l=li(i,t),o=l.commonProps,s=l.componentProps,c=l.onChange,v=l.isExist,f=l.addCustom,p=l.customProps,y=l.removeProp,g=[{name:"add",icon:"vtj-icon-plus"}],w={name:[{required:!0,message:"熟悉名称为必填项"}]},b=Fe({name:""}),h=S(!1),k=function(O){h.value=!0,b.name=""},V=function(){var O=Object.keys(i.value.props);b.name&&!v(b.name)&&!O.includes(b.name)?(f(b.name),h.value=!1):Ie.warning({message:"已存在该属性名称"})},I=function(){var D=G(T().mark(function O(C){return T().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,we.confirm("确定删除?","提示",{type:"warning"}).catch(function(L){return!1});case 2:if(R.t0=R.sent,!R.t0){R.next=5;break}y(C);case 5:case"end":return R.stop()}},O)}));return function(C){return D.apply(this,arguments)}}();return function(D,O){return m(),A("div",qu,[E(d(be),{title:"通用属性"},{default:_(function(){return[E(d(ve),{size:"small","label-width":"100px",onKeydown:O[0]||(O[0]=dt(de(function(){},["prevent","stop"]),["enter"]))},{default:_(function(){return[(m(!0),A(X,null,ee(d(o),function(C){return m(),j(d(Re),se({key:`${C.name}_${i.value.id}`},C,{onChange:d(c)}),null,16,["onChange"])}),128))]}),_:1})]}),_:1}),d(s).length?(m(),j(d(be),{key:0,title:"组件属性"},{default:_(function(){return[E(d(ve),{size:"small","label-width":"100px",onKeydown:O[1]||(O[1]=dt(de(function(){},["prevent","stop"]),["enter"]))},{default:_(function(){return[(m(!0),A(X,null,ee(d(s),function(C){return m(),j(d(Re),se({key:`${C.name}_${i.value.id}`},C,{onChange:d(c)}),null,16,["onChange"])}),128))]}),_:1})]}),_:1})):x("",!0),E(d(be),{title:"自定义属性",tools:g,onToolClick:k},{default:_(function(){return[E(d(ve),{size:"small","label-width":"100px",onKeydown:O[2]||(O[2]=dt(de(function(){},["prevent","stop"]),["enter"]))},{default:_(function(){return[(m(!0),A(X,null,ee(d(p),function(C){return m(),j(d(Re),se({key:`${C.name}_${i.value.id}`},C,{removable:"",onChange:d(c),onRemove:I}),null,16,["onChange"])}),128))]}),_:1})]}),_:1}),E(d(ge),{modelValue:h.value,"onUpdate:modelValue":O[4]||(O[4]=function(C){return h.value=C}),title:"新增属性",width:"400px",submit:"",cancel:"",onSubmit:V},{default:_(function(){return[E(d(ve),{ref:"formRef",size:"small",rules:w,model:b},{default:_(function(){return[E(d(ne),{label:"属性名称",prop:"name"},{default:_(function(){return[E(d(ue),{modelValue:b.name,"onUpdate:modelValue":O[3]||(O[3]=function(C){return b.name=C})},null,8,["modelValue"])]}),_:1})]}),_:1},8,["model"])]}),_:1},8,["modelValue"])])}}}),Zu={class:"vtj-setting-panel vtj-events"},Yu=H({__name:"Events",setup:function(a){var e=oe(),t=e.assets,n=Pe(),r=n.selected,i=U(function(){var b;return(b=r.value)===null||b===void 0?void 0:b.node}),l=oi(i,t),o=l.mouseEventList,s=l.keyboardEventList,c=l.componentEventList,v=S(!1),f=S(),p=S(Symbol()),y=function(h){p.value=Symbol(),f.value=h,v.value=!0},g=function(h){f.value&&i.value.setEvent(f.value.name,h)},w=function(){var b=G(T().mark(function h(k){return T().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,we.confirm("确定删除事件绑定？","提示",{type:"warning"}).catch(function(D){return!1});case 2:if(I.t0=I.sent,!I.t0){I.next=5;break}i.value.removeEvent(k),f.value=null,v.value=!1;case 5:case"end":return I.stop()}},h)}));return function(k){return b.apply(this,arguments)}}();return function(b,h){return m(),A("div",Zu,[E(d(be),{title:"组件事件"},{default:_(function(){return[(m(!0),A(X,null,ee(d(c),function(k){return m(),j(d(Ee),{title:k.name,active:!!k.event,removable:!!k.event,background:!1,editable:"",clickable:"",onClick:function(I){return y(k)},onEdit:function(I){return y(k)},onRemove:function(I){return w(k.name)}},null,8,["title","active","removable","onClick","onEdit","onRemove"])}),256)),d(c).length===0?(m(),j(d(he),{key:0,"image-size":50,description:"该组件无自带事件"})):x("",!0)]}),_:1}),E(d(be),{title:"鼠标事件"},{default:_(function(){return[(m(!0),A(X,null,ee(d(o),function(k){return m(),j(d(Ee),{title:k.name,active:!!k.event,removable:!!k.event,background:!1,editable:"",clickable:"",onClick:function(I){return y(k)},onEdit:function(I){return y(k)},onRemove:function(I){return w(k.name)}},null,8,["title","active","removable","onClick","onEdit","onRemove"])}),256))]}),_:1}),E(d(be),{title:"键盘事件"},{default:_(function(){return[(m(!0),A(X,null,ee(d(s),function(k){return m(),j(d(Ee),{title:k.name,active:!!k.event,removable:!!k.event,background:!1,editable:"",clickable:"",onClick:function(I){return y(k)},onEdit:function(I){return y(k)},onRemove:function(I){return w(k.name)}},null,8,["title","active","removable","onClick","onEdit","onRemove"])}),256))]}),_:1}),f.value?(m(),j(d(Oi),se({key:p.value,modelValue:v.value,"onUpdate:modelValue":h[0]||(h[0]=function(k){return v.value=k}),node:i.value},f.value,{onSubmit:g,onRemove:w}),null,16,["modelValue","node"])):x("",!0)])}}}),Xu=H({__name:"JSDataDialog",props:ni,setup:function(a){var e=a,t=ri(e),n=t.title,r=t.model,i=t.formRef,l=t.dialogRef,o=t.editorRef,s=t.rules,c=t.onSubmit,v=t.disabled,f=function(y){r.value.value=y};return function(p,y){return m(),j(d(Vt),se({ref_key:"dialogRef",ref:l,title:d(n),width:"1000px",height:"600px",clearable:!1},p.$attrs,{onSubmit:d(c),onPick:f}),{default:_(function(){return[E(d(ve),{ref_key:"formRef",ref:i,size:"small","label-position":"top",model:d(r),rules:d(s)},{default:_(function(){return[E(d(ne),{label:e.nameLabel,prop:"name"},{default:_(function(){return[p.type==="lifeCycles"?(m(),j(d(Et),{key:0,modelValue:d(r).name,"onUpdate:modelValue":y[0]||(y[0]=function(g){return d(r).name=g}),disabled:d(v)},{default:_(function(){return[(m(!0),A(X,null,ee(d(ca),function(g){return m(),j(d(jt),{label:g,value:g},null,8,["label","value"])}),256))]}),_:1},8,["modelValue","disabled"])):(m(),j(d(ue),{key:1,modelValue:d(r).name,"onUpdate:modelValue":y[1]||(y[1]=function(g){return d(r).name=g}),disabled:d(v)},null,8,["modelValue","disabled"]))]}),_:1},8,["label"]),E(d(ne),{label:e.valueLabel},{default:_(function(){return[E(d(Ce),{ref_key:"editorRef",ref:o,border:!0,height:"380px",width:"100%",dark:"","model-value":d(r).value.value},null,8,["model-value"])]}),_:1},8,["label"])]}),_:1},8,["model","rules"])]}),_:1},16,["title","onSubmit"])}}}),el=H({__name:"WatchDataDialog",props:ai,setup:function(a){var e=a,t=ii(e),n=t.title,r=t.model,i=t.onSubmit,l=t.dialogRef,o=t.sourceRef,s=t.handlerRef,c=t.formRef,v=function(p){r.handler.value=p};return function(f,p){return m(),j(d(Vt),se({ref_key:"dialogRef",ref:l,title:d(n),width:"1000px",height:"600px",clearable:!1},f.$attrs,{onSubmit:d(i),onPick:v}),{default:_(function(){return[E(d(ve),{ref_key:"formRef",ref:c,size:"small","label-position":"top"},{default:_(function(){return[E(d(ne),{label:"侦听源 [ JSFunction ]",prop:"source"},{default:_(function(){return[E(d(Ce),{ref_key:"sourceRef",ref:o,border:!0,height:"100px",width:"100%",dark:"","model-value":d(r).source.value},null,8,["model-value"])]}),_:1}),E(d(ne),{label:"deep",prop:"deep"},{default:_(function(){return[E(d(Me),{modelValue:d(r).deep,"onUpdate:modelValue":p[0]||(p[0]=function(y){return d(r).deep=y})},null,8,["modelValue"])]}),_:1}),E(d(ne),{label:"immediate",prop:"immediate"},{default:_(function(){return[E(d(Me),{modelValue:d(r).immediate,"onUpdate:modelValue":p[1]||(p[1]=function(y){return d(r).immediate=y})},null,8,["modelValue"])]}),_:1}),E(d(ne),{label:"处理函数 [ JSFunction ]",prop:"handler"},{default:_(function(){return[E(d(Ce),{ref_key:"handlerRef",ref:s,border:!0,height:"180px",width:"100%",dark:"","model-value":d(r).handler.value},null,8,["model-value"])]}),_:1})]}),_:1},512)]}),_:1},16,["title","onSubmit"])}}}),et=H({__name:"BlockScriptGroup",props:{block:{},type:{},dataType:{},title:{},nameLabel:{},valueLabel:{},defaults:{}},setup:function(a){var e=a,t=U(function(){return e.block}),n=[{name:"add",icon:"vtj-icon-plus"}],r=ti(t,e.type),i=r.data,l=r.list,o=r.onAdd,s=r.onEdit,c=r.onRemove,v=r.visible,f=r.keyRef;return function(p,y){return m(),j(d(be),{title:e.title,tools:n,onToolClick:d(o)},{default:_(function(){return[E(d(ve),{size:"small","label-width":"100px",onKeydown:y[0]||(y[0]=dt(de(function(){},["prevent","stop"]),["enter"]))},{default:_(function(){return[(m(!0),A(X,null,ee(d(l),function(g){return m(),j(d(Ee),{title:g.title,background:!1,editable:"",clickable:"",removable:"",onClick:function(b){return d(s)(g.model)},onEdit:function(b){return d(s)(g.model)},onRemove:function(b){return d(c)(g.model)}},null,8,["title","onClick","onEdit","onRemove"])}),256)),d(l).length?x("",!0):(m(),j(d(he),{key:0,"image-size":40}))]}),_:1}),d(v)&&e.type!=="watch"?(m(),j(Xu,{key:d(f),block:t.value,data:d(i),title:e.title,type:e.type,nameLabel:e.nameLabel,valueLabel:e.valueLabel,dataType:e.dataType,defaults:e.defaults,modelValue:d(v),"onUpdate:modelValue":y[1]||(y[1]=function(g){return hn(v)?v.value=g:null})},null,8,["block","data","title","type","nameLabel","valueLabel","dataType","defaults","modelValue"])):x("",!0),d(v)&&e.type==="watch"?(m(),j(el,{key:d(f),block:t.value,data:d(i),modelValue:d(v),"onUpdate:modelValue":y[2]||(y[2]=function(g){return hn(v)?v.value=g:null})},null,8,["block","data","modelValue"])):x("",!0)]}),_:1},8,["title","onToolClick"])}}}),tl={class:"vtj-setting-panel"},nl=H({__name:"BlockScript",setup:function(a){var e=Pe(),t=e.selected,n=U(function(){var r;return(r=t.value)===null||r===void 0?void 0:r.node});return function(r,i){return m(),A("div",tl,[E(et,{title:"状态数据",type:"state",block:n.value,nameLabel:"状态数据名称",valueLabel:"状态初始值 [ JSExpression ]","data-type":"JSExpression",defaults:"null"},null,8,["block"]),E(et,{title:"计算属性",type:"computed",block:n.value,nameLabel:"计算属性名称",valueLabel:"计算函数 [ JSFunction ]","data-type":"JSFunction",defaults:"() => { }"},null,8,["block"]),E(et,{title:"组件方法",type:"methods",block:n.value,nameLabel:"方法名称",valueLabel:"方法函数 [ JSFunction ]","data-type":"JSFunction",defaults:"() => { }"},null,8,["block"]),E(et,{title:"生命周期",type:"lifeCycles",block:n.value,nameLabel:"名称",valueLabel:"函数 [ JSFunction ]","data-type":"JSFunction",defaults:"() => { }"},null,8,["block"]),E(et,{title:"Watch",type:"watch","data-type":"JSFunction",block:n.value},null,8,["block"])])}}}),rl=H({__name:"Css",setup:function(a){var e=Pe(),t=e.selected,n=U(function(){var o;return(o=t.value)===null||o===void 0?void 0:o.node}),r=[{name:"save",icon:"vtj-icon-np-save"}],i=S(),l=function(){var s,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,v=(s=i.value)===null||s===void 0?void 0:s.getEditor().getValue();v!==n.value.css&&(n.value.setCss(v),c&&Se.success({message:"保存成功"}))};return function(o,s){return m(),j(d(Te),{class:"vtj-setting-css",title:null,"body-padding":!1},{default:_(function(){return[n.value?(m(),j(d(be),{key:0,title:"CSS",tools:r,onToolClick:s[0]||(s[0]=function(c){return l(!0)})},{default:_(function(){return[E(d(Ce),{ref_key:"editorRef",ref:i,height:"100%",lang:"css",dark:"","model-value":n.value.css,onBlur:l},null,8,["model-value"])]}),_:1})):x("",!0)]}),_:1})}}}),al={class:"vtj-schema"},il=H({__name:"Schema",setup:function(a){var e=oe(),t=e.project,n=e.emitter,r=S(""),i=S(),l=[{name:"save",icon:"vtj-icon-np-save"}],o=function(){t.current.value?r.value=JSON.stringify(t.current.value.toDsl(),null,2):r.value=""},s=function(){var c=G(T().mark(function v(){var f,p;return T().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(t.current.value){g.next=2;break}return g.abrupt("return");case 2:if(f=i.value.getEditor().getValue(),!f){g.next=9;break}return g.next=6,we.confirm("手动修改DSL有风险，可能导致页面无法加载，请确认您的操作无误。","提示",{type:"warning"}).catch(function(w){return!1});case 6:if(g.sent){g.next=8;break}return g.abrupt("return");case 8:try{p=JSON.parse(f),t.activeFile(p),n.emit(Q,t.current.value),Se.success({message:"修改成功"})}catch(w){Ie.warning({message:w.message,title:"代码错误"})}case 9:case"end":return g.stop()}},v)}));return function(){return c.apply(this,arguments)}}();return n.on(Q,o),pe(t.current,o),_t(function(){o()}),Xe(function(){n.off(Q,o)}),function(c,v){return m(),A("div",al,[E(d(be),{class:"vtj-schema__panel",subtitle:"手动修改DSL有风险，可能导致页面无法加载，请确认您的操作无误。","body-padding":!1,tools:l,onToolClick:s},{default:_(function(){return[E(d(Ce),{ref_key:"editorRef",ref:i,height:"100%",lang:"json",dark:"","model-value":r.value},null,8,["model-value"])]}),_:1})])}}}),ul=W("i",{class:"vtj-icon-refresh"},null,-1),ll=W("i",{class:"vtj-icon-setting"},null,-1),ol=W("i",{class:"vtj-icon-outline"},null,-1),sl=H({__name:"Actions",props:{coder:{type:Boolean,default:!1},copy:{type:Boolean,default:!1}},setup:function(a){var e=a,t=oe(),n=t.project,r=t.engine,i=t.emitter,l=S(!1),o=S(!1),s=function(){if(n.current.value){var b,h=Pe(),k=h.designer;k.selected.value=null,(b=r.simulator.renderer)===null||b===void 0||b.render(n.current.value)}else Se.warning({message:"请先打开文件"})},c=function(){var b,h=(b=n.current.value)===null||b===void 0?void 0:b.id;if(h){var k=n.getFile(h);i.emit(ar,k)}else Se.warning({message:"请先打开文件"})},v=function(){if(n.current.value){var b=Pe(),h=b.designer;h.setSelected(n.current.value);var k=rt(r.skeleton.regionInstances.setting);k&&k.change(0)}else Se.warning({message:"请先打开文件"})},f=function(){n.current.value?rt(r.skeleton.regionInstances.apps).setCurrentWidget("outline"):Se.warning({message:"请先打开文件"})},p=function(){i.emit(ur,l)},y=function(){i.emit(lr,o)},g=function(){var b=n.getHomePage();if(!b){Se.warning({message:"请先设置项目首页"});return}i.emit(ir,b)};return function(w,b){return m(),A("div",null,[E(d(ye),{onClick:s,type:"default",size:"small",title:"刷新"},{default:_(function(){return[ul]}),_:1}),E(d(ye),{type:"default",size:"small",title:"页面设置",onClick:v},{default:_(function(){return[ll]}),_:1}),E(d(ye),{type:"default",size:"small",title:"页面大纲树",onClick:f},{default:_(function(){return[ol]}),_:1}),E(d(on),{direction:"vertical"}),E(d(ye),{type:"primary",size:"small",icon:d(Er),onClick:g},{default:_(function(){return[ae(" 浏览 ")]}),_:1},8,["icon"]),E(d(ye),{type:"success",size:"small",onClick:c},{default:_(function(){return[ae("预览")]}),_:1}),e.coder?(m(),j(d(ye),{key:0,type:"warning",size:"small",onClick:p,loading:l.value},{default:_(function(){return[ae(" 出码 ")]}),_:1},8,["loading"])):x("",!0),e.copy?(m(),j(d(ye),{key:1,type:"danger",size:"small",onClick:y,loading:o.value},{default:_(function(){return[ae(" 复制 ")]}),_:1},8,["loading"])):x("",!0)])}}}),cl={class:"vtj-setting-panel vtj-directives"},dl=H({__name:"Directives",setup:function(a){var e=oe(),t=e.assets,n=Pe(),r=n.selected,i=U(function(){var h;return(h=r.value)===null||h===void 0?void 0:h.node}),l=U(function(){return t.componentMap[i.value.name]}),o=function(k){return k.arg?typeof k.arg=="string"?k.arg:Ye(k.arg,{}):"modelValue"},s=pi(i,l),c=s.vIf,v=s.vShow,f=s.vBind,p=s.vFor,y=s.vModels,g=s.onValueChange,w=s.onForChange,b=s.onModelChange;return function(h,k){return m(),A("div",cl,[E(d(be),{title:"内置指令"},{default:_(function(){return[E(d(ve),{"label-width":"80px"},{default:_(function(){return[E(d(Re),{name:"vIf",label:"v-if",setters:"ExpressionSetter",value:d(c).value,onChange:d(g)},null,8,["value","onChange"]),E(d(Re),{name:"vShow",label:"v-show",value:d(v).value,setters:"ExpressionSetter",onChange:d(g)},null,8,["value","onChange"]),E(d(Re),{name:"vBind",label:"v-bind",setters:"ExpressionSetter",value:d(f).value,onChange:d(g)},null,8,["value","onChange"])]}),_:1})]}),_:1}),E(d(be),{title:"循环"},{default:_(function(){return[E(d(ve),{"label-width":"80px"},{default:_(function(){var V,I;return[E(d(Re),{name:"value",label:"循环数据",setters:"ExpressionSetter",value:d(p).value,onChange:d(w)},null,8,["value","onChange"]),E(d(Re),{name:"item",label:"迭代变量名",setters:{name:"InputSetter",props:{placeholder:"item"}},value:(V=d(p).iterator)===null||V===void 0?void 0:V.item,onChange:d(w)},null,8,["value","onChange"]),E(d(Re),{name:"index",label:"索引变量名",setters:{name:"InputSetter",props:{placeholder:"index"}},value:(I=d(p).iterator)===null||I===void 0?void 0:I.index,onChange:d(w)},null,8,["value","onChange"])]}),_:1})]}),_:1}),d(y).length?(m(),j(d(be),{key:0,title:"双向绑定"},{default:_(function(){return[(m(!0),A(X,null,ee(d(y),function(V,I){return m(),j(d(Ee),{title:`v-model: ${o(V)}`},{default:_(function(){return[E(d(ve),{"label-width":"80px"},{default:_(function(){return[E(d(Re),{name:I.toString(),label:"绑定变量",value:V.value,setters:"ExpressionSetter",onChange:d(b)},null,8,["name","value","onChange"])]}),_:2},1024)]}),_:2},1032,["title"])}),256))]}),_:1})):x("",!0)])}}}),vl=H({__name:"BlockDefineProps",props:{formData:{},block:{}},setup:function(a){var e=a,t=U(function(){return e.formData?"编辑属性":"新增属性"}),n={name:[{required:!0,message:"属性名称为必填项"}]},r=S(),i=S(),l=S(),o=Fe(e.formData||{name:"",type:"",required:!1,default:{type:"JSExpression",value:""}}),s=function(){var c=G(T().mark(function v(){var f;return T().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,r.value.validate().catch(function(g){return!1});case 2:if(!y.sent){y.next=5;break}f=l.value.getEditor().getValue(),o.default.value=f,Ae(o.default,{})&&(e.block.setProp(rt(o)),i.value.close());case 5:case"end":return y.stop()}},v)}));return function(){return c.apply(this,arguments)}}();return function(c,v){return m(),j(d(ge),{ref_key:"dialogRef",ref:i,title:t.value,width:"1000px",height:"600px",submit:"",cancel:"",onSubmit:s},{default:_(function(){return[E(d(ve),{ref_key:"formRef",ref:r,model:o,rules:n,size:"small","label-position":"top",class:"vtj-block-props__form"},{default:_(function(){return[E(d(ne),{label:"属性名称",prop:"name"},{default:_(function(){return[E(d(ue),{modelValue:o.name,"onUpdate:modelValue":v[0]||(v[0]=function(f){return o.name=f}),disabled:!!e.formData},null,8,["modelValue","disabled"])]}),_:1}),E(d(ne),{label:"数据类型",prop:"type"},{default:_(function(){return[E(d(Et),{modelValue:o.type,"onUpdate:modelValue":v[1]||(v[1]=function(f){return o.type=f}),multiple:""},{default:_(function(){return[(m(!0),A(X,null,ee(d(ma),function(f){return m(),j(d(jt),{value:f,label:f},null,8,["value","label"])}),256))]}),_:1},8,["modelValue"])]}),_:1}),E(d(ne),{label:"是否必须",prop:"required"},{default:_(function(){return[E(d(Me),{modelValue:o.required,"onUpdate:modelValue":v[2]||(v[2]=function(f){return o.required=f})},null,8,["modelValue"])]}),_:1}),E(d(ne),{label:"默认值 [ JSExpression ]",prop:"default"},{default:_(function(){return[E(d(Ce),{ref_key:"editorRef",ref:l,height:"250px","model-value":o.default.value||"",border:"",dark:""},null,8,["model-value"])]}),_:1})]}),_:1},8,["model"])]}),_:1},8,["title"])}}}),fl=H({__name:"BlockDefineEmits",props:{block:{},formData:{}},setup:function(a){var e=a,t=Fe(e.formData||{name:""}),n={name:[{required:!0,message:"事件名称为必填项"}]},r=S(),i=S(),l=function(){var o=G(T().mark(function s(){return T().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,i.value.validate().catch(function(f){return!1});case 2:if(v.t0=v.sent,!v.t0){v.next=5;break}e.block.setEmit(t.name),r.value.close();case 5:case"end":return v.stop()}},s)}));return function(){return o.apply(this,arguments)}}();return function(o,s){return m(),j(d(ge),{ref_key:"dialogRef",ref:r,title:"新增事件",width:"400px",height:"150px",submit:"",cancel:"",onSubmit:l},{default:_(function(){return[E(d(ve),{ref_key:"formRef",ref:i,model:t,rules:n,size:"small"},{default:_(function(){return[E(d(ne),{label:"事件名称",prop:"name"},{default:_(function(){return[E(d(ue),{modelValue:t.name,"onUpdate:modelValue":s[0]||(s[0]=function(c){return t.name=c})},null,8,["modelValue"])]}),_:1})]}),_:1},8,["model"])]}),_:1},512)}}}),pl=H({__name:"BlockDefineSlots",props:{block:{},formData:{}},setup:function(a){var e=a,t=Fe(e.formData||{name:""}),n={name:[{required:!0,message:"插槽名称为必填项"}]},r=S(),i=S(),l=function(){var o=G(T().mark(function s(){return T().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,i.value.validate().catch(function(f){return!1});case 2:if(v.t0=v.sent,!v.t0){v.next=5;break}e.block.setSlot(t.name),r.value.close();case 5:case"end":return v.stop()}},s)}));return function(){return o.apply(this,arguments)}}();return function(o,s){return m(),j(d(ge),{ref_key:"dialogRef",ref:r,title:"新增插槽",width:"400px",height:"150px",submit:"",cancel:"",onSubmit:l},{default:_(function(){return[E(d(ve),{ref_key:"formRef",ref:i,model:t,rules:n,size:"small"},{default:_(function(){return[E(d(ne),{label:"插槽名称",prop:"name"},{default:_(function(){return[E(d(ue),{modelValue:t.name,"onUpdate:modelValue":s[0]||(s[0]=function(c){return t.name=c})},null,8,["modelValue"])]}),_:1})]}),_:1},8,["model"])]}),_:1},512)}}}),ml=H({__name:"BlockInject",props:{block:{},formData:{}},setup:function(a){var e=a,t=U(function(){return e.formData?"编辑注入":"新增注入"}),n=Fe(e.formData||{name:"",from:"",default:{type:"JSExpression",value:""}}),r={name:[{required:!0,message:"注入名称为必填项"}]},i=S(),l=S(),o=S(),s=function(){var c=G(T().mark(function v(){var f;return T().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,o.value.validate().catch(function(g){return!1});case 2:if(!y.sent){y.next=5;break}f=l.value.getEditor().getValue(),n.default.value=f,Ae(n.default,{})&&(e.block.setInject(rt(n)),i.value.close());case 5:case"end":return y.stop()}},v)}));return function(){return c.apply(this,arguments)}}();return function(c,v){return m(),j(d(ge),{ref_key:"dialogRef",ref:i,title:t.value,width:"1000px",height:"600px",submit:"",cancel:"",onSubmit:s},{default:_(function(){return[E(d(ve),{ref_key:"formRef",ref:o,model:n,rules:r,size:"small","label-position":"top"},{default:_(function(){return[E(d(ne),{label:"注入名称",prop:"name"},{default:_(function(){return[E(d(ue),{modelValue:n.name,"onUpdate:modelValue":v[0]||(v[0]=function(f){return n.name=f}),disabled:!!e.formData},null,8,["modelValue","disabled"])]}),_:1}),E(d(ne),{label:"来源名称",prop:"from"},{default:_(function(){return[typeof n.from=="string"?(m(),j(d(ue),{key:0,modelValue:n.from,"onUpdate:modelValue":v[1]||(v[1]=function(f){return n.from=f})},null,8,["modelValue"])):x("",!0)]}),_:1}),E(d(ne),{label:"默认值",prop:"from"},{default:_(function(){return[E(d(Ce),{ref_key:"editorRef",ref:l,"model-value":n.default.value||"",dark:"",border:"",height:"300px"},null,8,["model-value"])]}),_:1})]}),_:1},8,["model"])]}),_:1},8,["title"])}}}),hl={key:0,class:"vtj-setting-panel vtj-advanced"},gl=H({__name:"Advanced",setup:function(a){var e=Pe(),t=e.selected,n=U(function(){var R,L=(R=t.value)===null||R===void 0?void 0:R.node;return fe(L)?L:null}),r=[{name:"add",icon:"vtj-icon-plus"}],i=U(function(){var R;return n.value?(R=n.value.props)===null||R===void 0?void 0:R.map(function(L){return typeof L=="string"?{name:L,required:!1,type:void 0,default:{type:"JSExpression",value:""}}:z({default:{type:"JSExpression",value:""},required:!1,type:void 0},L)}):[]}),l=U(function(){var R;return((R=n.value)===null||R===void 0?void 0:R.emits)||[]}),o=U(function(){var R;return((R=n.value)===null||R===void 0?void 0:R.slots)||[]}),s=U(function(){var R;return n.value?(R=n.value.inject)===null||R===void 0?void 0:R.map(function(L){return z({from:"",default:{type:"JSExpression",value:""}},L)}):[]}),c=S(!1),v=S(),f=S(!1),p=S(!1),y=S(),g=S(),w=function(){v.value=void 0,c.value=!0},b=function(L){v.value=L,c.value=!0},h=function(){var R=G(T().mark(function L(B){var K;return T().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,we.confirm("确定删除","提示",{type:"warning"}).catch(function(J){return!1});case 2:if(Z.t0=Z.sent,!Z.t0){Z.next=5;break}(K=n.value)===null||K===void 0||K.removeProp(B);case 5:case"end":return Z.stop()}},L)}));return function(B){return R.apply(this,arguments)}}(),k=function(){f.value=!0},V=function(){var R=G(T().mark(function L(B){var K;return T().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,we.confirm("确定删除","提示",{type:"warning"}).catch(function(J){return!1});case 2:if(Z.t0=Z.sent,!Z.t0){Z.next=5;break}(K=n.value)===null||K===void 0||K.removeEmit(B);case 5:case"end":return Z.stop()}},L)}));return function(B){return R.apply(this,arguments)}}(),I=function(){p.value=!0},D=function(){var R=G(T().mark(function L(B){var K;return T().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,we.confirm("确定删除","提示",{type:"warning"}).catch(function(J){return!1});case 2:if(Z.t0=Z.sent,!Z.t0){Z.next=5;break}(K=n.value)===null||K===void 0||K.removeSlot(B);case 5:case"end":return Z.stop()}},L)}));return function(B){return R.apply(this,arguments)}}(),O=function(){g.value=void 0,y.value=!0},C=function(){var R=G(T().mark(function L(B){var K;return T().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,we.confirm("确定删除","提示",{type:"warning"}).catch(function(J){return!1});case 2:if(Z.t0=Z.sent,!Z.t0){Z.next=5;break}(K=n.value)===null||K===void 0||K.removeInject(B);case 5:case"end":return Z.stop()}},L)}));return function(B){return R.apply(this,arguments)}}(),$=function(){var R=G(T().mark(function L(B){return T().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:g.value=B,y.value=!0;case 1:case"end":return ie.stop()}},L)}));return function(B){return R.apply(this,arguments)}}();return function(R,L){return n.value?(m(),A("div",hl,[E(d(be),{title:"属性",tools:r,onToolClick:w},{default:_(function(){return[(m(!0),A(X,null,ee(i.value,function(B){return m(),j(d(Ee),{title:B.name,editable:"",removable:"",clickable:"",onRemove:function(ie){return h(B)},onClick:function(ie){return b(B)},onEdit:function(ie){return b(B)}},null,8,["title","onRemove","onClick","onEdit"])}),256)),i.value.length===0?(m(),j(d(he),{key:0,"image-size":50})):x("",!0),c.value?(m(),j(vl,{key:1,block:n.value,"form-data":v.value,modelValue:c.value,"onUpdate:modelValue":L[0]||(L[0]=function(B){return c.value=B})},null,8,["block","form-data","modelValue"])):x("",!0)]}),_:1}),E(d(be),{title:"事件",tools:r,onToolClick:k},{default:_(function(){return[(m(!0),A(X,null,ee(l.value,function(B){return m(),j(d(Ee),{title:B,removable:"",onRemove:function(ie){return V(B)}},null,8,["title","onRemove"])}),256)),l.value.length===0?(m(),j(d(he),{key:0,"image-size":50})):x("",!0),f.value?(m(),j(fl,{key:1,modelValue:f.value,"onUpdate:modelValue":L[1]||(L[1]=function(B){return f.value=B}),block:n.value},null,8,["modelValue","block"])):x("",!0)]}),_:1}),E(d(be),{title:"插槽",tools:r,onToolClick:I},{default:_(function(){return[(m(!0),A(X,null,ee(o.value,function(B){return m(),j(d(Ee),{title:B,removable:"",onRemove:function(ie){return D(B)}},null,8,["title","onRemove"])}),256)),o.value.length===0?(m(),j(d(he),{key:0,"image-size":50})):x("",!0),p.value?(m(),j(pl,{key:1,modelValue:p.value,"onUpdate:modelValue":L[2]||(L[2]=function(B){return p.value=B}),block:n.value},null,8,["modelValue","block"])):x("",!0)]}),_:1}),E(d(be),{title:"注入",tools:r,onToolClick:O},{default:_(function(){return[(m(!0),A(X,null,ee(s.value,function(B){return m(),j(d(Ee),{title:B.name,editable:"",removable:"",clickable:"",onRemove:function(ie){return C(B)},onClick:function(ie){return $(B)},onEdit:function(ie){return $(B)}},null,8,["title","onRemove","onClick","onEdit"])}),256)),s.value.length===0?(m(),j(d(he),{key:0,"image-size":50})):x("",!0),y.value?(m(),j(ml,{key:1,modelValue:y.value,"onUpdate:modelValue":L[3]||(L[3]=function(B){return y.value=B}),"form-data":g.value,block:n.value},null,8,["modelValue","form-data","block"])):x("",!0)]}),_:1})])):x("",!0)}}}),yl={class:"vtj-switcher"},bl=W("i",{class:"vtj-icon-back vtj-switcher__back"},null,-1),kl={key:1},_l=H({__name:"Switcher",props:{link:{}},setup:function(a){var e=a,t=oe(),n=t.project,r=U(function(){var l;return(l=n.current.value)===null||l===void 0?void 0:l.title}),i=function(){e.link&&(location.href=e.link)};return function(l,o){return m(),A("div",yl,[E(d(ye),{size:"small",round:"",onClick:i},{default:_(function(){return[bl,W("span",null,re(d(n).name),1),r.value?(m(),j(d(on),{key:0,direction:"vertical"})):x("",!0),r.value?(m(),A("span",kl,re(r.value),1)):x("",!0)]}),_:1})])}}}),wl=["src"],El=H({__name:"Docs",props:{url:{default:"https://element-plus.org/zh-CN/"}},setup:function(a){var e=a,t=S(),n=null;_t(function(){var i;n||(n=Lr.service({target:(i=t.value)===null||i===void 0?void 0:i.$el}))}),Xe(function(){n.close(),n=null});var r=function(){n.close()};return function(i,l){return m(),j(Te,{ref_key:"panel",ref:t,title:null,class:"vtj-docs","body-padding":!1},{default:_(function(){return[W("iframe",{ref:"frame",src:e.url,onLoad:r},null,40,wl)]}),_:1},512)}}}),jl=H({__name:"ApiDialogForm",props:{model:{},project:{}},setup:function(a){var e=a,t={name:"",title:"",url:"",method:"GET",settings:{type:"JSExpression",value:""}},n=S(Ge(e.model||z({},t))),r=S(),i=S(),l=S(),o={name:[{required:!0,message:"接口名称为必填项"}],title:[{required:!0,message:"标题描述为必填项"}],url:[{required:!0,message:"请求地址为必填项"}]},s=U(function(){return e.model?"编辑Api":"新增Api"}),c=function(){var v=G(T().mark(function f(){var p;return T().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,r.value.validate().catch(function(w){return!1});case 2:if(!g.sent){g.next=5;break}p=i.value.getEditor().getValue(),n.value.settings.value=p,Ae(n.value.settings,{})&&(e.project.setApi(n.value),l.value.close());case 5:case"end":return g.stop()}},f)}));return function(){return v.apply(this,arguments)}}();return function(v,f){return m(),j(d(ge),{ref_key:"dialogRef",ref:l,width:"1000px",height:"600px",title:s.value,submit:"",cancel:"",onSubmit:c},{default:_(function(){return[E(d(ve),{ref_key:"formRef",ref:r,size:"small",model:n.value,rules:o,"label-position":"top"},{default:_(function(){return[E(d(ne),{label:"接口名称",prop:"name"},{default:_(function(){return[E(d(ue),{modelValue:n.value.name,"onUpdate:modelValue":f[0]||(f[0]=function(p){return n.value.name=p}),disabled:!!e.model},null,8,["modelValue","disabled"])]}),_:1}),E(d(ne),{label:"标题描述",prop:"title"},{default:_(function(){return[E(d(ue),{modelValue:n.value.title,"onUpdate:modelValue":f[1]||(f[1]=function(p){return n.value.title=p})},null,8,["modelValue"])]}),_:1}),E(d(ne),{label:"接口地址",prop:"url"},{default:_(function(){return[E(d(ue),{modelValue:n.value.url,"onUpdate:modelValue":f[2]||(f[2]=function(p){return n.value.url=p})},null,8,["modelValue"])]}),_:1}),E(d(ne),{label:"请求类型",prop:"method"},{default:_(function(){return[E(d(ln),{modelValue:n.value.method,"onUpdate:modelValue":f[3]||(f[3]=function(p){return n.value.method=p})},{default:_(function(){return[(m(!0),A(X,null,ee(d(ha),function(p){return m(),j(d(qr),{label:p},null,8,["label"])}),256))]}),_:1},8,["modelValue"])]}),_:1}),E(d(ne),{label:"请求配置 [ JSExpression ]",prop:"settings"},{default:_(function(){var p;return[E(d(Ce),{ref_key:"editorRef",ref:i,"model-value":(p=n.value.settings)===null||p===void 0?void 0:p.value,border:"",dark:"",height:"180px"},null,8,["model-value"])]}),_:1})]}),_:1},8,["model"])]}),_:1},8,["title"])}}}),Cl={class:"vtj-apis__name"},Vl=H({__name:"Apis",setup:function(a){var e=oe(),t=e.project,n=[{name:"add",icon:"vtj-icon-plus"}],r=U(function(){return t.apis.value}),i=S(),l=S(!1),o=function(){i.value=void 0,l.value=!0},s=function(f){i.value=f,l.value=!0},c=function(){var v=G(T().mark(function f(p){return T().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,we.confirm("确定删除?","提示",{type:"warning"}).catch(function(w){return!1});case 2:if(g.t0=g.sent,!g.t0){g.next=5;break}t.removeApi(p.name);case 5:case"end":return g.stop()}},f)}));return function(p){return v.apply(this,arguments)}}();return function(v,f){return m(),j(d(Te),{class:"vtj-apis",title:"Api管理",tools:n,onToolClick:o},{default:_(function(){return[r.value.length?x("",!0):(m(),j(d(he),{key:0,"image-size":50})),(m(!0),A(X,null,ee(r.value,function(p){return m(),j(d(Ee),{editable:"",removable:"",clickable:"",onClick:function(g){return s(p)},onEdit:function(g){return s(p)},onRemove:function(g){return c(p)}},{title:_(function(){return[ae(re(p.title)+" ",1),W("i",Cl,re(p.name),1)]}),_:2},1032,["onClick","onEdit","onRemove"])}),256)),l.value?(m(),j(jl,{key:1,modelValue:l.value,"onUpdate:modelValue":f[0]||(f[0]=function(p){return l.value=p}),model:i.value,project:d(t)},null,8,["modelValue","model","project"])):x("",!0)]}),_:1})}}}),Sl={class:"vtj-data-source-from__label-name"},$l=H({__name:"ApiDataSourceForm",props:{model:{},block:{}},setup:function(a){var e=this,t=a,n=oe(),r=n.project,i={type:"api",detail:"",name:"",title:"",transform:{type:"JSFunction",value:""},test:{type:"JSFunction",value:""}},l=S(Ge(t.model||z({},i))),o=U(function(){return r.apis.value}),s={name:[{required:!0,message:"调用名称为必填项"}],title:[{required:!0,message:"备注描述为必填项"}],detail:[{required:!0,message:"选择引用api"}]},c=U(function(){return t.model?"编辑数据源":"新增数据源"}),v=S(),f=S(),p=S(),y=S(),g=S(!1),w=S(!1),b=S(""),h=function(C){var $=o.value.find(function(R){return R.name===C});$&&(l.value.name=$.name,l.value.title=$.title,l.value.test.value=`() => this.${$.name}()`)},k=function(C,$){var R=function(){var L=G(T().mark(function B(){var K,ie,Z,J,F,M,q,te=arguments;return T().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:for(Z=te.length,J=new Array(Z),F=0;F<Z;F++)J[F]=te[F];return le.next=3,((K=$.runtimeContext)===null||K===void 0?void 0:K.$apis[C.detail]).apply(e,J);case 3:return M=le.sent,q=(ie=C.transform)!==null&&ie!==void 0&&ie.value?it(C.transform,{}):C.transform,le.abrupt("return",q?q(M):M);case 6:case"end":return le.stop()}},B)}));return function(){return L.apply(this,arguments)}}();return P({},C.name,R)},V=function(){var O=G(T().mark(function C(){var $,R;return T().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,v.value.validate().catch(function(K){return!1});case 2:if(!B.sent){B.next=7;break}return $=f.value.getEditor().getValue(),l.value.transform.value=$,R=p.value.getEditor().getValue(),B.abrupt("return",(l.value.test.value=R,(!$||Ae(l.value.transform,t.block.runtimeContext))&&Ae(l.value.test,z(z({},t.block.runtimeContext),k(l.value,t.block)))));case 7:return B.abrupt("return",!1);case 8:case"end":return B.stop()}},C)}));return function(){return O.apply(this,arguments)}}(),I=function(){var O=G(T().mark(function C(){return T().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,V();case 2:if(R.t0=R.sent,!R.t0){R.next=5;break}t.block.setDataSource(l.value),y.value.close();case 5:case"end":return R.stop()}},C)}));return function(){return O.apply(this,arguments)}}(),D=function(){var O=G(T().mark(function C(){var $,R;return T().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,V();case 2:if(!B.sent){B.next=19;break}if(l.value.test.value){B.next=6;break}return Ie.warning({message:"无测试用例",title:"提示"}),B.abrupt("return");case 6:return $=k(l.value,t.block),w.value=!0,b.value="",B.prev=8,B.next=11,it(l.value.test,$)().catch(function(K){return K});case 11:R=B.sent,b.value=typeof R=="object"?JSON.stringify(R,null,2):"",g.value=!0,B.next=18;break;case 15:B.prev=15,B.t0=B.catch(8),Ie.warning({message:B.t0.message,title:"运行错误"});case 18:w.value=!1;case 19:case"end":return B.stop()}},C,null,[[8,15]])}));return function(){return O.apply(this,arguments)}}();return function(O,C){return m(),j(d(ge),{ref_key:"dialogRef",ref:y,class:"vtj-data-source-from",title:c.value,width:"1000px",height:"600px",submit:"",cancel:"",onSubmit:I},{action:_(function(){return[E(d(ye),{size:"default",type:"warning",onClick:D,loading:w.value},{default:_(function(){return[ae(" 运行测试用例 ")]}),_:1},8,["loading"])]}),default:_(function(){return[E(d(ve),{ref_key:"formRef",ref:v,size:"small","label-position":"right","label-width":"80px",model:l.value,rules:s},{default:_(function(){return[E(d(ne),{label:"Api",prop:"detail"},{default:_(function(){return[E(d(Et),{modelValue:l.value.detail,"onUpdate:modelValue":C[0]||(C[0]=function($){return l.value.detail=$}),onChange:h,disabled:!!t.model},{default:_(function(){return[(m(!0),A(X,null,ee(o.value,function($){return m(),j(d(jt),{label:$.title,value:$.name},{default:_(function(){return[ae(re($.title)+" ",1),W("i",Sl,re($.name),1)]}),_:2},1032,["label","value"])}),256))]}),_:1},8,["modelValue","disabled"])]}),_:1}),E(d(ne),{label:"调用名称",prop:"name"},{default:_(function(){return[E(d(ue),{modelValue:l.value.name,"onUpdate:modelValue":C[1]||(C[1]=function($){return l.value.name=$}),disabled:!!t.model},null,8,["modelValue","disabled"])]}),_:1}),E(d(ne),{label:"备注描述",prop:"title"},{default:_(function(){return[E(d(ue),{modelValue:l.value.title,"onUpdate:modelValue":C[2]||(C[2]=function($){return l.value.title=$})},null,8,["modelValue"])]}),_:1}),E(d(ne),{label:"转换函数",prop:"transform"},{default:_(function(){return[E(d(Ce),{ref_key:"transformRef",ref:f,border:"",dark:"",height:"200px","model-value":l.value.transform.value},null,8,["model-value"])]}),_:1}),E(d(ne),{label:"测试用例"},{default:_(function(){return[E(d(Ce),{ref_key:"testRef",ref:p,border:"",dark:"",height:"120px","model-value":l.value.test.value},null,8,["model-value"])]}),_:1})]}),_:1},8,["model"]),E(d(Qr),{modelValue:g.value,"onUpdate:modelValue":C[3]||(C[3]=function($){return g.value=$}),title:"测试用例运行结果",direction:"btt","append-to-body":"",size:"80%"},{default:_(function(){return[E(d(Ce),{"model-value":b.value,border:"",dark:"",height:"100%",lang:"json"},null,8,["model-value"])]}),_:1},8,["modelValue"])]}),_:1},8,["title"])}}}),Dl={class:"vtj-data-sources__subtitle"},Pl=H({__name:"DataSources",setup:function(a){var e=Pe(),t=e.selected,n=U(function(){var f;return(f=t.value)===null||f===void 0?void 0:f.node}),r=U(function(){var f;return Object.values(((f=n.value)===null||f===void 0?void 0:f.dataSources)||{}).filter(function(p){return p.type==="api"})}),i=[{name:"add",icon:"vtj-icon-plus"}],l=S(),o=S(),s=function(){o.value=void 0,l.value=!0},c=function(p){o.value=p,l.value=!0},v=function(){var f=G(T().mark(function p(y){return T().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,we.confirm("确定删除？","提示",{type:"warning"}).catch(function(b){return!1});case 2:if(w.t0=w.sent,!w.t0){w.next=5;break}n.value.removeDataSource(y.name);case 5:case"end":return w.stop()}},p)}));return function(y){return f.apply(this,arguments)}}();return function(f,p){return m(),j(d(Te),{class:"vtj-data-sources",title:null,"body-padding":!1},{default:_(function(){return[E(d(be),{title:"Api",tools:i,onToolClick:s},{default:_(function(){return[r.value.length===0?(m(),j(d(he),{key:0,"image-size":50})):x("",!0),(m(!0),A(X,null,ee(r.value,function(y){return m(),j(d(Ee),{editable:"",removable:"",clickable:"",onClick:function(w){return c(y)},onEdit:function(w){return c(y)},onRemove:function(w){return v(y)}},{title:_(function(){return[ae(re(y.title)+" ",1),W("i",Dl,re(y.name),1)]}),_:2},1032,["onClick","onEdit","onRemove"])}),256))]}),_:1}),l.value?(m(),j($l,{key:0,modelValue:l.value,"onUpdate:modelValue":p[0]||(p[0]=function(y){return l.value=y}),model:o.value,block:n.value},null,8,["modelValue","model","block"])):x("",!0)]}),_:1})}}}),Tl=H({__name:"History",setup:function(a){var e=oe(),t=e.engine,n=U(function(){var o;return((o=t.simulator.history.value)===null||o===void 0?void 0:o.list)||[]}),r=U(function(){return`(共 ${n.value.length} 条)`}),i=function(){var o=G(T().mark(function s(c){var v;return T().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,we.confirm("确定删除?","提示",{type:"warning"}).catch(function(y){return!1});case 2:if(p.t0=p.sent,!p.t0){p.next=5;break}(v=t.simulator.history.value)===null||v===void 0||v.remove(c.id);case 5:case"end":return p.stop()}},s)}));return function(c){return o.apply(this,arguments)}}(),l=function(s){var c;(c=t.simulator.history.value)===null||c===void 0||c.load(s.id)};return function(o,s){return m(),j(d(Te),{title:"历史记录",subtitle:r.value,class:"vtj-histroy"},{default:_(function(){return[n.value.length===0?(m(),j(d(he),{key:0,"image-size":50})):x("",!0),(m(!0),A(X,null,ee(n.value,function(c,v){var f;return m(),j(d(Ee),{title:c.title,active:((f=d(t).simulator.history.value)===null||f===void 0?void 0:f.index)===v,onRemove:function(y){return i(c)},onClick:function(y){return l(c)},removable:"",clickable:""},null,8,["title","active","onRemove","onClick"])}),256))]}),_:1},8,["subtitle"])}}}),Al=H({__name:"NodePath",setup:function(a){var e=Pe(),t=e.selected,n=U(function(){var l;return(((l=t.value)===null||l===void 0?void 0:l.path)||[]).slice(0).reverse()}),r=function(o){N.emit(dn,o)},i=function(o){N.emit(vn,o)};return function(l,o){return d(t)?(m(),j(d(Jr),{key:0,class:"vtj-nodepath","separator-icon":d(jr)},{default:_(function(){return[(m(!0),A(X,null,ee(n.value,function(s){return m(),j(d(Ur),{onClick:function(v){return r(s)},onMouseover:function(v){return i(s)}},{default:_(function(){return[ae(re(s.name),1)]}),_:2},1032,["onClick","onMouseover"])}),256))]}),_:1},8,["separator-icon"])):x("",!0)}}}),Il={class:"vtj-about"},Ol={class:"vtj-about__logo"},Rl=["src"],Nl=W("div",{class:"vtj-about__name"},[W("h3",null,"VTJEngine")],-1),xl={class:"vtj-about__footer"},Fl=H({__name:"About",setup:function(a){return function(e,t){return m(),A("div",Il,[W("div",Ol,[E(d(Mr),{value:d(Hn)},{default:_(function(){return[W("img",{src:d(qn)},null,8,Rl)]}),_:1},8,["value"])]),Nl,W("div",xl,[E(d(zr),{href:"http://vtj.pro",type:"primary",target:"_blank"},{default:_(function(){return[ae(" http://vtj.pro ")]}),_:1})])])}}}),nt={Empty:vu,Logo:mu,Dependencies:gu,Designer:ju,Components:Cu,Pages:Pu,Blocks:Tu,Toolbar:xu,Outline:Ku,Properties:Qu,Events:Yu,BlockScript:nl,Css:rl,Schema:il,Actions:sl,Directives:dl,Advanced:gl,Switcher:_l,Docs:El,Apis:Vl,DataSources:Pl,History:Tl,NodePath:Al,About:Fl},Bl={class:"vtj-apps"},Ll={class:"vtj-apps__header"},Ul={class:"vtj-apps__top"},Jl={class:"vtj-apps__bottom"},Ml={class:"vtj-apps__panels"},zl=H({__name:"apps",setup:function(a,e){var t=e.expose,n=oe(),r=n.regions,i=n.config,l=U(function(){return r.value.apps}),o=S(null),s=S(null),c=S(),v=S(),f=U(function(){return l.value.filter(function(b){var h;return!b.disabled&&((h=b.trigger)===null||h===void 0?void 0:h.type)==="panel"})}),p=U(function(){return l.value.filter(function(b){var h;return!b.disabled&&((h=b.trigger)===null||h===void 0?void 0:h.type)!=="panel"})});function y(b){var h=l.value.find(function(k){return k.name===b});h&&(o.value=h,s.value=h)}var g=function(h){o.value=h,s.value=s.value===h?null:h},w=function(h){var k,V;if(((k=h.trigger)===null||k===void 0?void 0:k.type)==="link"){var I;window.open((I=h.props)===null||I===void 0?void 0:I.url);return}((V=h.trigger)===null||V===void 0?void 0:V.type)==="dialog"&&(c.value=pt(nt[h.type]||nt.Empty),v.value=z(z(z({},h.trigger),h.props),{},{visible:!0}))};return pe(s,function(b){N.emit(tr,!!b)}),i.activeApp&&y(i.activeApp),t({setCurrentWidget:y}),function(b,h){return m(),A("div",Bl,[W("div",Ll,[W("div",Ul,[(m(!0),A(X,null,ee(f.value,function(k){var V,I;return m(),j(Vn,{key:`trigger-${k.name}`,icon:(V=k.trigger)===null||V===void 0?void 0:V.icon,label:(I=k.trigger)===null||I===void 0?void 0:I.label,active:o.value===k,open:s.value===k,onClick:function(O){return g(k)}},null,8,["icon","label","active","open","onClick"])}),128))]),W("div",Jl,[(m(!0),A(X,null,ee(p.value,function(k){var V,I;return m(),j(Vn,{key:`trigger-${k.name}`,icon:(V=k.trigger)===null||V===void 0?void 0:V.icon,label:(I=k.trigger)===null||I===void 0?void 0:I.label,onClick:function(O){return w(k)}},null,8,["icon","label","onClick"])}),128))])]),Je(W("div",Ml,[(m(!0),A(X,null,ee(f.value,function(k){return m(),j(Pr,{key:k.name},[o.value===k?(m(),j(d(ze),mt(se({key:0},z({},k))),null,16)):x("",!0)],1024)}),128))],512),[[Qe,!!s.value]]),c.value?(m(),j(ge,se({key:0},v.value,{modelValue:v.value.visible,"onUpdate:modelValue":h[0]||(h[0]=function(k){return v.value.visible=k})}),{default:_(function(){return[(m(),j(Xt(c.value),mt(en(v.value)),null,16))]}),_:1},16,["modelValue"])):x("",!0)])}}}),Wl={class:"vtj-brand"},Hl=H({__name:"brand",setup:function(a){var e=oe(),t=e.regions,n=U(function(){return t.value.brand});return function(r,i){return m(),A("div",Wl,[(m(!0),A(X,null,ee(n.value,function(l){return m(),j(d(ze),se({key:l.name},z({},l)),null,16)}),128))])}}}),Gl={key:0,class:"vtj-setting"},Kl={key:0,class:"vtj-setting__header"},ql={class:"vtj-setting__path"},Ql=W("i",{class:"vtj-icon-layers"},null,-1),Zl=W("i",{class:"vtj-icon-help"},null,-1),Yl=H({__name:"setting",setup:function(a,e){var t,n=e.expose,r=oe(),i=r.engine,l=r.regions,o=Pe(),s=o.selected,c=l.value||{},v=c.setting,f=U(function(){var h;return fe((h=s.value)===null||h===void 0?void 0:h.node)?"Block":"Node"}),p=U(function(){return v.filter(function(h){return!h.disabled&&h.group===f.value}).map(function(h){var k;return{name:h.name,label:((k=h.trigger)===null||k===void 0?void 0:k.label)||h.name,closable:!1}})}),y=S((t=p.value[0])===null||t===void 0?void 0:t.name);pe(s,function(h,k){(h==null?void 0:h.node.id)!==(k==null?void 0:k.node.id)&&g(0)});var g=function(){var k,V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;y.value=(k=p.value[V])===null||k===void 0?void 0:k.name};n({currentTab:y,tabs:p,change:g});var w=U(function(){var h,k,V=(h=s.value)===null||h===void 0?void 0:h.node;return V?(k=i.assets.componentMap[V.name])===null||k===void 0?void 0:k.doc:null}),b=function(){if(w.value){var k=rt(i.skeleton.regionInstances.workspace);k&&k.openTab("docs",{url:w.value})}};return function(h,k){return d(s)&&d(s).node?(m(),A("div",Gl,[f.value==="Node"?(m(),A("div",Kl,[W("div",ql,[Ql,W("span",null,[ae(re(d(s).node.name.fileName||d(s).node.name)+": ",1),W("i",null,re(d(s).node.id),1)])]),w.value?(m(),A("div",{key:0,class:"vtj-setting__doc",onClick:b},[Zl,ae(" 帮助 ")])):x("",!0)])):x("",!0),d(s).node.lock?x("",!0):(m(),j(cn,{key:1,class:"vtj-setting__tabs",items:p.value,modelValue:y.value,"onUpdate:modelValue":k[0]||(k[0]=function(V){return y.value=V}),stretch:"","body-padding":!1},{default:_(function(){return[(m(!0),A(X,null,ee(d(v),function(V){return m(),j(d(ze),se({key:V.name},z({},V),{visible:V.name===y.value}),null,16,["visible"])}),128))]}),_:1},8,["items","modelValue"])),d(s).node.lock?(m(),j(d(he),{key:2,"image-size":1,description:"组件已被锁定，不能更改设置。"})):x("",!0)])):(m(),j(d(he),{key:1,description:"请在左侧画布选中节点"}))}}}),Xl={class:"vtj-status"},eo={class:"vtj-status__left"},to={class:"vtj-status__right"},no=H({__name:"status",setup:function(a){var e=oe(),t=e.regions,n=U(function(){return t.value.status}),r=U(function(){return n.value.filter(function(l){return!l.disabled&&!l.trigger})}),i=U(function(){return n.value.filter(function(l){return!l.disabled&&!!l.trigger})});return function(l,o){return m(),A("div",Xl,[W("div",eo,[(m(!0),A(X,null,ee(r.value,function(s){return m(),j(d(ze),se({key:s.name},z({},s)),null,16)}),128))]),W("div",to,[(m(!0),A(X,null,ee(i.value,function(s){return m(),j(d(ze),se({key:s.name},z({},s)),null,16)}),128))])])}}}),ro={class:"vtj-toolbar"},ao=H({__name:"toolbar",setup:function(a){var e=oe(),t=e.regions,n=U(function(){return t.value.toolbar});return function(r,i){return m(),A("div",ro,[(m(!0),A(X,null,ee(n.value,function(l){return m(),j(d(ze),se({key:l.name},z({},l)),null,16)}),128))])}}}),io=H({__name:"workspace",setup:function(a,e){var t,n=e.expose,r=oe(),i=r.regions,l=r.emitter,o=U(function(){return i.value.workspace}),s=o.value.filter(function(b){return b.name==="designer"}).map(function(b){var h;return{name:b.name,label:((h=b.trigger)===null||h===void 0?void 0:h.label)||b.name}}),c=S(o.value.filter(function(b){return!b.disabled&&b.name!=="designer"}).map(function(b){var h;return{name:b.name,label:((h=b.trigger)===null||h===void 0?void 0:h.label)||b.name,checked:!1,closable:!0}})),v=U(function(){var b=c.value.filter(function(h){return!!h.checked});return b.unshift(s[0]),b}),f=S((t=v.value[0])===null||t===void 0?void 0:t.name);pe(f,function(b){l.emit(rr,b==="designer")});var p=function(h){var k=c.value.find(function(V){return V.name===h});k&&(k.checked=!1),h===f.value&&(f.value=v.value[0].name)},y=S({}),g=function(h,k){var V=c.value.find(function(I){return I.name===h});V&&(y.value[h]=k,V.checked=!0),f.value=h},w=function(h){h.checked=!h.checked,h.checked?f.value=h.name:f.value===h.name&&(f.value="designer")};return n({openTab:g}),function(b,h){return m(),j(d(cn),{class:"vtj-workspace",items:v.value,modelValue:f.value,"onUpdate:modelValue":h[0]||(h[0]=function(k){return f.value=k}),more:c.value,onTabRemove:p,onMore:w,checkable:""},{default:_(function(){return[(m(!0),A(X,null,ee(o.value,function(k){return m(),j(d(ze),se({key:k.name},z(z({},k),y.value[k.name]),{visible:k.name===f.value}),null,16,["visible"])}),128))]}),_:1},8,["items","modelValue","more"])}}}),uo=H({__name:"App",props:{engine:{}},setup:function(a,e){var t=e.expose,n=a,r=S(),i=S(),l=S(),o=S(),s=S(),c=S(),v=S();S(),S();var f=S(!1),p=S(!0);n.engine.skeleton.regionInstances={brand:r,toolbar:i,action:l,status:o,setting:s,workspace:c,apps:v};var y={dirs:["e"],maxWidth:600},g={dirs:["w"],maxWidth:600};function w(b){f.value=b}return N.on(tr,function(b){w(!b)}),Dr(fn,n.engine),t({setLeftCollapsed:w,showSetting:p}),function(b,h){return m(),j(d(Nr),{locale:d(Ba)},{default:_(function(){return[E(d(Lt),{class:"vtj-layout"},{default:_(function(){return[E(d(Or),{class:"vtj-layout__header",height:"36px"},{default:_(function(){return[E(d(Hl),{ref_key:"brand",ref:r},null,512),E(d(ao),{ref_key:"toolbar",ref:i},null,512),E(d(ou),{ref_key:"action",ref:l},null,512)]}),_:1}),E(d(Lt),{class:"vtj-layout__wrapper"},{default:_(function(){return[Je((m(),j(d(Ut),{width:"400px",class:ce(["vtj-layout__left",{"is-collapsed":f.value}])},{default:_(function(){return[E(d(zl),{ref_key:"apps",ref:v},null,512)]}),_:1},8,["class"])),[[d(pn),y]]),E(d(Un),{class:"vtj-layout__main"},{default:_(function(){return[E(d(io),{ref_key:"workspace",ref:c},null,512)]}),_:1}),p.value?Je((m(),j(d(Ut),{key:0,width:"350px",class:"vtj-layout__right"},{default:_(function(){return[E(d(Yl),{ref_key:"setting",ref:s},null,512)]}),_:1})),[[d(pn),g]]):x("",!0)]}),_:1}),E(d(Rr),{class:"vtj-layout__footer",height:"20px"},{default:_(function(){return[E(d(no),{ref_key:"status",ref:o},null,512)]}),_:1})]}),_:1})]}),_:1},8,["locale"])}}}),lo=["brand","toolbar","action","status","apps","workspace","setting"],oo=function(){function u(a){var e=this;_e(this,u),P(this,"widgets",void 0),P(this,"widgetInstances",{}),P(this,"regions",void 0),P(this,"regionInstances",{}),this.widgets=Fe(a),this.regions=U(function(){return lo.reduce(function(t,n){return t[n]=e.getWidgets(n),t},{})})}return ke(u,[{key:"load",value:function(e){var t=this;e.forEach(function(n){t.add(n)})}},{key:"get",value:function(e){return this.widgets.find(function(t){return t.name===e})}},{key:"set",value:function(e,t){var n=this.get(e);n&&$n(n,t)}},{key:"add",value:function(e){this.get(e.name)?this.set(e.name,e):this.widgets.push(e)}},{key:"remove",value:function(e){var t=this.widgets.findIndex(function(r){return r.name===e});if(t>=0){var n=this.widgets[t];n.disabled=!0,this.widgets.splice(t,1)}}},{key:"getComponent",value:function(e){return e?Dn(e)?nt[e]||nt.Empty:e:nt.Empty}},{key:"getWidgets",value:function(e){return this.widgets.filter(function(t){return t.region===e}).sort(function(t,n){return(t.order||0)-(n.order||0)})}},{key:"dispose",value:function(){this.widgetInstances={},this.regionInstances={}}}]),u}(),N=_r(),tr="EVENT_SKELETON_LEFT_COLLAPSED_CHANGE",De="EVENT_PROJECT_UPDATE",so="EVENT_PROJECT_ACTIVE_FILE",ft="EVENT_FILE_CREATE",Ht="EVENT_FILE_UPDATE",Gt="EVENT_FILE_REMOVE",Kt="EVENT_ASSETS_LOADED",co="EVENT_SIMULATOR_OPEN",qt="EVENT_SIMULATOR_READY",Qt="EVENT_COMPONENETS_DRAG_START",Zt="EVENT_COMPONENETS_DRAG_END",Q="EVENT_NODE_CHANGE",nr="EVENT_VIEWPORT_MODE_CHANGE",dn="EVENT_OUTLINE_SELECTED",vn="EVENT_OUTLINE_HOVER",qe="EVENT_OUTLINE_CHANGE",rr="EVENT_DESIGNER_ACTIVE_CHANGE",ar="EVENT_ACTION_PREVIEW",ir="EVENT_ACTION_HOME",ur="EVENT_ACTION_CODER",lr="EVENT_ACTION_COPY",vo="EVENT_HISTORY_GO",fo="EVENT_HISTORY_BACK",Ze="EVENT_HISTORY_CHANGE",po="EVENT_HISTORY_PUSH",mo="EVENT_HISTORY_REMOVE",bt="EVENT_HISTORY_SAVE",ho=[{id:"elements",category:"特殊元素"},{id:"components",category:"内置组件"}],or=[{name:"component",title:"动态组件",categoryId:"elements",doc:"https://cn.vuejs.org/api/built-in-special-elements.html#component",props:[{name:"is",label:"组件名",setters:"InputSetter"}],snippet:{children:"组件文本内容示例",props:{is:"div"}}},{name:"slot",title:"插槽",categoryId:"elements",doc:"https://cn.vuejs.org/api/built-in-special-elements.html#slot",props:[{name:"name",label:"名称",defaultValue:"default",setters:"InputSetter"}],snippet:{children:"插槽默认内容"}}],st=[].concat(or,[{name:"Transition",title:"过渡效果",categoryId:"components",package:"vue",doc:"https://cn.vuejs.org/api/built-in-components.html#transition",props:[{name:"name",label:"名称",defaultValue:"",title:"用于自动生成过渡 CSS class 名",setters:"InputSetter"},{name:"css",label:"应用CSS",defaultValue:!0,title:"是否应用 CSS 过渡 class",setters:"BooleanSetter"},{name:"type",label:"事件类型",defaultValue:void 0,title:"指定要等待的过渡事件类型来确定过渡结束的时间，默认情况下会自动检测持续时间较长的类型",setters:"SelectSetter",options:["transition","animation"]},{name:"duration",label:"持续时间",defaultValue:void 0,title:"显式指定过渡的持续时间",setters:["NumberSetter","JSONSetter"]},{name:"mode",label:"时序",defaultValue:"default",title:"控制离开/进入过渡的时序。",setters:"SelectSetter",options:["in-out","out-in","default"]},{name:"appear",label:"使用过渡",defaultValue:!1,title:"是否对初始渲染使用过渡",setters:"BooleanSetter"},{name:"enterFromClass",label:"enterFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"enterActiveClass",label:"enterActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"enterToClass",label:"enterToClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearFromClass",label:"appearFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearActiveClass",label:"appearActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearToClass",label:"appearToClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveFromClass",label:"leaveFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveActiveClass",label:"leaveActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveToClass",label:"leaveToClass",defaultValue:void 0,setters:"InputSetter"}],events:["before-enter","before-leave","enter","leave","appear","after-enter","after-leave","after-appear","enter-cancelled","leave-cancelled","ppear-cancelled"],snippet:{children:"Transition"}},{name:"TransitionGroup",title:"过渡效果组",package:"vue",categoryId:"components",doc:"https://cn.vuejs.org/api/built-in-components.html#transitiongroup",props:[{name:"name",label:"名称",defaultValue:"",title:"用于自动生成过渡 CSS class 名",setters:"InputSetter"},{name:"tag",label:"标签名",defaultValue:void 0,title:"如果未定义，则渲染为片段 (fragment)",setters:"InputSetter"},{name:"moveClass",label:"moveClass",defaultValue:void 0,title:"用于自定义过渡期间被应用的 CSS class。",setters:"InputSetter"},{name:"css",label:"应用CSS",defaultValue:!0,title:"是否应用 CSS 过渡 class",setters:"BooleanSetter"},{name:"type",label:"事件类型",defaultValue:void 0,title:"指定要等待的过渡事件类型来确定过渡结束的时间，默认情况下会自动检测持续时间较长的类型",setters:"SelectSetter",options:["transition","animation"]},{name:"duration",label:"持续时间",defaultValue:void 0,title:"显式指定过渡的持续时间",setters:["NumberSetter","JSONSetter"]},{name:"appear",label:"使用过渡",defaultValue:!1,title:"是否对初始渲染使用过渡",setters:"BooleanSetter"},{name:"enterFromClass",label:"enterFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"enterActiveClass",label:"enterActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"enterToClass",label:"enterToClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearFromClass",label:"appearFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearActiveClass",label:"appearActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearToClass",label:"appearToClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveFromClass",label:"leaveFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveActiveClass",label:"leaveActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveToClass",label:"leaveToClass",defaultValue:void 0,setters:"InputSetter"}],events:["before-enter","before-leave","enter","leave","appear","after-enter","after-leave","after-appear","enter-cancelled","leave-cancelled","ppear-cancelled"],snippet:{children:"TransitionGroup"}},{name:"KeepAlive",title:"缓存切换组件",package:"vue",categoryId:"components",doc:"https://cn.vuejs.org/api/built-in-components.html#keepalive",props:[{name:"include",label:"匹配包含",title:"如果指定，则只有与 `include` 名称, 匹配的组件才会被缓存。",setters:["InputSetter","JSONSetter"]},{name:"exclude",label:"匹配排除",title:"任何名称与 `exclude` 匹配的组件都不会被缓存。",setters:["InputSetter","JSONSetter"]},{name:"max",label:"最大缓存数",title:"最多可以缓存多少组件实例。",setters:["InputSetter"]}]},{name:"Teleport",title:"传送组件",package:"vue",categoryId:"components",doc:"https://cn.vuejs.org/api/built-in-components.html#teleport",props:[{name:"to",label:"目标容器",title:"指定目标容器,可以是选择器或实际元素",setters:["InputSetter"]},{name:"disabled",label:"目标容器",title:"当值为 `true` 时，内容将保留在其原始位置, 而不是移动到目标容器中, 可以动态更改",setters:["BooleanSetter"]}]},{name:"Suspense",title:"异步依赖",package:"vue",categoryId:"components",doc:"https://cn.vuejs.org/api/built-in-components.html#suspense",props:[{name:"timeout",label:"timeout",setters:["InputSetter"]}]}]),go=function(){function u(a,e){var t=this;_e(this,u),P(this,"unwatch",void 0),P(this,"packages",[]),P(this,"elements",[].concat(or)),P(this,"elementsMap",{}),P(this,"components",at(st)),P(this,"componentMap",{}),P(this,"componentGroups",[]),P(this,"isReady",!1),this.service=a,this.project=e,e&&(this.unwatch=pe(e.dependencies,function(n){return t.load(n)},{deep:!0})),this.elementsMap=this.parseMap(this.elements,!1)}return ke(u,[{key:"clear",value:function(){this.components=at(st),this.componentMap={},this.componentGroups=[]}},{key:"getCateoryComponents",value:function(e,t){var n=t.filter(function(r){return r.categoryId===e.id&&r.hidden!==!0});return{name:e.id,label:e.category,count:n.length,components:n}}},{key:"parseGroups",value:function(e){var t=this,n=[],r=Ne(e),i;try{var l=function(){var s=i.value,c=s.categories,v=s.components,f=s.label,p=s.name,y=s.library,g=s.names;if(!c||!v)return 1;var w=c.map(function(k){return t.getCateoryComponents(k,v)}),b=w.reduce(function(k,V){return V.count+k},0),h={name:s.name,label:f||p,library:y,names:g,count:b,children:w};n.push(h)};for(r.s();!(i=r.n()).done;)l()}catch(o){r.e(o)}finally{r.f()}return n}},{key:"parseMap",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n={};if(t){var r=Ne(e),i;try{for(r.s();!(i=r.n()).done;){var l=i.value;l.package&&(n[l.name]=l)}}catch(v){r.e(v)}finally{r.f()}}else{var o=Ne(e),s;try{for(o.s();!(s=o.n()).done;){var c=s.value;n[c.name]=c}}catch(v){o.e(v)}finally{o.f()}}return n}},{key:"load",value:function(){var a=G(T().mark(function t(n){var r,i,l,o,s,c,v,f,p;return T().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:this.packages=n,this.isReady=!1,r=n.filter(function(w){return!!w.assetsUrl&&w.enabled}),this.clear(),i=[{name:"vue",label:"内置",names:st.map(function(w){return w.name}),library:"Vue",components:st,categories:ho}],l=Ne(r),g.prev=5,l.s();case 7:if((o=l.n()).done){g.next=15;break}return s=o.value,g.next=11,Pn(s.assetsUrl,{},{name:s.assetsLibrary,script:!0}).catch(function(w){return null});case 11:c=g.sent,c&&(c.name=c.name||s.assetsLibrary,c.library=s.library,c.names=(c.components||[]).map(function(w){return w.name}),i.push(c),this.components=this.components.concat(c.components||[]));case 13:g.next=7;break;case 15:g.next=20;break;case 17:g.prev=17,g.t0=g.catch(5),l.e(g.t0);case 20:return g.prev=20,l.f(),g.finish(20);case 23:return this.componentGroups=this.parseGroups(i),this.componentMap=this.parseMap(this.components),this.isReady=!0,N.emit(Kt),v=this.components,f=this.componentGroups,p=this.componentMap,g.abrupt("return",{components:v,componentGroups:f,componentMap:p});case 26:case"end":return g.stop()}},t,this,[[5,17,20,23]])}));function e(t){return a.apply(this,arguments)}return e}()},{key:"getBlockDescription",value:function(){var a=G(T().mark(function t(n){var r,i,l,o,s,c,v,f;return T().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!(!n||typeof n=="string")){y.next=2;break}return y.abrupt("return",null);case 2:if(r=n.type==="Schema"?n.id:null,r){y.next=5;break}return y.abrupt("return",null);case 5:return y.next=7,this.service.getFile(r);case 7:if(i=y.sent,i){y.next=10;break}return y.abrupt("return",null);case 10:return l=i.id,o=i.name,s=i.slots,c=i.props,v=i.emits,f=function(w){var b=Array.isArray(w)?w:[w],h=[],k=Ne(b),V;try{for(k.s();!(V=k.n()).done;){var I=V.value;h=h.concat(er[I.toLowerCase()]||[])}}catch(D){k.e(D)}finally{k.f()}return h},y.abrupt("return",{id:l,name:o,childIncludes:s!=null&&s.length?void 0:!1,props:(c||[]).map(function(g){return typeof g=="string"?{name:g}:{name:g.name,type:g.type,setters:f(g.type)}}),events:v,slots:s});case 12:case"end":return y.stop()}},t,this)}));function e(t){return a.apply(this,arguments)}return e}()},{key:"dispose",value:function(){this.clear(),this.unwatch&&this.unwatch()}}]),u}();function yo(u,a,e){var t=u.value,n=u.iterator,r=n||{},i=r.item,l=i===void 0?"item":i,o=r.index,s=o===void 0?"index":o,c=e.__parseExpression(t)||[];return Number.isInteger(c)&&(c=new Array(c).fill(!0).map(function(v,f){return f+1})),Array.isArray(c)?c.map(function(v,f){var p;return a(e.__clone((p={},P(p,l,v),P(p,s,f),p)))}):(console.warn("[vForRender]:",`${t==null?void 0:t.value} is not a Arrary`),[])}function bo(u,a){return!!a.__parseExpression(u.value)}function ko(u,a){return a.__parseExpression(u.value)?{}:{display:"none"}}function _o(u,a,e){var t,n={type:"JSFunction",value:(t=a.value)!==null&&t!==void 0&&t.value?`(v) => {
        ${a.value.value} = v;
      }`:"(v) => {}"},r=e.__parseFunction(n),i=Kn(a.modifiers),l=$e(a.arg)?e.__parseExpression(a.arg):a.arg||"modelValue";return P({modelValue:e.__parseExpression(a.value)},`onUpdate:${l}`,i.length&&r?u.withModifiers(r,i):r)}function wo(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default";return typeof u=="string"?{name:u,params:[]}:z({params:[]},u)}function Eo(u,a){var e=u.props,t=(e==null?void 0:e.name)||"default";return{name:$e(t)?a.__parseExpression(t):t,params:[]}}function jo(u){var a={default:{params:[],nodes:[]}},e=Ne(u),t;try{for(e.s();!(t=e.n()).done;){var n=t.value,r=wo(n.slot),i=r.name;a[i]?(a[i].nodes.push(n),a[i].params=a[i].params.concat(r.params)):a[i]={nodes:[n],params:r.params}}}catch(l){e.e(l)}finally{e.f()}return a}function Co(u,a,e,t){if(!a)return null;if(Dn(a))return{default:function(){return a}};if($e(a))return{default:function(){return Gn(e.__parseExpression(a))}};if(Array.isArray(a)){var n=jo(a),r=function(l){return!l||!t?{}:t!=null&&t.id&&Object.keys(l).length?P({},`scope_${t.id}`,l):{}};return Object.entries(n).reduce(function(i,l){var o=Oe(l,2),s=o[0],c=o[1],v=c.nodes,f=c.params;return i[s]=function(p){var y=f.length?ba(p!=null?p:{},f):r(p);return v.map(function(g){return kt(u,g,e.__clone(y))})},i},{})}}function Vo(u,a,e){var t=Object.keys(a||{}).reduce(function(n,r){var i=a[r];return $e(i)?i=e.__parseExpression(i):Ct(i)&&(i=e.__parseFunction(i)),n[r]=i,n},{});return t.ref=e.__ref(u,t.ref),t}function So(u,a,e){var t=["passive","capture","once"],n={capture:"Capture",once:"Once",passive:"OnceCapture"};return Object.keys(a||{}).reduce(function(r,i){var l=a[i],o=Kn(l.modifiers),s=o.find(function(f){return t.includes(f)}),c="on"+mr(i)+(s&&n[s]||""),v=e.__parseFunction(l.handler);return v&&(r[c]=u.withModifiers(v,o)),r},{})}function $o(u,a,e,t){var n,r=a.children,i=Eo(a,t),l=(n=t.$slots)===null||n===void 0?void 0:n[i.name];return l?l(e):r?typeof r=="string"?u.createTextVNode(r):$e(r)?u.createTextVNode(Gn(t.__parseExpression(r))):Array.isArray(r)?r.map(function(o){return kt(u,o,t)}):null:null}function Do(u,a){return a?$e(a)?u.__parseExpression(a):a:"div"}function kt(u,a,e){if(!a||!a.name||a.invisible)return null;var t=a.id,n=t===void 0?null:t,r=a.directives,i=r===void 0?[]:r,l=ka(i),o=l.vIf,s=l.vFor,c=l.vShow,v=l.vModels,f=l.vBind;if(o&&!bo(o,e))return null;var p=function(g){var w,b,h,k,V=g.$components,I=function($){if(a.name==="component")return Do(g,a.props.is);if(a.name==="slot")return a.name;var R=g.__loader(u,a.name,a.from);return typeof R=="string"&&($=V[R])!==null&&$!==void 0?$:R}(),D=Vo(n,(w=a.props)!==null&&w!==void 0?w:{},g),O=So(u,(b=a.events)!==null&&b!==void 0?b:{},g);if(a.name==="slot")return $o(u,a,D,g);f&&Object.assign(D,g.__parseExpression(f.value)),c&&(D.style=Object.assign((h=D.style)!==null&&h!==void 0?h:{},ko(c,g))),v.forEach(function($){Object.assign(D,_o(u,$,g))});var C=Co(u,(k=a.children)!==null&&k!==void 0?k:[],g,a);return u.createVNode(I,z(z({},D),O),C)};return s?yo(s,p,e):p(e)}var Po=function(a,e){return e};function sr(u){var a=u.getFile,e=u.options;return function(t,n,r){return!r||typeof r=="string"?n:r.type==="Schema"?t.defineAsyncComponent(G(T().mark(function i(){var l;return T().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,a(r.id);case 2:return l=s.sent,s.abrupt("return",l?cr(z(z({},e),{},{Vue:t,dsl:l,loader:sr(u)})):null);case 4:case"end":return s.stop()}},i)}))):n}}var Yt=function(u){return u.RUNTIME="runtime",u.DESIGN="design",u.RAW="raw",u.VNODE="vnode",u}(Yt||{}),To=function(){function u(a){_e(this,u),P(this,"__id",null),P(this,"__name",""),P(this,"__mode",void 0),P(this,"__dsl",null),P(this,"__instance",null),P(this,"__context_refs",{}),P(this,"__loader",Po),P(this,"__proto__",null),P(this,"props",{}),P(this,"state",{}),P(this,"context",{}),P(this,"refs",{}),P(this,"$refs",{}),P(this,"$el",null),P(this,"$emit",null),P(this,"$nextTick",null),P(this,"$parent",null),P(this,"$root",null),P(this,"$attrs",null),P(this,"$slots",null),P(this,"$watch",null),P(this,"$options",null),P(this,"$forceUpdate",null),P(this,"$components",{}),P(this,"$libs",{}),P(this,"$apis",{}),P(this,"__transform",{});var e=a.mode,t=e===void 0?"runtime":e,n=a.dsl,r=a.loader,i=a.attrs;this.__mode=t,n&&(this.__id=n.id||null,this.__name=n.name,this.__dsl=n,t==="runtime"&&(this.__transform=n.transform||{})),r&&(this.__loader=r),i&&Object.assign(this,i)}return ke(u,[{key:"setup",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:kr,r=n.getCurrentInstance();if(r){this.__instance=r.proxy;var i=r.appContext.config.globalProperties;Object.assign(this,i),Object.assign(this,t||{}),this.__proxy(),n.onMounted(function(){e.__proxy()}),n.onUnmounted(function(){e.__cleanup()})}}},{key:"__clone",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=z(z({},this.context),e),n=z(z({},t),{},{context:t});return n.context.__proto__=this.context,n.__proto__=this,n}},{key:"__parseFunction",value:function(e){if(e)if(this.__mode==="runtime"){var t,n=e.id,r=e.type,i=n&&(t=this.__transform[n])!==null&&t!==void 0?t:e.value;return it({type:r,value:i},this)}else return it(e,this)}},{key:"__parseExpression",value:function(e){if(e)if(this.__mode==="runtime"){var t,n=e.id,r=e.type,i=n&&(t=this.__transform[n])!==null&&t!==void 0?t:e.value;return Ye({type:r,value:i},this)}else return Ye(e,this)}},{key:"__proxy",value:function(){var e=this;this.__instance&&_n.forEach(function(t){var n;e[t]=(n=e.__instance)===null||n===void 0?void 0:n[t]})}},{key:"__cleanup",value:function(){var e=this;_n.forEach(function(t){e[t]=null})}},{key:"__ref",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;if(this.__mode!=="vnode")return t&&t!==this.__id&&(this.__context_refs[t]=this),function(r){var i=(r==null?void 0:r.$vtjEl)||(r==null?void 0:r.$el)||r;if(!i){typeof n=="string"&&(delete e.$refs[n],t&&delete e.refs[t]);return}if(i.nodeType===3&&i.nextSibling&&(i=i.nextSibling),i.__vtj__=t,e.__mode==="design"&&(i.__context__=e),t&&(e.refs[t]=r),typeof n=="function")n(r);else if(n){var l=e.$refs[n];if(l){var o=new Set([].concat(l,r));e.$refs[n]=Array.from(o)}else e.$refs[n]=r}return r}}}]),u}(),Ao=["Transition","TransitionGroup","KeepAlive","Teleport","Suspense"],Io={String,Number,Boolean,Array,Object};function Oo(u,a,e){return u.reactive(Object.keys(a||{}).reduce(function(t,n){var r=a[n];return $e(r)?r=e.__parseExpression(r):Ct(r)&&(r=e.__parseFunction(r)),t[n]=r,t},{}))}function Ro(u,a){return Object.entries(u!=null?u:{}).reduce(function(e,t){var n=Oe(t,2),r=n[0],i=n[1];return e[r]=a.__parseFunction(i),e},{})}function No(u){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],e=arguments.length>2?arguments[2]:void 0;a.forEach(function(t){u.watch(e.__parseExpression(t.source),e.__parseFunction(t.handler),{deep:t.deep,immediate:t.immediate})})}function xo(u,a,e){return Object.entries(a!=null?a:{}).reduce(function(t,n){var r=Oe(n,2),i=r[0],l=r[1];return t[i]=u.computed(e.__parseFunction(l)),t},{})}function Fo(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0,e=function(n){return n?(Array.isArray(n)?n:[n]).map(function(r){return Io[r]}):void 0};return u.map(function(t){return typeof t=="string"?{name:t}:{name:t.name,type:t.type,required:t.required,default:$e(t.default)?a.__parseExpression(t.default):t.default}}).reduce(function(t,n){return t[n.name]={type:e(n.type),required:n.required,default:n.default},t},{})}function Bo(u,a){return Object.entries(u!=null?u:{}).reduce(function(e,t){var n=Oe(t,2),r=n[0],i=n[1];return e[r]=a.__parseFunction(i),e},{})}function Lo(u){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],e=arguments.length>2?arguments[2]:void 0;return a.reduce(function(t,n){var r,i=n||{},l=i.name,o=i.from;n.default;var s=$e(o)?e.__parseExpression(o)||l:o!=null?o:l,c=$e(n.default)?e.__parseExpression(n.default):(r=n.default)!==null&&r!==void 0?r:null;return t[l]=u.inject(s,c),t},{})}function Uo(u,a,e){return Object.keys(a).reduce(function(t,n){var r=a[n],i=e.$apis[r.detail],l=Ct(r.transform)?r.transform.value?e.__parseFunction(r.transform):void 0:r.transform;return t[n]=G(T().mark(function o(){var s,c,v,f,p=arguments;return T().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:for(s=p.length,c=new Array(s),v=0;v<s;v++)c[v]=p[v];return g.next=3,i.apply(e,c);case 3:return f=g.sent,g.abrupt("return",l?l(f):f);case 5:case"end":return g.stop()}},o)})),t},{})}function Jo(u,a,e){var t=u.CSSStyleSheet;if(t.prototype.replaceSync){var n=new t;n.id=a,n.replaceSync(e);var r=u.document,i=r.adoptedStyleSheets,l=Array.from(i).filter(function(c){return c.id!==a});r.adoptedStyleSheets=[].concat(at(l),[n])}else{var o=u.document,s=o.getElementById(a);s?s.innerHTML=e:(s=o.createElement("style"),s.id=a,s.innerHTML=e,o.head.appendChild(s))}}function cr(u){var a,e,t,n=u.Vue,r=u.block,i=u.components,l=i===void 0?{}:i,o=u.libs,s=o===void 0?{}:o,c=u.apis,v=c===void 0?{}:c,f=u.loader,p=r?Yt.DESIGN:Yt.RUNTIME,y=n.computed(function(){return u.dsl}),g=Ao.reduce(function(b,h){return b[h]=n[h],b},{}),w=new To({mode:p,dsl:y.value,loader:f,attrs:{$components:z(z({},g),l),$libs:s,$apis:v}});return y.value.id&&Jo(u.window||window,y.value.id,y.value.css||""),n.defineComponent(z({name:y.value.name,props:z({},Fo((a=y.value.props)!==null&&a!==void 0?a:[],w)),setup:function(h){var k,V,I,D;w.props=h,w.state=Oo(n,(k=y.value.state)!==null&&k!==void 0?k:{},w);var O=xo(n,(V=y.value.computed)!==null&&V!==void 0?V:{},w),C=Bo((I=y.value.methods)!==null&&I!==void 0?I:{},w),$=Lo(n,y.value.inject,w),R=Uo(n,y.value.dataSources||{},w),L=z(z(z(z({},$),O),C),R);return w.setup(L,n),No(n,(D=y.value.watch)!==null&&D!==void 0?D:[],w),r&&r.id===w.__id&&(r.runtimeContext=w),n.onUnmounted(function(){r&&r.id===w.__id&&(r.runtimeContext=void 0)}),{vtj:w}},emits:at((e=y.value.emits)!==null&&e!==void 0?e:[]),expose:["vtj"],render:function(){if(!y.value.children)return null;var h=y.value.children||[];return h.length===1?kt(n,h[0],w):h.map(function(k){return kt(n,k,w)})}},Ro((t=y.value.lifeCycles)!==null&&t!==void 0?t:{},w)))}var Mo=function(){function u(a,e,t){_e(this,u),P(this,"app",null),P(this,"dsl",null),P(this,"onNodeChangeProxy",void 0),this.env=a,this.service=e,this.history=t,this.onNodeChangeProxy=this.onNodeChange.bind(this)}return ke(u,[{key:"install",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=Object.values(t);this.app&&(Object.assign(this.app.config.globalProperties,n),this.app.config.errorHandler=function(i,l,o){var s=`[ ${l==null?void 0:l.$options.name}] ${(i==null?void 0:i.message)||i||"未知错误"}`;console.error({err:i,instance:l,info:o}),Ie.error({title:"运行错误",message:s})},r.forEach(function(i){var l;(typeof i=="function"||i.install)&&((l=e.app)===null||l===void 0||l.use(i))}))}},{key:"render",value:function(e){this.app&&this.dispose();var t=this.env,n=t.Vue,r=t.container,i=t.components,l=t.libs,o=t.apis,s=t.window,c=t.globals,v=document.createElement("div");v.id="app",r.appendChild(v);var f=sr({getFile:this.service.getFile.bind(this.service),options:{Vue:n,block:e,components:i,libs:l,apis:o,window:s}});this.dsl=n.reactive(e.toDsl());var p=cr({Vue:n,dsl:this.dsl,block:e,components:i,libs:l,apis:o,window:s,loader:f});this.app=n.createApp(p),this.install(l,c),this.app.mount(v),N.on(Q,this.onNodeChangeProxy)}},{key:"onNodeChange",value:function(e){if(fe(e))this.render(e);else if(this.dsl){var t=e.toDsl();this.updateChild(t,this.dsl)}this.dsl&&this.history.value&&this.history.value.push(this.dsl)}},{key:"updateChild",value:function(e,t){var n=t.children||[];if(Array.isArray(n))for(var r=0;r<n.length;r++){var i=n[r];if(i.id===e.id){n.splice(r,1,e);return}else this.updateChild(e,i)}}},{key:"dispose",value:function(){if(this.app){this.app.unmount();var e=this.app._container;e&&e.parentNode&&(e.parentNode.removeChild(e),this.app._container=null),this.app=null}this.dsl=null,N.off(Q,this.onNodeChangeProxy)}}]),u}(),zo=function(){function u(a){var e=this;_e(this,u),P(this,"unwatches",[]),P(this,"iframe",null),P(this,"contentWindow",null),P(this,"project",void 0),P(this,"renderer",null),P(this,"assets",void 0),P(this,"service",void 0),P(this,"globals",void 0),P(this,"history",S(null)),P(this,"isReady",!1);var t=a.project,n=a.assets,r=a.service,i=a.globals;this.project=t,this.assets=n,this.service=r,this.globals=i,N.on(Kt,function(){return e.open()}),N.on(bt,function(l){return e.service.saveHistory(l)}),N.on(Ze,function(l){var o,s=t.current.value;s&&(s.init(l.block),(o=e.renderer)===null||o===void 0||o.render(s))}),this.unwatches.push(pe(t.current,function(){var l=G(T().mark(function o(s){var c,v;return T().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!s){p.next=6;break}return p.next=3,e.loadHistory(s);case 3:(c=e.renderer)===null||c===void 0||c.render(s),p.next=7;break;case 6:e.history.value=null,(v=e.renderer)===null||v===void 0||v.dispose();case 7:case"end":return p.stop()}},o)}));return function(o){return l.apply(this,arguments)}}()))}return ke(u,[{key:"loadHistory",value:function(){var a=G(T().mark(function t(n){var r;return T().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.service.getHistory(n.id);case 2:r=l.sent,this.history.value=new ci({history:{blockId:n.id,items:r}});case 4:case"end":return l.stop()}},t,this)}));function e(t){return a.apply(this,arguments)}return e}()},{key:"init",value:function(e){var t=this;pe(e,function(n){n&&(t.iframe=n,t.assets.isReady&&t.open())})}},{key:"open",value:function(){if(this.iframe){this.isReady=!1,this.contentWindow=this.iframe.contentWindow,this.contentWindow.__simulator__=this;var e=this.contentWindow.document;N.emit(co,e);var t=this.parseDependencies(),n=t.scripts,r=t.css;e.open(),e.write(`
     <!DOCTYPE html>
     <html lang="zh-CN">
       <head>
       <meta charset="utf-8">
       <meta name="viewport"
             content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0,viewport-fit=cover"/>
         <style>
            html, body, #app {
              background: #fff;
              padding: 0;
              margin: 0;
              min-height: 100vh;
              width: 100%;
              height: 100%;
              font-size:12px;
            }
         </style>
         ${ja(r)}
         ${Ea(n)}
       </head>
       <body> 
       </body>
       <script>
       __simulator__.ready();
     <\/script> 
     </html>
    `),e.close()}}},{key:"parseDependencies",value:function(){var e=this.project.dependencies.value.filter(function(r){return r.enabled}),t=[],n=[];return e.forEach(function(r){var i=r.urls;i==null||i.forEach(function(l){wa(l)&&t.push(l),_a(l)&&n.push(l)})}),{scripts:t,css:n}}},{key:"parseApis",value:function(){return this.project.apis.value.reduce(function(e,t){return e[t.name]=Ca(t),e},{})}},{key:"createEnv",value:function(){var e=this.contentWindow,t=this.assets,n=this.globals,r=this.project.dependencies.value,i=t.componentGroups,l={window:e,Vue:null,libs:{},components:{},apis:this.parseApis(),container:e==null?void 0:e.document.body,globals:n};return r.filter(function(o){return!!o.enabled}).forEach(function(o){var s,c=o.library,v=e[c];v&&(l.libs[c]=v,c===kn&&(l[kn]=v),(((s=i.find(function(f){return f.library===c}))===null||s===void 0?void 0:s.names)||[]).forEach(function(f){l.components[f]=v[f]}))}),l}},{key:"ready",value:function(){var e,t;this.isReady=!0,(e=this.renderer)!==null&&e!==void 0&&e.dispose(),this.renderer=null;var n=this.project.current.value,r=this.createEnv();this.renderer=new Mo(r,this.service,this.history),n&&this.renderer.render(n),N.emit(qt,(t=this.contentWindow)===null||t===void 0?void 0:t.document)}},{key:"dispose",value:function(){var e;(e=this.renderer)!==null&&e!==void 0&&e.dispose(),this.contentWindow=null,this.iframe=null,this.renderer=null,this.history.value=null,this.unwatches.forEach(function(t){return t()}),N.off(Kt),N.off(bt),N.off(Ze)}}]),u}(),fn=Symbol("VtjEngine"),Wo=function(){function u(a){var e=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_e(this,u),P(this,"config",void 0),P(this,"skeleton",void 0),P(this,"app",void 0),P(this,"service",void 0),P(this,"emitter",N),P(this,"project",void 0),P(this,"assets",void 0),P(this,"simulator",void 0);var n=t.config,r=n===void 0?{}:n,i=t.service,l=i===void 0?new Zn:i,o=t.project,s=t.globals,c=s===void 0?{}:s;this.service=l,this.config=xa(Ra,r),this.skeleton=new oo(this.config.widgets||[]),this.project=xn(new si(o,this.config.dependencies)),this.assets=new go(this.service,this.project),this.simulator=new zo({project:this.project,assets:this.assets,service:this.service,globals:c}),this.app=Fn(uo,{engine:pt(this)}),this.bindListeners(),this.loadProject(this.project.toDsl()),_t(function(){var v;e.app.mount((v=d(a))!==null&&v!==void 0?v:document.body)}),Xe(function(){e.dispose()})}return ke(u,[{key:"loadProject",value:function(){var a=G(T().mark(function t(n){var r,i,l;return T().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return r=this.service,i=this.project,s.next=4,r.getProject(n||{name:"未命名项目"});case 4:l=s.sent,i.load(l);case 6:case"end":return s.stop()}},t,this)}));function e(t){return a.apply(this,arguments)}return e}()},{key:"bindListeners",value:function(){var e=this,t=this.emitter,n=this.service;t.on(De,function(r){return n.updateProject(r)}),t.on(ft,function(r){return n.createFile(r)}),t.on(Ht,function(r){return n.updateFile(r)}),t.on(Gt,function(r){return n.removeFile(r)}),t.on(Q,function(){var r=e.project.current.value;r&&n.updateFile(r.toDsl())})}},{key:"dispose",value:function(){this.emitter.all.clear(),this.skeleton.dispose(),this.assets.dispose(),this.simulator.dispose(),this.app.unmount()}}]),u}(),Ho=function(){function u(a,e,t){var n=this;_e(this,u),P(this,"draggingComponent",null),P(this,"document",null),P(this,"proxied",{}),P(this,"hover",$t(null)),P(this,"dropping",$t(null)),P(this,"selected",$t(null)),this.engine=a,this.iframe=e,this.slotPicker=t,a.simulator.init(e),N.on(qt,function(r){n.bindEvents(r)}),N.on(Qt,function(r){n.draggingComponent=r}),N.on(Zt,function(){n.draggingComponent=null}),N.on(Ze,function(){n.selected.value=null,n.hover.value=null}),pe(a.project.current,function(){n.selected.value=null,n.hover.value=null})}return ke(u,[{key:"dispose",value:function(){this.engine.simulator.dispose(),N.off(qt),N.off(Qt),N.off(Zt),this.document&&(this.unbindEvents(this.document),this.document=null)}},{key:"getNodeByElement",value:function(e){var t,n=(t=e.__vtj__)!==null&&t!==void 0?t:"";return yt.nodes[n]||null}},{key:"getElementByNode",value:function(e){return!this.document||!e?null:fe(e)?this.document.body:Array.from(this.document.querySelectorAll("*")).find(function(t){return t.__vtj__===e.id})}},{key:"getDropType",value:function(e,t,n){var r=e.left,i=e.top,l=e.width,o=e.height;return t>=r&&t<=r+l*.2?"left":t>=r+l*.8&&t<=r+l?"right":n>=i&&n<=i+o*.2?"top":n>=i+o*.8&&n<=i+o?"bottom":"inner"}},{key:"getElementAndNode",value:function(e){var t=this.engine,n=this.document,r=e.composedPath(),i=this.findVtjElement(r)||(n==null?void 0:n.body),l=i?this.getNodeByElement(i)||t.project.current.value:null;return{el:i,node:l,path:r}}},{key:"onDragOver",value:function(e){var t=this.getElementAndNode(e),n=t.el,r=t.node;if(r&&n&&this.allowDrop(r)){e.preventDefault();var i=n.getBoundingClientRect();this.dropping.value={el:n,node:r,rect:i,type:this.getDropType(i,e.clientX,e.clientY),path:[]}}else this.dropping.value=null}},{key:"onMouseOver",value:function(e){var t=this.getElementAndNode(e),n=t.el,r=t.node;if(n&&r){var i=n.getBoundingClientRect();this.hover.value={el:n,node:r,rect:i,type:"inner",path:[]}}}},{key:"onLeave",value:function(e){this.hover.value=null,this.dropping.value=null}},{key:"createNodeDsl",value:function(e){var t=e.name,n=e.snippet,r=n===void 0?{}:n,i=e.from;return z(z({},r),{},{name:t,from:i||e.package})}},{key:"getDropSlot",value:function(){var a=G(T().mark(function t(n){var r,i,l,o,s,c,v;return T().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(n){p.next=2;break}return p.abrupt("return");case 2:return i=this.engine,l=this.slotPicker,o=i.assets.componentMap,p.next=7,i.assets.getBlockDescription(n.from);case 7:if(p.t0=p.sent,p.t0){p.next=10;break}p.t0=o[n.name];case 10:if(s=p.t0,s!=null&&s.slots){p.next=13;break}return p.abrupt("return");case 13:if(c=((s==null?void 0:s.slots)||["default"]).map(function(y){return typeof y=="string"?{name:y,params:[]}:{name:y.name,params:y.params||[]}}),c.length!==0){p.next=16;break}return p.abrupt("return");case 16:if(c.length!==1){p.next=18;break}return p.abrupt("return",c[0]);case 18:return p.next=20,l(c).catch(function(y){});case 20:if(v=p.sent,v&&v.name==="default"&&(!v.params||((r=v.params)===null||r===void 0?void 0:r.length)===0)){p.next=23;break}return p.abrupt("return",v);case 23:case"end":return p.stop()}},t,this)}));function e(t){return a.apply(this,arguments)}return e}()},{key:"onDrop",value:function(){var a=G(T().mark(function t(n){var r,i,l,o,s,c,v,f,p,y;return T().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(n.preventDefault(),r=this.engine,i=this.draggingComponent,l=this.dropping,o=r.project.current.value,!(!o||!i||!l.value)){w.next=4;break}return w.abrupt("return");case 4:if(s=this.getElementAndNode(n),c=s.el,v=s.node,!(!c||!v||!this.allowDrop(v))){w.next=7;break}return w.abrupt("return");case 7:return f=this.createNodeDsl(i),p=new yt(f),y=l.value.type,w.next=10,this.getDropSlot(y==="inner"?v:v.parent);case 10:p.slot=w.sent,fe(v)?o.appendChild(p):o.appendChild(p,v,y);case 12:case"end":return w.stop()}},t,this)}));function e(t){return a.apply(this,arguments)}return e}()},{key:"onSelected",value:function(e){var t=this.getElementAndNode(e),n=t.el,r=t.node,i=t.path;if(n&&r){var l=n.getBoundingClientRect();this.selected.value={el:n,node:r,rect:l,path:this.getNodePath(i),type:this.getDropType(l,e.clientX,e.clientY)}}}},{key:"onViewChange",value:function(){this.updateRect()}},{key:"updateRect",value:function(){var e=d(this.selected),t=d(this.hover);if(e){var n=e.el.getBoundingClientRect();this.selected.value=z(z({},e),{},{rect:n})}if(t){var r=t.el.getBoundingClientRect();this.hover.value=z(z({},t),{},{rect:r})}}},{key:"getNodePath",value:function(e){var t=this,n=e.filter(function(i){return t.isVtjElement(i)&&t.isCurrentContext(i)}).map(function(i){return t.getNodeByElement(i)}),r=this.engine.project.current.value;return r&&n.push(r),n}},{key:"isVtjElement",value:function(e){return!!e.__vtj__}},{key:"isCurrentContext",value:function(e){var t,n,r=(t=this.engine.project.current.value)===null||t===void 0?void 0:t.id,i=(n=e.__context__)===null||n===void 0?void 0:n.__id;return r===i}},{key:"findVtjElement",value:function(e){var t=this;return e.find(function(n){return t.isVtjElement(n)&&t.isCurrentContext(n)})}},{key:"bind",value:function(e,t){var n=this.proxied[t];return n||(n=e.bind(this),this.proxied[t]=n),n}},{key:"bindEvents",value:function(e){this.document&&this.unbindEvents(this.document);var t=this.engine.simulator.contentWindow;e.addEventListener("mouseover",this.bind(this.onMouseOver,"onMouseOver")),e.addEventListener("mouseleave",this.bind(this.onLeave,"onLeave")),e.addEventListener("dragover",this.bind(this.onDragOver,"onDragOver")),e.addEventListener("dragleave",this.bind(this.onLeave,"onLeave")),e.addEventListener("drop",this.bind(this.onDrop,"onDrop")),e.addEventListener("click",this.bind(this.onSelected,"onSelected")),e.addEventListener("scroll",this.bind(this.onViewChange,"onViewChange")),t!=null&&t.addEventListener("resize",this.bind(this.onViewChange,"onViewChange")),this.document=e}},{key:"unbindEvents",value:function(e){var t=this.engine.simulator.contentWindow;e.removeEventListener("mouseover",this.bind(this.onMouseOver,"onMouseOver")),e.removeEventListener("mouseleave",this.bind(this.onLeave,"onLeave")),e.removeEventListener("dragover",this.bind(this.onDragOver,"onDragOver")),e.removeEventListener("dragleave",this.bind(this.onLeave,"onLeave")),e.removeEventListener("drop",this.bind(this.onDrop,"onDrop")),e.removeEventListener("click",this.bind(this.onSelected,"onSelected")),e.removeEventListener("scroll",this.bind(this.onViewChange,"onViewChange")),t!=null&&t.removeEventListener("resize",this.bind(this.onViewChange,"onViewChange")),this.document=null}},{key:"allowDrop",value:function(e){var t=this.draggingComponent,n=this.engine;if(!t)return!0;var r=n.project.current.value;return r&&r.allowDrop(t,e,n.assets)}},{key:"setHover",value:function(e){var t=this.getElementByNode(e);if(t){var n=t.getBoundingClientRect();this.hover.value={el:t,node:e,rect:n,type:"inner",path:[]}}}},{key:"setSelected",value:function(e){if(this.document){var t=this.getElementByNode(e)||this.document.createElement("span"),n=t.getBoundingClientRect();this.selected.value={el:t,node:e,rect:n,path:this.findPathByNode(e),type:"inner"}}}},{key:"findPathByNode",value:function(e){var t=[e];if(fe(e))return t;for(var n=e;n.parent&&n.parent!==n;)n=n.parent,n!==e&&t.unshift(n);return t.reverse()}}]),u}();const Go=u=>(Ar("data-v-c00ef9a7"),u=u(),Ir(),u),Ko={class:"vtj-ide"},qo={class:"file-list"},Qo={key:1},Zo=Go(()=>W("div",{class:"error-tip"}," 错误日志已保存. 这可能是系统的bug。您可以把日志提交给作者协助解决。 ",-1)),Yo=H({__name:"index",setup(u){const e=S(!1),t=S(!1),n=S([]),r=S(null),i=S(!1),l=S(),o=hr(),{project:s,raw:c=!1,service:v="storage",debug:f}=(o==null?void 0:o.options)||{},{id:p="ide",name:y="IDE",base:g=location.pathname,mode:w="hash",page:b="/page",preview:h="/preview",home:k="/"}=s||{},V=()=>`${g}${w==="hash"?"#":""}${k}`,I=new Wo(l,{service:v==="file"?new Fa:new Zn,config:{widgets:[{name:"switcher",props:{link:V()}},{name:"actions",props:{coder:!0,copy:!1}}]},project:{id:p,name:y},globals:{$route:dr(),$router:vr()}});return I.emitter.on(ar,D=>{const O=w==="hash"?"#":"";let C="";gr(D)?C=c?`${g}${O}${h}/${D.id}`:`${g}${O}${b}/${D.id}`:C=`${g}${O}${h}/${D.id}`,window.open(C)}),I.emitter.on(ir,D=>{const C=`${g}${w==="hash"?"#":""}${k}`;window.open(C)}),I.emitter.on(ur,D=>St(this,null,function*(){if(v==="storage"||!c){D.value=!1,e.value=!0;return}t.value=!0,i.value=!0,n.value=[],r.value=null;const O=I.project.toDsl(),C=I.assets.componentMap,$=I.assets.packages;n.value=yield mn({type:"projectCoder",data:{debug:f,project:O,assets:{componentMap:C,packages:$}}}).catch(R=>(r.value=R.data,console.log(R),[])),i.value=!1})),I.emitter.on(lr,D=>St(this,null,function*(){D.value=!0,yield mn({type:"copyProject"}),D.value=!1,yield yr(p),Se.success({message:"复制项目样例完成, 正在重置设置器"}),yield xt(2e3),location.reload()})),(D,O)=>(m(),A("div",Ko,[W("div",{ref_key:"container",ref:l,class:"container"},null,512),E(d(ge),{modelValue:e.value,"onUpdate:modelValue":O[0]||(O[0]=C=>e.value=C),title:"温馨提示",width:"500px",height:"180px"},{default:_(()=>[E(d(lt),{title:"当前设计器是非源码模式，不支持出码功能",type:"warning",closable:!1,description:"可以使用以下命令下载完整版本体验"}),E(d(lt),{class:"npm-command",closable:!1,type:"info",title:"npm create vtj@latest -- -t web"})]),_:1},8,["modelValue"]),E(d(ge),{modelValue:t.value,"onUpdate:modelValue":O[1]||(O[1]=C=>t.value=C),title:"出码结果",width:"800px",height:"400px"},{default:_(()=>[E(d(Xr),{rows:3,animated:"",loading:i.value},{default:_(()=>[r.value?x("",!0):(m(),j(d(lt),{key:0,closable:!1,type:"success",title:`输出文件数: ${n.value.length}`},null,8,["title"])),W("div",qo,[(m(!0),A(X,null,ee(n.value,C=>(m(),A("div",null,re(C),1))),256))]),r.value?(m(),A("div",Qo,[E(d(lt),{closable:!1,type:"error",title:"出码失败",description:r.value.msg},null,8,["description"]),Zo])):x("",!0)]),_:1},8,["loading"])]),_:1},8,["modelValue"])]))}});const fs=br(Yo,[["__scopeId","data-v-c00ef9a7"]]);export{fs as default};
