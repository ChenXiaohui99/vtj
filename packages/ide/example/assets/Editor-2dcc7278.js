var W=Object.defineProperty;var f=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var m=(t,r,a)=>r in t?W(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,y=(t,r)=>{for(var a in r||(r={}))w.call(r,a)&&m(t,a,r[a]);if(f)for(var a of f(r))B.call(r,a)&&m(t,a,r[a]);return t};var p=(t,r,a)=>new Promise((n,l)=>{var e=o=>{try{i(a.next(o))}catch(d){l(d)}},c=o=>{try{i(a.throw(o))}catch(d){l(d)}},i=o=>o.done?n(o.value):Promise.resolve(o.value).then(e,c);i((a=a.apply(t,r)).next())});import{W as g,a as h,b as _,c as k,d as v,e as E}from"./monaco-editor-919908db.js";import{I as V,e as x,h as b,n as C,Z as T,i as j,o as z,c as D,R as M,a0 as P}from"./@vue-9c1a160c.js";const O=V({__name:"Editor",props:{lang:{default:"typescript"},modelValue:{default:""},options:{default:()=>({})},height:{default:"300px"},readonly:{type:Boolean,default:!1},dark:{type:Boolean,default:!1},border:{type:Boolean},minimap:{type:Boolean,default:!1}},emits:["change","blur"],setup(t,{expose:r,emit:a}){const n=t;self.MonacoEnvironment={createTrustedTypesPolicy:void 0,getWorker(s,u){return u==="json"&&g?new g:["css","scss","less"].includes(u)&&h?new h:["html","handlebars","razor","vue"].includes(u)&&_?new _:["typescript","javascript"].includes(u)&&k?new k:v?new v:Promise.resolve({})}};const l=x();let e=null;const c=()=>p(this,null,function*(){var s;e&&(yield(s=e.getAction("editor.action.formatDocument"))==null?void 0:s.run(),e.setValue(e.getValue()))}),i=()=>p(this,null,function*(){yield c(),a("blur",e==null?void 0:e.getValue())}),o=()=>{e=E.create(l.value,y({value:n.modelValue,language:n.lang,readOnly:n.readonly,theme:n.dark?"vs-dark":"vs",automaticLayout:!0,minimap:{enabled:n.minimap}},n.options)),e.onDidChangeModelContent(s=>{a("change",e==null?void 0:e.getValue(),s)}),e.onDidBlurEditorText(i)};return b(()=>{C(o)}),T(()=>{e&&e.dispose()}),j(()=>n.modelValue,s=>{e&&e.setValue(s)}),r({getEditor:()=>e}),(s,u)=>(z(),D("div",{class:M(["vtj-code-editor",{"is-border":n.border}]),ref_key:"container",ref:l,style:P({height:n.height})},null,6))}});export{O as default};
