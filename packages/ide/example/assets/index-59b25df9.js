var jt=(a,r,e)=>new Promise((t,n)=>{var i=o=>{try{l(e.next(o))}catch(s){n(s)}},u=o=>{try{l(e.throw(o))}catch(s){n(s)}},l=o=>o.done?t(o.value):Promise.resolve(o.value).then(i,u);l((e=e.apply(a,r)).next())});import{b as vr,u as fr}from"./vue-router-967a0738.js";import{_ as pr}from"./monaco-editor-38c15c16.js";import{z as In,y as Oe,V as vn,Y as Dn,a as Fn,k as Te,w as fn,b as Bt,l as Ue,f as He,N as mr,j as hr,i as gr,_ as yr}from"./index-695ed0dc.js";import{W as _r}from"./vue-335863c9.js";import{Y as br}from"./mitt-20a000ba.js";import{c as kr,d as On,e as Rn}from"./@vueuse-c6b48f1d.js";import{q as wr,r as Cr,e as Vr,f as Sr,t as Bn,u as Tn}from"./@element-plus-45f3a8b7.js";import{I as H,W as y,a2 as jr,k as I,l as U,o as p,M as $,aj as Ln,O as k,J as ve,K as ae,a7 as Er,T,w as ce,aJ as $r,c as O,a as W,a3 as oe,R as ue,U as te,V as ee,X as Y,ae as X,u as d,ar as xn,ap as Nn,b5 as vt,h as bt,Z as Ye,a9 as kt,H as Ar,a0 as We,P as Qe,Q as Ke,ah as ft,aw as Pr,S as Gt,ai as Yt,_ as Re,E as Xt,af as Mn,m as Zt,ad as st,bt as tt,f as Ir,i as pn,s as Et,n as at,bg as Dr,be as Fr}from"./@vue-062efada.js";import{i as Pe,n as ye,E as Or,c as Tt,a as Lt,b as zn,d as Rr,o as Br,m as fe,p as xt,q as Nt,r as en,s as tn,t as nn,u as Un,v as Ne,w as le,x as ne,y as Z,z as Tr,A as Lr,B as rn,C as an,D as Ze,F as xr,G as un,j as Nr,H as Mr,I as zr,J as Ur,K as Hr,L as Jr,M as Wr,N as Qr,O as Kr,l as _e,k as je,P as wt,Q as Ct,R as qr,S as Gr,T as Yr,U as Xr,V as it,W as Zr}from"./element-plus-80613524.js";import"./lodash-es-74278d6e.js";import"./async-validator-be22f7ee.js";import"./@ctrl-b0f23ca4.js";import"./@popperjs-7c8154ca.js";function ea(a,r){var e=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!e){if(Array.isArray(a)||(e=ta(a))||r&&a&&typeof a.length=="number"){e&&(a=e);var t=0,n=function(){};return{s:n,n:function(){return t>=a.length?{done:!0}:{done:!1,value:a[t++]}},e:function(s){throw s},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,u=!1,l;return{s:function(){e=e.call(a)},n:function(){var s=e.next();return i=s.done,s},e:function(s){u=!0,l=s},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(u)throw l}}}}function ta(a,r){if(a){if(typeof a=="string")return mn(a,r);var e=Object.prototype.toString.call(a).slice(8,-1);if(e==="Object"&&a.constructor&&(e=a.constructor.name),e==="Map"||e==="Set")return Array.from(a);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return mn(a,r)}}function mn(a,r){(r==null||r>a.length)&&(r=a.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=a[e];return t}function hn(a,r){var e=Object.keys(a);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(a);r&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable})),e.push.apply(e,t)}return e}function gn(a){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?hn(Object(e),!0).forEach(function(t){na(a,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(e)):hn(Object(e)).forEach(function(t){Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(e,t))})}return a}function na(a,r,e){return r=ra(r),r in a?Object.defineProperty(a,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[r]=e,a}function ra(a){var r=aa(a,"string");return typeof r=="symbol"?r:String(r)}function aa(a,r){if(typeof a!="object"||a===null)return a;var e=a[Symbol.toPrimitive];if(e!==void 0){var t=e.call(a,r||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(a)}var ia=[{icon_id:"6815275",name:"窗体-窗口化-细",font_class:"window-max",unicode:"e7e8",unicode_decimal:59368},{icon_id:"6815276",name:"窗体-窗体化-细",font_class:"window-min",unicode:"e7e9",unicode_decimal:59369},{icon_id:"6815277",name:"窗体-关闭-细",font_class:"window-close",unicode:"e7ea",unicode_decimal:59370},{icon_id:"6815278",name:"窗体-窗口最大化-细",font_class:"window-normal",unicode:"e7eb",unicode_decimal:59371},{icon_id:"6816488",name:"窗体-折叠",font_class:"window-down",unicode:"e7ec",unicode_decimal:59372},{icon_id:"6816489",name:"窗体-展开",font_class:"window-up",unicode:"e7ed",unicode_decimal:59373},{icon_id:"23109780",name:"保存",font_class:"np-save",unicode:"e608",unicode_decimal:58888},{icon_id:"23109781",name:"查看文件",font_class:"np-file",unicode:"e609",unicode_decimal:58889},{icon_id:"23109782",name:"编辑",font_class:"np-edit",unicode:"e60f",unicode_decimal:58895},{icon_id:"23109783",name:"冲销",font_class:"np-share",unicode:"e610",unicode_decimal:58896},{icon_id:"23109784",name:"查询",font_class:"np-search",unicode:"e613",unicode_decimal:58899},{icon_id:"23109785",name:"导出",font_class:"np-export",unicode:"e614",unicode_decimal:58900},{icon_id:"23109786",name:"导入",font_class:"np-import",unicode:"e615",unicode_decimal:58901},{icon_id:"23109787",name:"清单",font_class:"np-list",unicode:"e616",unicode_decimal:58902},{icon_id:"23109788",name:"打印",font_class:"np-print",unicode:"e617",unicode_decimal:58903},{icon_id:"23109789",name:"取消",font_class:"np-cancel",unicode:"e619",unicode_decimal:58905},{icon_id:"23109790",name:"确认",font_class:"np-confirm",unicode:"e61a",unicode_decimal:58906},{icon_id:"23109791",name:"全消",font_class:"np-reset",unicode:"e61c",unicode_decimal:58908},{icon_id:"23109792",name:"返回所有数据",font_class:"np-return-all",unicode:"e61e",unicode_decimal:58910},{icon_id:"23109793",name:"返回数据",font_class:"np-return",unicode:"e61f",unicode_decimal:58911},{icon_id:"23109794",name:"删单",font_class:"np-remove",unicode:"e621",unicode_decimal:58913},{icon_id:"23109795",name:"删行",font_class:"np-remove-row",unicode:"e624",unicode_decimal:58916},{icon_id:"23109796",name:"删除",font_class:"np-delete",unicode:"e625",unicode_decimal:58917},{icon_id:"23109798",name:"退出",font_class:"np-exit",unicode:"e626",unicode_decimal:58918},{icon_id:"23109799",name:"刷新",font_class:"np-refresh",unicode:"e627",unicode_decimal:58919},{icon_id:"23109800",name:"新单",font_class:"np-add",unicode:"e62b",unicode_decimal:58923},{icon_id:"23109801",name:"选择",font_class:"np-select",unicode:"e62c",unicode_decimal:58924},{icon_id:"23109802",name:"增行",font_class:"np-add-row",unicode:"e62e",unicode_decimal:58926},{icon_id:"23109804",name:"向下展开",font_class:"np-extend",unicode:"e62f",unicode_decimal:58927},{icon_id:"23109805",name:"关闭",font_class:"np-close",unicode:"e630",unicode_decimal:58928},{icon_id:"23192195",name:"提交",font_class:"np-submit",unicode:"e632",unicode_decimal:58930},{icon_id:"588713",name:"管理依赖",font_class:"deps",unicode:"e6ef",unicode_decimal:59119},{icon_id:"796979",name:"返回",font_class:"back",unicode:"e650",unicode_decimal:58960},{icon_id:"6529999",name:"首页",font_class:"home",unicode:"e70e",unicode_decimal:59150},{icon_id:"4417791",name:"API管理",font_class:"api",unicode:"e661",unicode_decimal:58977},{icon_id:"4736293",name:"导出",font_class:"export",unicode:"e611",unicode_decimal:58897},{icon_id:"4736342",name:"导入",font_class:"import",unicode:"e612",unicode_decimal:58898},{icon_id:"630094",name:"向右箭头",font_class:"greater",unicode:"e65f",unicode_decimal:58975},{icon_id:"630095",name:"向左箭头",font_class:"smaller",unicode:"e660",unicode_decimal:58976},{icon_id:"363384",name:"正确",font_class:"check",unicode:"e60e",unicode_decimal:58894},{icon_id:"166620",name:"切换",font_class:"switch",unicode:"e62a",unicode_decimal:58922},{icon_id:"7617414",name:"复制",font_class:"copy",unicode:"e629",unicode_decimal:58921},{icon_id:"15838497",name:"lock",font_class:"lock",unicode:"e676",unicode_decimal:58998},{icon_id:"15838546",name:"unlock",font_class:"unlock",unicode:"e683",unicode_decimal:59011},{icon_id:"17881271",name:"层级",font_class:"layers",unicode:"e60d",unicode_decimal:58893},{icon_id:"11891771",name:"code",font_class:"console",unicode:"e669",unicode_decimal:58985},{icon_id:"6756283",name:"团队",font_class:"team",unicode:"e605",unicode_decimal:58885},{icon_id:"4347518",name:"icon_发布",font_class:"publish",unicode:"eb88",unicode_decimal:60296},{icon_id:"5831330",name:"预览",font_class:"preview",unicode:"e655",unicode_decimal:58965},{icon_id:"26257252",name:"保存",font_class:"save",unicode:"e618",unicode_decimal:58904},{icon_id:"612622",name:"分类-电脑平板",font_class:"pc",unicode:"e65e",unicode_decimal:58974},{icon_id:"18169538",name:"平板电脑,移动设备",font_class:"phone",unicode:"e921",unicode_decimal:59681},{icon_id:"29522703",name:"23C平板",font_class:"pad",unicode:"e684",unicode_decimal:59012},{icon_id:"30019582",name:"refresh-right",font_class:"redo",unicode:"e60a",unicode_decimal:58890},{icon_id:"30019584",name:"refresh",font_class:"refresh",unicode:"e60b",unicode_decimal:58891},{icon_id:"30019585",name:"refresh-left",font_class:"undo",unicode:"e60c",unicode_decimal:58892},{icon_id:"30809865",name:"分类",font_class:"category",unicode:"e65d",unicode_decimal:58973},{icon_id:"30819803",name:"项目",font_class:"project",unicode:"e66a",unicode_decimal:58986},{icon_id:"30934243",name:"通知",font_class:"notice",unicode:"e67c",unicode_decimal:59004},{icon_id:"30934880",name:"收藏",font_class:"fav",unicode:"e67d",unicode_decimal:59005},{icon_id:"6598314",name:"bug",font_class:"bug",unicode:"e8e8",unicode_decimal:59624},{icon_id:"7594804",name:"24gl-fileText",font_class:"file",unicode:"eabe",unicode_decimal:60094},{icon_id:"7594806",name:"24gl-folderOpen",font_class:"folder",unicode:"eabf",unicode_decimal:60095},{icon_id:"1660743",name:"上传",font_class:"upload",unicode:"e628",unicode_decimal:58920},{icon_id:"1766327",name:"操作-上传-download",font_class:"download",unicode:"e68c",unicode_decimal:59020},{icon_id:"15838547",name:"user",font_class:"user",unicode:"e682",unicode_decimal:59010},{icon_id:"1727421",name:"205设置-线性",font_class:"setting",unicode:"e8b7",unicode_decimal:59575},{icon_id:"5387583",name:"箭头_向右",font_class:"arrow-right",unicode:"eb08",unicode_decimal:60168},{icon_id:"5387584",name:"箭头_向左",font_class:"arrow-left",unicode:"eb09",unicode_decimal:60169},{icon_id:"5387588",name:"箭头_向下",font_class:"arrow-down",unicode:"eb0a",unicode_decimal:60170},{icon_id:"5387589",name:"箭头_向上",font_class:"arrow-up",unicode:"eb0b",unicode_decimal:60171},{icon_id:"1489080",name:"分享",font_class:"share",unicode:"e620",unicode_decimal:58912},{icon_id:"18169741",name:"数据库,数据",font_class:"data",unicode:"e93a",unicode_decimal:59706},{icon_id:"2471377",name:"模板",font_class:"template",unicode:"e677",unicode_decimal:58999},{icon_id:"7594026",name:"24gl-fullScreenEnter",font_class:"exit-fullscreen",unicode:"ea68",unicode_decimal:60008},{icon_id:"7594027",name:"24gl-fullScreenEnter3",font_class:"fullscreen",unicode:"ea69",unicode_decimal:60009},{icon_id:"16009969",name:"编辑",font_class:"edit",unicode:"e604",unicode_decimal:58884},{icon_id:"1029238",name:"删除",font_class:"remove",unicode:"e61b",unicode_decimal:58907},{icon_id:"1766512",name:"符号-JSX",font_class:"js",unicode:"e6a0",unicode_decimal:59040},{icon_id:"4320345",name:"配比数据库",font_class:"database",unicode:"e658",unicode_decimal:58968},{icon_id:"7947753",name:"信息空心",font_class:"info",unicode:"ed1b",unicode_decimal:60699},{icon_id:"7956834",name:"加_色块",font_class:"plus",unicode:"ed21",unicode_decimal:60705},{icon_id:"7956835",name:"减_色块",font_class:"minus",unicode:"ed22",unicode_decimal:60706},{icon_id:"11372644",name:"帮助",font_class:"help",unicode:"e8ac",unicode_decimal:59564},{icon_id:"21918686",name:"代码",font_class:"vars",unicode:"e643",unicode_decimal:58947},{icon_id:"22966396",name:"大纲管理_默认",font_class:"outline",unicode:"e623",unicode_decimal:58915},{icon_id:"24304725",name:"明文显示",font_class:"visible",unicode:"e7e2",unicode_decimal:59362},{icon_id:"24304904",name:"秘文显示",font_class:"invisible",unicode:"e7e7",unicode_decimal:59367},{icon_id:"7269319",name:"文档-默认",font_class:"document",unicode:"e61d",unicode_decimal:58909},{icon_id:"18171114",name:"历史记录",font_class:"history",unicode:"ea10",unicode_decimal:59920},{icon_id:"18170418",name:"解除固定,图钉",font_class:"fixed",unicode:"e9b9",unicode_decimal:59833},{icon_id:"18170419",name:"解除固定,图钉",font_class:"unfixed",unicode:"e9ba",unicode_decimal:59834},{icon_id:"1304890",name:"搜索",font_class:"search",unicode:"e622",unicode_decimal:58914},{icon_id:"5232028",name:"more",font_class:"more",unicode:"e64b",unicode_decimal:58955},{icon_id:"200856",name:"3.1关闭",font_class:"close",unicode:"e600",unicode_decimal:58880},{icon_id:"22418438",name:"组件",font_class:"components",unicode:"e652",unicode_decimal:58962},{icon_id:"30697789",name:"元数据-组件库",font_class:"block",unicode:"e62d",unicode_decimal:58925}],ua=H({name:"Close",props:{colors:{type:Array,default:function(){return[]}}},setup:function(r){return function(){return y("svg",{viewBox:"0 0 1024 1024",width:"1em",height:"1em"},[[{path:"M512 432.46249999L865.92499999 78.49999973a56.13749998 56.13749998 0 0 1 79.53750003-5e-8 56.17500029 56.17500029 0 0 1 0 79.53750002L591.49999971 512l353.925 353.92499999c21.97500029 21.97500029 22.12499972 57.4125003 0 79.53750003a56.17500029 56.17500029 0 0 1-79.53750004 0L512 591.49999971 158.07500001 945.50000027a56.13749998 56.13749998 0 0 1-79.53750003 5e-8 56.17500029 56.17500029 0 0 1 0-79.53750002L432.50000029 512 78.49999973 158.07500001a56.13749998 56.13749998 0 0 1-5e-8-79.53750003 56.17500029 56.17500029 0 0 1 79.53750002 0L512 432.50000029z"}].map(function(e,t){var n;return y("path",{d:e.path,fill:(n=r.colors[t])!==null&&n!==void 0?n:"currentColor"},null)})])}}}),la=H({name:"ExitFullscreen",props:{colors:{type:Array,default:function(){return[]}}},setup:function(r){return function(){return y("svg",{viewBox:"0 0 1024 1024",width:"1em",height:"1em"},[[{path:"M298.666667 298.666667V85.333333h85.333333v298.666667H85.333333V298.666667h213.333334z m426.666666-213.333334v213.333334h213.333334v85.333333h-298.666667V85.333333h85.333333zM298.666667 938.666667v-213.333334H85.333333v-85.333333h298.666667v298.666667H298.666667z m426.666666 0h-85.333333v-298.666667h298.666667v85.333333h-213.333334v213.333334z"}].map(function(e,t){var n;return y("path",{d:e.path,fill:(n=r.colors[t])!==null&&n!==void 0?n:"currentColor"},null)})])}}}),oa=H({name:"Fixed",props:{colors:{type:Array,default:function(){return[]}}},setup:function(r){return function(){return y("svg",{viewBox:"0 0 1024 1024",width:"1em",height:"1em"},[[{path:"M374.442667 486.229333l-81.237334 101.034667c-2.218667 4.352-2.218667 6.570667 0 8.789333 0 2.218667 2.218667 4.352 6.570667 4.352H719.36c4.352 0 6.570667-2.133333 6.570667-4.352 0-2.218667 2.218667-4.437333 0-8.789333l-81.237334-101.034667H374.442667z m362.922666 179.2H281.770667a66.56 66.56 0 0 1-57.173334-35.754666 67.242667 67.242667 0 0 1 7.082667-66.730667l104.96-128.853333h345.856l104.96 128.853333c14.250667 19.029333 19.029333 45.226667 7.168 66.730667a66.56 66.56 0 0 1-57.258667 35.84zM380.16 178.773333H639.146667L680.362667 76.544c2.218667-4.266667 0-6.485333 0-6.485333 0-2.218667-2.133333-4.352-6.485334-4.352H347.562667c-4.352 0-6.570667 2.133333-6.570667 4.266666 0 2.218667-2.133333 4.437333 0 6.570667l39.253333 102.229333z m307.114667 62.122667H331.861333l-57.173333-145.493333a61.269333 61.269333 0 0 1 7.082667-57.173334 63.317333 63.317333 0 0 1 52.48-26.282666h355.413333c21.418667 0 40.533333 9.557333 52.48 26.197333 11.946667 16.725333 14.250667 38.229333 7.082667 57.258667l-61.952 145.493333z",color:"#FFFFFF"},{path:"M386.901333 426.922667h245.248V245.76H386.901333v181.162667z m309.930667 59.733333H322.304V186.026667h372.053333v300.544h2.474667zM510.72 992.256c-19.029333-16.725333-28.586667-40.618667-30.976-66.816L458.24 636.842667h107.349333l-21.418666 288.597333a127.146667 127.146667 0 0 1-33.450667 66.816",color:"#FFFFFF"},{path:"M19.2 905.557333m52.48 0l878.08 0q52.48 0 52.48 52.48l0 0.085334q0 52.48-52.48 52.48l-878.08 0q-52.48 0-52.48-52.48l0-0.085334q0-52.48 52.48-52.48Z",color:"#FFFFFF"}].map(function(e,t){var n;return y("path",{d:e.path,fill:(n=r.colors[t])!==null&&n!==void 0?n:"currentColor"},null)})])}}}),sa=H({name:"Fullscreen",props:{colors:{type:Array,default:function(){return[]}}},setup:function(r){return function(){return y("svg",{viewBox:"0 0 1024 1024",width:"1em",height:"1em"},[[{path:"M170.666667 170.666667v213.333333H85.333333V85.333333h298.666667v85.333334H170.666667z m682.666666 213.333333V170.666667h-213.333333V85.333333h298.666667v298.666667h-85.333334zM170.666667 640v213.333333h213.333333v85.333334H85.333333v-298.666667h85.333334z m682.666666 0h85.333334v298.666667h-298.666667v-85.333334h213.333333v-213.333333z"}].map(function(e,t){var n;return y("path",{d:e.path,fill:(n=r.colors[t])!==null&&n!==void 0?n:"currentColor"},null)})])}}}),ca=H({name:"Invisible",props:{colors:{type:Array,default:function(){return[]}}},setup:function(r){return function(){return y("svg",{viewBox:"0 0 1024 1024",width:"1em",height:"1em"},[[{path:"M891.0336 113.7664a32 32 0 0 1 0 45.2352l-104.6016 104.6016a380.1088 380.1088 0 0 1 81.408 65.024l4.5312 4.7104c2.6112 2.6368 5.4272 5.3504 8.704 8.3968l11.6224 10.4192 30.6176 26.624 12.9792 11.6224c53.76 48.8448 73.984 78.7456 73.984 120.064 0 47.488-26.7776 79.744-100.3776 142.848l-17.8432 15.4368a471.04 471.04 0 0 0-15.5392 14.1312l-4.7104 4.6592-10.5984 11.008c-80.8192 81.4336-209.4848 129.536-346.7008 129.536-86.784 0-169.5744-18.9696-239.1808-53.3504l-135.5264 135.5008a32 32 0 1 1-45.2352-45.2352l123.8784-123.904a364.9536 364.9536 0 0 1-63.4368-56.192l-1.8176-2.048a249.0112 249.0112 0 0 0-21.4016-20.1728l-12.6976-10.7776-17.6896-14.72-12.4672-10.496C36.6592 581.7856 12.8 549.9392 12.8 510.464c0-38.7072 19.3792-66.5088 70.8096-111.7952l12.4416-10.7776 27.4688-23.1168c13.568-11.4688 21.4016-18.56 27.8016-25.3184l3.712-4.0448a30.0544 30.0544 0 1 1 44.9792 39.936c-6.656 7.4752-13.2352 14.0032-22.9888 22.6816l-9.216 8.0384-42.8544 36.1728c-12.288 10.6752-21.4528 19.328-29.2608 27.8016-15.1808 16.4352-22.784 30.0032-22.784 40.448 0 10.1376 7.2448 23.2448 21.7344 39.0912 7.8592 8.6016 17.152 17.408 29.696 28.2624l11.5968 9.856 17.4336 14.5152c17.8176 14.8224 28.416 24.0128 36.9664 32.5376l4.9664 5.0944 11.3408 12.3648a315.8272 315.8272 0 0 0 55.168 45.568l89.7536-89.8304a30.0544 30.0544 0 0 1 10.1632-10.1632l217.4976-217.472a146.4064 146.4064 0 0 0-200.1152 70.7328 146.4832 146.4832 0 0 0-12.288 69.632 30.0544 30.0544 0 0 1-60.0064 4.224 206.7712 206.7712 0 0 1 17.408-98.304c46.2592-103.936 168.448-150.8608 272.4096-104.576 9.3696 4.1728 18.2528 8.96 26.6496 14.2592l56.5248-56.5504c-50.5088-17.7408-106.88-27.3664-165.2736-27.3664-95.1808 0-185.7024 25.472-254.7968 71.552A30.08 30.08 0 0 1 226.3808 273.92c79.0272-52.736 181.3248-81.664 288.1536-81.664 75.3152 0 148.0704 14.4896 211.712 41.0368l119.552-119.5008a32 32 0 0 1 45.2352 0z m-148.5568 193.792l-71.0656 71.0912a206.592 206.592 0 0 1 29.824 215.808c-46.2848 103.9616-168.4992 150.8608-272.4608 104.576a205.7216 205.7216 0 0 1-48-29.7472l-60.1088 60.0832 10.112 4.2496c51.968 20.9664 110.7968 32.7168 170.88 34.2016l12.8768 0.1536c124.928 0 240.7168-44.1088 309.504-117.4272l6.656-6.8864c3.1744-3.1744 6.5536-6.4 10.4704-9.984l8.6528-7.7824 44.6976-38.8352c17.5872-15.6928 29.568-27.776 38.8864-39.68 11.2384-14.336 16.8192-26.624 16.8192-36.864 0-10.6752-5.9904-23.552-18.0224-38.6048-9.1648-11.4688-20.7104-23.1424-37.376-38.144l-11.904-10.496-26.7776-23.1936c-11.1104-9.728-18.4832-16.4608-25.0112-22.9376l-13.312-13.7472a332.9792 332.9792 0 0 0-75.3408-55.808z m-113.8432 113.8688l-205.056 205.0816a146.4064 146.4064 0 0 0 222.72-56.5248 146.3552 146.3552 0 0 0-17.664-148.5568z",color:"#CCCCCC"}].map(function(e,t){var n;return y("path",{d:e.path,fill:(n=r.colors[t])!==null&&n!==void 0?n:"currentColor"},null)})])}}}),da=H({name:"LineHeight",props:{colors:{type:Array,default:function(){return[]}}},setup:function(r){return function(){return y("svg",{viewBox:"0 0 1024 1024",width:"1em",height:"1em"},[[{path:"M648 160H104c-4.4 0-8 3.6-8 8v128c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-64h168v560h-92c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-92V232h168v64c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8z m272.8 546H856V318h64.8c6 0 9.4-7 5.7-11.7L825.7 178.7c-2.9-3.7-8.5-3.7-11.3 0L713.6 306.3c-3.7 4.7-0.4 11.7 5.7 11.7H784v388h-64.8c-6 0-9.4 7-5.7 11.7l100.8 127.5c2.9 3.7 8.5 3.7 11.3 0l100.8-127.5c3.8-4.7 0.4-11.7-5.6-11.7z"}].map(function(e,t){var n;return y("path",{d:e.path,fill:(n=r.colors[t])!==null&&n!==void 0?n:"currentColor"},null)})])}}}),va=H({name:"Lock",props:{colors:{type:Array,default:function(){return[]}}},setup:function(r){return function(){return y("svg",{viewBox:"0 0 1024 1024",width:"1em",height:"1em"},[[{path:"M800.421 436.525h-63.661v-148.673c0-124.507-100.762-225.757-224.732-225.757-123.98 0-224.857 101.25-224.857 225.766v148.662h-63.593c-30.667 0-55.532 24.952-55.532 55.752v407.048c0 30.848 24.865 55.82 55.532 55.82h576.9c30.667 0 55.465-24.97 55.465-55.82v-407.048c0-30.802-24.855-55.752-55.532-55.752zM543.203 706.409v88.88c-0.016 4.026-3.264 7.287-7.282 7.325h-47.733c-4.039-0.022-7.307-3.287-7.334-7.322v-88.882c-22.423-11.518-37.953-34.602-37.953-61.659 0-38.288 30.945-69.425 69.070-69.425 38.183 0 69.138 31.136 69.138 69.415 0.057 27.067-15.473 50.152-37.905 61.659zM650.514 436.525h-276.989v-144.986c0-76.691 62.196-139.146 138.552-139.146 76.366 0 138.447 62.454 138.447 139.146v144.986z"}].map(function(e,t){var n;return y("path",{d:e.path,fill:(n=r.colors[t])!==null&&n!==void 0?n:"currentColor"},null)})])}}}),fa=H({name:"Maximize",props:{colors:{type:Array,default:function(){return[]}}},setup:function(r){return function(){return y("svg",{viewBox:"0 0 1024 1024",width:"1em",height:"1em"},[[{path:"M926.45937303 97.54062697v828.2973677H97.54062697V97.54062697h828.91874606m4.97102697-77.6722963h-838.8608c-39.7682157 0-72.07989097 32.31167525-72.07989097 72.07989096v839.48217837c0 39.7682157 32.31167525 72.07989097 72.07989097 72.07989097h839.48217837c39.7682157 0 72.07989097-32.31167525 72.07989096-72.07989097v-838.8608c0-40.38959408-32.31167525-72.70126933-72.70126933-72.70126933 0.62137837 0 0 0 0 0z"}].map(function(e,t){var n;return y("path",{d:e.path,fill:(n=r.colors[t])!==null&&n!==void 0?n:"currentColor"},null)})])}}}),pa=H({name:"Minimize",props:{colors:{type:Array,default:function(){return[]}}},setup:function(r){return function(){return y("svg",{viewBox:"0 0 1024 1024",width:"1em",height:"1em"},[[{path:"M65.23884 456.152041 958.760137 456.152041l0 111.695918L65.23884 567.847959 65.23884 456.152041z"}].map(function(e,t){var n;return y("path",{d:e.path,fill:(n=r.colors[t])!==null&&n!==void 0?n:"currentColor"},null)})])}}}),ma=H({name:"Popup",props:{colors:{type:Array,default:function(){return[]}}},setup:function(r){return function(){return y("svg",{viewBox:"0 0 1024 1024",width:"1em",height:"1em"},[[{path:"M959.72 0H294.216a63.96 63.96 0 0 0-63.96 63.96v127.92H64.28A63.96 63.96 0 0 0 0.32 255.84V959.4a63.96 63.96 0 0 0 63.96 63.96h703.56a63.96 63.96 0 0 0 63.96-63.96V792.465h127.92a63.96 63.96 0 0 0 63.96-63.96V63.96A63.96 63.96 0 0 0 959.72 0zM767.84 728.505V959.4H64.28V255.84h703.56z m189.322 0H831.8V255.84a63.96 63.96 0 0 0-63.96-63.96H294.216V63.96H959.72z"}].map(function(e,t){var n;return y("path",{d:e.path,fill:(n=r.colors[t])!==null&&n!==void 0?n:"currentColor"},null)})])}}}),ha=H({name:"QrCodeLogin",props:{colors:{type:Array,default:function(){return[]}}},setup:function(r){return function(){return y("svg",{viewBox:"0 0 1024 1024",width:"1em",height:"1em"},[[{path:"M1024 866.459826V1024h-78.781217v-157.540174H1024z m-157.540174 0V1024H801.391304l-13.712695-13.712696v-143.827478h78.781217z m-78.758956-315.080348v157.540174h157.517913V551.401739H1024v236.321391H708.919652v-78.781217h-78.758956l-0.022261 143.805217-78.758957-78.758956v-222.586435h236.321392z m-315.080348 0l-0.022261 143.805218-143.782957-143.805218h143.805218zM1024 0v472.598261H551.379478V0H1024zM472.598261 0v472.598261h-222.564174l-78.758957-78.758957h222.564174V78.758957H78.758957v222.541913L0 222.564174V0h472.598261z m472.620522 78.758957H630.160696v315.080347H945.196522V78.758957zM315.080348 157.540174v157.540174H157.540174V157.540174h157.540174z m551.379478 0v157.540174h-157.540174V157.540174h157.540174z",color:"#26B8CF"}].map(function(e,t){var n;return y("path",{d:e.path,fill:(n=r.colors[t])!==null&&n!==void 0?n:"currentColor"},null)})])}}}),ga=H({name:"Rows",props:{colors:{type:Array,default:function(){return[]}}},setup:function(r){return function(){return y("svg",{viewBox:"0 0 1024 1024",width:"1em",height:"1em"},[[{path:"M915.692308 275.692308h-807.384616c-15.753846 0-29.538462-13.784615-29.538461-29.538462v-59.076923C78.769231 171.323077 92.553846 157.538462 108.307692 157.538462h807.384616c15.753846 0 29.538462 13.784615 29.538461 29.538461v59.076923c0 15.753846-13.784615 29.538462-29.538461 29.538462z m0 293.415384h-807.384616c-15.753846 0-29.538462-13.784615-29.538461-29.538461v-59.076923c0-13.784615 13.784615-27.569231 29.538461-27.569231h807.384616c15.753846 0 29.538462 13.784615 29.538461 29.538461v59.076924c0 13.784615-13.784615 27.569231-29.538461 27.56923z m0 297.353846h-807.384616c-15.753846 0-29.538462-13.784615-29.538461-29.538461v-59.076923c0-15.753846 13.784615-29.538462 29.538461-29.538462h807.384616c15.753846 0 29.538462 13.784615 29.538461 29.538462v59.076923c0 15.753846-13.784615 29.538462-29.538461 29.538461z"}].map(function(e,t){var n;return y("path",{d:e.path,fill:(n=r.colors[t])!==null&&n!==void 0?n:"currentColor"},null)})])}}}),ya=H({name:"Skin",props:{colors:{type:Array,default:function(){return[]}}},setup:function(r){return function(){return y("svg",{viewBox:"0 0 1024 1024",width:"1em",height:"1em"},[[{path:"M910.74 338.74L756.8 195.33c-11.5-10.71-27.32-16.15-43.59-14.99-1.53-0.12-3.03-0.18-4.48-0.18h-82.01l-5.75 2.98c-30.39 15.75-69.15 24.42-109.16 24.42s-78.78-8.67-109.16-24.42l-5.75-2.98h-82.02c-20.91 0-39.71 10.63-49.43 27.51L113.29 349.43C102.78 359.21 97 372.22 97 386.06c0 13.84 5.78 26.84 16.29 36.63l111.17 103.58c9.31 8.66 21.33 13.87 34.27 14.95v250.3c0 28.84 25.19 52.31 56.14 52.31h393.85c30.96 0 56.14-23.47 56.14-52.31V530.57c13.1-1 25.28-6.23 34.68-14.98l111.18-103.58c21.7-20.19 21.7-53.07 0.02-73.27z m0 0"}].map(function(e,t){var n;return y("path",{d:e.path,fill:(n=r.colors[t])!==null&&n!==void 0?n:"currentColor"},null)})])}}}),_a=H({name:"UnFixed",props:{colors:{type:Array,default:function(){return[]}}},setup:function(r){return function(){return y("svg",{viewBox:"0 0 1024 1024",width:"1em",height:"1em"},[[{path:"M301.824 455.509333l-168.021333 18.261334c-5.973333 2.048-8.021333 4.010667-8.021334 8.106666-2.048 1.962667-2.048 5.973333 1.962667 10.069334l386.730667 386.730666c4.010667 4.010667 8.021333 4.010667 10.069333 1.962667 2.048-1.962667 6.058667-1.962667 8.106667-8.021333l18.261333-168.106667-249.088-249.002667z m168.106667 467.626667L83.2 536.661333C62.976 516.266667 56.917333 485.802667 65.024 457.472a80.725333 80.725333 0 0 1 62.72-50.602667l198.4-20.224 293.546667 293.546667-20.224 198.4c-4.010667 28.330667-22.272 54.613333-50.602667 62.72-28.330667 8.106667-58.709333 2.048-78.933333-18.176z m93.098666-720.64l240.896 240.896 133.632-56.661333c6.058667-2.048 6.058667-6.058667 6.058667-6.058667 2.048-2.048 2.048-6.144-2.048-10.24L637.952 66.901333C633.856 62.805333 629.76 62.805333 627.797333 64.853333c-2.048 2.048-6.058667 2.048-6.058666 6.144l-58.709334 131.584z m224.682667 317.866667L486.058667 218.709333 560.981333 46.592a73.557333 73.557333 0 0 1 54.613334-42.496 76.032 76.032 0 0 1 66.901333 22.186667l301.653333 301.738666a75.946667 75.946667 0 0 1 22.186667 66.816 73.557333 73.557333 0 0 1-42.496 54.613334l-176.128 70.826666z",color:"#FFFFFF"},{path:"M360.618667 421.12l224.682666 224.682667 165.973334-165.973334L526.592 255.146667 360.618667 421.12z m226.730666 315.818667L269.482667 419.072l255.146666-255.061333 315.733334 315.818666-255.146667 255.146667 2.133333 1.962667z",color:"#FFFFFF"},{path:"M0.256 1008.213333c-2.048-30.378667 10.069333-58.709333 30.293333-83.029333L257.365333 662.016l91.050667 91.136L85.333333 979.882667a152.576 152.576 0 0 1-84.992 28.330666",color:"#FFFFFF"}].map(function(e,t){var n;return y("path",{d:e.path,fill:(n=r.colors[t])!==null&&n!==void 0?n:"currentColor"},null)})])}}}),ba=H({name:"UnLock",props:{colors:{type:Array,default:function(){return[]}}},setup:function(r){return function(){return y("svg",{viewBox:"0 0 1024 1024",width:"1em",height:"1em"},[[{path:"M796.444 446.009H343.61V320.853c0-86.47 70.542-157.013 157.013-157.013s157.014 70.542 157.014 157.013c0 25.031 20.48 45.511 45.51 45.511s45.512-20.48 45.512-45.51c0-136.534-111.502-248.036-248.036-248.036S252.587 184.32 252.587 320.853V446.01H204.8c-25.031 0-45.511 20.48-45.511 45.511v420.978c0 25.03 20.48 45.51 45.511 45.51h591.644c25.032 0 45.512-20.48 45.512-45.51V491.52c0-25.031-20.48-45.511-45.512-45.511zM537.031 737.28c-2.275 0-4.551 2.276-4.551 4.551v43.236c0 43.235-13.653 50.062-31.858 50.062s-31.858-4.551-31.858-50.062V739.556c0-2.276-2.275-4.552-4.55-4.552-13.654-9.102-22.756-25.03-22.756-45.51 0-31.858 27.306-59.165 59.164-59.165s59.165 25.031 59.165 59.164c2.275 20.48-9.103 36.41-22.756 47.787z"}].map(function(e,t){var n;return y("path",{d:e.path,fill:(n=r.colors[t])!==null&&n!==void 0?n:"currentColor"},null)})])}}}),ka=H({name:"UserLogin",props:{colors:{type:Array,default:function(){return[]}}},setup:function(r){return function(){return y("svg",{viewBox:"0 0 1024 1024",width:"1em",height:"1em"},[[{path:"M943.081739 44.877913a79.09287 79.09287 0 0 1 79.805218 75.620174l0.111304 4.296348v511.510261a79.09287 79.09287 0 0 1-75.620174 79.805217l-4.296348 0.111304H685.612522v100.930783h178.799304v145.229913l-124.660869-0.022261-54.227479-54.227478h124.66087v-36.730435l-161.413565-0.022261-54.227479-54.227478h36.841739v-100.930783h-137.772521l-54.249739-54.249739h481.458087c26.000696 0 46.124522-18.988522 47.838608-44.432695l0.111305-3.494957V147.055304c0-27.158261-20.769391-47.949913-47.949913-47.949913H102.177391c-25.978435 0-46.124522 19.010783-47.838608 44.432696l-0.111305 3.517217v129.78087L0 222.608696V124.416l0.111304-3.917913A79.026087 79.026087 0 0 1 75.620174 44.966957l4.296348-0.111305h863.165217z m-38.244174 118.160696v435.021913l-529.408-0.022261L118.160696 340.769391V163.038609h786.676869z",color:"#26B8CF"}].map(function(e,t){var n;return y("path",{d:e.path,fill:(n=r.colors[t])!==null&&n!==void 0?n:"currentColor"},null)})])}}}),wa=H({name:"Visible",props:{colors:{type:Array,default:function(){return[]}}},setup:function(r){return function(){return y("svg",{viewBox:"0 0 1024 1024",width:"1em",height:"1em"},[[{path:"M514.5344 192.2304c137.216 0 265.856 48.0768 346.7008 129.536l8.576 8.9344c5.888 6.144 12.288 12.16 22.8864 21.4528l30.592 26.624 13.0048 11.6224c53.76 48.8448 73.984 78.7456 73.984 120.064 0 45.952-25.088 77.6448-93.4144 136.832l-24.832 21.4528c-9.0112 7.936-14.976 13.4656-20.224 18.7904l-10.5984 11.008c-80.8192 81.4336-209.4848 129.536-346.7008 129.536-141.7216 0-272.896-50.6112-353.2544-136.3456l-8.064-8.8576-4.2496-4.4544c-6.7072-6.784-15.3088-14.336-29.8496-26.5216l-17.6896-14.72-12.4672-10.496C36.6592 581.7856 12.8 549.9392 12.8 510.464c0-41.6768 22.4768-70.7328 83.2512-122.5728l27.4688-23.1168c13.568-11.4688 21.4016-18.56 27.8016-25.3184l3.712-4.0448a30.0544 30.0544 0 1 1 44.9792 39.936l-5.76 6.2464c-6.8608 7.168-14.592 14.336-26.4448 24.4736L124.928 442.24c-12.288 10.6752-21.4528 19.328-29.2608 27.8016-15.1808 16.4352-22.784 30.0032-22.784 40.448 0 10.1376 7.2448 23.2448 21.7344 39.0912 7.8592 8.6016 17.152 17.408 29.696 28.2624l11.5968 9.856 27.2896 22.784c15.1296 12.7488 24.064 20.8896 32.0768 29.3632l11.3408 12.3648c31.7696 33.28 74.496 61.3888 124.16 81.408 55.6544 22.4512 119.2192 34.3552 183.7312 34.3552 121.2672 0 233.9072-41.5488 303.3088-111.0272l12.8512-13.2864 6.7328-6.5024c3.584-3.4048 7.6032-7.04 12.3904-11.264l44.6976-38.8352 10.9312-9.984c11.8528-11.0848 20.7104-20.4288 27.9552-29.696 11.2384-14.336 16.8192-26.624 16.8192-36.864 0-10.6752-5.9904-23.552-18.0224-38.6048-9.1648-11.4688-20.7104-23.1424-37.376-38.144l-11.904-10.496-26.7776-23.1936-12.4416-11.0592c-4.8384-4.3776-8.832-8.192-12.544-11.8784l-13.312-13.7472c-69.4272-69.4784-182.016-111.0272-303.3088-111.0272-95.1808 0-185.7024 25.472-254.7968 71.552A30.08 30.08 0 0 1 226.3808 273.92c79.0272-52.736 181.3248-81.664 288.1536-81.664z m-1.8176 111.9488c31.8976 0 62.5664 7.1168 91.008 21.12a30.08 30.08 0 0 1-26.5472 53.9392 146.4064 146.4064 0 0 0-210.688 131.3024 146.4064 146.4064 0 0 0 146.2272 146.2016 146.4064 146.4064 0 0 0 146.2272-146.2016c0-23.936-5.888-47.6672-17.0496-68.608a30.0544 30.0544 0 0 1 53.0688-28.2624 206.7712 206.7712 0 0 1 24.0896 96.8704c0 113.792-92.544 206.336-206.336 206.336s-206.336-92.544-206.336-206.336c0-113.8176 92.544-206.3616 206.336-206.3616z m97.2544 152.0128l3.2256 0.4864c16.2304 3.4048 26.6496 19.2512 23.296 35.4304-3.5072 17.4592-12.7488 42.9312-29.3888 67.4816-28.5184 42.0352-69.248 64.4352-117.504 64.4352-3.9936 0-7.9616-0.1536-12.0064-0.4608a30.0544 30.0544 0 1 1 4.4544-59.9552c29.5424 2.176 53.1456-8.448 71.424-32.384l3.3792-4.6336 2.6624-4.0704c5.888-9.3184 10.5984-19.3792 14.1568-29.4656l2.1504-6.4512a115.712 115.712 0 0 0 0.768-2.6368l1.8944-7.2192c4.352-13.3632 17.4848-21.9392 31.488-20.5568z",color:"#CCCCCC"}].map(function(e,t){var n;return y("path",{d:e.path,fill:(n=r.colors[t])!==null&&n!==void 0?n:"currentColor"},null)})])}}}),Ca=Object.freeze(Object.defineProperty({__proto__:null,Close:ua,ExitFullscreen:la,Fixed:oa,Fullscreen:sa,Invisible:ca,LineHeight:da,Lock:va,Maximize:fa,Minimize:pa,Popup:ma,QrCodeLogin:ha,Rows:ga,Skin:ya,UnFixed:_a,UnLock:ba,UserLogin:ka,Visible:wa},Symbol.toStringTag,{value:"Module"})),Va=function(r){return H({name:r,render:function(){return y("i",{class:r})}})},Sa=ia.map(function(a){return{label:a.name,value:`vtj-icon-${a.font_class}`,unicode:a.unicode}}),pt=gn(gn({},wr),Ca),ut=ea(Sa),yn;try{for(ut.s();!(yn=ut.n()).done;){var _n=yn.value;pt[_n.value]=Va(_n.value)}}catch(a){ut.e(a)}finally{ut.f()}function Ie(a,r){return $a(a)||Ea(a,r)||ln(a,r)||ja()}function ja(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ea(a,r){var e=a==null?null:typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(e!=null){var t,n,i,u,l=[],o=!0,s=!1;try{if(i=(e=e.call(a)).next,r===0){if(Object(e)!==e)return;o=!1}else for(;!(o=(t=i.call(e)).done)&&(l.push(t.value),l.length!==r);o=!0);}catch(c){s=!0,n=c}finally{try{if(!o&&e.return!=null&&(u=e.return(),Object(u)!==u))return}finally{if(s)throw n}}return l}}function $a(a){if(Array.isArray(a))return a}function nt(a){return Ia(a)||Pa(a)||ln(a)||Aa()}function Aa(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pa(a){if(typeof Symbol!="undefined"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function Ia(a){if(Array.isArray(a))return zt(a)}function bn(a,r){var e=Object.keys(a);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(a);r&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable})),e.push.apply(e,t)}return e}function J(a){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?bn(Object(e),!0).forEach(function(t){D(a,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(e)):bn(Object(e)).forEach(function(t){Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(e,t))})}return a}function D(a,r,e){return r=Wn(r),r in a?Object.defineProperty(a,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[r]=e,a}function F(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */F=function(){return a};var a={},r=Object.prototype,e=r.hasOwnProperty,t=Object.defineProperty||function(V,A,N){V[A]=N.value},n=typeof Symbol=="function"?Symbol:{},i=n.iterator||"@@iterator",u=n.asyncIterator||"@@asyncIterator",l=n.toStringTag||"@@toStringTag";function o(V,A,N){return Object.defineProperty(V,A,{value:N,enumerable:!0,configurable:!0,writable:!0}),V[A]}try{o({},"")}catch(V){o=function(N,z,Q){return N[z]=Q}}function s(V,A,N,z){var Q=A&&A.prototype instanceof f?A:f,q=Object.create(Q.prototype),ie=new L(z||[]);return t(q,"_invoke",{value:S(V,N,ie)}),q}function c(V,A,N){try{return{type:"normal",arg:V.call(A,N)}}catch(z){return{type:"throw",arg:z}}}a.wrap=s;var v={};function f(){}function m(){}function h(){}var g={};o(g,i,function(){return this});var C=Object.getPrototypeOf,b=C&&C(C(x([])));b&&b!==r&&e.call(b,i)&&(g=b);var _=h.prototype=f.prototype=Object.create(g);function w(V){["next","throw","return"].forEach(function(A){o(V,A,function(N){return this._invoke(A,N)})})}function E(V,A){function N(Q,q,ie,de){var ke=c(V[Q],V,q);if(ke.type!=="throw"){var Ce=ke.arg,Be=Ce.value;return Be&&typeof Be=="object"&&e.call(Be,"__await")?A.resolve(Be.__await).then(function(ze){N("next",ze,ie,de)},function(ze){N("throw",ze,ie,de)}):A.resolve(Be).then(function(ze){Ce.value=ze,ie(Ce)},function(ze){return N("throw",ze,ie,de)})}de(ke.arg)}var z;t(this,"_invoke",{value:function(q,ie){function de(){return new A(function(ke,Ce){N(q,ie,ke,Ce)})}return z=z?z.then(de,de):de()}})}function S(V,A,N){var z="suspendedStart";return function(Q,q){if(z==="executing")throw new Error("Generator is already running");if(z==="completed"){if(Q==="throw")throw q;return M()}for(N.method=Q,N.arg=q;;){var ie=N.delegate;if(ie){var de=P(ie,N);if(de){if(de===v)continue;return de}}if(N.method==="next")N.sent=N._sent=N.arg;else if(N.method==="throw"){if(z==="suspendedStart")throw z="completed",N.arg;N.dispatchException(N.arg)}else N.method==="return"&&N.abrupt("return",N.arg);z="executing";var ke=c(V,A,N);if(ke.type==="normal"){if(z=N.done?"completed":"suspendedYield",ke.arg===v)continue;return{value:ke.arg,done:N.done}}ke.type==="throw"&&(z="completed",N.method="throw",N.arg=ke.arg)}}}function P(V,A){var N=A.method,z=V.iterator[N];if(z===void 0)return A.delegate=null,N==="throw"&&V.iterator.return&&(A.method="return",A.arg=void 0,P(V,A),A.method==="throw")||N!=="return"&&(A.method="throw",A.arg=new TypeError("The iterator does not provide a '"+N+"' method")),v;var Q=c(z,V.iterator,A.arg);if(Q.type==="throw")return A.method="throw",A.arg=Q.arg,A.delegate=null,v;var q=Q.arg;return q?q.done?(A[V.resultName]=q.value,A.next=V.nextLoc,A.method!=="return"&&(A.method="next",A.arg=void 0),A.delegate=null,v):q:(A.method="throw",A.arg=new TypeError("iterator result is not an object"),A.delegate=null,v)}function R(V){var A={tryLoc:V[0]};1 in V&&(A.catchLoc=V[1]),2 in V&&(A.finallyLoc=V[2],A.afterLoc=V[3]),this.tryEntries.push(A)}function j(V){var A=V.completion||{};A.type="normal",delete A.arg,V.completion=A}function L(V){this.tryEntries=[{tryLoc:"root"}],V.forEach(R,this),this.reset(!0)}function x(V){if(V){var A=V[i];if(A)return A.call(V);if(typeof V.next=="function")return V;if(!isNaN(V.length)){var N=-1,z=function Q(){for(;++N<V.length;)if(e.call(V,N))return Q.value=V[N],Q.done=!1,Q;return Q.value=void 0,Q.done=!0,Q};return z.next=z}}return{next:M}}function M(){return{value:void 0,done:!0}}return m.prototype=h,t(_,"constructor",{value:h,configurable:!0}),t(h,"constructor",{value:m,configurable:!0}),m.displayName=o(h,l,"GeneratorFunction"),a.isGeneratorFunction=function(V){var A=typeof V=="function"&&V.constructor;return!!A&&(A===m||(A.displayName||A.name)==="GeneratorFunction")},a.mark=function(V){return Object.setPrototypeOf?Object.setPrototypeOf(V,h):(V.__proto__=h,o(V,l,"GeneratorFunction")),V.prototype=Object.create(_),V},a.awrap=function(V){return{__await:V}},w(E.prototype),o(E.prototype,u,function(){return this}),a.AsyncIterator=E,a.async=function(V,A,N,z,Q){Q===void 0&&(Q=Promise);var q=new E(s(V,A,N,z),Q);return a.isGeneratorFunction(A)?q:q.next().then(function(ie){return ie.done?ie.value:q.next()})},w(_),o(_,l,"Generator"),o(_,i,function(){return this}),o(_,"toString",function(){return"[object Generator]"}),a.keys=function(V){var A=Object(V),N=[];for(var z in A)N.push(z);return N.reverse(),function Q(){for(;N.length;){var q=N.pop();if(q in A)return Q.value=q,Q.done=!1,Q}return Q.done=!0,Q}},a.values=x,L.prototype={constructor:L,reset:function(A){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!A)for(var N in this)N.charAt(0)==="t"&&e.call(this,N)&&!isNaN(+N.slice(1))&&(this[N]=void 0)},stop:function(){this.done=!0;var A=this.tryEntries[0].completion;if(A.type==="throw")throw A.arg;return this.rval},dispatchException:function(A){if(this.done)throw A;var N=this;function z(Ce,Be){return ie.type="throw",ie.arg=A,N.next=Ce,Be&&(N.method="next",N.arg=void 0),!!Be}for(var Q=this.tryEntries.length-1;Q>=0;--Q){var q=this.tryEntries[Q],ie=q.completion;if(q.tryLoc==="root")return z("end");if(q.tryLoc<=this.prev){var de=e.call(q,"catchLoc"),ke=e.call(q,"finallyLoc");if(de&&ke){if(this.prev<q.catchLoc)return z(q.catchLoc,!0);if(this.prev<q.finallyLoc)return z(q.finallyLoc)}else if(de){if(this.prev<q.catchLoc)return z(q.catchLoc,!0)}else{if(!ke)throw new Error("try statement without catch or finally");if(this.prev<q.finallyLoc)return z(q.finallyLoc)}}}},abrupt:function(A,N){for(var z=this.tryEntries.length-1;z>=0;--z){var Q=this.tryEntries[z];if(Q.tryLoc<=this.prev&&e.call(Q,"finallyLoc")&&this.prev<Q.finallyLoc){var q=Q;break}}q&&(A==="break"||A==="continue")&&q.tryLoc<=N&&N<=q.finallyLoc&&(q=null);var ie=q?q.completion:{};return ie.type=A,ie.arg=N,q?(this.method="next",this.next=q.finallyLoc,v):this.complete(ie)},complete:function(A,N){if(A.type==="throw")throw A.arg;return A.type==="break"||A.type==="continue"?this.next=A.arg:A.type==="return"?(this.rval=this.arg=A.arg,this.method="return",this.next="end"):A.type==="normal"&&N&&(this.next=N),v},finish:function(A){for(var N=this.tryEntries.length-1;N>=0;--N){var z=this.tryEntries[N];if(z.finallyLoc===A)return this.complete(z.completion,z.afterLoc),j(z),v}},catch:function(A){for(var N=this.tryEntries.length-1;N>=0;--N){var z=this.tryEntries[N];if(z.tryLoc===A){var Q=z.completion;if(Q.type==="throw"){var q=Q.arg;j(z)}return q}}throw new Error("illegal catch attempt")},delegateYield:function(A,N,z){return this.delegate={iterator:x(A),resultName:N,nextLoc:z},this.method==="next"&&(this.arg=void 0),v}},a}function kn(a,r,e,t,n,i,u){try{var l=a[i](u),o=l.value}catch(s){e(s);return}l.done?r(o):Promise.resolve(o).then(t,n)}function K(a){return function(){var r=this,e=arguments;return new Promise(function(t,n){var i=a.apply(r,e);function u(o){kn(i,t,n,u,l,"next",o)}function l(o){kn(i,t,n,u,l,"throw",o)}u(void 0)})}}function Hn(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(r&&r.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),r&&Mt(a,r)}function Mt(a,r){return Mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},Mt(a,r)}function Jn(a){var r=Oa();return function(){var t=mt(a),n;if(r){var i=mt(this).constructor;n=Reflect.construct(t,arguments,i)}else n=t.apply(this,arguments);return Da(this,n)}}function Da(a,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fa(a)}function Fa(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Oa(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function mt(a){return mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mt(a)}function wn(a,r){for(var e=0;e<r.length;e++){var t=r[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,Wn(t.key),t)}}function he(a,r,e){return r&&wn(a.prototype,r),e&&wn(a,e),Object.defineProperty(a,"prototype",{writable:!1}),a}function Wn(a){var r=Ra(a,"string");return typeof r=="symbol"?r:String(r)}function Ra(a,r){if(typeof a!="object"||a===null)return a;var e=a[Symbol.toPrimitive];if(e!==void 0){var t=e.call(a,r||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(a)}function ge(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}function Fe(a,r){var e=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!e){if(Array.isArray(a)||(e=ln(a))||r&&a&&typeof a.length=="number"){e&&(a=e);var t=0,n=function(){};return{s:n,n:function(){return t>=a.length?{done:!0}:{done:!1,value:a[t++]}},e:function(s){throw s},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,u=!1,l;return{s:function(){e=e.call(a)},n:function(){var s=e.next();return i=s.done,s},e:function(s){u=!0,l=s},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(u)throw l}}}}function ln(a,r){if(a){if(typeof a=="string")return zt(a,r);var e=Object.prototype.toString.call(a).slice(8,-1);if(e==="Object"&&a.constructor&&(e=a.constructor.name),e==="Map"||e==="Set")return Array.from(a);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return zt(a,r)}}function zt(a,r){(r==null||r>a.length)&&(r=a.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=a[e];return t}var Ba=Object.prototype.toString,Ta=function(r){return Ba.call(r)},$t=function(r){return Ta(r).slice(8,-1)},Qn="0.5.3",Cn="Vue",La=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeUnmount","unmounted","errorCaptured","renderTracked","renderTriggered","activated","deactivated"],Vn=["$el","$emit","$nextTick","$parent","$root","$attrs","$slots","$watch","$props","$options","$forceUpdate"],xa=["vIf","vShow","vModel","vFor","vBind"],Na=["click","dblclick","mouseenter","mouseleave","mousedown","mouseup","mouseover","contextmenu"],Ma=["keydown","keyup","keypress"],za=["stop","prevent","capture","self","once","passive"],Ua=["String","Number","Boolean","Array","Object"],Ha=["GET","POST","PUT","PATCH","DELETE","JSONP"];function Ge(a,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;try{var n=['"use strict";',"var __self = arguments[0];"];n.push("return ");var i=(a.value||"").trim();i=i.replace(/this(\W|$)/g,function(o,s){return`__self${s}`}),i=n.join(`
`)+i;var u=`with(${e?"{}":"$scope || {}"}) { ${i} }`;return new Function("$scope",u)(r)}catch(o){var l;if(console.error("parseExpression.error",o,a,(l=r==null?void 0:r.__self)!==null&&l!==void 0?l:r),t)throw o}}function rt(a,r){var e,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,i=Ge(a,r,t,n);if(typeof i!="function"&&(console.error("parseFunction.error","not a function",a,(e=r==null?void 0:r.__self)!==null&&e!==void 0?e:r),n))throw new Error(`"${a.value}" not a function`);return i}function Ae(a,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,t=!0;try{a.type==="JSExpression"?Ge(a,r,e,!0):rt(a,r,e,!0)}catch(n){t=!1,Pe.error({title:"代码错误",message:n.message})}return t}function Ve(a){return a&&a.type==="JSExpression"}function Vt(a){return typeof a=="object"&&a&&a.type==="JSFunction"}function Kn(a){return typeof a=="string"}function Ja(a,r){var e={};return Object.keys(a).forEach(function(t){r.includes(t)&&(e[t]=a[t])}),e}function qn(a){return typeof a=="string"?a:JSON.stringify(a)}function Gn(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=Object.keys(a);return r?e.map(function(t){return"."+t}):e}function Wa(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=a.find(function(l){return He(l.name)==="vIf"}),e=a.find(function(l){return He(l.name)==="vFor"}),t=a.find(function(l){return He(l.name)==="vShow"}),n=a.find(function(l){return He(l.name)==="vBind"}),i=a.filter(function(l){return He(l.name)==="vModel"}),u=a.filter(function(l){return!xa.includes(He(l.name))});return{vIf:r,vFor:e,vShow:t,vModels:i,vBind:n,others:u}}function se(a){return!!(a!=null&&a.__VTJ_BLOCK__)}function At(a){return!!(a!=null&&a.__VTJ_NODE__)}function Qa(a){return/\.css$/.test(a)}function Ka(a){return/\.js$/.test(a)}function qa(a){return a.map(function(r){return`<script src="${r}"><\/script>`}).join("")}function Ga(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return a.map(function(r){return`<link rel="stylesheet" href="${r}" />`}).join("")}function Ya(a){var r=a.url,e=a.method,t=e===void 0?"GET":e,n=a.settings,i=n?Ge(n,{}):void 0;return t.toLowerCase()==="jsonp"?function(u){return Fn(r,u,i)}:In({url:r,method:t,settings:i})}function Xa(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[],i=Fe(t),u;try{for(i.s();!(u=i.n()).done;){var l=u.value;l.isDir?l.children&&l.children.length&&(n=n.concat(e(l.children))):n.push(l)}}catch(o){i.e(o)}finally{i.f()}return n};return r(a)}var Yn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY51AAASLUlEQVR4nO3dbYxdx13H8d/cu/buXdtJGzvOOi3QtDWpiqigFagUiRe8QKWiQkWp8qoRRVXgRRu3EgKkqi8QfQFUip9CQ6Fxk4BQJUQRrYqElIc2aUIpohVUCiFOmoTaifPgxLHD7sbZvQfN3pnN7PHd9e7de8+Zh+9H8gvLK+XsOTk//Wfmf2aMubEvoCgvG+k9S6puWpTmjZTPK/AWSR+S9D5JPydpp6TXI7iujXTcn6clfV/Sv0j69/V+fiqKSwawHVdL+rykT7iXP0XvlfQRSX8i6buSfl/SQ/XfI9VfDsDAhyU9L+nmjN7n90v6jqS76v9AYAHp+rSkr2f8/G6qV1kEFpCmj0k6XMCz+4Ckr/m/EFhAeuYkHSvoudm5rd8RgQUk6bOS3lTYo/ucpB0EFpCWWUk3FvjM3mbntAgsIC03uDaGEv06gQWk5RcKfl4/S2ABadlf8PPaR2ABadlZ8PNi0h1ITNEf/xJYAJJBYAFIBoEFIBkEFoBkEFgoz7KkGUm9qvAp7PQQWCiPDatnOtKFjvTm/iDAkAQCC+W5opJOdWT+sie9bqR9hFYqCCyUxw4Dr6qk/+7I3N6T+kbaWxFaCSCwUKbKHtlQSY90ZY7MSkui0koAgYVy2dA6UEn/05E5PsvwMAEEFspmQ+taQisVBBZAaCWDwAJUC61jhFasCCzA86H1GJVWrAgsIFQfHi4RWjEhsIC6sNJieBgVAgsYpt7ycNE2l/b59rBlBBawHl9pPeo64mUGHfJUWq0hsICN+I74R7syR+3wkI74NhFYwGbM2c94OjK3MafVJgILuJwqqLTC5tK9hFbTCCxgs+otDxWVVtMILGArwpaHv3D7abE1TWMILGCrfMvDD7uDSmuZifimEFjAKPycFs2ljSKwgFGxn1bjCCxgO9iaplEEFrBdbE3TGAILGIdwTotKa2IILGBc+gwPJ43AAsaJ/bQmisACxq2+n9ZFQmtcCCxgEsKWh9uotMaFwAImhZ1Lx47AAiaJ5tKxIrCASRs2EX81oTUKAgtoQhhadufSRUJrFAQW0JRwE0DmtEZCYAFNss2lb62kJwitURBYQNP660zEb+4IMVPy8yKwgDbUj8V/zR0hdvnQKrkW6xNYQFt8y8PJjsyRWWnebbe8cWi9VPDzepHAAtpUuSPEnraVVk9a0OVWD/+r4Of1FIEFtM2G1jXVyutobnctD+tPxP+DpMVCn9k3CCwgBuGx+Mc2bC49I+kfC3xm5yV9lcACYuFbHh6/bHPpFwp8ZvZ3fo7AAmLS39R2yz+Q9IcFPbd/k/R50dYARGhzzaV/LunOAh6fHQJ/xP+FwAJitF5z6drQ+rivPDL1iKR3SXrW/3oEFhCrenPpxaHH4n9O0i9KOpnRc7S/4Wck/YykV8J/MObG/m4XXFV71wcUy7h6amHdLnb7E88a6R19VYfmpelKeqEjdS/5yV+W9GFJvybp3Rr8xFLkN7bj/jwn6T5J/yzpn9z9uIQNrNM2xyVdaPe6gSIZVyzMBy/tCUk/XHMzwtC6ZV6aWTe0vD2SZhP4lKfjQvWcNvFhkg2s8+6XAxCPr0m6WdLZNa/2KSNd7yqtqWrwscr6oZUd5rCAOP2WjSdJv7p6dX718DHXp1XgzqUEFhCvGUn3Svrg6hX2g4n4AncuJbCA+H1T0vWrV1nfufS1jrTvktXDLBFYQPzse/rFNVcZNpce7UkXVcTOpQQWkAY7l/WhNVfqm0ufcIe12ubSvXmHFoEFpOPTl1yp3wTwMRda/aHNpdkgsIB0vNf1Vq0VHtZ6rDf4e6YT8QQWkI69kt439Gp9aD3alfli74094jMLLQILSMv+da/Wrx5+vyvz5Z60s5Ku2NTBFskgsIC0zGx4tTacfqqS/rMrc0dP2uNCK5NKi8AC0rK5TQrswRYPTw0qrWlJV+ZRaRFYQG4q92bbgy2+PSXzlRmpp0G1lXhoEVhAjiq3uYyd03rIVlozg/XFxEOLwAJy5SstOzz81ymZO2ylVSUdWgQWkDNfadnh4XemZO7uSbsqaXeaoTUVwTUAmCQfWrZP61tTMuqp+vjCYFPA8yap/bSosIAShKH1gFs9tA0Sb0qr5YHAAkoRDg8fcKuHiTWXElhAScLVwwenZO7sDeazEpnTIrCA0vjVQ9/y8BUXWgmsHjLpDpQobC71E/E3LQ7+4YKJtpShwgJKVV89PBF/cymBBZQsDK2HfUd8vB9ME1hA6cLVQxtad8T7wTSBBeDSPq27Zt6YiI+o0iKwAAyEq4f2M56/iq+5lMAC8IZwePigay6drqIZHhJYANaqN5ee6A3204qguZTAAnCpenPpl2eiaC4lsAAMF+6n9bD7jKflnUsJLADr88PDuTiaSwksABuLqLmUwAJwecOaS1toeSCwAGxOWGk96IaHvuWhodAisABsXr259K+brbQILABb40PrWncaz4nmmksJLABbF4ZW2Fw64dVDAgvAaIY1l0645YHAAjC6+mGtNrSmJxdaBBaA7QlbHmyldefkKi0CC8D2NdRcSmABGI8GmksJLADjU28utftp7Rjf1jQEFoDxClcPbWjdPSMZSTu3/18hsACMnw+tqyQ90pXOdgbH4m8TgQVgMnw+2dXCbvD3bSCwACSDwAKQDAILQDIILADJILAAJIPAApAMAgtAMggsAMkgsAAkg8ACkAwCC0AyCCwAySCwACSDwAKQDAILQDIILADJILAAJIPAApAMAgtAMggsAMmwgXWRxwUgBTawnuRJAUiBDazv8aQApMAG1sM8KQApsIH1VUlP8bQAxM4G1rKkIzwpALHzbQ1HJT3A0wIQs7AP6wZJZ3haAGIVBtYLkn5e0mmeFoAYTdWuyVZYb5f0BUm38MSGMJJeN4OZPxPd1aVhZ1X6HcCI6oEl1/l+SNJxF1oflPSTkqaLv8ldSa/alKqW1FNffSJrRDuSvGq0blhgeY8HVdYVkg660Foq8rHZsHrRLGlP9XL1scW/1ZX9D2jBvBbBlaVjuqr0qumYv+8Ngn+aSgtbs1Fghc5L+o9i7+0grKSdUnXzonT90oLOr1RaVJ1b0aukVzpSp5KWKU6xdZsNrHL5sNohVZ9akA4uSac7zF+NYtkNqSvm/zAaAmsjNqzOusrKh9WzhBXQFgJrPTasXjDSjFQdmpfevkxYAS1jA79hbFg978LqFsIKiAWBVefnrHp2jXReOrgsPUNYATFgSBjyw8Adbhj4zmXpVIdYByJBYHk+rGxl9Uk3DCSsgKjwOioYBto5q0/Nq/ppNwzk7gBRocLyYTUdrAZSWQFRKvu19MPAabcaeJ1bDSSsgCiV+2r6plAbVp9cGEywn2E1EIhZmUPCYU2htC4A0SuvwqIpFEhWWYFFUyiQtHKGhDSFAskrI7BoCgWykP8rS1MokI28KyyaQoGs5Pvqhk2hh2gKBXKQZ4XlK6tZ2xRK6wKQi/zqDV9Z7XR9Vu+kdQHIRV6BFTaF2mHg25YHB0YwDASykM+rHLYu+KZQ5qyArOQxh1XfdeEgq4FAjtIPrNXKqlJ1aGEwDCSsgCyl/VqvaQpdeGM1kLACspRuhTWsKZQJdiBrab7eNIUCRUrvFR+2nxU7hQJFSCuwhrUu0BQKFCOdOSxfWfWk6jNuGMhqIFCUNF73emV1HRPsQInif+XD1oVb5lUdJKyAUsU9JPRhtZP9rADEHFirB0ZUg6ZQWheA4sX5+odNofaQ03fQugAgxgrLhtVLtc9taF0AiqcoA+uCkfb3Vf3ugnRNn2EggFVEAYBkxBdYeyrp+Y7Mn+6Snu5K1/alfgTXBaB18QXWsqSrKmlRMsdmpSddaFURXBuAVsU5JLShdXUlzdvQ6kk/6kpzhBZQunjnsHxoLRiZI67SOsDwEChZ3JPuNrT2VdJFyRydlZ7oSm8ltIBSxb9K6EPLzWmZk13pLYQWUKI02hpWh4eS/EQ8oQUUJ50+LBta+12ldXhW5nGGh0Bp0mocrVdaJ2l5AEqSXqd7WGnZ0KLlAShGmp/m+ErrNbd6SMsDUIR0vyX0q4c2tI7PSk/xGQ+Qu7Q/fvahZTvij/aotIDMpb9bw+pnPGZl9XBlTovVQyBLeWwvE85p+eZSQgvITj77YQ1reWB4CGQlrw38wpaHo24ino54IBv57TjqK62Lrk/rcZpLgVzkuUVyuHpIcymQjXz3dKe5FMhO3odQhM2lfj8t5rSAZOV/ak64n9Zxt90ylRaQpDKO+Qq3W6a5FEhWOecS0lwKJK+sg1RpLgWSVt7JzzSXAskq86h6mkuBJJUZWKK5FEhRuYElmkuB1JQdWFqnuZTVQyBKBJbqzaWzMo+x3TIQIwLLC1sejtBcCsSIwAr50FoaDA9pLgXiQmDV+eEhh7UC0SGwhhl2WOsBQgtoG4G1nrC51M5pnZyi0gJaRmBtxIbWXtfycFtv0BFPcynQGgLrcmq7PKwMD/czET8SG/Tdiv/rMLKpCd+6XZKuc699unWJn4h/0SyZY7Pnqj/4v8WVD6ZPd06rG8H1pcAG/Ey1rGWzUxfNnEzpNwSjmHRgvV/SPVk8GT88fN7IfKn30erQwm9ort/VmY4IrcuwYbW7knZo2Xxj+id0zjypPRV3DVs26cDKS9+tHp7qLJlbe6oOLSyvzGkRWuvzYbW7krmzJ3176nXNVX111GUuEFvFbMJW2RfwQNXRsx2Zoz3pXGcwEb+c1q/RCB9WV1Qyd/Wkb01Jc1VXXXUIK4yCwBrFILS0ElrHetIrHSbi6+y92OMqKx9W9p51k57NRMsIrFH50Pqxq7QudKSrCa0VPqx2uWHgvSuVFWGFbSOwtsOH1umOzBE3PCw9tPww0IcVlRXGiMDaLvuCXuNDa1Z6ueDQqk+wE1YYMwJrHOyLaoc8z5lBR7wfHpY0EW/vwS43wf43hBUmg8AalzWVlgutUlYPfWV1pZtgv485K0wGgTVOvtI6VVDLQzgM9GFlg3uKsML4EVjjFq4e3tqTzmYcWvU5q3sIK0wWgTUJYZ9WrpXWsKbQawkrTBaBNSk5N5fWh4FMsKMhBNYk5dhc6sNqj1sNvIcJdjSHwJq0nJpL63NW97lhIGGFhhBYTag3l55zw8OU5rTqYXU/lRWaR2A1JWwutZXWSx3pmkRCyzeF7pbfIoY5K7SCwGqSr7T8RPz5BFYPw6bQu2f8FjGEFVpBYDUtpZaHYauBhBVaRGC1wQ8PY24uDfez8k2h++mzQrsIrLbU+7TOujmtGFYPh20RQ1MoIkBgtWnN8DBYPWwztNgiBhEjsNrmh4dnjMxxNxG/r6XQqjeFElaIDIEVg3CXB9vy8GoLldawplDCCpEhsGLhQ+t0sHrYVHMpTaFIBIEVk7DSOuyaSw9MOLQuPTeQygrRIrBiszqn5VYPX5xgy8OwCXYqK0SMwIqRD61nJthcyhYxSBCBFath+2mN69vDelPo/YQV0kBgxSzcT+tw8MH0dlYP64ecUlkhIQRW7Hxo+eHhds495JBTJI7ASsHq1jTbOKyVDnZkgMBKhd+aJjysdbPNpUywIxMEVkrCnUs321w6rCmUsEKiCKzUbKW5lKZQZIbAStFmmktpCkWGCKxUbdRcypwVMkVgpWxYc6ldPZxlzgp5IrBSFzaX3uq2ppmjdQF5muK5ZiCstOzJNrYb/iHCCvkhsHLh57R+1JUe7Q4OjDCEFfJCYOXEH3i6y/1OhBUyM+k5LF4ZAGMz6cA6z6MCMC6TDqznFMdJewAyMOnA+rGk7/E/CoBxaKIP65s8KQDj0ERg3eqGhgCwLU0E1rykP+YxAdiupj7NuV3Sl3haALajyW8Jf0/SXTwtAKNq+uPn35b0CTVzADuAzLSxW8Mdkt4s6c8SnozvRnANQHHa+pbwgqQ/kvRZSb8i6V2SZt2nPDF/zmMDfo+kH0RwLUBx2v742Q4N73d/AGBDbOAHIBkEFoBkEFgAkkFgAUgGgQUgGQQWgGQQWACSQWABSAaBBSAZBBaAZBBYaJpxf4AtI7DQtFclLXDXMQoCC007J+kJ7jpGQWChDY9w1zEKAgttuJe7jlEQWGjDCUn/y53HVhFYaENf0mHuPLaKwEJbjki6j7uPrSCw0KYbJD3JE8BmEVho08uS3i3puzwFbAaBhbYtSvold17lKzyNyyr6nW371BzAs+dV/p2kj0r6TUnvkdRzL2ifu7RyFuac+1KgTJL+H7TdACeo1XgEAAAAAElFTkSuQmCC",Za=[{name:"logo",type:"Logo",region:"brand",props:{text:"Tj",icon:Yn}},{name:"switcher",type:"Switcher",region:"brand",props:{link:"/"}}],ei=[{name:"toolbar",type:"Toolbar",region:"toolbar"}],ti=[{name:"actions",type:"Actions",region:"action"}],ni=[{name:"pages",type:"Pages",region:"apps",order:1,trigger:{icon:"vtj-icon-document",label:"页面",type:"panel"}},{name:"blocks",type:"Blocks",region:"apps",order:2,trigger:{icon:"vtj-icon-components",label:"区块",type:"panel"}},{name:"components",type:"Components",region:"apps",order:3,trigger:{icon:"vtj-icon-block",label:"组件库",type:"panel"},props:{title:"组件库"}},{name:"outline",type:"Outline",region:"apps",order:4,trigger:{icon:"vtj-icon-outline",label:"大纲树",type:"panel"}},{name:"history",type:"History",region:"apps",order:4,trigger:{icon:"vtj-icon-history",label:"历史记录",type:"panel"}},{name:"api",type:"Apis",region:"apps",order:4,trigger:{icon:"vtj-icon-api",label:"Api管理",type:"panel"}},{name:"packages",type:"Dependencies",region:"apps",order:6,trigger:{icon:"vtj-icon-category",label:"依赖管理",type:"panel"}},{name:"about",type:"About",region:"apps",props:{title:"关于",width:"500px",height:"300px"},trigger:{icon:"vtj-icon-info",label:"关于",type:"dialog"}}],ri=[{package:"vue",version:"3.3.4",library:"Vue",urls:["./libs/vue.global.js"],required:!0,official:!0,enabled:!0},{package:"element-plus",version:"latest",library:"ElementPlus",urls:["./libs/element-plus.index.css","./libs/element-plus.full.min.js"],assetsUrl:"./libs/element-plus-assets.js",assetsLibrary:"ElementPlusAssets",required:!1,official:!0,enabled:!0},{package:"@element-plus/icons-vue",version:"latest",library:"ElementPlusIconsVue",urls:["./libs/element-plus-icons-vue.js"],required:!1,official:!0,enabled:!0},{package:"@vtj/utils",version:"latest",library:"VtjUtils",urls:["./libs/vtj-utils.js"],required:!1,official:!0,enabled:!0},{package:"@vtj/icons",version:"latest",library:"VtjIcons",urls:["./libs/vtj-icons.css","./libs/vtj-icons.js"],required:!1,official:!0,enabled:!0},{package:"lodash-es",version:"latest",library:"_",urls:["./libs/lodash.min.js"],required:!1,official:!0,enabled:!1},{package:"@vueuse/core",version:"latest",library:"VueUse",urls:["./libs/vueuse.shared.iife.min.js","./libs/vueuse.core.iife.min.js"],required:!1,official:!0,enabled:!1}],ai=[{name:"designer",type:"Designer",region:"workspace",disabled:!1,order:0,trigger:{label:"设计视图",type:"tab"}},{name:"schema",type:"Schema",region:"workspace",disabled:!1,order:1,trigger:{label:"Schema",type:"tab",closable:!0}},{name:"docs",type:"Docs",region:"workspace",disabled:!1,order:2,props:{url:"https://element-plus.org/zh-CN/"},trigger:{label:"帮助中心",type:"tab",closable:!0}}],ii=[{name:"properties",type:"Properties",region:"setting",group:"Node",trigger:{label:"属性",type:"tab"}},{name:"events",type:"Events",region:"setting",group:"Node",trigger:{label:"事件",type:"tab"}},{name:"directives",type:"Directives",region:"setting",group:"Node",trigger:{label:"指令",type:"tab"}},{name:"script",type:"BlockScript",region:"setting",group:"Block",trigger:{label:"设置",type:"tab"}},{name:"dataSources",type:"DataSources",region:"setting",group:"Block",trigger:{label:"数据源",type:"tab"}},{name:"css",type:"Css",region:"setting",group:"Block",trigger:{label:"样式",type:"tab"}},{name:"advanced",type:"Advanced",region:"setting",group:"Block",trigger:{label:"定义",type:"tab"}}],ui=[{name:"nodePath",type:"NodePath",region:"status",props:{}}],li={activeApp:"pages",widgets:[].concat(Za,ei,ti,ni,ai,ii,ui),dependencies:ri};function oi(a,r){var e=a.slice(0);return r.forEach(function(t){var n=e.findIndex(function(i){return i.name===t.name});n>-1?e.splice(n,1,Dn(e[n],t)):e.push(t)}),e}function si(a,r){var e=oi(a.widgets||[],(r==null?void 0:r.widgets)||[]);return Object.assign({},a,r||{},{widgets:e})}var Xn=he(function a(){ge(this,a)}),Le={prefix:"__VTJ__",type:"local"},Sn="Project",Pt="File",It="History",Zn=function(a){Hn(e,a);var r=Jn(e);function e(){return ge(this,e),r.apply(this,arguments)}return he(e,[{key:"createKey",value:function(){for(var n=arguments.length,i=new Array(n),u=0;u<n;u++)i[u]=arguments[u];return i.join("_")}},{key:"getProject",value:function(){var t=K(F().mark(function i(u){var l,o;return F().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(l=u.id||Oe(),o=this.createKey(Sn,l),c.t0=Te.get(o,Le),c.t0){c.next=6;break}return c.next=5,this.createProject(u);case 5:c.t0=c.sent;case 6:return c.abrupt("return",c.t0);case 7:case"end":return c.stop()}},i,this)}));function n(i){return t.apply(this,arguments)}return n}()},{key:"createProject",value:function(){var t=K(F().mark(function i(u){var l,o,s,c;return F().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return l=u.id||Oe(),o=u.name||"未命名项目",s=this.createKey(Sn,l),c=J(J({},u),{},{id:l,name:o}),f.abrupt("return",(Te.save(s,c,Le),c));case 2:case"end":return f.stop()}},i,this)}));function n(i){return t.apply(this,arguments)}return n}()},{key:"updateProject",value:function(){var t=K(F().mark(function i(u){var l,o;return F().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(u.id){c.next=2;break}return c.abrupt("return",!1);case 2:return c.next=4,this.getProject(u);case 4:return l=c.sent,o=Object.assign(l,u),c.abrupt("return",!!this.createProject(o));case 7:case"end":return c.stop()}},i,this)}));function n(i){return t.apply(this,arguments)}return n}()},{key:"createFile",value:function(){var t=K(F().mark(function i(u){var l,o,s;return F().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return l=u.id||Oe(),o=this.createKey(Pt,l),s=J(J({},u),{},{id:l}),v.abrupt("return",(Te.save(o,s,Le),s));case 2:case"end":return v.stop()}},i,this)}));function n(i){return t.apply(this,arguments)}return n}()},{key:"updateFile",value:function(){var t=K(F().mark(function i(u){return F().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",u.id?!!this.createFile(u):!1);case 1:case"end":return o.stop()}},i,this)}));function n(i){return t.apply(this,arguments)}return n}()},{key:"getFile",value:function(){var t=K(F().mark(function i(u){var l;return F().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return l=this.createKey(Pt,u),s.abrupt("return",Te.get(l,Le));case 2:case"end":return s.stop()}},i,this)}));function n(i){return t.apply(this,arguments)}return n}()},{key:"removeFile",value:function(){var t=K(F().mark(function i(u){var l,o;return F().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return l=this.createKey(Pt,u),o=this.createKey(It,u),c.abrupt("return",(Te.remove(l,Le),Te.remove(o,Le),!0));case 2:case"end":return c.stop()}},i,this)}));function n(i){return t.apply(this,arguments)}return n}()},{key:"saveHistory",value:function(){var t=K(F().mark(function i(u){var l,o,s;return F().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return l=u.blockId,o=u.items,s=this.createKey(It,l),v.abrupt("return",(Te.save(s,o,Le),!0));case 2:case"end":return v.stop()}},i,this)}));function n(i){return t.apply(this,arguments)}return n}()},{key:"getHistory",value:function(){var t=K(F().mark(function i(u){var l;return F().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return l=this.createKey(It,u),s.abrupt("return",Te.get(l,Le)||[]);case 2:case"end":return s.stop()}},i,this)}));function n(i){return t.apply(this,arguments)}return n}()}]),e}(Xn),xe=In({url:"/vtj/base.json",method:"post",settings:{type:"json",validSuccess:!0,originResponse:!1,validate:function(r){var e;return((e=r.data)===null||e===void 0?void 0:e.code)===0},showError:function(r){Pe.error({message:r||"未知错误"})}}}),ci=function(a){Hn(e,a);var r=Jn(e);function e(){return ge(this,e),r.apply(this,arguments)}return he(e,[{key:"getProject",value:function(){var t=K(F().mark(function i(u){var l;return F().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return l=u.id,s.next=3,xe({type:"getProject",data:l}).catch(function(c){return null});case 3:if(s.t0=s.sent,s.t0){s.next=8;break}return s.next=7,this.createProject(u);case 7:s.t0=s.sent;case 8:return s.abrupt("return",s.t0);case 9:case"end":return s.stop()}},i,this)}));function n(i){return t.apply(this,arguments)}return n}()},{key:"createProject",value:function(){var t=K(F().mark(function i(u){var l,o,s;return F().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return l=u.id,o=u.name||"未命名项目",s=J(J({},u),{},{id:l,name:o}),v.next=3,xe({type:"createProject",data:s}).catch(function(f){return null});case 3:return v.abrupt("return",s);case 4:case"end":return v.stop()}},i)}));function n(i){return t.apply(this,arguments)}return n}()},{key:"updateProject",value:function(){var t=K(F().mark(function i(u){var l,o;return F().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(u.id){c.next=2;break}return c.abrupt("return",!1);case 2:return c.next=4,this.getProject(u);case 4:return l=c.sent,o=Object.assign(l,u),c.abrupt("return",!!this.createProject(o));case 7:case"end":return c.stop()}},i,this)}));function n(i){return t.apply(this,arguments)}return n}()},{key:"createFile",value:function(){var t=K(F().mark(function i(u){var l,o;return F().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return l=u.id,o=J(J({},u),{},{id:l}),c.next=3,xe({type:"createFile",data:o});case 3:return c.abrupt("return",o);case 4:case"end":return c.stop()}},i)}));function n(i){return t.apply(this,arguments)}return n}()},{key:"updateFile",value:function(){var t=K(F().mark(function i(u){return F().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",u.id?!!this.createFile(u):!1);case 1:case"end":return o.stop()}},i,this)}));function n(i){return t.apply(this,arguments)}return n}()},{key:"getFile",value:function(){var t=K(F().mark(function i(u){return F().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,xe({type:"getFile",data:u}).catch(function(s){return null});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},i)}));function n(i){return t.apply(this,arguments)}return n}()},{key:"removeFile",value:function(){var t=K(F().mark(function i(u){return F().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,xe({type:"removeHistory",data:u});case 2:return o.next=4,xe({type:"removeFile",data:u});case 4:return o.abrupt("return",!0);case 5:case"end":return o.stop()}},i)}));function n(i){return t.apply(this,arguments)}return n}()},{key:"saveHistory",value:function(){var t=K(F().mark(function i(u){var l,o;return F().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return l=u.blockId,o=u.items,c.next=3,xe({type:"saveHistory",data:{blockId:l,items:o}});case 3:return c.abrupt("return",!0);case 4:case"end":return c.stop()}},i)}));function n(i){return t.apply(this,arguments)}return n}()},{key:"getHistory",value:function(){var t=K(F().mark(function i(u){return F().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,xe({type:"getHistory",data:u}).catch(function(s){return[]});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},i)}));function n(i){return t.apply(this,arguments)}return n}()}]),e}(Xn),di={name:"zh-cn",el:{colorpicker:{confirm:"确定",clear:"清空"},datepicker:{now:"此刻",today:"今天",cancel:"取消",clear:"清空",confirm:"确定",selectDate:"选择日期",selectTime:"选择时间",startDate:"开始日期",startTime:"开始时间",endDate:"结束日期",endTime:"结束时间",prevYear:"前一年",nextYear:"后一年",prevMonth:"上个月",nextMonth:"下个月",year:"年",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},months:{jan:"一月",feb:"二月",mar:"三月",apr:"四月",may:"五月",jun:"六月",jul:"七月",aug:"八月",sep:"九月",oct:"十月",nov:"十一月",dec:"十二月"}},select:{loading:"加载中",noMatch:"无匹配数据",noData:"无数据",placeholder:"请选择"},cascader:{noMatch:"无匹配数据",loading:"加载中",placeholder:"请选择",noData:"暂无数据"},pagination:{goto:"前往",pagesize:"条/页",total:"共 {total} 条",pageClassifier:"页",page:"页",prev:"上一页",next:"下一页",currentPage:"第 {pager} 页",prevPages:"向前 {pager} 页",nextPages:"向后 {pager} 页",deprecationWarning:"你使用了一些已被废弃的用法，请参考 el-pagination 的官方文档"},messagebox:{title:"提示",confirm:"确定",cancel:"取消",error:"输入的数据不合法!"},upload:{deleteTip:"按 delete 键可删除",delete:"删除",preview:"查看图片",continue:"继续上传"},table:{emptyText:"暂无数据",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},tree:{emptyText:"暂无数据"},transfer:{noMatch:"无匹配数据",noData:"无数据",titles:["列表 1","列表 2"],filterPlaceholder:"请输入搜索内容",noCheckedFormat:"共 {total} 项",hasCheckedFormat:"已选 {checked}/{total} 项"},image:{error:"加载失败"},pageHeader:{title:"返回"},popconfirm:{confirmButtonText:"确定",cancelButtonText:"取消"}}};function re(){var a=Xt(dn);return{engine:a,regions:a.skeleton.regions,config:a.config,emitter:a.emitter,project:a.project,assets:a.assets}}function vi(a){var r=I(""),e=U(function(){var t=r.value.toLowerCase();return!t||!a?[]:a.filter(function(n){var i;return n.name.toLowerCase().includes(t)||((i=n.title)===null||i===void 0?void 0:i.toLowerCase().includes(t))})});return{searchKey:r,searchResult:e}}var fi=["onClick"],pi={key:1,class:"vtj-panel__header"},mi={class:"vtj-panel__title"},hi={key:1,class:"vtj-panel__subtitle"},gi={key:0,class:"vtj-panel__tools"},yi=["onClick"],_i={key:0,class:"vtj-panel__footer"},$e=H({__name:"Panel",props:{icon:{},title:{},subtitle:{},tools:{},bodyPadding:{type:Boolean,default:!0},back:{type:Boolean}},emits:["tool-click","back"],setup:function(r,e){var t=e.expose,n=e.emit,i=r,u=I(),l=I();function o(c){n("tool-click",c)}function s(){n("back")}return t({panel:u,header:l}),function(c,v){return p(),O("div",{class:"vtj-panel",ref_key:"panel",ref:u},[W("div",{ref_key:"header",ref:l,class:"vtj-panel__header-wrapper"},[i.back?(p(),O("i",{key:0,onClick:oe(s,["stop"]),class:"vtj-panel__back vtj-icon-arrow-left"},null,8,fi)):T("",!0),c.title!==null?(p(),O("div",pi,[ve(c.$slots,"title",{},function(){return[W("div",mi,[c.icon?(p(),O("i",{key:0,class:ue(["vtj-panel__icon",c.icon])},null,2)):T("",!0),te(" "+ee(c.title)+" ",1),c.subtitle?(p(),O("span",hi,ee(c.subtitle),1)):T("",!0)])]}),c.tools&&c.tools.length||c.$slots.tools?(p(),O("div",gi,[(p(!0),O(Y,null,X(c.tools,function(f){return p(),O("i",{key:f.name,class:ue(f.icon),onClick:function(h){return o(f)}},null,10,yi)}),128)),ve(c.$slots,"tools")])):T("",!0)])):T("",!0)],512),W("div",{class:ue(["vtj-panel__body",{"is-padding":i.bodyPadding}])},[ve(c.$slots,"default")],2),c.$slots.footer?(p(),O("div",_i,[ve(c.$slots,"footer")])):T("",!0)],512)}}}),bi=W("div",{class:"vtj-dialog__modal"},null,-1),pe=H({__name:"Dialog",props:{modelValue:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},width:{default:"80%"},height:{},top:{default:"40%"},cancel:{type:Boolean,default:!1},submit:{type:Boolean,default:!1},clear:{type:Boolean,default:!1},closable:{type:Boolean,default:!0}},emits:["close","update:modelValue","submit","clear"],setup:function(r,e){var t=e.expose,n=e.emit,i=r,u=jr(),l=I(),o=U(function(){var b=nt(u.tools||[]);return i.closable&&b.push({name:"close",icon:"vtj-icon-close"}),b}),s=zi(l),c=s.x,v=s.y,f=U(function(){return{width:i.width,height:i.height,left:`${c.value}px`,top:`${v.value}px`}}),m=function(_){_.name==="close"&&(n("update:modelValue",!1),n("close"))};function h(){n("update:modelValue",!1),n("close")}function g(){n("submit")}function C(){n("clear")}return t({close:h}),function(b,_){return i.modelValue?(p(),$(Er,{key:0,to:"body"},[bi,y($e,ae({ref_key:"panelRef",ref:l,class:"vtj-dialog"},b.$attrs,{tools:o.value,style:f.value,draggable:"",onToolClick:m}),Ln({default:k(function(){return[ve(b.$slots,"default")]}),_:2},[b.$slots.footer||b.cancel||b.submit||b.clear?{name:"footer",fn:k(function(){return[ve(b.$slots,"footer",{},function(){return[W("div",null,[ve(b.$slots,"action"),b.clear?(p(),$(d(ye),{key:0,type:"warning",size:"default",class:"vtj-dialog__clear",onClick:C},{default:k(function(){return[te(" 清除绑定 ")]}),_:1})):T("",!0)]),W("div",null,[b.cancel?(p(),$(d(ye),{key:0,onClick:h,size:"default"},{default:k(function(){return[te(" 取消 ")]}),_:1})):T("",!0),b.submit?(p(),$(d(ye),{key:1,type:"primary",onClick:g,size:"default"},{default:k(function(){return[te(" 确定 ")]}),_:1})):T("",!0)])]})]}),key:"0"}:void 0]),1040,["tools","style"])])):T("",!0)}}}),ki=W("div",null,"该组件支持多个插槽，请选择放置到其中一个",-1),wi={class:"vtj-designer__slots"},Ci=["onClick"],Vi=H({__name:"SlotPicker",props:{slots:{default:function(){return[]}}},emits:["pick"],setup:function(r,e){var t=e.emit,n=r,i=I(!0),u=function(o){t("pick",o)};return function(l,o){return p(),$(pe,{title:"提示",width:"600px",height:"200px",modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=function(s){return i.value=s})},{default:k(function(){return[ki,W("div",wi,[(p(!0),O(Y,null,X(n.slots,function(s){return p(),O("div",{onClick:function(v){return u(s)},class:"vtj-designer__slot"},ee(s.name),9,Ci)}),256))])]}),_:1},8,["modelValue"])}}}),Si=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=r||{},n=t.top,i=t.height,u=t.width,l=t.left;if(i>100&&u>200)return"inner";var o,s;return s=n>30?"top":"bottom",o=e||l<300&&u<300?"left":"right",[o,s].join("-")},ji=function(r){var e=r.rect,t=r.type,n=e.left,i=e.width,u=e.top,l=e.height,o={left:n,width:i,top:u,height:l};switch(t){case"left":o.left=0,o.width=0;break;case"right":o.left=o.left+o.width-4,o.width=0;break;case"bottom":o.top=o.top+o.height-4,o.height=0;break;case"top":o.height=0;break}return o},Dt=function(r,e){if(!e)return null;var t=r==="dropping"?ji(e):e.rect,n=t.left,i=t.top,u=t.width,l=t.height,o={left:`${n}px`,top:`${i}px`,width:`${u}px`,height:`${l}px`};return J(J({},e),{},{style:o,position:Si(e.rect,r!=="selected")})},lt;function Ee(a){if(lt||!a)return lt;Ye(function(){a.dispose()});var r=U(function(){return Dt("hover",a.hover.value)}),e=U(function(){return Dt("dropping",a.dropping.value)}),t=U(function(){return Dt("selected",a.selected.value)}),n=function(l){var o=l.type,s=l.node;if(!s){a.selected.value=null,a.hover.value=null;return}switch(o){case"remove":a.selected.value=null;case"copy":a.setSelected(s);break;case"move":a.setSelected(s);break;case"hover":a.setHover(s);break;case"selected":a.setSelected(s);break}},i=I("pc");return B.on(ar,function(u){i.value=u}),B.on(sn,function(u){a.setSelected(u)}),B.on(cn,function(u){a.setHover(u)}),B.on(Je,function(u){a.hover.value=null,a.selected.value=null}),B.on(ir,function(){var u=K(F().mark(function l(o){return F().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,fn(100);case 2:a.hover.value=null,o&&t.value&&a.setSelected(t.value.node);case 4:case"end":return c.stop()}},l)}));return function(l){return u.apply(this,arguments)}}()),B.on(G,K(F().mark(function u(){return F().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,fn(100);case 2:t.value&&a.setSelected(t.value.node);case 3:case"end":return o.stop()}},u)}))),lt={designer:a,hover:r,dropping:e,selected:t,onAction:n,viewportMode:i},lt}function Ei(a){return new Promise(function(r,e){var t=Nn(Vi,{slots:a,onClose:function(){t.unmount(),e(void 0)},onPick:function(i){t.unmount(),r(i)}});t.mount(document.createElement("div"))})}function $i(a,r){var e,t,n,i,u,l={state:(e=a.value)===null||e===void 0?void 0:e.removeState.bind(a.value),computed:(t=a.value)===null||t===void 0?void 0:t.removeComputed.bind(a.value),methods:(n=a.value)===null||n===void 0?void 0:n.removeMethods.bind(a.value),watch:(i=a.value)===null||i===void 0?void 0:i.removeWatch.bind(a.value),lifeCycles:(u=a.value)===null||u===void 0?void 0:u.removeLifeCycles.bind(a.value)},o=I(!1),s=I(Symbol()),c=I();return{list:U(function(){var v;if(r==="watch")return(((v=a.value)===null||v===void 0?void 0:v.watch)||[]).map(function(h){return{title:h.source.value,model:h}});{var f,m=(f=a.value)===null||f===void 0?void 0:f[r];return Object.entries(m!=null?m:{}).map(function(h){var g=Ie(h,2),C=g[0],b=g[1];return{title:C,model:{name:C,value:b}}})}}),visible:o,data:c,onAdd:function(f){s.value=Symbol(),c.value=null,o.value=!0},onEdit:function(f){s.value=Symbol(),c.value=J({},f),o.value=!0},onRemove:function(){var v=K(F().mark(function m(h){var g;return F().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,_e.confirm("是否确定删除?","提示",{type:"warning"}).catch(function(){return!1});case 2:if(!b.sent){b.next=5;break}g=l[r],g&&g(r==="watch"?h:h.name);case 5:case"end":return b.stop()}},m)}));function f(m){return v.apply(this,arguments)}return f}(),keyRef:s}}var Ai={block:{type:Object,default:null},data:{type:Object},type:{type:String,default:"state"},title:{type:String,default:""},nameLabel:{type:String,default:""},valueLabel:{type:String,default:""},dataType:{type:String,default:"JSExpression"},defaults:{type:String,default:""}};function Pi(a){var r={name:"",value:{type:a.dataType,value:a.defaults}},e={state:a.block.setState.bind(a.block),computed:a.block.setComputed.bind(a.block),methods:a.block.setMethods.bind(a.block),lifeCycles:a.block.setLifeCycles.bind(a.block)},t=I(),n=I(),i=I(),u=U(function(){return a.data?`编辑${a.title}`:`新增${a.title}`}),l={name:[{required:!0,message:`${a.title}名称为必填项`}]},o=U(function(){return!!a.data}),s=Re(a.data||Ue(r));Zt(function(){Object.assign(s,a.data||Ue(r))});var c=function(f){return a.data?!1:!!a.block[a.type][f]};return{defaultJsData:r,title:u,model:s,formRef:t,dialogRef:n,editorRef:i,rules:l,disabled:o,onSubmit:function(){var v=K(F().mark(function m(){var h,g;return F().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,t.value.validate().catch(function(){return!1});case 2:if(!b.sent){b.next=8;break}if(!c(s.name)){b.next=6;break}return Pe.warning({title:"提示",message:"已存在相同名称，请更换！"}),b.abrupt("return");case 6:h=i.value.getEditor().getValue(),g=a.block.runtimeContext,g&&Ae(J(J({},s.value),{},{value:h}),g)&&(s.value.value=h,e[a.type](s.name,s.value),n.value.close());case 8:case"end":return b.stop()}},m)}));function f(){return v.apply(this,arguments)}return f}()}}var Ii={block:{type:Object,default:null},data:{type:Object}};function Di(a){var r={source:{type:"JSFunction",value:"() => { }"},immediate:!1,deep:!1,handler:{type:"JSFunction",value:"() => { }"}},e=I(),t=I(),n=I(),i=I(),u=U(function(){return a.data?"编辑 Watch":"新增 Watch"}),l=Re(a.data||Ue(r));return Zt(function(){Object.assign(l,a.data||Ue(r))}),{title:u,model:l,onSubmit:function(){var o=K(F().mark(function c(){var v,f,m;return F().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:v=a.block.runtimeContext,f=n.value.getEditor().getValue(),m=i.value.getEditor().getValue(),v&&Ae(J(J({},l.source),{},{value:f}),v)&&Ae(J(J({},l.handler),{},{value:m}),v)&&(l.source.value=f,l.handler.value=m,a.block.setWatch(J({},l)),t.value.close());case 2:case"end":return g.stop()}},c)}));function s(){return o.apply(this,arguments)}return s}(),dialogRef:t,sourceRef:n,handlerRef:i,formRef:e}}function Fi(a,r){var e=Ee(),t=e.selected,n=U(function(){var l;return(l=t.value)===null||l===void 0?void 0:l.node}),i=U(function(){var l,o=[];if(!a.value)return o;var s=a.value.runtimeContext,c=s==null?void 0:s.__context_refs[(l=n.value)===null||l===void 0?void 0:l.id],v=a.value.runtimeContext===c?[]:Object.keys(c||{}).map(function(w){return`this.${w}`});v.length&&o.push({title:"上下文",items:v});var f=a.value.inject.map(function(w){return`this.${w.name}`});f.length&&o.push({title:"注入",items:f});var m=a.value.props.map(function(w){return typeof w=="string"?`this.$props.${w}`:`this.$props.${w.name}`});m.length&&o.push({title:"属性",items:m});var h=Object.keys(a.value.state).map(function(w){return`this.state.${w}`});h.length&&o.push({title:"状态",items:h});var g=Object.keys(a.value.computed).map(function(w){return`this.${w}.value`});g.length&&o.push({title:"计算属性",items:g});var C=Object.keys(a.value.methods).map(function(w){return`this.${w}`});C.length&&o.push({title:"方法",items:C});var b=Object.keys(a.value.dataSources).map(function(w){return`this.${w}`});b.length&&o.push({title:"数据源",items:b});var _=Object.keys((s==null?void 0:s.$refs)||{}).map(function(w){return`this.$refs.${w}`});return _.length&&o.push({title:"refs",items:_}),o}),u=U(function(){if(!r.value)return i.value;var l=r.value.toLowerCase(),o=[];return i.value.forEach(function(s){var c=s.items.filter(function(v){return v.toLowerCase().includes(l)});c.length&&o.push({title:s.title,items:c})}),o});return{options:i,searchResult:u}}function Oi(a,r){var e=[{name:"InputSetter",label:"文本"},{name:"ExpressionSetter",label:"表达式"}],t=I();ce(a,function(){var o=K(F().mark(function s(c){return F().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!c){f.next=9;break}return f.next=3,r.getBlockDescription(c.from);case 3:if(f.t0=f.sent,f.t0){f.next=6;break}f.t0=void 0;case 6:t.value=f.t0,f.next=10;break;case 9:t.value=void 0;case 10:case"end":return f.stop()}},s)}));return function(s){return o.apply(this,arguments)}}(),{immediate:!0});var n=U(function(){return!a.value||!At(a.value)?[]:[{name:"key",setters:e,value:a.value.getPropValue("key")},{name:"ref",setters:e,value:a.value.getPropValue("ref")},{name:"class",label:"class",setters:e,value:a.value.getPropValue("class")},{name:"style",label:"样式",setters:[{name:"JSONSetter",label:"JSON"},{name:"ExpressionSetter",label:"表达式"}],value:a.value.getPropValue("style")},{name:"children",label:"文本",title:"如设置组件文本，将清空子组件",setters:e,value:Array.isArray(a.value.children)?"":a.value.children}]}),i=U(function(){if(!a.value||!At(a.value))return[];var o=t.value||r.componentMap[a.value.name]||r.elementsMap[a.value.name];return o?(o.props||[]).map(function(s){var c;return J(J({},s),{},{value:(c=a.value.getPropValue(s.name))!==null&&c!==void 0?c:s.defaultValue})}):[]}),u=function(s){return n.value.some(function(c){return c.name===s})||i.value.some(function(c){return c.name===s})},l=U(function(){return!a.value||!At(a.value)?[]:Object.keys(a.value.props).filter(function(o){return!u(o)}).map(function(o){return{name:o,setters:"InputSetter",value:a.value.getPropValue(o)}})});return{commonProps:n,componentProps:i,onChange:function(s,c){s==="children"?a.value.setChildren(c):a.value.setProp(s,c)},customProps:l,addCustom:function(s){s&&a.value.setProp(s,"")},isExist:u,removeProp:function(s){a.value.removeProp(s)},blockDescription:t}}function Ri(a,r){var e=I();ce(a,function(){var u=K(F().mark(function l(o){return F().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!o){c.next=9;break}return c.next=3,r.getBlockDescription(o.from);case 3:if(c.t0=c.sent,c.t0){c.next=6;break}c.t0=void 0;case 6:e.value=c.t0,c.next=10;break;case 9:e.value=void 0;case 10:case"end":return c.stop()}},l)}));return function(l){return u.apply(this,arguments)}}(),{immediate:!0});var t=U(function(){var u;if(se(a.value))return[];var l=((u=a.value)===null||u===void 0?void 0:u.events)||{};return Na.map(function(o){return{name:o,event:l[o]}})}),n=U(function(){var u;if(se(a.value))return[];var l=((u=a.value)===null||u===void 0?void 0:u.events)||{};return Ma.map(function(o){return{name:o,event:l[o]}})}),i=U(function(){var u,l,o;if(se(a.value))return[];var s=((u=a.value)===null||u===void 0?void 0:u.events)||{};return(((l=e.value)===null||l===void 0?void 0:l.events)||((o=r.componentMap[a.value.name])===null||o===void 0?void 0:o.events)||[]).map(function(c){var v=typeof c=="string"?c:c.name;return{name:v,event:s[v]}})});return{mouseEventList:t,keyboardEventList:n,componentEventList:i}}var Ft=function(){function a(r,e,t){ge(this,a),D(this,"isUnset",!1),this.name=r,this.value=e,this.defaultValue=t,this.setValue(e)}return he(a,[{key:"setValue",value:function(e){this.value=e,this.isUnset=this.value===this.defaultValue}},{key:"getValue",value:function(){var e;return(e=this.value)!==null&&e!==void 0?e:this.defaultValue}}],[{key:"toDsl",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.entries(e).reduce(function(t,n){var i=Ie(n,2),u=i[0],l=i[1];return l.isUnset||(t[u]=l.getValue()),t},{})}},{key:"parse",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.entries(e).reduce(function(t,n){var i=Ie(n,2),u=i[0],l=i[1];return t[u]=new a(u,l),t},{})}}]),a}(),ht=function(){function a(r){ge(this,a),D(this,"id",void 0),D(this,"name",""),D(this,"arg",void 0),D(this,"modifiers",void 0),D(this,"value",void 0),D(this,"iterator",void 0),this.id=r.id||Oe(),this.update(r)}return he(a,[{key:"update",value:function(e){var t=e.name,n=e.arg,i=e.modifiers,u=e.value,l=e.iterator;this.name=t,this.arg=n,this.modifiers=i,this.value=u,this.iterator=l}}],[{key:"parse",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return e.map(function(t){return new a(t)})}},{key:"toDsl",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return e.map(function(t){var n=t.name,i=t.arg,u=t.modifiers,l=t.value,o=t.iterator,s=t.id;return{id:s,name:n,arg:i,modifiers:u,value:l,iterator:o}})}}]),a}(),Ot=function(){function a(r,e){ge(this,a),D(this,"handler",void 0),D(this,"modifiers",{}),this.name=r;var t=e.handler;this.handler=t,this.update(e)}return he(a,[{key:"update",value:function(e){var t=e.handler,n=e.modifiers,i=n===void 0?{}:n;this.handler=t,this.modifiers=i}}],[{key:"toDsl",value:function(e){return Object.entries(e).reduce(function(t,n){var i=Ie(n,2),u=i[0],l=i[1],o=l.handler,s=l.modifiers;return t[u]={handler:o,modifiers:s},t},{})}},{key:"parse",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.entries(e).reduce(function(t,n){var i=Ie(n,2),u=i[0],l=i[1];return t[u]=new a(u,l),t},{})}}]),a}(),gt=function(){function a(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;ge(this,a),D(this,"__VTJ_NODE__",!0),D(this,"id",void 0),D(this,"name",void 0),D(this,"from",void 0),D(this,"invisible",!1),D(this,"props",{}),D(this,"children",""),D(this,"slot",void 0),D(this,"directives",[]),D(this,"events",{}),D(this,"disposed",!1),D(this,"root",null),D(this,"lock",!1),this.schema=r,this.parent=e;var t=r.id,n=r.name,i=r.from,u=i===void 0?"":i;this.id=t||Oe(),this.name=n,this.from=u,e&&(this.root=se(e)?e:e.root),this.update(r,!0),a.nodes[this.id]=this}return he(a,[{key:"update",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;Object.assign(this.schema,e);var n=e.children,i=e.slot,u=e.props,l=e.directives,o=e.events;this.invisible=!!e.invisible,this.setChildren(n,t),this.setSlot(i,t),this.props=Ft.parse(u),this.directives=ht.parse(l),this.events=Ot.parse(o)}},{key:"dispose",value:function(){var e=this.children,t=this.disposed;t||(Array.isArray(e)&&e.forEach(function(n){return n.dispose()}),this.parent&&this.parent.removeChild(this),this.parent=null,this.root=null,this.disposed=!0,delete a.nodes[this.id])}},{key:"toDsl",value:function(){var e=this.id,t=this.name,n=this.from,i=this.invisible,u=this.slot,l=this.children,o=this.props,s=this.directives,c=this.events,v=Array.isArray(l)?l.filter(function(f){return!f.invisible}).map(function(f){return f.toDsl()}):l;return J(J({},this.schema),{},{id:e,name:t,from:n,invisible:i,slot:u,children:v,props:Ft.toDsl(o),directives:ht.toDsl(s),events:Ot.toDsl(c)})}},{key:"setChildren",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this.disposed;i||(Array.isArray(t)?this.children=t.map(function(u){return new a(u,e)}):this.children=t,n||B.emit(G,this))}},{key:"setSlot",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.slot=typeof e=="string"?{name:e,params:[]}:e,t||B.emit(G,this)}},{key:"setProp",value:function(e,t){var n=this.props[e];n?n.setValue(t):this.props[e]=new Ft(e,t),B.emit(G,this)}},{key:"removeProp",value:function(e){delete this.props[e],B.emit(G,this)}},{key:"getPropValue",value:function(e){var t=this.props[e];if(t)return t.getValue()}},{key:"setEvent",value:function(e,t){var n=this.events[e];n?n.update(t):this.events[e]=new Ot(e,t),B.emit(G,this)}},{key:"removeEvent",value:function(e){delete this.events[e],B.emit(G,this)}},{key:"setDirective",value:function(e){var t=this.directives.findIndex(function(n){return n.id===e.id});t>=0?this.directives.splice(t,1,e):this.directives.push(e),B.emit(G,this)}},{key:"removeDirective",value:function(e){var t=this.directives.findIndex(function(n){return n.id===e.id});t>=0&&this.directives.splice(t,1),B.emit(G,this)}},{key:"appendChild",value:function(e){var t=this.children,n=this.disposed;n||(e.parent=this,e.root=this.root,Array.isArray(t)?t.push(e):this.children=[e],B.emit(G,this))}},{key:"insertChild",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=this.children,i=this.disposed;i||(e.parent=this,e.root=this.root,Array.isArray(n)?n.splice(t,0,e):this.children=[e],B.emit(G,this))}},{key:"removeChild",value:function(e){var t=this.children,n=this.disposed;if(!(n||!Array.isArray(t))){var i=t.findIndex(function(u){return u===e});e.parent=null,e.root=null,t.splice(i,1),B.emit(G,this)}}},{key:"insertAfter",value:function(e){if(this.parent){var t=this.parent.children;if(Array.isArray(t)){e.parent=this.parent,e.root=this.root;var n=t.indexOf(this);t.splice(n+1,0,e),B.emit(G,this.parent)}}}},{key:"insertBefore",value:function(e){if(this.parent){var t=this.parent.children;if(Array.isArray(t)){e.parent=this.parent,e.root=this.root;var n=t.indexOf(this);t.splice(n,0,e),B.emit(G,this.parent)}}}},{key:"moveNext",value:function(){var e=this.parent;if(e){var t=e.children;if(Array.isArray(t)){var n=t.indexOf(this);n>-1&&n<t.length-1&&(t.splice(n,1),t.splice(n+1,0,this),B.emit(G,e))}}}},{key:"movePrev",value:function(){var e=this.parent;if(e){var t=e.children;if(Array.isArray(t)){var n=t.indexOf(this);n>0&&(t.splice(n,1),t.splice(n-1,0,this),B.emit(G,e))}}}},{key:"copy",value:function(){if(this.parent){var e=this.toDsl();delete e.id;var t=new a(e);return this.insertAfter(t),t}}}]),a}();D(gt,"nodes",{});var jn=["name","title","inject","state","lifeCycles","methods","computed","watch","css","props","emits","slots","transform","dataSources"],Rt=function(){function a(r){ge(this,a),D(this,"__VTJ_BLOCK__",!0),D(this,"id",void 0),D(this,"name",""),D(this,"title",""),D(this,"inject",[]),D(this,"state",{}),D(this,"lifeCycles",{}),D(this,"methods",{}),D(this,"computed",{}),D(this,"watch",[]),D(this,"css",""),D(this,"props",[]),D(this,"emits",[]),D(this,"slots",[]),D(this,"transform",{}),D(this,"dataSources",{}),D(this,"children",[]),D(this,"lock",!1),D(this,"invisible",!1),D(this,"disposed",!1),D(this,"parent",null),D(this,"root",null),D(this,"runtimeContext",void 0);var e=r.id;this.id=e||Oe(),this.init(r)}return he(a,[{key:"init",value:function(e){for(var t=this,n=0,i=jn;n<i.length;n++){var u=i[n],l=e[u];l&&(this[u]=l)}var o=e.children,s=o===void 0?[]:o;this.children=s.map(function(c){return new gt(c,t)})}},{key:"dispose",value:function(){this.children.map(function(e){return e.dispose()}),this.runtimeContext=void 0,this.disposed=!0}},{key:"toDsl",value:function(){var e=this,t=this.__VTJ_BLOCK__,n=this.id,i=this.children;return J(J({},jn.reduce(function(u,l){return u[l]=e[l],u},{})),{},{__VTJ_BLOCK__:t,id:n,children:i.map(function(u){return u.toDsl()})})}},{key:"appendChild",value:function(e,t,n){t?n==="left"||n==="top"?t.insertBefore(e):n==="right"||n==="bottom"?t.insertAfter(e):t.appendChild(e):(e.parent=this,e.root=this,this.children.push(e),B.emit(G,this))}},{key:"removeChild",value:function(e){if(e.parent===this){var t=this.children.findIndex(function(n){return n.id===e.id||n===e});t>-1&&(e.parent=null,e.root=null,this.children.splice(t,1),B.emit(G,this))}else e.parent&&e.parent.removeChild(e)}},{key:"allowDrop",value:function(){var r=K(F().mark(function t(n,i,u){var l,o,s,c,v,f,m,h,g;return F().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!se(i)){b.next=2;break}return b.abrupt("return",!0);case 2:return l=u.componentMap,b.next=5,u.getBlockDescription(i.from);case 5:if(b.t0=b.sent,b.t0){b.next=8;break}b.t0=l[i.name];case 8:if(o=b.t0,!(!o||!n)){b.next=11;break}return b.abrupt("return",!0);case 11:return s=n.parentIncludes,c=s===void 0?!0:s,v=n.name,f=o.childIncludes,m=f===void 0?!0:f,h=c===!0||Array.isArray(c)&&c.includes(i.name),g=m===!0||Array.isArray(m)&&m.includes(v),b.abrupt("return",h&&g);case 13:case"end":return b.stop()}},t)}));function e(t,n,i){return r.apply(this,arguments)}return e}()},{key:"move",value:function(e,t,n){this.removeChild(e),se(t)?t.appendChild(e):this.appendChild(e,t,n)}},{key:"setState",value:function(e,t){this.state[e]=t,B.emit(G,this)}},{key:"removeState",value:function(e){delete this.state[e],B.emit(G,this)}},{key:"setComputed",value:function(e,t){this.computed[e]=t,B.emit(G,this)}},{key:"removeComputed",value:function(e){delete this.computed[e],B.emit(G,this)}},{key:"setMethods",value:function(e,t){this.methods[e]=t,B.emit(G,this)}},{key:"removeMethods",value:function(e){delete this.methods[e],B.emit(G,this)}},{key:"setLifeCycles",value:function(e,t){this.lifeCycles[e]=t,B.emit(G,this)}},{key:"removeLifeCycles",value:function(e){delete this.lifeCycles[e],B.emit(G,this)}},{key:"setWatch",value:function(e){e.id=e.id||Oe();var t=this.watch.findIndex(function(n){return n.id&&n.id===e.id||n===e});t>-1?this.watch.splice(t,1,e):this.watch.push(e),B.emit(G,this)}},{key:"removeWatch",value:function(e){var t=this.watch.findIndex(function(n){return n.id&&n.id===e.id||n===e});t>-1&&(this.watch.splice(t,1),B.emit(G,this))}},{key:"setCss",value:function(e){this.css=e,B.emit(G,this)}},{key:"setProp",value:function(e){var t=this.props.findIndex(function(n){return typeof n=="string"?n===e.name:n.name===e.name});t>-1?this.props.splice(t,1,e):this.props.push(e),B.emit(G,this)}},{key:"removeProp",value:function(e){var t=this.props.findIndex(function(n){return typeof n=="string"?n===e.name:n.name===e.name});t>-1&&(this.props.splice(t,1),B.emit(G,this))}},{key:"setEmit",value:function(e){var t=this.emits.findIndex(function(n){return n===e});t>-1?this.emits.splice(t,1,e):this.emits.push(e),B.emit(G,this)}},{key:"removeEmit",value:function(e){var t=this.emits.findIndex(function(n){return n===e});t>-1&&(this.emits.splice(t,1),B.emit(G,this))}},{key:"setSlot",value:function(e){var t=this.slots.findIndex(function(n){return n===e});t>-1?this.slots.splice(t,1,e):this.slots.push(e),B.emit(G,this)}},{key:"removeSlot",value:function(e){var t=this.slots.findIndex(function(n){return n===e});t>-1&&(this.slots.splice(t,1),B.emit(G,this))}},{key:"setInject",value:function(e){var t=this.inject.findIndex(function(n){return n.name===e.name});t>-1?this.inject.splice(t,1,e):this.inject.push(e),B.emit(G,this)}},{key:"removeInject",value:function(e){var t=this.inject.findIndex(function(n){return n.name===e.name});t>-1&&(this.inject.splice(t,1),B.emit(G,this))}},{key:"setDataSource",value:function(e){this.dataSources[e.name]=e,B.emit(G,this)}},{key:"removeDataSource",value:function(e){delete this.dataSources[e],B.emit(G,this)}}]),a}(),Bi=function(){function a(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];ge(this,a),D(this,"__VTJ_PROJECT__",!0),D(this,"id",""),D(this,"name",""),D(this,"description",""),D(this,"homepageId",""),D(this,"dependencies",I([])),D(this,"pages",I([])),D(this,"blocks",I([])),D(this,"apis",I([])),D(this,"current",I(null)),this.source=e,this.load(r)}return he(a,[{key:"load",value:function(e){var t=e||{},n=t.id,i=t.description,u=i===void 0?"":i,l=t.name,o=l===void 0?"":l,s=t.homepageId,c=s===void 0?"":s,v=t.dependencies,f=v===void 0?[]:v,m=t.pages,h=m===void 0?[]:m,g=t.blocks,C=g===void 0?[]:g,b=t.apis,_=b===void 0?[]:b;this.id=n||Oe(),this.description=u,this.name=o,this.homepageId=c,this.dependencies.value=this.mergeDeps(f,this.source),this.pages.value=h,this.blocks.value=C,this.apis.value=_}},{key:"update",value:function(e){var t=this.toDsl();Object.assign(t,e),this.load(t),B.emit(Se,t)}},{key:"activeFile",value:function(e){this.current.value=e?new Rt(e):null,B.emit(To,this.current.value)}},{key:"mergeDeps",value:function(e,t){var n=e.filter(function(u){return!!u.official}),i=e.filter(function(u){return!u.official});return t.map(function(u){var l=n.find(function(o){return o.package===u.package});return Object.assign(u,l||{})}).concat(i)}},{key:"setDeps",value:function(e){var t=this.dependencies.value,n=t.findIndex(function(i){return i.package===e.package});n>-1?t.splice(n,1,J(J({},t[n]),e)):t.push(kt(e)),B.emit(Se,this.toDsl())}},{key:"removeDeps",value:function(e){var t=this.dependencies.value,n=t.findIndex(function(i){return i.package===e.package});n>-1&&(t.splice(n,1),B.emit(Se,this.toDsl()))}},{key:"toDsl",value:function(){var e=this.id,t=this.description,n=this.name,i=this.homepageId,u=this.dependencies,l=this.pages,o=this.blocks,s=this.apis,c=this.__VTJ_PROJECT__;return{__VTJ_PROJECT__:c,__VTJ_VERSION__:Qn,__VTJ_DATE__:Date.now().toString(),id:e,description:t,name:n,homepageId:i,dependencies:d(u),pages:d(l),blocks:d(o),apis:d(s)}}},{key:"findPage",value:function(e){var t=function n(i){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],l=Fe(u),o;try{for(l.s();!(o=l.n()).done;){var s=o.value;if(s.id===i)return s;if(s.children&&s.children.length){var c=n(i,s.children);if(c)return c}}}catch(v){l.e(v)}finally{l.f()}};return t(e,this.pages.value)}},{key:"getPages",value:function(){return Xa(this.pages.value)}},{key:"getHomePage",value:function(){return this.getPages().find(function(e){return!!e.home})}},{key:"clearHomePage",value:function(){this.getPages().forEach(function(e){e.home=!1})}},{key:"addPage",value:function(e,t){var n=e.name,i=e.title,u=e.isDir,l=e.home,o=new Rt({name:n,title:i}),s=o.toDsl();if(e.id=s.id,l&&(this.clearHomePage(),e.home=!0),u&&(e.children=[]),t){var c=this.findPage(t);c&&(c.children?c.children.push(e):c.children=[e])}else this.pages.value.push(e);return u||B.emit(dt,s),B.emit(Se,this.toDsl()),o}},{key:"updatePage",value:function(e,t){if(e.id){var n=this.findPage(e.id);n&&(Object.assign(n,e),n.home&&(this.clearHomePage(),n.home=!0),t&&(t.name=n.name,t.title=n.title,B.emit(Ut,t)),B.emit(Se,this.toDsl()))}}},{key:"copyPage",value:function(e,t,n){var i,u=Oe(),l=J(J({},e),{},{id:u}),o=J(J({},t),{},{id:u}),s=n?((i=this.findPage(n))===null||i===void 0?void 0:i.children)||[]:this.pages.value,c=s.findIndex(function(v){return v.id===e.id});s.splice(c,0,l),B.emit(dt,o),B.emit(Se,this.toDsl())}},{key:"removePage",value:function(e){var t=function n(i,u){var l=u.findIndex(function(v){return v.id===i});if(l>=0){u.splice(l,1);return}var o=Fe(u),s;try{for(o.s();!(s=o.n()).done;){var c=s.value;if(c.children&&c.children.length)return n(i,c.children)}}catch(v){o.e(v)}finally{o.f()}};t(e,this.pages.value),B.emit(Ht,e),B.emit(Se,this.toDsl())}},{key:"addBlock",value:function(e){var t=new Rt(e),n=t.toDsl(),i=n.id,u=n.name,l=n.title,o={id:i,name:u,title:l};return this.blocks.value.push(o),B.emit(dt,n),B.emit(Se,this.toDsl()),t}},{key:"updateBlock",value:function(e,t){var n=e.id;Object.assign(t,e);var i=this.blocks.value,u=i.findIndex(function(l){return l.id===n});u>-1&&(i.splice(u,1,e),B.emit(Ut,t),B.emit(Se,this.toDsl()))}},{key:"removeBlock",value:function(e){var t,n=this.blocks.value,i=n.findIndex(function(u){return u.id===e});i>-1&&(((t=this.current.value)===null||t===void 0?void 0:t.id)===e&&this.activeFile(null),n.splice(i,1),B.emit(Ht,e),B.emit(Se,this.toDsl()))}},{key:"findBlock",value:function(e){return this.blocks.value.find(function(t){return t.id===e})}},{key:"existBlockName",value:function(e){return this.blocks.value.some(function(t){return t.name===e.name&&t.id!==e.id})}},{key:"getFile",value:function(e){var t=this.findBlock(e);return t||this.findPage(e)}},{key:"isPage",value:function(e){return typeof(e==null?void 0:e.isDir)=="boolean"}},{key:"setApi",value:function(e){var t=this.apis.value,n=t.findIndex(function(i){return i.name===e.name});n>-1?t.splice(n,1,e):t.push(e),B.emit(Se,this.toDsl())}},{key:"removeApi",value:function(e){var t=this.apis.value,n=t.findIndex(function(i){return i.name===e});n>-1&&(t.splice(n,1),B.emit(Se,this.toDsl()))}}]),a}(),Ti=function(){function a(r){ge(this,a),D(this,"index",-1),D(this,"list",[]),D(this,"max",void 0),D(this,"blockId",void 0);var e=r.history,t=r.max,n=t===void 0?50:t;this.blockId=e.blockId,this.max=n,this.refresh(e.items||[])}return he(a,[{key:"refresh",value:function(e){this.index=-1,this.list=xn(e)}},{key:"go",value:function(){var e=this.index,t=this.list;if(!(e<0)){--this.index;var n=t[this.index];n&&(B.emit(xo,n),B.emit(qe,n))}}},{key:"back",value:function(){var e=this.index,t=this.list;if(!(e>=t.length-1)){e<0&&(this.index=0),++this.index;var n=t[this.index];n&&(B.emit(No,n),B.emit(qe,n))}}},{key:"push",value:function(e){var t=this.max,n=this.list,i=this.blockId,u={id:Oe(),title:new Date().toLocaleString(),block:Ue(e)};n.unshift(u),n.length>t&&(this.list=n.splice(t)),this.index=-1,B.emit(Mo,{blockId:i,item:u}),B.emit(yt,this.toDsl())}},{key:"load",value:function(e){var t=this.list.findIndex(function(n){return n.id===e});t>=0&&(this.index=t,B.emit(qe,this.list[t]))}},{key:"remove",value:function(e){var t=this.list.findIndex(function(l){return l.id===e}),n=this.list,i=this.blockId;if(t>-1){var u=n.splice(t,1);t===this.index?this.index=-1:this.index>=n.length&&(this.index=n.length-1),B.emit(zo,{blockId:i,item:u[0]}),B.emit(yt,this.toDsl())}}},{key:"toDsl",value:function(){var e=this.blockId,t=this.list;return{blockId:e,items:kt(t)}}}]),a}(),Li=function(r,e){return new ht({name:r,value:void 0,iterator:e})},xi=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"modelValue";return new ht({name:"vModel",value:void 0,arg:r})};function Ni(a){if(!a)return[];var r=a.props,e=r===void 0?[]:r,t=a.events,n=t===void 0?[]:t;if(e.length&&n.length){var i=n.filter(function(u){return(typeof u=="string"?u:u.name).startsWith("onUpdate:")}).map(function(u){return u=typeof u=="string"?u:u.name});return i.length?e.filter(function(u){return i.some(function(l){return l.includes(u.name)})}):[]}return[]}function Mi(a,r){var e=function(f){return U(function(){return a.value&&(a.value.directives||[]).find(function(m){return m.name===f})||Li(f)})},t=U(function(){return Ni(r.value)}),n=function(){return U(function(){return t.value.map(function(f){return(a.value.directives||[]).find(function(m){return m.name==="vModel"&&m.arg==f.name})||xi(f.name)})})},i=e("vIf"),u=e("vShow"),l=e("vBind"),o=e("vFor"),s=n(),c={vIf:i,vShow:u,vBind:l,vFor:o};return{directives:c,vIf:i,vShow:u,vBind:l,vFor:o,vModels:s,onValueChange:function(f,m){var h=c[f];m?(h.value.value=m,a.value.setDirective(h.value)):(h.value.value=void 0,a.value.removeDirective(h.value))},onForChange:function(f,m){if(f==="value"){m?(o.value.value=m,a.value.setDirective(o.value)):a.value.removeDirective(o.value);return}(f==="item"||f==="index")&&(o.value.iterator=J(J({},o.value.iterator),{},D({},f,m||void 0)),a.value.setDirective(o.value))},onModelChange:function(f,m){var h=parseInt(f),g=s.value[h];g&&(m?(g.value=m,a.value.setDirective(g)):(g.value=void 0,a.value.removeDirective(g)))}}}function zi(a){var r=I(),e=I(),t=I(),n=I(0),i=I(0),u=function(){var s=window,c=s.innerWidth,v=s.innerHeight,f=r.value;f.left,f.top;var m=f.width,h=m===void 0?0:m,g=f.height,C=g===void 0?0:g,b=Math.max((c-h)/2,0),_=Math.max((v-C)/2,0);return{x:b,y:_}},l=function(s){var c=window,v=c.innerWidth,f=c.innerHeight,m=e.value.getBoundingClientRect(),h=m.width,g=h===void 0?0:h,C=m.height,b=C===void 0?0:C;n.value=Math.max(0,s.x),s.x>v-g&&(n.value=Math.min(s.x,v-g)),i.value=Math.max(0,s.y),s.y>f-b&&(i.value=Math.min(s.y,f-b))};return ce(a,function(o){var s=o==null?void 0:o.panel;if(s){e.value=s,t.value=o==null?void 0:o.header,r.value=s.getBoundingClientRect();var c=u();n.value=c.x,i.value=c.y,kr(e,{initialValue:u(),handle:t,onMove:function(f){l(f)}})}}),{x:n,y:i}}var Me=H({name:"WidgetRenderer",props:{name:String,type:[String,Object],props:Object,disabled:Boolean,extendProps:Object,order:Number,visible:{type:Boolean,default:!0}},setup:function(r,e){e.slots;var t=Xt(dn),n=I(r.visible),i=U(function(){return r.type&&t!==null&&t!==void 0&&t.skeleton?t==null?void 0:t.skeleton.getComponent(r.type):null});return ce(function(){return r.visible},function(u){u&&(n.value=u)},{immediate:!0}),bt(function(){var u=t==null?void 0:t.skeleton;if(r.name&&u){var l=Ir();u.widgetInstances[r.name]=l==null?void 0:l.refs[r.name]}}),Ye(function(){var u=t==null?void 0:t.skeleton;r.name&&u&&delete u.widgetInstances[r.name]}),function(){return i.value&&!r.disabled&&n.value?Mn(i.value,J({ref:r.name,name:r.name,extendProps:r.extendProps,order:r.order,style:{display:r.visible?"":"none"}},r.props)):null}}}),En=H({__name:"InputSetter",setup:function(r){return function(e,t){return p(),$(d(ne),ae({clearable:""},e.$attrs),null,16)}}}),$n=H({__name:"SelectSetter",props:{options:{default:function(){return[]}}},setup:function(r){var e=r;return function(t,n){return p(),$(d(wt),ft(Yt(t.$attrs)),{default:k(function(){return[(p(!0),O(Y,null,X(e.options,function(i){return p(),$(d(Ct),ae({key:i.label},i),null,16)}),128))]}),_:1},16)}}}),Ui="{{",Hi="}}",Ji=H({__name:"ExpressionSetter",props:{modelValue:{default:function(){return{type:"JSExpression",value:""}}}},emits:["change"],setup:function(r,e){var t=e.emit,n=r,i=re(),u=i.project,l=function(v){var f,m=(f=u.current.value)===null||f===void 0?void 0:f.runtimeContext;return Ae(v,m)},o=I(n.modelValue.value);ce(function(){return n.modelValue.value},function(c){o.value=c});var s=function(v){var f={type:"JSExpression",value:v};l(f)&&t("change",f)};return function(c,v){return p(),$(d(ne),{class:"vtj-expression-setter",modelValue:o.value,"onUpdate:modelValue":v[0]||(v[0]=function(f){return o.value=f}),onChange:s},{prefix:k(function(){return[te(ee(Ui))]}),suffix:k(function(){return[te(ee(Hi))]}),_:1},8,["modelValue"])}}}),we=$r(function(){return pr(()=>import("./Editor-c713e86f-04de4124.js"),["./Editor-c713e86f-04de4124.js","./monaco-editor-38c15c16.js","./monaco-editor-456639a7.css","./@vue-062efada.js"],import.meta.url)}),Wi=W("i",{class:"vtj-icon-more"},null,-1),Qi={key:0,class:"vtj-tabs__check"},on=H({__name:"Tabs",props:{items:{default:function(){return[]}},modelValue:{},more:{},stretch:{type:Boolean},checkable:{type:Boolean}},emits:["update:modelValue","more","tab-remove"],setup:function(r,e){var t,n,i=e.emit,u=r,l=I((t=u.modelValue||((n=u.items[0])===null||n===void 0?void 0:n.name))!==null&&t!==void 0?t:"");ce(l,function(){i("update:modelValue",l.value)}),ce(function(){return u.modelValue},function(c){l.value=c});var o=function(v){i("more",v)},s=function(v){i("tab-remove",v)};return function(c,v){return p(),$($e,ae({class:"vtj-tabs"},c.$attrs),{title:k(function(){return[y(d(Nt),{type:"card",modelValue:l.value,"onUpdate:modelValue":v[0]||(v[0]=function(f){return l.value=f}),onTabRemove:s,stretch:u.stretch},{default:k(function(){return[(p(!0),O(Y,null,X(u.items,function(f){return p(),$(d(xt),{key:f.name,label:f.label,name:f.name,closable:f.closable,lazy:""},null,8,["label","name","closable"])}),128))]}),_:1},8,["modelValue","stretch"])]}),tools:k(function(){return[u.more?(p(),$(d(en),{key:0,"hide-on-click":!1,size:"small",placement:"bottom-end",onCommand:o},{dropdown:k(function(){return[y(d(nn),null,{default:k(function(){return[(p(!0),O(Y,null,X(u.more,function(f){return p(),$(d(tn),{key:f.name,command:f},{default:k(function(){return[u.checkable?(p(),O("span",Qi,[W("i",{class:ue(`${f.checked?"vtj-icon-check":"none"}`)},null,2)])):T("",!0),te(" "+ee(f.label),1)]}),_:2},1032,["command"])}),128))]}),_:1})]}),default:k(function(){return[Wi]}),_:1})):T("",!0)]}),default:k(function(){return[ve(c.$slots,"default")]}),_:3},16)}}}),An=H({__name:"Icon",props:{icon:{},label:{},active:{type:Boolean,default:!1},open:{type:Boolean,default:!1}},emits:["click"],setup:function(r,e){var t=e.emit,n=r,i=U(function(){return{"is-active":n.active,"is-open":n.open}}),u=function(){t("click")};return function(l,o){return p(),$(d(Un),{effect:"dark",placement:"right",content:l.label,"show-after":600},{default:k(function(){return[W("div",{class:ue(["vtj-icon",i.value]),onClick:u},[W("i",{class:ue(l.icon)},null,2)],2)]}),_:1},8,["content"])}}}),me=H({__name:"SubPanel",setup:function(r){return function(e,t){return p(),$($e,ae({class:"vtj-sub-panel"},e.$attrs),Ln({default:k(function(){return[ve(e.$slots,"default")]}),_:2},[e.$slots.footer?{name:"footer",fn:k(function(){return[ve(e.$slots,"footer")]}),key:"0"}:void 0]),1040)}}}),Ki=["onClick"],qi={class:"vtj-data-item__title"},Gi={class:"vtj-data-item__action"},Yi=["onClick"],Xi=["onClick"],Zi={key:0,class:"vtj-data-item__body"},be=H({__name:"DataItem",props:{title:{default:""},content:{default:""},editable:{type:Boolean,default:!1},removable:{type:Boolean,default:!1},active:{type:Boolean,default:!1},collapsible:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},collapsed:{type:Boolean,default:!1},background:{type:Boolean,default:!0}},emits:["click","remove","edit"],setup:function(r,e){var t=e.emit,n=r,i=I(n.collapsed),u=function(){t("edit")},l=function(){t("remove")},o=function(){n.clickable?t("click"):s()},s=function(){n.collapsible&&(i.value=!i.value)};return function(c,v){return p(),O("div",{class:ue(["vtj-data-item",{"is-current":n.active}])},[W("div",{class:ue(["vtj-data-item__header",{"is-pointer":n.clickable||n.collapsible,"is-bg":n.background}]),onClick:o},[n.collapsible?(p(),O("i",{key:0,class:ue(["vtj-icon-greater arrow",{open:!i.value}]),onClick:oe(s,["stop"])},null,10,Ki)):T("",!0),W("div",qi,[ve(c.$slots,"title",{},function(){return[te(ee(n.title),1)]})]),W("div",Gi,[ve(c.$slots,"action"),n.editable?(p(),O("i",{key:0,class:"vtj-icon-edit",title:"编辑",onClick:oe(u,["stop"])},null,8,Yi)):T("",!0),n.removable?(p(),O("i",{key:1,class:"vtj-icon-remove",title:"删除",onClick:oe(l,["stop"])},null,8,Xi)):T("",!0)])],2),n.content||c.$slots.default?Qe((p(),O("div",Zi,[ve(c.$slots,"default",{},function(){return[te(ee(n.content),1)]})],512)),[[Ke,!i.value]]):T("",!0)],2)}}}),eu={class:"vtj-context-viewer"},tu=["onClick"],nu=H({__name:"ContextViewer",emits:["pick"],setup:function(r,e){var t=e.emit,n=Rn({}),i=n.copy,u=re(),l=u.project,o=U(function(){var g;return(g=l.current.value)===null||g===void 0?void 0:g.runtimeContext}),s=["$provider","$apis","$components","context"],c=function(C){var b=C.value,_=$t(b);return _==="Object"||_==="Module"?Object.keys(b||{}).length===0:_==="Array"?b.length===0:!0},v=function(C){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"this";return typeof C=="object"?Array.isArray(C)?C.map(function(_,w){var E=`[${w}]`;return{label:E,value:_,type:$t(_),path:`${b}${E}`}}):Object.entries(C).map(function(_){var w=Ie(_,2),E=w[0],S=w[1];return{label:E,value:S,type:$t(S),path:`${b}.${E}`}}).filter(function(_){return!_.label.startsWith("__")&&!s.includes(_.label)}):[]},f=function(C,b){if(C.level===0)b(v(o.value));else{var _=kt(C.data.value);b(v(_,C.data.path))}},m=function(C){i(C.path),je.success({message:"已经复制到粘贴板"})},h=function(C){t("pick",C.path)};return function(g,C){return p(),O("div",eu,[o.value?(p(),$(d(rn),{key:0,lazy:"",load:f,"expand-on-click-node":!1,props:{isLeaf:c}},{default:k(function(b){var _=b.data;return[y(d(be),{title:_.label,clickable:"",onClick:function(E){return h(_)}},{action:k(function(){return[W("i",{class:"vtj-icon-copy",title:"复制",onClick:oe(function(w){return m(_)},["stop"])},null,8,tu)]}),_:2},1032,["title","onClick"])]}),_:1},8,["props"])):T("",!0)])}}}),ru={key:0,class:"vtj-binder__common"},au=["onClick"],iu={class:"vtj-binder__footer"},St=H({__name:"Binder",props:{clearable:{type:Boolean,default:!0}},emits:["submit","cancel","remove","pick"],setup:function(r,e){var t=e.expose,n=e.emit,i=r,u=[{name:"common",label:"常用"},{name:"viewer",label:"高级"}],l=I("common"),o=re(),s=o.project,c=I(""),v=Fi(s.current,c),f=v.searchResult,m=Rn({}),h=m.copy,g=I(),C=function(){n("submit")},b=function(){n("cancel"),g.value.close()},_=function(){n("remove")},w=function(P){n("pick",P)},E=function(P){h(P),je.success({message:"已经复制到粘贴板"})};return t({close:function(){g.value.close()}}),function(S,P){return p(),$(pe,{ref_key:"dialogRef",ref:g,"body-padding":!1,width:"1000px",height:"600px"},{default:k(function(){return[y(d(Tt),{class:"vtj-binder"},{default:k(function(){return[y(d(Lt),null,{default:k(function(){return[y(on,{items:u,modelValue:l.value,"onUpdate:modelValue":P[1]||(P[1]=function(R){return l.value=R})},{default:k(function(){return[l.value==="common"?(p(),O("div",ru,[y(d(ne),{modelValue:c.value,"onUpdate:modelValue":P[0]||(P[0]=function(R){return c.value=R}),size:"small",clearable:"","prefix-icon":d(Bn),placeholder:"筛选可用项"},null,8,["modelValue","prefix-icon"]),(p(!0),O(Y,null,X(d(f),function(R){return p(),O("div",null,[y(d(un),{"border-style":"dotted"},{default:k(function(){return[te(ee(R.title),1)]}),_:2},1024),(p(!0),O(Y,null,X(R.items,function(j){return p(),$(be,{clickable:"",title:j,onClick:function(x){return w(j)}},{action:k(function(){return[W("i",{class:"vtj-icon-copy",title:"复制",onClick:oe(function(L){return E(j)},["stop"])},null,8,au)]}),_:2},1032,["title","onClick"])}),256))])}),256)),d(f).length?T("",!0):(p(),$(d(fe),{key:0}))])):T("",!0),l.value==="viewer"?(p(),$(nu,{key:1,onPick:w})):T("",!0)]}),_:1},8,["modelValue"])]}),_:1}),y(d(zn),null,{default:k(function(){return[y($e,{title:null},{footer:k(function(){return[W("div",iu,[W("span",null,[i.clearable?(p(),$(d(ye),{key:0,size:"default",type:"warning",onClick:_},{default:k(function(){return[te(" 移除绑定 ")]}),_:1})):T("",!0)]),W("span",null,[y(d(ye),{size:"default",onClick:b},{default:k(function(){return[te("取消")]}),_:1}),y(d(ye),{size:"default",type:"primary",onClick:C},{default:k(function(){return[te(" 确定 ")]}),_:1})])])]}),default:k(function(){return[ve(S.$slots,"default")]}),_:3})]}),_:3})]}),_:3})]}),_:3},512)}}}),uu=H({__name:"VarBinder",props:{value:{default:""},defaults:{default:""},type:{default:"JSExpression"}},emits:["submit"],setup:function(r,e){var t=e.emit,n=r,i=re(),u=i.project,l=I(n.value||n.defaults),o=U(function(){return`绑定内容 [ ${n.type} ]`}),s=I(),c=I(),v=function(g){var C,b=(C=u.current.value)===null||C===void 0?void 0:C.runtimeContext;return Ae({value:g,type:n.type},b)},f=function(){var g=s.value.getEditor().getValue().trim();g?v(g)&&(t("submit",{type:n.type,value:g}),c.value.close()):Pe.warning({message:"请输入绑定内容"})},m=function(g){var C;!((C=s.value)===null||C===void 0)&&C.getEditor()&&(l.value=g)};return function(h,g){return p(),$(St,{ref_key:"binderRef",ref:c,title:"变量绑定",onSubmit:f,onPick:m},{default:k(function(){return[y(d(le),{class:"vtj-var-binder","label-position":"top"},{default:k(function(){return[y(d(Z),{label:o.value},{default:k(function(){return[y(d(we),{ref_key:"editorRef",ref:s,"model-value":l.value,width:"100%",height:"100%",dark:""},null,8,["model-value"])]}),_:1},8,["label"])]}),_:1})]}),_:1},512)}}}),lu=H({__name:"EventBinder",props:{name:{},event:{},node:{}},emits:["submit","remove"],setup:function(r,e){var t,n,i=e.emit,u=r,l=re(),o=l.assets,s=l.project,c=I(),v=I(),f=I(Object.keys(((t=u.event)===null||t===void 0?void 0:t.modifiers)||{})),m=U(function(){var w,E=(w=u.node)===null||w===void 0?void 0:w.name;if(!E)return[];var S=o.componentMap[E];if(S&&S.events){var P=S.events.find(function(R){return R===u.name||R.name===u.name});if(P&&P.params)return P.params||[]}return[]}),h=I(((n=u.event)===null||n===void 0||(n=n.handler)===null||n===void 0?void 0:n.value)||`(${m.value.join(", ")}) => {\r
\r
}`),g=function(E){var S,P=(S=s.current.value)===null||S===void 0?void 0:S.runtimeContext;return Ae({value:E,type:"JSFunction"},P)},C=function(){var E=c.value.getEditor().getValue().trim();if(E){if(g(E)){var S={handler:{type:"JSFunction",value:E},modifiers:f.value.reduce(function(P,R){return P[R]=!0,P},{})};i("submit",S),v.value.close()}}else Pe.warning({message:"请输入绑定内容"})},b=function(E){var S;!((S=c.value)===null||S===void 0)&&S.getEditor()&&(h.value=E)},_=function(){i("remove",u.name)};return function(w,E){return p(),$(St,{ref_key:"binderRef",ref:v,title:"事件绑定",subtitle:u.name,onSubmit:C,onPick:b,onRemove:_},{default:k(function(){return[y(d(le),{class:"vtj-event-binder","label-position":"top"},{default:k(function(){return[y(d(Z),{label:"事件修饰符"},{default:k(function(){return[y(d(Jr),{modelValue:f.value,"onUpdate:modelValue":E[0]||(E[0]=function(S){return f.value=S})},{default:k(function(){return[(p(!0),O(Y,null,X(d(za),function(S){return p(),$(d(Wr),{key:S,label:S},null,8,["label"])}),128))]}),_:1},8,["modelValue"])]}),_:1}),y(d(Z),{label:"事件处理函数"},{default:k(function(){return[y(d(we),{ref_key:"editorRef",ref:c,width:"100%",height:"360px",dark:"","model-value":h.value},null,8,["model-value"])]}),_:1})]}),_:1})]}),_:1},8,["subtitle"])}}}),ou=["draggable","onDragstart","onClick","title"],su=["src"],cu={key:1,class:"vtj-components__name"},du={key:2,class:"vtj-components__footer"},vu=["onClick"],fu=["onClick"],ct=H({__name:"ComponentList",props:{list:{default:function(){return[]}},span:{default:6},editable:{type:Boolean},removable:{type:Boolean},active:{},type:{}},emits:["edit","remove","click"],setup:function(r,e){var t=e.emit,n=r;function i(v,f){return u.apply(this,arguments)}function u(){return u=K(F().mark(function v(f,m){return F().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:n.type==="Schema"&&(f.from={type:"Schema",id:f.id}),B.emit(Qt,f);case 1:case"end":return g.stop()}},v)})),u.apply(this,arguments)}function l(){B.emit(Kt)}function o(v){t("edit",v)}function s(v){t("remove",v)}function c(v){t("click",v)}return function(v,f){return n.list.length?(p(),$(d(Kr),{key:0,class:"vtj-components__box",gutter:10},{default:k(function(){return[(p(!0),O(Y,null,X(n.list,function(m){return p(),$(d(Qr),{span:n.span},{default:k(function(){return[W("div",{class:ue(["vtj-components__item",{"is-active":n.active&&n.active(m)}]),draggable:!(n.active&&n.active(m)),onDragstart:function(g){return i(m)},onDragend:l,onClick:function(g){return c(m)},title:m.name},[m.icon?(p(),O("img",{key:0,src:m.icon,alt:""},null,8,su)):(p(),O("span",cu,ee(m.name),1)),W("span",null,ee(m.title),1),n.editable||n.removable?(p(),O("div",du,[n.editable?(p(),O("i",{key:0,onClick:oe(function(h){return o(m)},["stop"]),class:"vtj-icon-edit"},null,8,vu)):T("",!0),n.removable?(p(),O("i",{key:1,onClick:oe(function(h){return s(m)},["stop"]),class:"vtj-icon-remove"},null,8,fu)):T("",!0)])):T("",!0)],42,ou)]}),_:2},1032,["span"])}),256))]}),_:1})):(p(),$(d(fe),{key:1,description:"暂无数据","image-size":60}))}}}),pu={key:0,class:"vtj-list-panel__search"},mu=W("i",{class:"vtj-icon-search"},null,-1),er=H({__name:"ListPanel",props:{search:{type:[Boolean,Object],default:!1},tabs:{default:void 0},columnWidth:{default:100}},emits:["search-change"],setup:function(r,e){var t,n=e.emit,i=r,u=I(null),l=I(6),o=I("");ce(o,function(){n("search-change",o.value)});var s=I((t=i.tabs)===null||t===void 0||(t=t[0])===null||t===void 0?void 0:t.name);return On(u,function(c){var v=c[0],f=v.contentRect.width,m=Math.min(Math.floor(f/120),24);l.value=Math.floor(24/m)}),function(c,v){return p(),$($e,{class:"vtj-list-panel",ref_key:"panel",ref:u},{default:k(function(){return[i.search?(p(),O("div",pu,[y(d(ne),ae({size:"small"},c.search,{modelValue:o.value,"onUpdate:modelValue":v[0]||(v[0]=function(f){return o.value=f}),clearable:""}),{prefix:k(function(){return[mu]}),_:1},16,["modelValue"])])):T("",!0),i.search&&o.value?(p(),$(d(Nt),{key:1},{default:k(function(){return[y(d(xt),{label:"搜索结果"},{default:k(function(){return[ve(c.$slots,"search",{search:o.value,span:l.value})]}),_:3})]}),_:3})):T("",!0),Qe(y(d(Nt),{modelValue:s.value,"onUpdate:modelValue":v[1]||(v[1]=function(f){return s.value=f}),class:"vtj-list-panel__tabs"},{default:k(function(){return[(p(!0),O(Y,null,X(i.tabs,function(f){return p(),$(d(xt),{key:f.name,label:f.label,name:f.name,lazy:""},{default:k(function(){return[ve(c.$slots,"tab",{tab:f,span:l.value},function(){return[f.component?(p(),$(Gt(f.component),ae({key:0,tab:f.name,currentTab:s.value,search:o.value,span:l.value},f.props),null,16,["tab","currentTab","search","span"])):T("",!0)]})]}),_:2},1032,["label","name"])}),128))]}),_:3},8,["modelValue"]),[[Ke,i.tabs&&!o.value]]),ve(c.$slots,"default",{currentTab:s.value,search:o.value,span:l.value})]}),_:3},512)}}}),hu=H({__name:"JSONSetter",props:{modelValue:{type:[Boolean,String,Number,null,Array,Object],default:void 0}},emits:["change"],setup:function(r,e){var t=e.emit,n=r,i=I(),u=I(typeof n.modelValue=="object"?JSON.stringify(n.modelValue,null,2):void 0),l=U(function(){return!!u.value}),o=I(!1),s=function(h){var g=!0;try{if(typeof JSON.parse(h)!="object")throw new Error(`"${h}" is not a JSON`)}catch(C){g=!1,Pe.error({title:"代码错误",message:(C==null?void 0:C.message)||C})}return g},c=function(){var h,g=(h=i.value)===null||h===void 0?void 0:h.getEditor();if(g){var C=g.getValue();s(C)&&(u.value=C,t("change",JSON.parse(C)),o.value=!1)}},v=function(){u.value="",t("change",void 0),o.value=!1},f=function(){o.value=!0};return function(m,h){return p(),O("div",{class:ue(["vtj-json-setter",{"is-active":l.value}])},[y(d(ne),ae({readonly:"",onFocus:f,"model-value":"JSON","suffix-icon":d(Tn)},m.$attrs),null,16,["suffix-icon"]),o.value?(p(),$(d(pe),{key:0,modelValue:o.value,"onUpdate:modelValue":h[0]||(h[0]=function(g){return o.value=g}),title:"JSON",width:"1000px",height:"600px",cancel:"",submit:"",clear:"",onSubmit:c,onClear:v},{default:k(function(){return[y(d(we),{ref_key:"codeEditor",ref:i,height:"100%",lang:"json",dark:"","model-value":u.value},null,8,["model-value"])]}),_:1},8,["modelValue"])):T("",!0)],2)}}}),gu=H({__name:"FunctionSetter",props:{modelValue:{default:function(){return{type:"JSFunction",value:""}}}},emits:["change"],setup:function(r,e){var t=e.emit,n=r,i=I(),u=I(n.modelValue.value),l=I(!1),o=U(function(){return!!u.value}),s=function(){var m,h=(m=i.value)===null||m===void 0?void 0:m.getEditor();if(h){var g=h.getValue(),C={type:"JSFunction",value:g};Ae(C,{})&&(u.value=g,t("change",C),l.value=!1)}},c=function(){u.value="",t("change",void 0),l.value=!1},v=function(){l.value=!0};return function(f,m){return p(),O("div",{class:ue(["vtj-function-setter",{"is-active":o.value}])},[y(d(ne),ae({readonly:"",onFocus:v,"model-value":"JSFunction","suffix-icon":d(Tn)},f.$attrs),null,16,["suffix-icon"]),l.value?(p(),$(d(pe),{key:0,modelValue:l.value,"onUpdate:modelValue":m[0]||(m[0]=function(h){return l.value=h}),title:"JSFunction",width:"1000px",height:"600px",cancel:"",submit:"",clear:"",onSubmit:s,onClear:c},{default:k(function(){return[y(d(we),{ref_key:"codeEditor",ref:i,height:"100%","model-value":u.value,dark:""},null,8,["model-value"])]}),_:1},8,["modelValue"])):T("",!0)],2)}}}),yu=H({__name:"BooleanSetter",setup:function(r){return function(e,t){return p(),$(d(Ne),ae(e.$attrs,{"model-value":!!e.$attrs.modelValue}),null,16,["model-value"])}}}),_u=H({__name:"ColorSetter",setup:function(r){return function(e,t){return p(),$(d(Yr),ft(Yt(e.$attrs)),null,16)}}}),bu=H({__name:"NumberSetter",props:{modelValue:{}},emits:["change"],setup:function(r,e){var t=e.emit,n=r,i=U(function(){return Ve(n.modelValue)?void 0:Number(n.modelValue||0)}),u=function(o){t("change",o)};return function(l,o){return p(),$(d(Xr),ae({class:"vtj-number-setter","controls-position":"right","model-value":i.value},l.$attrs,{onChange:u}),null,16,["model-value"])}}}),ku={class:"vtj-icon-setter"},wu={class:"vtj-icon-setter__content"},Cu={class:"vtj-icon-setter__list"},tr=H({__name:"IconSetter",props:{modelValue:{default:""}},emits:["change","update:modelValue"],setup:function(r,e){var t=e.emit,n=r,i=I(!1),u=I(n.modelValue),l=I(""),o=U(function(){return pt[n.modelValue]||n.modelValue}),s=U(function(){var h=Object.entries(pt);return l.value?h.filter(function(g){return g[0].toLowerCase().includes(l.value)}):h}),c=function(g){u.value=g},v=function(){t("change",u.value),t("update:modelValue",u.value),i.value=!1},f=function(){u.value="",t("change",""),t("update:modelValue",""),i.value=!1},m=function(){i.value=!0};return function(h,g){return p(),O("div",ku,[y(d(ne),{size:"small",readonly:"",placeholder:"请选择图标","model-value":n.modelValue,"suffix-icon":d(Sr),onFocus:m},{prepend:k(function(){return[y(d(Bt),{icon:o.value},null,8,["icon"])]}),_:1},8,["model-value","suffix-icon"]),i.value?(p(),$(d(pe),{key:0,title:"图标选择器",width:"1000px",height:"600px",cancel:"",submit:"",clear:"",modelValue:i.value,"onUpdate:modelValue":g[1]||(g[1]=function(C){return i.value=C}),onSubmit:v,onClear:f},{default:k(function(){return[W("div",wu,[y(d(ne),{size:"small","prefix-icon":d(Bn),clearable:"",modelValue:l.value,"onUpdate:modelValue":g[0]||(g[0]=function(C){return l.value=C}),placeholder:"请输入查询关键字"},null,8,["prefix-icon","modelValue"]),W("div",Cu,[(p(!0),O(Y,null,X(s.value,function(C){return p(),$(d(Bt),{icon:C[1],onClick:function(_){return c(C[0])},class:ue({"is-active":u.value===C[0]})},null,8,["icon","onClick","class"])}),256)),s.value.length===0?(p(),$(d(fe),{key:0})):T("",!0)])])]}),_:1},8,["modelValue"])):T("",!0)])}}}),Pn={StringSetter:En,InputSetter:En,SelectSetter:$n,OptionSetter:$n,ExpressionSetter:Ji,JSONSetter:hu,FunctionSetter:gu,BooleanSetter:yu,ColorSetter:_u,NumberSetter:bu,IconSetter:tr},nr={string:["InputSetter","SelectSetter"],number:["NumberSetter"],boolean:["BooleanSetter"],object:["JSONSetter"],function:["FunctionSetter"],array:["JSONSetter"],JSFunction:["FunctionSetter"],JSExpression:["ExpressionSetter"]},Vu={key:1},Su={class:"vtj-setter__content"},ju={key:0,class:"vtj-setter__input"},Eu={class:"vtj-setter__action"},$u=W("i",{class:"vtj-icon-switch",title:"切换设置器"},null,-1),Au={key:0,class:"vtj-icon-check"},Pu={key:1,class:"vtj-icon-placeholder"},Iu="{{",Du="}}",Fu=H({__name:"SetterView",props:{name:{},label:{default:""},title:{},setters:{},variable:{type:Boolean,default:!0},value:{},options:{default:function(){return[]}},defaultSetter:{},removable:{type:Boolean}},emits:["change","remove"],setup:function(r,e){var t=e.emit,n=r,i=I(!1),u=I(""),l=I(n.setters.find(function(_){return _.name===n.defaultSetter})||n.setters[0]),o=I(n.value),s=U(function(){return!!Ve(o.value)}),c=D({},l.value.name,o.value),v=function(w){var E;c[l.value.name]=o.value,l.value=w,o.value=(E=c[w.name])!==null&&E!==void 0?E:void 0,f(o.value)};ce(function(){return n.value},function(){o.value=n.value}),ce(function(){return n.defaultSetter},function(){l.value=n.setters.find(function(_){return _.name===n.defaultSetter})||n.setters[0]});var f=function(w){t("change",w)},m=function(){t("remove",n.name)},h=function(){i.value=!0,u.value=Ve(o.value)?o.value.value:""},g=function(){i.value=!1,u.value=""},C=function(w){c[l.value.name]=o.value,o.value=w,t("change",w),g()},b=function(){g(),o.value=void 0,t("change","")};return function(_,w){return p(),$(d(Z),{class:"vtj-setter",size:"small","label-positon":"left"},{label:k(function(){return[n.title?(p(),$(d(Un),{key:0,placement:"top-start",content:n.title},{default:k(function(){return[te(ee(n.label||n.name),1)]}),_:1},8,["content"])):(p(),O("span",Vu,ee(n.label||n.name),1))]}),default:k(function(){return[W("div",Su,[l.value?(p(),O("div",ju,[s.value?T("",!0):(p(),$(Gt(l.value.component),ae({key:0},l.value.props,{options:n.options,modelValue:o.value,"onUpdate:modelValue":w[0]||(w[0]=function(E){return o.value=E}),onChange:f,disabled:s.value}),null,16,["options","modelValue","disabled"])),s.value?(p(),$(d(ne),{key:1,class:"vtj-expression-setter",disabled:"","model-value":"JSExpression"},{prefix:k(function(){return[te(ee(Iu))]}),suffix:k(function(){return[te(ee(Du))]}),_:1})):T("",!0)])):T("",!0),W("div",Eu,[n.variable?(p(),O("i",{key:0,onClick:h,class:ue(["vtj-icon-vars",{"is-active":s.value}]),title:"绑定变量"},null,2)):T("",!0),n.setters.length>1?(p(),$(d(en),{key:1,disabled:s.value,size:"small","popper-class":"vtj-setter-switch",onCommand:v},{dropdown:k(function(){return[y(d(nn),null,{default:k(function(){return[(p(!0),O(Y,null,X(n.setters,function(E){return p(),$(d(tn),{command:E,key:E.name},{default:k(function(){return[E.name==l.value.name?(p(),O("i",Au)):(p(),O("i",Pu)),te(" "+ee(E.label),1)]}),_:2},1032,["command"])}),128))]}),_:1})]}),default:k(function(){return[$u]}),_:1},8,["disabled"])):T("",!0),n.removable?(p(),O("i",{key:2,onClick:m,class:"vtj-icon-remove",title:"删除"})):T("",!0)])]),i.value?(p(),$(uu,{key:0,type:"JSExpression",value:u.value,modelValue:i.value,"onUpdate:modelValue":w[1]||(w[1]=function(E){return i.value=E}),onSubmit:C,onRemove:b},null,8,["value","modelValue"])):T("",!0)]}),_:1})}}}),De=H({name:"SetterRenderer",props:{name:String,label:String,title:String,value:{type:[String,Object,Array,Number,Boolean],default:void 0},setters:{type:[String,Object,Array],required:!0,default:function(){return[]}},options:{type:Array,default:function(){return[]}},variable:{type:Boolean,default:!0},removable:{type:Boolean,default:!1}},computed:{computedSetters:function(){var r=this;return(Array.isArray(this.setters)?this.setters:[this.setters]).map(function(e){var t;if(typeof e=="string")return t=r.getComopnent(e),{component:vt(t),name:e,label:e,props:{}};{var n=e;return t=n.component||r.getComopnent(n.name),{component:vt(t),name:n.name,label:n.label||n.name,props:n.props}}})},computedOptions:function(){return(this.options||[]).map(function(r){return typeof r=="string"?{label:r,value:r}:r})},defaultSetter:function(){var r,e,t=this.value,n=this.computedSetters,i=typeof t;i==="object"&&(Array.isArray(t)?i="array":Ve(t)?i="JSExpression":Vt(t)&&(i="JSFunction"));var u=nr[i]||[];return u.length?(r=n.find(function(l){return u.includes(l.name)})||n[0])===null||r===void 0?void 0:r.name:(e=n[0])===null||e===void 0?void 0:e.name}},render:function(){var r=this.name,e=this.label,t=this.title,n=this.value,i=this.computedSetters,u=this.computedOptions,l=this.variable,o=this.changeValue,s=this.defaultSetter,c=this.removable,v=this.onRemove;return Mn(Fu,{name:r,label:e,title:t,setters:i,defaultSetter:s,variable:l,value:n,removable:c,options:u,onChange:o,onRemove:v})},emits:["change","remove"],methods:{getComopnent:function(r){return typeof r=="string"?Pn[r]||Pn.InputSetter:r},changeValue:function(r){this.$emit("change",this.name,r)},onRemove:function(r){this.$emit("remove",r)}}}),Ou={class:"vtj-action"},Ru=H({__name:"action",setup:function(r){var e=re(),t=e.regions,n=U(function(){return t.value.action});return function(i,u){return p(),O("div",Ou,[(p(!0),O(Y,null,X(n.value,function(l){return p(),$(d(Me),ae({key:l.name},J({},l)),null,16)}),128))])}}}),Bu=function(r,e){var t=r.__vccOpts||r,n=Fe(e),i;try{for(n.s();!(i=n.n()).done;){var u=Ie(i.value,2),l=u[0],o=u[1];t[l]=o}}catch(s){n.e(s)}finally{n.f()}return t},Tu={};function Lu(a,r){return p(),O("div",null,"Empty")}var xu=Bu(Tu,[["render",Lu]]),Nu=["title","src"],Mu={key:1},zu=H({__name:"Logo",props:{icon:{},text:{default:"Vtj"},link:{}},setup:function(r,e){var t=e.expose,n=r,i=function(){n.link&&(location.href=n.link)};return t({props:n}),function(u,l){return p(),O("div",{class:"vtj-logo",onClick:i},[n.icon?(p(),O("img",{key:0,title:n.text,class:"vtj-logo__icon",src:n.icon},null,8,Nu)):(p(),O("span",Mu,ee(n.text),1))])}}}),Uu=W("div",null,"多个资源可换行输入",-1),Hu=H({__name:"Dependencies",setup:function(r){var e=re(),t=e.project,n=[{name:"add",icon:"vtj-icon-plus"}],i={package:{required:!0,message:"包名不能为空"},version:{required:!0,message:"版本不能为空"},library:{required:!0,message:"导出变量名称不能为空"},urls:{required:!0,message:"资源URL不能为空"}},u=I(),l=I(),o=I(!1),s=I(!1),c=U(function(){return t.dependencies.value}),v=function(b){t.setDeps(b)},f=function(){o.value=!0,s.value=!1,u.value={package:"",version:"",library:"",urls:"",assetsUrl:"",assetsLibrary:""}},m=function(b){o.value=!0,s.value=!0,u.value={package:b.package,version:b.version,library:b.library,urls:b.urls.join(`
`),assetsUrl:b.assetsUrl||"",assetsLibrary:b.assetsLibrary||""}},h=function(b){_e.confirm("确定删除该依赖项？","提示",{type:"warning"}).then(function(){t.removeDeps(b)})},g=function(){l.value.validate(function(b){var _,w;if(b){var E=u.value,S=E.version,P=E.library,R=E.urls,j=E.assetsUrl,L=E.assetsLibrary;if((_=u.value)!==null&&_!==void 0&&_.package){var x={package:(w=u.value)===null||w===void 0?void 0:w.package,version:S,library:P,urls:R.trim().split(`
`),assetsUrl:j,assetsLibrary:L};t.dependencies.value.find(function(M){return M.package===x.package})&&!s.value?je.warning({message:"已存在相同名称的依赖包"}):(t.setDeps(kt(x)),o.value=!1)}}})};return function(C,b){return p(),$($e,{class:"vtj-deps",title:"依赖管理",tools:n,onToolClick:f},{default:k(function(){return[(p(!0),O(Y,null,X(c.value,function(_){return p(),$(be,{key:_.package,removable:!_.official,editable:!_.official,class:ue({"vtj-deps__disabled":!_.enabled}),onEdit:function(E){return m(_)},onRemove:function(E){return h(_)}},{action:k(function(){return[!_.required&&_.official?(p(),$(d(Ne),{key:0,size:"small",modelValue:_.enabled,"onUpdate:modelValue":function(E){return _.enabled=E},onChange:function(E){return v(_)}},null,8,["modelValue","onUpdate:modelValue","onChange"])):T("",!0)]}),title:k(function(){return[te(ee(_.package)+"@"+ee(_.version),1)]}),_:2},1032,["removable","editable","class","onEdit","onRemove"])}),128)),o.value?(p(),$(pe,{key:0,modelValue:o.value,"onUpdate:modelValue":b[6]||(b[6]=function(_){return o.value=_}),title:`${s.value?"编辑":"新增"}依赖`,width:"1000px",height:"500px",submit:"",cancel:"",onSubmit:g},{default:k(function(){return[u.value?(p(),$(d(le),{key:0,ref_key:"form",ref:l,size:"small","label-width":"80px",model:u.value,rules:i},{default:k(function(){return[y(d(Z),{label:"npm包名",prop:"package"},{default:k(function(){return[y(d(ne),{modelValue:u.value.package,"onUpdate:modelValue":b[0]||(b[0]=function(_){return u.value.package=_}),modelModifiers:{trim:!0},readonly:s.value,disabled:s.value},null,8,["modelValue","readonly","disabled"])]}),_:1}),y(d(Z),{label:"版本号",prop:"version"},{default:k(function(){return[y(d(ne),{modelValue:u.value.version,"onUpdate:modelValue":b[1]||(b[1]=function(_){return u.value.version=_}),modelModifiers:{trim:!0}},null,8,["modelValue"])]}),_:1}),y(d(Z),{label:"导出名称",prop:"library"},{default:k(function(){return[y(d(ne),{modelValue:u.value.library,"onUpdate:modelValue":b[2]||(b[2]=function(_){return u.value.library=_}),modelModifiers:{trim:!0}},null,8,["modelValue"])]}),_:1}),y(d(Z),{label:"资源URL",prop:"urls"},{default:k(function(){return[y(d(ne),{type:"textarea",rows:5,modelValue:u.value.urls,"onUpdate:modelValue":b[3]||(b[3]=function(_){return u.value.urls=_})},null,8,["modelValue"]),Uu]}),_:1}),y(d(Z),{label:"资产URL",prop:"assetsUrl"},{default:k(function(){return[y(d(ne),{modelValue:u.value.assetsUrl,"onUpdate:modelValue":b[4]||(b[4]=function(_){return u.value.assetsUrl=_}),modelModifiers:{trim:!0}},null,8,["modelValue"])]}),_:1}),y(d(Z),{label:"资产名称",prop:"assetsLibrary"},{default:k(function(){return[y(d(ne),{modelValue:u.value.assetsLibrary,"onUpdate:modelValue":b[5]||(b[5]=function(_){return u.value.assetsLibrary=_}),modelModifiers:{trim:!0}},null,8,["modelValue"])]}),_:1})]}),_:1},8,["model"])):T("",!0)]}),_:1},8,["modelValue","title"])):T("",!0)]}),_:1})}}}),Ju=H({__name:"Viewport",props:{mode:{default:"pc"},width:{},height:{}},setup:function(r){var e=r,t={width:390,height:844},n={width:1180,height:820},i=U(function(){return[`is-${e.mode}`]}),u=U(function(){if(e.mode==="pc")return 1;var o=e.mode==="mobile"?t:n,s=o.width,c=o.height,v=s>0?(e.width||0)/s:1,f=c>0?(e.height||0)/c:1;return Math.min(v,f)}),l=U(function(){if(e.mode==="pc")return{};var o=e.mode==="mobile"?t:n,s=o.width,c=o.height;return{width:`${s}px`,height:`${c}px`,left:"50%",top:"50%",transform:`translate(-50%, -50%) scale(${u.value})`}});return function(o,s){return p(),O("div",{class:ue(["vtj-viewport",i.value]),style:We(l.value)},[ve(o.$slots,"default")],6)}}}),Wu={class:"vtj-actions__layers"},Qu=W("i",{class:"vtj-icon-layers"},null,-1),Ku={key:0,class:"vtj-actions__tools"},qu=H({__name:"Actions",props:{position:{default:"left-top"},node:{},title:{default:""},path:{default:function(){return[]}}},emits:["action"],setup:function(r,e){var t=e.emit,n=r,i=U(function(){return se(n.node)}),u=U(function(){return n.path});function l(h){return se(h)?"Block":"Node"}function o(){if(n.node.lock){je.warning({message:"该节点已被锁定，不能删除"});return}_e.confirm("确定删除吗？","提示",{type:"warning"}).then(function(){n.node.dispose(),at(function(){t("action",{type:"remove"})})})}function s(){n.node.moveNext(),at(function(){t("action",{type:"move",next:!0,node:n.node})})}function c(){n.node.movePrev(),at(function(){t("action",{type:"move",prev:!0,node:n.node})})}function v(){var h=n.node.copy();at(function(){t("action",{type:"copy",node:h})})}function f(h){t("action",{type:"hover",node:h})}function m(h){t("action",{type:"selected",node:h})}return function(h,g){return p(),O("div",{class:ue(["vtj-actions",[`is-${n.position}`]])},[W("div",Wu,[y(d(en),{size:"small",onCommand:m},{dropdown:k(function(){return[u.value&&u.value.length?(p(),$(d(nn),{key:0},{default:k(function(){return[(p(!0),O(Y,null,X(u.value,function(C){return p(),$(d(tn),{key:C.id,command:C,onMouseenter:function(_){return f(C)}},{default:k(function(){return[te(ee(C.name)+" ",1),W("i",{class:ue(`is-${l(C)}`)},ee(l(C)),3)]}),_:2},1032,["command","onMouseenter"])}),128))]}),_:1})):T("",!0)]}),default:k(function(){return[W("div",null,[Qu,te(ee(n.title),1)])]}),_:1})]),i.value?T("",!0):(p(),O("div",Ku,[W("i",{class:"vtj-icon-arrow-up",title:"向前移动",onClick:c}),W("i",{class:"vtj-icon-arrow-down",title:"向后移动",onClick:s}),W("i",{onClick:v,class:"vtj-icon-copy",title:"复制"}),W("i",{onClick:o,class:"vtj-icon-remove",title:"删除"})]))],2)}}}),Gu={key:1,class:"vtj-designer__placeholder"},Yu=H({__name:"Designer",setup:function(r,e){var t=e.expose,n=re(),i=n.engine,u=I(),l=I(),o=I({width:0,height:0});On(l,function(S){var P=S[0];o.value=P.contentRect});var s=new _s(i,u,Ei),c=Ee(s),v=c.hover,f=c.dropping,m=c.selected,h=c.onAction,g=c.viewportMode,C=i.project.current,b=U(function(){var S;return((S=C.value)===null||S===void 0?void 0:S.children.length)===0}),_=U(function(){var S;return se((S=v.value)===null||S===void 0?void 0:S.node)}),w=U(function(){var S;return se((S=m.value)===null||S===void 0?void 0:S.node)}),E=U(function(){var S,P=((S=m.value)===null||S===void 0?void 0:S.rect)||{},R=P.width,j=R===void 0?0:R,L=P.height,x=L===void 0?0:L;return j>0||x>0});return t({designer:s,selected:m}),function(S,P){return p(),O("div",{ref_key:"container",ref:l,class:"vtj-designer"},[Qe(y(Ju,{mode:d(g),width:o.value.width,height:o.value.height},{default:k(function(){return[W("iframe",{ref_key:"iframe",ref:u,frameborder:"0"},null,512),d(f)?(p(),O("div",{key:0,class:ue(["vtj-designer__dropping","is-inner"]),style:We(d(f).style)},null,4)):T("",!0),d(v)?(p(),O("div",{key:1,class:"vtj-designer__hover",style:We(d(v).style)},[Qe(W("span",{class:ue(["vtj-designer__hover-title",`is-${d(v).position}`])},[te(ee(d(v).node.name)+": ",1),W("i",null,ee(d(v).node.id),1)],2),[[Ke,!_.value]])],4)):T("",!0),d(m)?Qe((p(),O("div",{key:2,class:"vtj-designer__selected",style:We(d(m).style)},[w.value?T("",!0):(p(),$(qu,{key:0,title:d(m).node.name,node:d(m).node,path:d(m).path,position:d(m).position,onAction:d(h)},null,8,["title","node","path","position","onAction"]))],4)),[[Ke,E.value]]):T("",!0)]}),_:1},8,["mode","width","height"]),[[Ke,d(C)]]),d(C)?T("",!0):(p(),$(d(fe),{key:0,description:"请在文档管理器新建或打开文件"})),b.value?(p(),O("div",Gu," 您可以拖拽组件放置到这里 ")):T("",!0)],512)}}}),Xu=H({__name:"Components",setup:function(r){var e={placeholder:"搜索组件"},t=re(),n=t.engine,i=n.assets||{},u=i.componentGroups,l=i.components,o=U(function(){var C={};return u&&u.forEach(function(b){C[b.name]=b}),C}),s=U(function(){return u?u.map(function(C){var b;return{label:`${C.label} (${C.count})`,name:C.name,disabled:!((b=C.children)!==null&&b!==void 0&&b.length)}}):[]}),c=function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return b.map(function(_,w){return w})},v=Re({});Zt(function(){var C=s.value.reduce(function(b,_){return b[_.name]=c(o.value[_.name].children),b},{});Object.assign(v,C)});var f=vi(l),m=f.searchKey,h=f.searchResult,g=function(b){m.value=b};return function(C,b){return p(),$(er,{class:"vtj-components",title:"组件库",search:e,tabs:s.value,onSearchChange:g},{search:k(function(_){var w=_.span;return[y(ct,{list:d(h),span:w},null,8,["list","span"])]}),tab:k(function(_){var w,E,S=_.tab,P=_.span;return[o.value[S.name].components?(p(),$(ct,{key:0,list:o.value[S.name].components,span:P},null,8,["list","span"])):T("",!0),(w=o.value[S.name].children)!==null&&w!==void 0&&w.length?(p(),$(d(Tr),{key:1,modelValue:v[S.name],"onUpdate:modelValue":function(j){return v[S.name]=j}},{default:k(function(){return[(p(!0),O(Y,null,X(o.value[S.name].children,function(R,j){return p(),$(d(Lr),{key:R.name,title:`${R.label} (${R.count})`,name:j},{default:k(function(){return[y(ct,{list:R.components,span:P},null,8,["list","span"])]}),_:2},1032,["title","name"])}),128))]}),_:2},1032,["modelValue","onUpdate:modelValue"])):T("",!0),!o.value[S.name].components&&((E=o.value[S.name].children)===null||E===void 0?void 0:E.length)===0?(p(),$(d(fe),{key:2,description:"暂无数据"})):T("",!0)]}),default:k(function(){return[!d(u)||d(u).length===0?(p(),$(d(fe),{key:0,description:"暂无数据"})):T("",!0)]}),_:1},8,["tabs"])}}}),Zu=["onClick"],el=["onClick"],tl={class:"vtj-pages__name"},nl={key:0,class:"vtj-pages__home"},rl=H({__name:"Pages",setup:function(r){var e=re(),t=e.project,n=e.engine,i=[{name:"add",icon:"vtj-icon-plus"}],u={name:[{required:!0,message:"名称为必填项"}],title:[{required:!0,message:"标题为必填项"}]},l=U(function(){return t.pages.value}),o=function(j){var L;return j===((L=t.current.value)===null||L===void 0?void 0:L.id)},s={id:"",name:"",title:"",isDir:!1,icon:"",mask:!0,home:!1,hidden:!1},c=I(),v=I(!1),f=I(),m=I(),h=function(){var R=K(F().mark(function j(L){var x,M;return F().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(!L.isDir){A.next=2;break}return A.abrupt("return");case 2:return x=L.id,A.next=5,n.service.getFile(x);case 5:M=A.sent,t.activeFile(M);case 7:case"end":return A.stop()}},j)}));return function(L){return R.apply(this,arguments)}}(),g=function(){m.value=void 0,c.value=J({},s),v.value=!0},C=function(j){m.value=j.id,c.value=J({},s),v.value=!0},b=function(j){c.value=J({},j),v.value=!0},_=function(){var R=K(F().mark(function j(L,x){var M,V,A,N;return F().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return V=L.id,A=(M=x.parent)===null||M===void 0?void 0:M.data.id,Q.next=4,n.service.getFile(V);case 4:N=Q.sent,t.copyPage(L,N,A);case 6:case"end":return Q.stop()}},j)}));return function(L,x){return R.apply(this,arguments)}}(),w=function(){var R=K(F().mark(function j(L){return F().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(L.id){M.next=2;break}return M.abrupt("return");case 2:if(!(L.children&&L.children.length>0)){M.next=5;break}return je.warning({message:"该目录有子页面文件，不能删除。"}),M.abrupt("return");case 5:return M.next=7,_e.confirm("确定删除？","提示",{type:"warning"}).catch(function(V){return!1});case 7:if(M.t0=M.sent,!M.t0){M.next=10;break}t.removePage(L.id);case 10:case"end":return M.stop()}},j)}));return function(L){return R.apply(this,arguments)}}(),E=function(){var R=K(F().mark(function j(){var L,x;return F().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,f.value.validate().catch(function(A){return!1});case 2:if(!V.sent){V.next=18;break}if(!c.value.id){V.next=15;break}if(!c.value.isDir){V.next=8;break}V.t0=void 0,V.next=11;break;case 8:return V.next=10,n.service.getFile(c.value.id);case 10:V.t0=V.sent;case 11:L=V.t0,t.updatePage(c.value,L),V.next=17;break;case 15:x=t.addPage(c.value,m.value),!t.current.value&&!c.value.isDir&&t.activeFile(x.toDsl());case 17:v.value=!1;case 18:case"end":return V.stop()}},j)}));return function(){return R.apply(this,arguments)}}(),S=function(j,L,x){return x==="inner"?!!L.data.isDir:!0},P=function(){t.update({pages:l.value})};return function(R,j){return p(),$(d($e),{title:"页面管理",tools:i,onToolClick:g},{default:k(function(){return[l.value.length===0?(p(),$(d(fe),{key:0,description:"您还没创建文件"})):T("",!0),l.value.length?(p(),$(d(rn),{key:1,"node-key":"id","default-expand-all":!0,data:l.value,draggable:"","allow-drop":S,onNodeDrop:P,class:"vtj-pages-items"},{default:k(function(L){var x=L.node,M=L.data;return[y(d(be),{title:M.title,active:o(M.id),onClick:function(A){return h(M)},onEdit:function(A){return b(M)},onRemove:function(A){return w(M)},clickable:!M.isDir,editable:"",removable:""},{action:k(function(){return[M.isDir?(p(),O("i",{key:0,onClick:oe(function(V){return C(M)},["stop"]),class:"vtj-icon-plus",title:"新增"},null,8,Zu)):T("",!0),M.isDir?T("",!0):(p(),O("i",{key:1,onClick:oe(function(V){return _(M,x)},["stop"]),class:"vtj-icon-copy",title:"复制"},null,8,el))]}),title:k(function(){return[y(d(Bt),{icon:d(pt)[M.icon]||M.icon},null,8,["icon"]),te(" "+ee(M.title)+" ",1),W("i",tl,ee(M.name),1),M.home?(p(),O("span",nl,"首页 ")):T("",!0)]}),_:2},1032,["title","active","onClick","onEdit","onRemove","clickable"])]}),_:1},8,["data"])):T("",!0),v.value?(p(),$(d(pe),{key:2,modelValue:v.value,"onUpdate:modelValue":j[7]||(j[7]=function(L){return v.value=L}),width:"600px",title:c.value.id?"修改页面":"新增页面",submit:"",cancel:"",onSubmit:E},{default:k(function(){return[y(d(le),{ref_key:"formRef",ref:f,model:c.value,rules:u,size:"small","label-position":"right","label-width":"80px"},{default:k(function(){return[y(d(Z),{label:"类型",prop:"isDir"},{default:k(function(){return[y(d(an),{modelValue:c.value.isDir,"onUpdate:modelValue":j[0]||(j[0]=function(L){return c.value.isDir=L}),disabled:!!c.value.id},{default:k(function(){return[y(d(Ze),{label:!1},{default:k(function(){return[te("页面")]}),_:1}),y(d(Ze),{label:!0},{default:k(function(){return[te("目录")]}),_:1})]}),_:1},8,["modelValue","disabled"])]}),_:1}),y(d(Z),{label:"标题描述",prop:"title"},{default:k(function(){return[y(d(ne),{modelValue:c.value.title,"onUpdate:modelValue":j[1]||(j[1]=function(L){return c.value.title=L})},null,8,["modelValue"])]}),_:1}),y(d(Z),{label:"名称编码",prop:"name"},{default:k(function(){return[y(d(ne),{modelValue:c.value.name,"onUpdate:modelValue":j[2]||(j[2]=function(L){return c.value.name=L})},null,8,["modelValue"])]}),_:1}),y(d(Z),{label:"菜单图标",prop:"icon"},{default:k(function(){return[y(tr,{modelValue:c.value.icon,"onUpdate:modelValue":j[3]||(j[3]=function(L){return c.value.icon=L})},null,8,["modelValue"])]}),_:1}),c.value.isDir?T("",!0):(p(),$(d(Z),{key:0,label:"包含母版",prop:"mask"},{default:k(function(){return[y(d(Ne),{modelValue:c.value.mask,"onUpdate:modelValue":j[4]||(j[4]=function(L){return c.value.mask=L})},null,8,["modelValue"])]}),_:1})),c.value.isDir?T("",!0):(p(),$(d(Z),{key:1,label:"站点首页",prop:"mask"},{default:k(function(){return[y(d(Ne),{modelValue:c.value.home,"onUpdate:modelValue":j[5]||(j[5]=function(L){return c.value.home=L})},null,8,["modelValue"])]}),_:1})),c.value.isDir?T("",!0):(p(),$(d(Z),{key:2,label:"隐藏菜单",prop:"mask"},{default:k(function(){return[y(d(Ne),{modelValue:c.value.hidden,"onUpdate:modelValue":j[6]||(j[6]=function(L){return c.value.hidden=L})},null,8,["modelValue"])]}),_:1}))]}),_:1},8,["model"])]}),_:1},8,["modelValue","title"])):T("",!0)]}),_:1})}}}),al=H({__name:"Blocks",setup:function(r){var e=re(),t=e.project,n=e.engine,i=[{name:"add",icon:"vtj-icon-plus"}],u={id:"",name:"",title:""},l={name:[{required:!0,message:"请输入组件名称",trigger:"blur"}],title:[{required:!0,message:"请输入标题备注",trigger:"blur"}]},o=I(),s=I(),c=U(function(){return t.blocks.value}),v=I(!1),f=function(w){var E;return w.id===((E=t.current.value)===null||E===void 0?void 0:E.id)},m=function(){s.value=J({},u),v.value=!0},h=function(){var _=K(F().mark(function w(){var E;return F().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,o.value.validate().catch(function(R){return!1});case 2:if(!P.sent){P.next=15;break}if(!t.existBlockName(s.value)){P.next=6;break}return je.warning({message:"已存在相同名称的区块，请更换名称"}),P.abrupt("return");case 6:if(!s.value.id){P.next=13;break}return P.next=9,n.service.getFile(s.value.id);case 9:E=P.sent,t.updateBlock(s.value,E),P.next=14;break;case 13:t.addBlock(s.value);case 14:v.value=!1;case 15:case"end":return P.stop()}},w)}));return function(){return _.apply(this,arguments)}}(),g=function(w){s.value=w,v.value=!0},C=function(){var _=K(F().mark(function w(E){return F().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,_e.confirm("确定删除？","提示",{type:"warning"});case 2:if(P.t0=P.sent,!P.t0){P.next=5;break}t.removeBlock(E.id);case 5:case"end":return P.stop()}},w)}));return function(E){return _.apply(this,arguments)}}(),b=function(){var _=K(F().mark(function w(E){var S,P;return F().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return S=E.id,j.next=3,n.service.getFile(S);case 3:P=j.sent,t.activeFile(P);case 5:case"end":return j.stop()}},w)}));return function(E){return _.apply(this,arguments)}}();return function(_,w){return p(),$(d(er),{title:"区块管理",tools:i,onToolClick:m},{default:k(function(E){var S=E.span;return[y(d(ct),{list:c.value,span:S,active:f,type:"Schema",editable:"",removable:"",onEdit:g,onRemove:C,onClick:b},null,8,["list","span"]),v.value?(p(),$(d(pe),{key:0,modelValue:v.value,"onUpdate:modelValue":w[2]||(w[2]=function(P){return v.value=P}),title:s.value.id?"修改":"新增",width:"500px",submit:"",cancel:"",onSubmit:h},{default:k(function(){return[y(d(le),{ref_key:"formRef",ref:o,size:"small",model:s.value,rules:l},{default:k(function(){return[y(d(Z),{label:"组件名称",prop:"name"},{default:k(function(){return[y(d(ne),{modelValue:s.value.name,"onUpdate:modelValue":w[0]||(w[0]=function(P){return s.value.name=P})},null,8,["modelValue"])]}),_:1}),y(d(Z),{label:"标题备注",prop:"title"},{default:k(function(){return[y(d(ne),{modelValue:s.value.title,"onUpdate:modelValue":w[1]||(w[1]=function(P){return s.value.title=P})},null,8,["modelValue"])]}),_:1})]}),_:1},8,["model"])]}),_:1},8,["modelValue","title"])):T("",!0)]}),_:1})}}}),il=W("i",{class:"vtj-icon-pc"},null,-1),ul=W("i",{class:"vtj-icon-phone"},null,-1),ll=W("i",{class:"vtj-icon-pad"},null,-1),ol=W("i",{class:"vtj-icon-undo"},null,-1),sl=W("i",{class:"vtj-icon-redo"},null,-1),cl=H({__name:"Toolbar",setup:function(r){var e=re(),t=e.engine,n=I("pc"),i=U(function(){var c=t.simulator.history.value||{},v=c.index,f=v===void 0?0:v,m=c.list,h=m===void 0?[]:m;return f<h.length-1}),u=U(function(){var c=t.simulator.history.value||{},v=c.index,f=v===void 0?0:v;return c.list,f>0}),l=function(){var v;(v=t.simulator.history.value)===null||v===void 0||v.back()},o=function(){var v;(v=t.simulator.history.value)===null||v===void 0||v.go()},s=function(v){B.emit(ar,v)};return function(c,v){return p(),O("div",null,[y(d(an),{size:"small",modelValue:n.value,"onUpdate:modelValue":v[0]||(v[0]=function(f){return n.value=f}),onChange:s},{default:k(function(){return[y(d(Ze),{label:"pc"},{default:k(function(){return[il]}),_:1}),y(d(Ze),{label:"mobile"},{default:k(function(){return[ul]}),_:1}),y(d(Ze),{label:"pad"},{default:k(function(){return[ll]}),_:1})]}),_:1},8,["modelValue"]),T("",!0),y(d(xr),null,{default:k(function(){return[y(d(ye),{type:"default",size:"small",onClick:l,disabled:!i.value},{default:k(function(){return[ol]}),_:1},8,["disabled"]),y(d(ye),{type:"default",size:"small",onClick:o,disabled:!u.value},{default:k(function(){return[sl]}),_:1},8,["disabled"])]}),_:1})])}}}),dl={key:0,class:"vtj-outline__actions"},vl=["onClick"],fl=["onClick"],pl=["onClick"],ml=["onClick"],hl=["onClick"],gl=["onClick"],yl={class:"vtj-outline__status"},_l={key:0,class:"vtj-icon-invisible",title:"不可见"},bl={key:1,class:"vtj-icon-lock",title:"已锁定"},kl=H({__name:"Outline",setup:function(r){var e=re(),t=e.engine,n=e.project,i=e.assets,u=U(function(){var S;return(S=t.skeleton.widgetInstances.designer)===null||S===void 0?void 0:S.designer}),l=function(P){return P.root===null},o=I([]);function s(S){return se(S)?"Block":S.slot&&S.slot.name?`#${S.slot.name}`:"Node"}function c(S){var P=[];return S.forEach(function(R){var j={id:R.id,label:R.name,nodeType:s(R),node:R,children:[]};Array.isArray(R.children)&&(j.children=c(R.children)),P.push(j)}),P}function v(){o.value=n.current.value?c([n.current.value]):[]}ce(n.current,v,{immediate:!0}),B.on(G,v),Ye(function(){B.off(G,v)});var f=function(){var S=K(F().mark(function P(R,j,L){var x,M,V,A,N;return F().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(x=R.data,M=j.data.node,V=n.current.value,!(!V||!u.value||!M)){Q.next=3;break}return Q.abrupt("return");case 3:return A=x.node,Q.next=6,u.value.getDropSlot(L==="inner"?M:M.parent);case 6:A.slot=Q.sent,N={before:"left",after:"right"}[L]||"inner",V.move(A,M,N),B.emit(Je,A);case 9:case"end":return Q.stop()}},P)}));return function(R,j,L){return S.apply(this,arguments)}}(),m=function(P){var R=P.data;return se(R.node)||R.node.lock?!1:R.node.name!=="template"},h=function(P,R,j){var L=P.data,x=R.data;if(x.node.lock||se(x.node)&&["prev","next"].includes(j))return!1;var M=n.current.value;if(!M)return!1;var V=i.componentMap[L.node.name];if(j==="inner")return M.allowDrop(V,x.node,i);{var A=x.node.parent;return A&&M.allowDrop(V,A,i)}},g=function(P,R){P.invisible=R,B.emit(G,P),B.emit(Je,P)},C=function(P,R){P.lock=R,B.emit(G,P),B.emit(Je,P)},b=function(P){var R=P==null?void 0:P.node;!R||R.invisible||B.emit(sn,R)},_=function(P){var R,j,L=(R=P.target)===null||R===void 0?void 0:R.__vueParentComponent;if(L){var x=(j=L.ctx)===null||j===void 0||(j=j.node)===null||j===void 0?void 0:j.data;x&&(x.node.invisible||B.emit(cn,x.node))}},w=function(P){P.copy(),B.emit(Je,P)},E=function(P){_e.confirm("确定删除吗？","提示",{type:"warning"}).then(function(){P.dispose(),B.emit(Je,P)})};return function(S,P){return p(),$($e,{title:"大纲树",class:"vtj-outline"},{default:k(function(){return[y(d(rn),{data:o.value,"node-key":"id","default-expand-all":"",draggable:"","empty-text":"请新建或打开文件","expand-on-click-node":!1,"allow-drop":h,"allow-drag":m,onCurrentChange:b,onNodeDrop:f,onMouseover:_},{default:k(function(R){var j=R.data;return[(p(),O("div",{key:j.node.id,class:"vtj-outline__item"},[W("span",null,[te(ee(j.label)+": ",1),W("i",{class:ue(`is-${j.nodeType}`)},ee(j.nodeType),3)]),l(j.node)?T("",!0):(p(),O("span",dl,[j.node.lock?T("",!0):(p(),O("i",{key:0,onClick:oe(function(L){return C(j.node,!0)},["stop"]),class:"vtj-icon-lock",title:"锁定"},null,8,vl)),j.node.lock?(p(),O("i",{key:1,onClick:oe(function(L){return C(j.node,!1)},["stop"]),class:"vtj-icon-unlock",title:"解锁"},null,8,fl)):T("",!0),!j.node.invisible&&!j.node.lock?(p(),O("i",{key:2,onClick:oe(function(L){return g(j.node,!0)},["stop"]),class:"vtj-icon-invisible",title:"设置隐藏"},null,8,pl)):T("",!0),j.node.invisible&&!j.node.lock?(p(),O("i",{key:3,onClick:oe(function(L){return g(j.node,!1)},["stop"]),class:"vtj-icon-visible",title:"设置显示"},null,8,ml)):T("",!0),j.node.root!==j.node&&!j.node.lock?(p(),O("i",{key:4,onClick:function(x){return w(j.node)},class:"vtj-icon-copy",title:"复制"},null,8,hl)):T("",!0),j.node.root!==j.node&&!j.node.lock?(p(),O("i",{key:5,onClick:oe(function(L){return E(j.node)},["stop"]),class:"vtj-icon-remove",title:"删除"},null,8,gl)):T("",!0)])),W("span",yl,[j.node.invisible?(p(),O("i",_l)):T("",!0),j.node.lock?(p(),O("i",bl)):T("",!0)])]))]}),_:1},8,["data"])]}),_:1})}}}),wl={class:"vtj-setting-panel"},Cl=H({__name:"Properties",setup:function(r){var e=re(),t=e.assets,n=Ee(),i=n.selected,u=U(function(){var P;return(P=i.value)===null||P===void 0?void 0:P.node}),l=Oi(u,t),o=l.commonProps,s=l.componentProps,c=l.onChange,v=l.isExist,f=l.addCustom,m=l.customProps,h=l.removeProp,g=[{name:"add",icon:"vtj-icon-plus"}],C={name:[{required:!0,message:"熟悉名称为必填项"}]},b=Re({name:""}),_=I(!1),w=function(R){_.value=!0,b.name=""},E=function(){var R=Object.keys(u.value.props);b.name&&!v(b.name)&&!R.includes(b.name)?(f(b.name),_.value=!1):Pe.warning({message:"已存在该属性名称"})},S=function(){var P=K(F().mark(function R(j){return F().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,_e.confirm("确定删除?","提示",{type:"warning"}).catch(function(M){return!1});case 2:if(x.t0=x.sent,!x.t0){x.next=5;break}h(j);case 5:case"end":return x.stop()}},R)}));return function(j){return P.apply(this,arguments)}}();return function(P,R){return p(),O("div",wl,[y(d(me),{title:"通用属性"},{default:k(function(){return[y(d(le),{size:"small","label-width":"100px",onKeydown:R[0]||(R[0]=st(oe(function(){},["prevent","stop"]),["enter"]))},{default:k(function(){return[(p(!0),O(Y,null,X(d(o),function(j){return p(),$(d(De),ae({key:`${j.name}_${u.value.id}`},j,{onChange:d(c)}),null,16,["onChange"])}),128))]}),_:1})]}),_:1}),d(s).length?(p(),$(d(me),{key:0,title:"组件属性"},{default:k(function(){return[y(d(le),{size:"small","label-width":"100px",onKeydown:R[1]||(R[1]=st(oe(function(){},["prevent","stop"]),["enter"]))},{default:k(function(){return[(p(!0),O(Y,null,X(d(s),function(j){return p(),$(d(De),ae({key:`${j.name}_${u.value.id}`},j,{onChange:d(c)}),null,16,["onChange"])}),128))]}),_:1})]}),_:1})):T("",!0),y(d(me),{title:"自定义属性",tools:g,onToolClick:w},{default:k(function(){return[y(d(le),{size:"small","label-width":"100px",onKeydown:R[2]||(R[2]=st(oe(function(){},["prevent","stop"]),["enter"]))},{default:k(function(){return[(p(!0),O(Y,null,X(d(m),function(j){return p(),$(d(De),ae({key:`${j.name}_${u.value.id}`},j,{removable:"",onChange:d(c),onRemove:S}),null,16,["onChange"])}),128))]}),_:1})]}),_:1}),y(d(pe),{modelValue:_.value,"onUpdate:modelValue":R[4]||(R[4]=function(j){return _.value=j}),title:"新增属性",width:"400px",submit:"",cancel:"",onSubmit:E},{default:k(function(){return[y(d(le),{ref:"formRef",size:"small",rules:C,model:b},{default:k(function(){return[y(d(Z),{label:"属性名称",prop:"name"},{default:k(function(){return[y(d(ne),{modelValue:b.name,"onUpdate:modelValue":R[3]||(R[3]=function(j){return b.name=j})},null,8,["modelValue"])]}),_:1})]}),_:1},8,["model"])]}),_:1},8,["modelValue"])])}}}),Vl={class:"vtj-setting-panel vtj-events"},Sl=H({__name:"Events",setup:function(r){var e=re(),t=e.assets,n=Ee(),i=n.selected,u=U(function(){var b;return(b=i.value)===null||b===void 0?void 0:b.node}),l=Ri(u,t),o=l.mouseEventList,s=l.keyboardEventList,c=l.componentEventList,v=I(!1),f=I(),m=I(Symbol()),h=function(_){m.value=Symbol(),f.value=_,v.value=!0},g=function(_){f.value&&u.value.setEvent(f.value.name,_)},C=function(){var b=K(F().mark(function _(w){return F().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,_e.confirm("确定删除事件绑定？","提示",{type:"warning"}).catch(function(P){return!1});case 2:if(S.t0=S.sent,!S.t0){S.next=5;break}u.value.removeEvent(w),f.value=null,v.value=!1;case 5:case"end":return S.stop()}},_)}));return function(w){return b.apply(this,arguments)}}();return function(b,_){return p(),O("div",Vl,[y(d(me),{title:"组件事件"},{default:k(function(){return[(p(!0),O(Y,null,X(d(c),function(w){return p(),$(d(be),{title:w.name,active:!!w.event,removable:!!w.event,background:!1,editable:"",clickable:"",onClick:function(S){return h(w)},onEdit:function(S){return h(w)},onRemove:function(S){return C(w.name)}},null,8,["title","active","removable","onClick","onEdit","onRemove"])}),256)),d(c).length===0?(p(),$(d(fe),{key:0,"image-size":50,description:"该组件无自带事件"})):T("",!0)]}),_:1}),y(d(me),{title:"鼠标事件"},{default:k(function(){return[(p(!0),O(Y,null,X(d(o),function(w){return p(),$(d(be),{title:w.name,active:!!w.event,removable:!!w.event,background:!1,editable:"",clickable:"",onClick:function(S){return h(w)},onEdit:function(S){return h(w)},onRemove:function(S){return C(w.name)}},null,8,["title","active","removable","onClick","onEdit","onRemove"])}),256))]}),_:1}),y(d(me),{title:"键盘事件"},{default:k(function(){return[(p(!0),O(Y,null,X(d(s),function(w){return p(),$(d(be),{title:w.name,active:!!w.event,removable:!!w.event,background:!1,editable:"",clickable:"",onClick:function(S){return h(w)},onEdit:function(S){return h(w)},onRemove:function(S){return C(w.name)}},null,8,["title","active","removable","onClick","onEdit","onRemove"])}),256))]}),_:1}),f.value?(p(),$(d(lu),ae({key:m.value,modelValue:v.value,"onUpdate:modelValue":_[0]||(_[0]=function(w){return v.value=w}),node:u.value},f.value,{onSubmit:g,onRemove:C}),null,16,["modelValue","node"])):T("",!0)])}}}),jl=H({__name:"JSDataDialog",props:Ai,setup:function(r){var e=r,t=Pi(e),n=t.title,i=t.model,u=t.formRef,l=t.dialogRef,o=t.editorRef,s=t.rules,c=t.onSubmit,v=t.disabled,f=function(h){i.value.value=h};return function(m,h){return p(),$(d(St),ae({ref_key:"dialogRef",ref:l,title:d(n),width:"1000px",height:"600px",clearable:!1},m.$attrs,{onSubmit:d(c),onPick:f}),{default:k(function(){return[y(d(le),{ref_key:"formRef",ref:u,size:"small","label-position":"top",model:d(i),rules:d(s)},{default:k(function(){return[y(d(Z),{label:e.nameLabel,prop:"name"},{default:k(function(){return[m.type==="lifeCycles"?(p(),$(d(wt),{key:0,modelValue:d(i).name,"onUpdate:modelValue":h[0]||(h[0]=function(g){return d(i).name=g}),disabled:d(v)},{default:k(function(){return[(p(!0),O(Y,null,X(d(La),function(g){return p(),$(d(Ct),{label:g,value:g},null,8,["label","value"])}),256))]}),_:1},8,["modelValue","disabled"])):(p(),$(d(ne),{key:1,modelValue:d(i).name,"onUpdate:modelValue":h[1]||(h[1]=function(g){return d(i).name=g}),disabled:d(v)},null,8,["modelValue","disabled"]))]}),_:1},8,["label"]),y(d(Z),{label:e.valueLabel},{default:k(function(){return[y(d(we),{ref_key:"editorRef",ref:o,border:!0,height:"380px",width:"100%",dark:"","model-value":d(i).value.value},null,8,["model-value"])]}),_:1},8,["label"])]}),_:1},8,["model","rules"])]}),_:1},16,["title","onSubmit"])}}}),El=H({__name:"WatchDataDialog",props:Ii,setup:function(r){var e=r,t=Di(e),n=t.title,i=t.model,u=t.onSubmit,l=t.dialogRef,o=t.sourceRef,s=t.handlerRef,c=t.formRef,v=function(m){i.handler.value=m};return function(f,m){return p(),$(d(St),ae({ref_key:"dialogRef",ref:l,title:d(n),width:"1000px",height:"600px",clearable:!1},f.$attrs,{onSubmit:d(u),onPick:v}),{default:k(function(){return[y(d(le),{ref_key:"formRef",ref:c,size:"small","label-position":"top"},{default:k(function(){return[y(d(Z),{label:"侦听源 [ JSFunction ]",prop:"source"},{default:k(function(){return[y(d(we),{ref_key:"sourceRef",ref:o,border:!0,height:"100px",width:"100%",dark:"","model-value":d(i).source.value},null,8,["model-value"])]}),_:1}),y(d(Z),{label:"deep",prop:"deep"},{default:k(function(){return[y(d(Ne),{modelValue:d(i).deep,"onUpdate:modelValue":m[0]||(m[0]=function(h){return d(i).deep=h})},null,8,["modelValue"])]}),_:1}),y(d(Z),{label:"immediate",prop:"immediate"},{default:k(function(){return[y(d(Ne),{modelValue:d(i).immediate,"onUpdate:modelValue":m[1]||(m[1]=function(h){return d(i).immediate=h})},null,8,["modelValue"])]}),_:1}),y(d(Z),{label:"处理函数 [ JSFunction ]",prop:"handler"},{default:k(function(){return[y(d(we),{ref_key:"handlerRef",ref:s,border:!0,height:"180px",width:"100%",dark:"","model-value":d(i).handler.value},null,8,["model-value"])]}),_:1})]}),_:1},512)]}),_:1},16,["title","onSubmit"])}}}),Xe=H({__name:"BlockScriptGroup",props:{block:{},type:{},dataType:{},title:{},nameLabel:{},valueLabel:{},defaults:{}},setup:function(r){var e=r,t=U(function(){return e.block}),n=[{name:"add",icon:"vtj-icon-plus"}],i=$i(t,e.type),u=i.data,l=i.list,o=i.onAdd,s=i.onEdit,c=i.onRemove,v=i.visible,f=i.keyRef;return function(m,h){return p(),$(d(me),{title:e.title,tools:n,onToolClick:d(o)},{default:k(function(){return[y(d(le),{size:"small","label-width":"100px",onKeydown:h[0]||(h[0]=st(oe(function(){},["prevent","stop"]),["enter"]))},{default:k(function(){return[(p(!0),O(Y,null,X(d(l),function(g){return p(),$(d(be),{title:g.title,background:!1,editable:"",clickable:"",removable:"",onClick:function(b){return d(s)(g.model)},onEdit:function(b){return d(s)(g.model)},onRemove:function(b){return d(c)(g.model)}},null,8,["title","onClick","onEdit","onRemove"])}),256)),d(l).length?T("",!0):(p(),$(d(fe),{key:0,"image-size":40}))]}),_:1}),d(v)&&e.type!=="watch"?(p(),$(jl,{key:d(f),block:t.value,data:d(u),title:e.title,type:e.type,nameLabel:e.nameLabel,valueLabel:e.valueLabel,dataType:e.dataType,defaults:e.defaults,modelValue:d(v),"onUpdate:modelValue":h[1]||(h[1]=function(g){return pn(v)?v.value=g:null})},null,8,["block","data","title","type","nameLabel","valueLabel","dataType","defaults","modelValue"])):T("",!0),d(v)&&e.type==="watch"?(p(),$(El,{key:d(f),block:t.value,data:d(u),modelValue:d(v),"onUpdate:modelValue":h[2]||(h[2]=function(g){return pn(v)?v.value=g:null})},null,8,["block","data","modelValue"])):T("",!0)]}),_:1},8,["title","onToolClick"])}}}),$l={class:"vtj-setting-panel"},Al=H({__name:"BlockScript",setup:function(r){var e=Ee(),t=e.selected,n=U(function(){var i;return(i=t.value)===null||i===void 0?void 0:i.node});return function(i,u){return p(),O("div",$l,[y(Xe,{title:"状态数据",type:"state",block:n.value,nameLabel:"状态数据名称",valueLabel:"状态初始值 [ JSExpression ]","data-type":"JSExpression",defaults:"null"},null,8,["block"]),y(Xe,{title:"计算属性",type:"computed",block:n.value,nameLabel:"计算属性名称",valueLabel:"计算函数 [ JSFunction ]","data-type":"JSFunction",defaults:"() => { }"},null,8,["block"]),y(Xe,{title:"组件方法",type:"methods",block:n.value,nameLabel:"方法名称",valueLabel:"方法函数 [ JSFunction ]","data-type":"JSFunction",defaults:"() => { }"},null,8,["block"]),y(Xe,{title:"生命周期",type:"lifeCycles",block:n.value,nameLabel:"名称",valueLabel:"函数 [ JSFunction ]","data-type":"JSFunction",defaults:"() => { }"},null,8,["block"]),y(Xe,{title:"Watch",type:"watch","data-type":"JSFunction",block:n.value},null,8,["block"])])}}}),Pl=H({__name:"Css",setup:function(r){var e=Ee(),t=e.selected,n=U(function(){var o;return(o=t.value)===null||o===void 0?void 0:o.node}),i=[{name:"save",icon:"vtj-icon-np-save"}],u=I(),l=function(){var s,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,v=(s=u.value)===null||s===void 0?void 0:s.getEditor().getValue();v!==n.value.css&&(n.value.setCss(v),c&&je.success({message:"保存成功"}))};return function(o,s){return p(),$(d($e),{class:"vtj-setting-css",title:null,"body-padding":!1},{default:k(function(){return[n.value?(p(),$(d(me),{key:0,title:"CSS",tools:i,onToolClick:s[0]||(s[0]=function(c){return l(!0)})},{default:k(function(){return[y(d(we),{ref_key:"editorRef",ref:u,height:"100%",lang:"css",dark:"","model-value":n.value.css,onBlur:l},null,8,["model-value"])]}),_:1})):T("",!0)]}),_:1})}}}),Il={class:"vtj-schema"},Dl=H({__name:"Schema",setup:function(r){var e=re(),t=e.project,n=e.emitter,i=I(""),u=I(),l=[{name:"save",icon:"vtj-icon-np-save"}],o=function(){t.current.value?i.value=JSON.stringify(t.current.value.toDsl(),null,2):i.value=""},s=function(){var c=K(F().mark(function v(){var f,m;return F().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(t.current.value){g.next=2;break}return g.abrupt("return");case 2:if(f=u.value.getEditor().getValue(),!f){g.next=9;break}return g.next=6,_e.confirm("手动修改DSL有风险，可能导致页面无法加载，请确认您的操作无误。","提示",{type:"warning"}).catch(function(C){return!1});case 6:if(g.sent){g.next=8;break}return g.abrupt("return");case 8:try{m=JSON.parse(f),t.activeFile(m),n.emit(G,t.current.value),je.success({message:"修改成功"})}catch(C){Pe.warning({message:C.message,title:"代码错误"})}case 9:case"end":return g.stop()}},v)}));return function(){return c.apply(this,arguments)}}();return n.on(G,o),ce(t.current,o),bt(function(){o()}),Ye(function(){n.off(G,o)}),function(c,v){return p(),O("div",Il,[y(d(me),{class:"vtj-schema__panel",subtitle:"手动修改DSL有风险，可能导致页面无法加载，请确认您的操作无误。","body-padding":!1,tools:l,onToolClick:s},{default:k(function(){return[y(d(we),{ref_key:"editorRef",ref:u,height:"100%",lang:"json",dark:"","model-value":i.value},null,8,["model-value"])]}),_:1})])}}}),Fl=W("i",{class:"vtj-icon-refresh"},null,-1),Ol=W("i",{class:"vtj-icon-setting"},null,-1),Rl=W("i",{class:"vtj-icon-outline"},null,-1),Bl=H({__name:"Actions",props:{coder:{type:Boolean,default:!1}},setup:function(r){var e=r,t=re(),n=t.project,i=t.engine,u=t.emitter,l=I(!1),o=function(){if(n.current.value){var g,C=Ee(),b=C.designer;b.selected.value=null,(g=i.simulator.renderer)===null||g===void 0||g.render(n.current.value)}else je.warning({message:"请先打开文件"})},s=function(){var g,C=(g=n.current.value)===null||g===void 0?void 0:g.id;if(C){var b=n.getFile(C);u.emit(ur,b)}else je.warning({message:"请先打开文件"})},c=function(){if(n.current.value){var g=Ee(),C=g.designer;C.setSelected(n.current.value);var b=tt(i.skeleton.regionInstances.setting);b&&b.change(0)}else je.warning({message:"请先打开文件"})},v=function(){n.current.value?tt(i.skeleton.regionInstances.apps).setCurrentWidget("outline"):je.warning({message:"请先打开文件"})},f=function(){u.emit(or,l)},m=function(){var g=n.getHomePage();if(!g){je.warning({message:"请先设置项目首页"});return}u.emit(lr,g)};return function(h,g){return p(),O("div",null,[y(d(ye),{onClick:o,type:"default",size:"small",title:"刷新"},{default:k(function(){return[Fl]}),_:1}),y(d(ye),{type:"default",size:"small",title:"页面设置",onClick:c},{default:k(function(){return[Ol]}),_:1}),y(d(ye),{type:"default",size:"small",title:"页面大纲树",onClick:v},{default:k(function(){return[Rl]}),_:1}),y(d(un),{direction:"vertical"}),y(d(ye),{type:"primary",size:"small",icon:d(Cr),onClick:m},{default:k(function(){return[te(" 浏览 ")]}),_:1},8,["icon"]),y(d(ye),{type:"success",size:"small",onClick:s},{default:k(function(){return[te("预览")]}),_:1}),e.coder?(p(),$(d(ye),{key:0,type:"warning",size:"small",onClick:f,loading:l.value},{default:k(function(){return[te(" 出码 ")]}),_:1},8,["loading"])):T("",!0)])}}}),Tl={class:"vtj-setting-panel vtj-directives"},Ll=H({__name:"Directives",setup:function(r){var e=re(),t=e.assets,n=Ee(),i=n.selected,u=U(function(){var _;return(_=i.value)===null||_===void 0?void 0:_.node}),l=U(function(){return t.componentMap[u.value.name]}),o=function(w){return w.arg?typeof w.arg=="string"?w.arg:Ge(w.arg,{}):"modelValue"},s=Mi(u,l),c=s.vIf,v=s.vShow,f=s.vBind,m=s.vFor,h=s.vModels,g=s.onValueChange,C=s.onForChange,b=s.onModelChange;return function(_,w){return p(),O("div",Tl,[y(d(me),{title:"内置指令"},{default:k(function(){return[y(d(le),{"label-width":"80px"},{default:k(function(){return[y(d(De),{name:"vIf",label:"v-if",setters:"ExpressionSetter",value:d(c).value,onChange:d(g)},null,8,["value","onChange"]),y(d(De),{name:"vShow",label:"v-show",value:d(v).value,setters:"ExpressionSetter",onChange:d(g)},null,8,["value","onChange"]),y(d(De),{name:"vBind",label:"v-bind",setters:"ExpressionSetter",value:d(f).value,onChange:d(g)},null,8,["value","onChange"])]}),_:1})]}),_:1}),y(d(me),{title:"循环"},{default:k(function(){return[y(d(le),{"label-width":"80px"},{default:k(function(){var E,S;return[y(d(De),{name:"value",label:"循环数据",setters:"ExpressionSetter",value:d(m).value,onChange:d(C)},null,8,["value","onChange"]),y(d(De),{name:"item",label:"迭代变量名",setters:{name:"InputSetter",props:{placeholder:"item"}},value:(E=d(m).iterator)===null||E===void 0?void 0:E.item,onChange:d(C)},null,8,["value","onChange"]),y(d(De),{name:"index",label:"索引变量名",setters:{name:"InputSetter",props:{placeholder:"index"}},value:(S=d(m).iterator)===null||S===void 0?void 0:S.index,onChange:d(C)},null,8,["value","onChange"])]}),_:1})]}),_:1}),d(h).length?(p(),$(d(me),{key:0,title:"双向绑定"},{default:k(function(){return[(p(!0),O(Y,null,X(d(h),function(E,S){return p(),$(d(be),{title:`v-model: ${o(E)}`},{default:k(function(){return[y(d(le),{"label-width":"80px"},{default:k(function(){return[y(d(De),{name:S.toString(),label:"绑定变量",value:E.value,setters:"ExpressionSetter",onChange:d(b)},null,8,["name","value","onChange"])]}),_:2},1024)]}),_:2},1032,["title"])}),256))]}),_:1})):T("",!0)])}}}),xl=H({__name:"BlockDefineProps",props:{formData:{},block:{}},setup:function(r){var e=r,t=U(function(){return e.formData?"编辑属性":"新增属性"}),n={name:[{required:!0,message:"属性名称为必填项"}]},i=I(),u=I(),l=I(),o=Re(e.formData||{name:"",type:"",required:!1,default:{type:"JSExpression",value:""}}),s=function(){var c=K(F().mark(function v(){var f;return F().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,i.value.validate().catch(function(g){return!1});case 2:if(!h.sent){h.next=5;break}f=l.value.getEditor().getValue(),o.default.value=f,Ae(o.default,{})&&(e.block.setProp(tt(o)),u.value.close());case 5:case"end":return h.stop()}},v)}));return function(){return c.apply(this,arguments)}}();return function(c,v){return p(),$(d(pe),{ref_key:"dialogRef",ref:u,title:t.value,width:"1000px",height:"600px",submit:"",cancel:"",onSubmit:s},{default:k(function(){return[y(d(le),{ref_key:"formRef",ref:i,model:o,rules:n,size:"small","label-position":"top",class:"vtj-block-props__form"},{default:k(function(){return[y(d(Z),{label:"属性名称",prop:"name"},{default:k(function(){return[y(d(ne),{modelValue:o.name,"onUpdate:modelValue":v[0]||(v[0]=function(f){return o.name=f}),disabled:!!e.formData},null,8,["modelValue","disabled"])]}),_:1}),y(d(Z),{label:"数据类型",prop:"type"},{default:k(function(){return[y(d(wt),{modelValue:o.type,"onUpdate:modelValue":v[1]||(v[1]=function(f){return o.type=f}),multiple:""},{default:k(function(){return[(p(!0),O(Y,null,X(d(Ua),function(f){return p(),$(d(Ct),{value:f,label:f},null,8,["value","label"])}),256))]}),_:1},8,["modelValue"])]}),_:1}),y(d(Z),{label:"是否必须",prop:"required"},{default:k(function(){return[y(d(Ne),{modelValue:o.required,"onUpdate:modelValue":v[2]||(v[2]=function(f){return o.required=f})},null,8,["modelValue"])]}),_:1}),y(d(Z),{label:"默认值 [ JSExpression ]",prop:"default"},{default:k(function(){return[y(d(we),{ref_key:"editorRef",ref:l,height:"250px","model-value":o.default.value||"",border:"",dark:""},null,8,["model-value"])]}),_:1})]}),_:1},8,["model"])]}),_:1},8,["title"])}}}),Nl=H({__name:"BlockDefineEmits",props:{block:{},formData:{}},setup:function(r){var e=r,t=Re(e.formData||{name:""}),n={name:[{required:!0,message:"事件名称为必填项"}]},i=I(),u=I(),l=function(){var o=K(F().mark(function s(){return F().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,u.value.validate().catch(function(f){return!1});case 2:if(v.t0=v.sent,!v.t0){v.next=5;break}e.block.setEmit(t.name),i.value.close();case 5:case"end":return v.stop()}},s)}));return function(){return o.apply(this,arguments)}}();return function(o,s){return p(),$(d(pe),{ref_key:"dialogRef",ref:i,title:"新增事件",width:"400px",height:"150px",submit:"",cancel:"",onSubmit:l},{default:k(function(){return[y(d(le),{ref_key:"formRef",ref:u,model:t,rules:n,size:"small"},{default:k(function(){return[y(d(Z),{label:"事件名称",prop:"name"},{default:k(function(){return[y(d(ne),{modelValue:t.name,"onUpdate:modelValue":s[0]||(s[0]=function(c){return t.name=c})},null,8,["modelValue"])]}),_:1})]}),_:1},8,["model"])]}),_:1},512)}}}),Ml=H({__name:"BlockDefineSlots",props:{block:{},formData:{}},setup:function(r){var e=r,t=Re(e.formData||{name:""}),n={name:[{required:!0,message:"插槽名称为必填项"}]},i=I(),u=I(),l=function(){var o=K(F().mark(function s(){return F().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,u.value.validate().catch(function(f){return!1});case 2:if(v.t0=v.sent,!v.t0){v.next=5;break}e.block.setSlot(t.name),i.value.close();case 5:case"end":return v.stop()}},s)}));return function(){return o.apply(this,arguments)}}();return function(o,s){return p(),$(d(pe),{ref_key:"dialogRef",ref:i,title:"新增插槽",width:"400px",height:"150px",submit:"",cancel:"",onSubmit:l},{default:k(function(){return[y(d(le),{ref_key:"formRef",ref:u,model:t,rules:n,size:"small"},{default:k(function(){return[y(d(Z),{label:"插槽名称",prop:"name"},{default:k(function(){return[y(d(ne),{modelValue:t.name,"onUpdate:modelValue":s[0]||(s[0]=function(c){return t.name=c})},null,8,["modelValue"])]}),_:1})]}),_:1},8,["model"])]}),_:1},512)}}}),zl=H({__name:"BlockInject",props:{block:{},formData:{}},setup:function(r){var e=r,t=U(function(){return e.formData?"编辑注入":"新增注入"}),n=Re(e.formData||{name:"",from:"",default:{type:"JSExpression",value:""}}),i={name:[{required:!0,message:"注入名称为必填项"}]},u=I(),l=I(),o=I(),s=function(){var c=K(F().mark(function v(){var f;return F().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,o.value.validate().catch(function(g){return!1});case 2:if(!h.sent){h.next=5;break}f=l.value.getEditor().getValue(),n.default.value=f,Ae(n.default,{})&&(e.block.setInject(tt(n)),u.value.close());case 5:case"end":return h.stop()}},v)}));return function(){return c.apply(this,arguments)}}();return function(c,v){return p(),$(d(pe),{ref_key:"dialogRef",ref:u,title:t.value,width:"1000px",height:"600px",submit:"",cancel:"",onSubmit:s},{default:k(function(){return[y(d(le),{ref_key:"formRef",ref:o,model:n,rules:i,size:"small","label-position":"top"},{default:k(function(){return[y(d(Z),{label:"注入名称",prop:"name"},{default:k(function(){return[y(d(ne),{modelValue:n.name,"onUpdate:modelValue":v[0]||(v[0]=function(f){return n.name=f}),disabled:!!e.formData},null,8,["modelValue","disabled"])]}),_:1}),y(d(Z),{label:"来源名称",prop:"from"},{default:k(function(){return[typeof n.from=="string"?(p(),$(d(ne),{key:0,modelValue:n.from,"onUpdate:modelValue":v[1]||(v[1]=function(f){return n.from=f})},null,8,["modelValue"])):T("",!0)]}),_:1}),y(d(Z),{label:"默认值",prop:"from"},{default:k(function(){return[y(d(we),{ref_key:"editorRef",ref:l,"model-value":n.default.value||"",dark:"",border:"",height:"300px"},null,8,["model-value"])]}),_:1})]}),_:1},8,["model"])]}),_:1},8,["title"])}}}),Ul={key:0,class:"vtj-setting-panel vtj-advanced"},Hl=H({__name:"Advanced",setup:function(r){var e=Ee(),t=e.selected,n=U(function(){var x,M=(x=t.value)===null||x===void 0?void 0:x.node;return se(M)?M:null}),i=[{name:"add",icon:"vtj-icon-plus"}],u=U(function(){var x;return n.value?(x=n.value.props)===null||x===void 0?void 0:x.map(function(M){return typeof M=="string"?{name:M,required:!1,type:void 0,default:{type:"JSExpression",value:""}}:J({default:{type:"JSExpression",value:""},required:!1,type:void 0},M)}):[]}),l=U(function(){var x;return((x=n.value)===null||x===void 0?void 0:x.emits)||[]}),o=U(function(){var x;return((x=n.value)===null||x===void 0?void 0:x.slots)||[]}),s=U(function(){var x;return n.value?(x=n.value.inject)===null||x===void 0?void 0:x.map(function(M){return J({from:"",default:{type:"JSExpression",value:""}},M)}):[]}),c=I(!1),v=I(),f=I(!1),m=I(!1),h=I(),g=I(),C=function(){v.value=void 0,c.value=!0},b=function(M){v.value=M,c.value=!0},_=function(){var x=K(F().mark(function M(V){var A;return F().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,_e.confirm("确定删除","提示",{type:"warning"}).catch(function(Q){return!1});case 2:if(z.t0=z.sent,!z.t0){z.next=5;break}(A=n.value)===null||A===void 0||A.removeProp(V);case 5:case"end":return z.stop()}},M)}));return function(V){return x.apply(this,arguments)}}(),w=function(){f.value=!0},E=function(){var x=K(F().mark(function M(V){var A;return F().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,_e.confirm("确定删除","提示",{type:"warning"}).catch(function(Q){return!1});case 2:if(z.t0=z.sent,!z.t0){z.next=5;break}(A=n.value)===null||A===void 0||A.removeEmit(V);case 5:case"end":return z.stop()}},M)}));return function(V){return x.apply(this,arguments)}}(),S=function(){m.value=!0},P=function(){var x=K(F().mark(function M(V){var A;return F().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,_e.confirm("确定删除","提示",{type:"warning"}).catch(function(Q){return!1});case 2:if(z.t0=z.sent,!z.t0){z.next=5;break}(A=n.value)===null||A===void 0||A.removeSlot(V);case 5:case"end":return z.stop()}},M)}));return function(V){return x.apply(this,arguments)}}(),R=function(){g.value=void 0,h.value=!0},j=function(){var x=K(F().mark(function M(V){var A;return F().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,_e.confirm("确定删除","提示",{type:"warning"}).catch(function(Q){return!1});case 2:if(z.t0=z.sent,!z.t0){z.next=5;break}(A=n.value)===null||A===void 0||A.removeInject(V);case 5:case"end":return z.stop()}},M)}));return function(V){return x.apply(this,arguments)}}(),L=function(){var x=K(F().mark(function M(V){return F().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:g.value=V,h.value=!0;case 1:case"end":return N.stop()}},M)}));return function(V){return x.apply(this,arguments)}}();return function(x,M){return n.value?(p(),O("div",Ul,[y(d(me),{title:"属性",tools:i,onToolClick:C},{default:k(function(){return[(p(!0),O(Y,null,X(u.value,function(V){return p(),$(d(be),{title:V.name,editable:"",removable:"",clickable:"",onRemove:function(N){return _(V)},onClick:function(N){return b(V)},onEdit:function(N){return b(V)}},null,8,["title","onRemove","onClick","onEdit"])}),256)),u.value.length===0?(p(),$(d(fe),{key:0,"image-size":50})):T("",!0),c.value?(p(),$(xl,{key:1,block:n.value,"form-data":v.value,modelValue:c.value,"onUpdate:modelValue":M[0]||(M[0]=function(V){return c.value=V})},null,8,["block","form-data","modelValue"])):T("",!0)]}),_:1}),y(d(me),{title:"事件",tools:i,onToolClick:w},{default:k(function(){return[(p(!0),O(Y,null,X(l.value,function(V){return p(),$(d(be),{title:V,removable:"",onRemove:function(N){return E(V)}},null,8,["title","onRemove"])}),256)),l.value.length===0?(p(),$(d(fe),{key:0,"image-size":50})):T("",!0),f.value?(p(),$(Nl,{key:1,modelValue:f.value,"onUpdate:modelValue":M[1]||(M[1]=function(V){return f.value=V}),block:n.value},null,8,["modelValue","block"])):T("",!0)]}),_:1}),y(d(me),{title:"插槽",tools:i,onToolClick:S},{default:k(function(){return[(p(!0),O(Y,null,X(o.value,function(V){return p(),$(d(be),{title:V,removable:"",onRemove:function(N){return P(V)}},null,8,["title","onRemove"])}),256)),o.value.length===0?(p(),$(d(fe),{key:0,"image-size":50})):T("",!0),m.value?(p(),$(Ml,{key:1,modelValue:m.value,"onUpdate:modelValue":M[2]||(M[2]=function(V){return m.value=V}),block:n.value},null,8,["modelValue","block"])):T("",!0)]}),_:1}),y(d(me),{title:"注入",tools:i,onToolClick:R},{default:k(function(){return[(p(!0),O(Y,null,X(s.value,function(V){return p(),$(d(be),{title:V.name,editable:"",removable:"",clickable:"",onRemove:function(N){return j(V)},onClick:function(N){return L(V)},onEdit:function(N){return L(V)}},null,8,["title","onRemove","onClick","onEdit"])}),256)),s.value.length===0?(p(),$(d(fe),{key:0,"image-size":50})):T("",!0),h.value?(p(),$(zl,{key:1,modelValue:h.value,"onUpdate:modelValue":M[3]||(M[3]=function(V){return h.value=V}),"form-data":g.value,block:n.value},null,8,["modelValue","form-data","block"])):T("",!0)]}),_:1})])):T("",!0)}}}),Jl={class:"vtj-switcher"},Wl=W("i",{class:"vtj-icon-back vtj-switcher__back"},null,-1),Ql={key:1},Kl=H({__name:"Switcher",props:{link:{}},setup:function(r){var e=r,t=re(),n=t.project,i=U(function(){var l;return(l=n.current.value)===null||l===void 0?void 0:l.title}),u=function(){e.link&&(location.href=e.link)};return function(l,o){return p(),O("div",Jl,[y(d(ye),{size:"small",round:"",onClick:u},{default:k(function(){return[Wl,W("span",null,ee(d(n).name),1),i.value?(p(),$(d(un),{key:0,direction:"vertical"})):T("",!0),i.value?(p(),O("span",Ql,ee(i.value),1)):T("",!0)]}),_:1})])}}}),ql=["src"],Gl=H({__name:"Docs",props:{url:{default:"https://element-plus.org/zh-CN/"}},setup:function(r){var e=r,t=I(),n=null;bt(function(){var u;n||(n=Nr.service({target:(u=t.value)===null||u===void 0?void 0:u.$el}))}),Ye(function(){n.close(),n=null});var i=function(){n.close()};return function(u,l){return p(),$($e,{ref_key:"panel",ref:t,title:null,class:"vtj-docs","body-padding":!1},{default:k(function(){return[W("iframe",{ref:"frame",src:e.url,onLoad:i},null,40,ql)]}),_:1},512)}}}),Yl=H({__name:"ApiDialogForm",props:{model:{},project:{}},setup:function(r){var e=r,t={name:"",title:"",url:"",method:"GET",settings:{type:"JSExpression",value:""}},n=I(Ue(e.model||J({},t))),i=I(),u=I(),l=I(),o={name:[{required:!0,message:"接口名称为必填项"}],title:[{required:!0,message:"标题描述为必填项"}],url:[{required:!0,message:"请求地址为必填项"}]},s=U(function(){return e.model?"编辑Api":"新增Api"}),c=function(){var v=K(F().mark(function f(){var m;return F().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,i.value.validate().catch(function(C){return!1});case 2:if(!g.sent){g.next=5;break}m=u.value.getEditor().getValue(),n.value.settings.value=m,Ae(n.value.settings,{})&&(e.project.setApi(n.value),l.value.close());case 5:case"end":return g.stop()}},f)}));return function(){return v.apply(this,arguments)}}();return function(v,f){return p(),$(d(pe),{ref_key:"dialogRef",ref:l,width:"1000px",height:"600px",title:s.value,submit:"",cancel:"",onSubmit:c},{default:k(function(){return[y(d(le),{ref_key:"formRef",ref:i,size:"small",model:n.value,rules:o,"label-position":"top"},{default:k(function(){return[y(d(Z),{label:"接口名称",prop:"name"},{default:k(function(){return[y(d(ne),{modelValue:n.value.name,"onUpdate:modelValue":f[0]||(f[0]=function(m){return n.value.name=m}),disabled:!!e.model},null,8,["modelValue","disabled"])]}),_:1}),y(d(Z),{label:"标题描述",prop:"title"},{default:k(function(){return[y(d(ne),{modelValue:n.value.title,"onUpdate:modelValue":f[1]||(f[1]=function(m){return n.value.title=m})},null,8,["modelValue"])]}),_:1}),y(d(Z),{label:"接口地址",prop:"url"},{default:k(function(){return[y(d(ne),{modelValue:n.value.url,"onUpdate:modelValue":f[2]||(f[2]=function(m){return n.value.url=m})},null,8,["modelValue"])]}),_:1}),y(d(Z),{label:"请求类型",prop:"method"},{default:k(function(){return[y(d(an),{modelValue:n.value.method,"onUpdate:modelValue":f[3]||(f[3]=function(m){return n.value.method=m})},{default:k(function(){return[(p(!0),O(Y,null,X(d(Ha),function(m){return p(),$(d(qr),{label:m},null,8,["label"])}),256))]}),_:1},8,["modelValue"])]}),_:1}),y(d(Z),{label:"请求配置 [ JSExpression ]",prop:"settings"},{default:k(function(){var m;return[y(d(we),{ref_key:"editorRef",ref:u,"model-value":(m=n.value.settings)===null||m===void 0?void 0:m.value,border:"",dark:"",height:"180px"},null,8,["model-value"])]}),_:1})]}),_:1},8,["model"])]}),_:1},8,["title"])}}}),Xl={class:"vtj-apis__name"},Zl=H({__name:"Apis",setup:function(r){var e=re(),t=e.project,n=[{name:"add",icon:"vtj-icon-plus"}],i=U(function(){return t.apis.value}),u=I(),l=I(!1),o=function(){u.value=void 0,l.value=!0},s=function(f){u.value=f,l.value=!0},c=function(){var v=K(F().mark(function f(m){return F().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,_e.confirm("确定删除?","提示",{type:"warning"}).catch(function(C){return!1});case 2:if(g.t0=g.sent,!g.t0){g.next=5;break}t.removeApi(m.name);case 5:case"end":return g.stop()}},f)}));return function(m){return v.apply(this,arguments)}}();return function(v,f){return p(),$(d($e),{class:"vtj-apis",title:"Api管理",tools:n,onToolClick:o},{default:k(function(){return[i.value.length?T("",!0):(p(),$(d(fe),{key:0,"image-size":50})),(p(!0),O(Y,null,X(i.value,function(m){return p(),$(d(be),{editable:"",removable:"",clickable:"",onClick:function(g){return s(m)},onEdit:function(g){return s(m)},onRemove:function(g){return c(m)}},{title:k(function(){return[te(ee(m.title)+" ",1),W("i",Xl,ee(m.name),1)]}),_:2},1032,["onClick","onEdit","onRemove"])}),256)),l.value?(p(),$(Yl,{key:1,modelValue:l.value,"onUpdate:modelValue":f[0]||(f[0]=function(m){return l.value=m}),model:u.value,project:d(t)},null,8,["modelValue","model","project"])):T("",!0)]}),_:1})}}}),eo={class:"vtj-data-source-from__label-name"},to=H({__name:"ApiDataSourceForm",props:{model:{},block:{}},setup:function(r){var e=this,t=r,n=re(),i=n.project,u={type:"api",detail:"",name:"",title:"",transform:{type:"JSFunction",value:""},test:{type:"JSFunction",value:""}},l=I(Ue(t.model||J({},u))),o=U(function(){return i.apis.value}),s={name:[{required:!0,message:"调用名称为必填项"}],title:[{required:!0,message:"备注描述为必填项"}],detail:[{required:!0,message:"选择引用api"}]},c=U(function(){return t.model?"编辑数据源":"新增数据源"}),v=I(),f=I(),m=I(),h=I(),g=I(!1),C=I(!1),b=I(""),_=function(j){var L=o.value.find(function(x){return x.name===j});L&&(l.value.name=L.name,l.value.title=L.title,l.value.test.value=`() => this.${L.name}()`)},w=function(j,L){var x=function(){var M=K(F().mark(function V(){var A,N,z,Q,q,ie,de=arguments;return F().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:for(N=de.length,z=new Array(N),Q=0;Q<N;Q++)z[Q]=de[Q];return Ce.next=3,((A=L.runtimeContext)===null||A===void 0?void 0:A.$apis[j.detail]).apply(e,z);case 3:return q=Ce.sent,ie=rt(j.transform,{}),Ce.abrupt("return",ie?ie(q):q);case 6:case"end":return Ce.stop()}},V)}));return function(){return M.apply(this,arguments)}}();return D({},j.name,x)},E=function(){var R=K(F().mark(function j(){var L,x;return F().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,v.value.validate().catch(function(A){return!1});case 2:if(!V.sent){V.next=7;break}return L=f.value.getEditor().getValue(),l.value.transform.value=L,x=m.value.getEditor().getValue(),V.abrupt("return",(l.value.test.value=x,(!L||Ae(l.value.transform,t.block.runtimeContext))&&Ae(l.value.test,J(J({},t.block.runtimeContext),w(l.value,t.block)))));case 7:return V.abrupt("return",!1);case 8:case"end":return V.stop()}},j)}));return function(){return R.apply(this,arguments)}}(),S=function(){var R=K(F().mark(function j(){return F().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,E();case 2:if(x.t0=x.sent,!x.t0){x.next=5;break}t.block.setDataSource(l.value),h.value.close();case 5:case"end":return x.stop()}},j)}));return function(){return R.apply(this,arguments)}}(),P=function(){var R=K(F().mark(function j(){var L,x;return F().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,E();case 2:if(!V.sent){V.next=19;break}if(l.value.test.value){V.next=6;break}return Pe.warning({message:"无测试用例",title:"提示"}),V.abrupt("return");case 6:return L=w(l.value,t.block),C.value=!0,b.value="",V.prev=8,V.next=11,rt(l.value.test,L)().catch(function(A){return A});case 11:x=V.sent,b.value=typeof x=="object"?JSON.stringify(x,null,2):"",g.value=!0,V.next=18;break;case 15:V.prev=15,V.t0=V.catch(8),Pe.warning({message:V.t0.message,title:"运行错误"});case 18:C.value=!1;case 19:case"end":return V.stop()}},j,null,[[8,15]])}));return function(){return R.apply(this,arguments)}}();return function(R,j){return p(),$(d(pe),{ref_key:"dialogRef",ref:h,class:"vtj-data-source-from",title:c.value,width:"1000px",height:"600px",submit:"",cancel:"",onSubmit:S},{action:k(function(){return[y(d(ye),{size:"default",type:"warning",onClick:P,loading:C.value},{default:k(function(){return[te(" 运行测试用例 ")]}),_:1},8,["loading"])]}),default:k(function(){return[y(d(le),{ref_key:"formRef",ref:v,size:"small","label-position":"right","label-width":"80px",model:l.value,rules:s},{default:k(function(){return[y(d(Z),{label:"Api",prop:"detail"},{default:k(function(){return[y(d(wt),{modelValue:l.value.detail,"onUpdate:modelValue":j[0]||(j[0]=function(L){return l.value.detail=L}),onChange:_,disabled:!!t.model},{default:k(function(){return[(p(!0),O(Y,null,X(o.value,function(L){return p(),$(d(Ct),{label:L.title,value:L.name},{default:k(function(){return[te(ee(L.title)+" ",1),W("i",eo,ee(L.name),1)]}),_:2},1032,["label","value"])}),256))]}),_:1},8,["modelValue","disabled"])]}),_:1}),y(d(Z),{label:"调用名称",prop:"name"},{default:k(function(){return[y(d(ne),{modelValue:l.value.name,"onUpdate:modelValue":j[1]||(j[1]=function(L){return l.value.name=L}),disabled:!!t.model},null,8,["modelValue","disabled"])]}),_:1}),y(d(Z),{label:"备注描述",prop:"title"},{default:k(function(){return[y(d(ne),{modelValue:l.value.title,"onUpdate:modelValue":j[2]||(j[2]=function(L){return l.value.title=L})},null,8,["modelValue"])]}),_:1}),y(d(Z),{label:"转换函数",prop:"transform"},{default:k(function(){return[y(d(we),{ref_key:"transformRef",ref:f,border:"",dark:"",height:"200px","model-value":l.value.transform.value},null,8,["model-value"])]}),_:1}),y(d(Z),{label:"测试用例"},{default:k(function(){return[y(d(we),{ref_key:"testRef",ref:m,border:"",dark:"",height:"120px","model-value":l.value.test.value},null,8,["model-value"])]}),_:1})]}),_:1},8,["model"]),y(d(Gr),{modelValue:g.value,"onUpdate:modelValue":j[3]||(j[3]=function(L){return g.value=L}),title:"测试用例运行结果",direction:"btt","append-to-body":"",size:"80%"},{default:k(function(){return[y(d(we),{"model-value":b.value,border:"",dark:"",height:"100%",lang:"json"},null,8,["model-value"])]}),_:1},8,["modelValue"])]}),_:1},8,["title"])}}}),no={class:"vtj-data-sources__subtitle"},ro=H({__name:"DataSources",setup:function(r){var e=Ee(),t=e.selected,n=U(function(){var f;return(f=t.value)===null||f===void 0?void 0:f.node}),i=U(function(){var f;return Object.values(((f=n.value)===null||f===void 0?void 0:f.dataSources)||{}).filter(function(m){return m.type==="api"})}),u=[{name:"add",icon:"vtj-icon-plus"}],l=I(),o=I(),s=function(){o.value=void 0,l.value=!0},c=function(m){o.value=m,l.value=!0},v=function(){var f=K(F().mark(function m(h){return F().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,_e.confirm("确定删除？","提示",{type:"warning"}).catch(function(b){return!1});case 2:if(C.t0=C.sent,!C.t0){C.next=5;break}n.value.removeDataSource(h.name);case 5:case"end":return C.stop()}},m)}));return function(h){return f.apply(this,arguments)}}();return function(f,m){return p(),$(d($e),{class:"vtj-data-sources",title:null,"body-padding":!1},{default:k(function(){return[y(d(me),{title:"Api",tools:u,onToolClick:s},{default:k(function(){return[i.value.length===0?(p(),$(d(fe),{key:0,"image-size":50})):T("",!0),(p(!0),O(Y,null,X(i.value,function(h){return p(),$(d(be),{editable:"",removable:"",clickable:"",onClick:function(C){return c(h)},onEdit:function(C){return c(h)},onRemove:function(C){return v(h)}},{title:k(function(){return[te(ee(h.title)+" ",1),W("i",no,ee(h.name),1)]}),_:2},1032,["onClick","onEdit","onRemove"])}),256))]}),_:1}),l.value?(p(),$(to,{key:0,modelValue:l.value,"onUpdate:modelValue":m[0]||(m[0]=function(h){return l.value=h}),model:o.value,block:n.value},null,8,["modelValue","model","block"])):T("",!0)]}),_:1})}}}),ao=H({__name:"History",setup:function(r){var e=re(),t=e.engine,n=U(function(){var o;return((o=t.simulator.history.value)===null||o===void 0?void 0:o.list)||[]}),i=U(function(){return`(共 ${n.value.length} 条)`}),u=function(){var o=K(F().mark(function s(c){var v;return F().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,_e.confirm("确定删除?","提示",{type:"warning"}).catch(function(h){return!1});case 2:if(m.t0=m.sent,!m.t0){m.next=5;break}(v=t.simulator.history.value)===null||v===void 0||v.remove(c.id);case 5:case"end":return m.stop()}},s)}));return function(c){return o.apply(this,arguments)}}(),l=function(s){var c;(c=t.simulator.history.value)===null||c===void 0||c.load(s.id)};return function(o,s){return p(),$(d($e),{title:"历史记录",subtitle:i.value,class:"vtj-histroy"},{default:k(function(){return[n.value.length===0?(p(),$(d(fe),{key:0,"image-size":50})):T("",!0),(p(!0),O(Y,null,X(n.value,function(c,v){var f;return p(),$(d(be),{title:c.title,active:((f=d(t).simulator.history.value)===null||f===void 0?void 0:f.index)===v,onRemove:function(h){return u(c)},onClick:function(h){return l(c)},removable:"",clickable:""},null,8,["title","active","onRemove","onClick"])}),256))]}),_:1},8,["subtitle"])}}}),io=H({__name:"NodePath",setup:function(r){var e=Ee(),t=e.selected,n=U(function(){var l;return(((l=t.value)===null||l===void 0?void 0:l.path)||[]).slice(0).reverse()}),i=function(o){B.emit(sn,o)},u=function(o){B.emit(cn,o)};return function(l,o){return d(t)?(p(),$(d(zr),{key:0,class:"vtj-nodepath","separator-icon":d(Vr)},{default:k(function(){return[(p(!0),O(Y,null,X(n.value,function(s){return p(),$(d(Mr),{onClick:function(v){return i(s)},onMouseover:function(v){return u(s)}},{default:k(function(){return[te(ee(s.name),1)]}),_:2},1032,["onClick","onMouseover"])}),256))]}),_:1},8,["separator-icon"])):T("",!0)}}}),uo={class:"vtj-about"},lo={class:"vtj-about__logo"},oo=["src"],so=W("div",{class:"vtj-about__name"},[W("h3",null,"VTJEngine")],-1),co={class:"vtj-about__footer"},vo=H({__name:"About",setup:function(r){return function(e,t){return p(),O("div",uo,[W("div",lo,[y(d(Ur),{value:d(Qn)},{default:k(function(){return[W("img",{src:d(Yn)},null,8,oo)]}),_:1},8,["value"])]),so,W("div",co,[y(d(Hr),{href:"https://gitee.com/newgateway/vtj",type:"primary",target:"_blank"},{default:k(function(){return[te(" https://gitee.com/newgateway/vtj ")]}),_:1})])])}}}),et={Empty:xu,Logo:zu,Dependencies:Hu,Designer:Yu,Components:Xu,Pages:rl,Blocks:al,Toolbar:cl,Outline:kl,Properties:Cl,Events:Sl,BlockScript:Al,Css:Pl,Schema:Dl,Actions:Bl,Directives:Ll,Advanced:Hl,Switcher:Kl,Docs:Gl,Apis:Zl,DataSources:ro,History:ao,NodePath:io,About:vo},fo={class:"vtj-apps"},po={class:"vtj-apps__header"},mo={class:"vtj-apps__top"},ho={class:"vtj-apps__bottom"},go={class:"vtj-apps__panels"},yo=H({__name:"apps",setup:function(r,e){var t=e.expose,n=re(),i=n.regions,u=n.config,l=U(function(){return i.value.apps}),o=I(null),s=I(null),c=I(),v=I(),f=U(function(){return l.value.filter(function(b){var _;return!b.disabled&&((_=b.trigger)===null||_===void 0?void 0:_.type)==="panel"})}),m=U(function(){return l.value.filter(function(b){var _;return!b.disabled&&((_=b.trigger)===null||_===void 0?void 0:_.type)!=="panel"})});function h(b){var _=l.value.find(function(w){return w.name===b});_&&(o.value=_,s.value=_)}var g=function(_){o.value=_,s.value=s.value===_?null:_},C=function(_){var w,E;if(((w=_.trigger)===null||w===void 0?void 0:w.type)==="link"){var S;window.open((S=_.props)===null||S===void 0?void 0:S.url);return}((E=_.trigger)===null||E===void 0?void 0:E.type)==="dialog"&&(c.value=vt(et[_.type]||et.Empty),v.value=J(J(J({},_.trigger),_.props),{},{visible:!0}))};return ce(s,function(b){B.emit(rr,!!b)}),u.activeApp&&h(u.activeApp),t({setCurrentWidget:h}),function(b,_){return p(),O("div",fo,[W("div",po,[W("div",mo,[(p(!0),O(Y,null,X(f.value,function(w){var E,S;return p(),$(An,{key:`trigger-${w.name}`,icon:(E=w.trigger)===null||E===void 0?void 0:E.icon,label:(S=w.trigger)===null||S===void 0?void 0:S.label,active:o.value===w,open:s.value===w,onClick:function(R){return g(w)}},null,8,["icon","label","active","open","onClick"])}),128))]),W("div",ho,[(p(!0),O(Y,null,X(m.value,function(w){var E,S;return p(),$(An,{key:`trigger-${w.name}`,icon:(E=w.trigger)===null||E===void 0?void 0:E.icon,label:(S=w.trigger)===null||S===void 0?void 0:S.label,onClick:function(R){return C(w)}},null,8,["icon","label","onClick"])}),128))])]),Qe(W("div",go,[(p(!0),O(Y,null,X(f.value,function(w){return p(),$(Pr,{key:w.name},[o.value===w?(p(),$(d(Me),ft(ae({key:0},J({},w))),null,16)):T("",!0)],1024)}),128))],512),[[Ke,!!s.value]]),c.value?(p(),$(pe,ae({key:0},v.value,{modelValue:v.value.visible,"onUpdate:modelValue":_[0]||(_[0]=function(w){return v.value.visible=w})}),{default:k(function(){return[(p(),$(Gt(c.value),ft(Yt(v.value)),null,16))]}),_:1},16,["modelValue"])):T("",!0)])}}}),_o={class:"vtj-brand"},bo=H({__name:"brand",setup:function(r){var e=re(),t=e.regions,n=U(function(){return t.value.brand});return function(i,u){return p(),O("div",_o,[(p(!0),O(Y,null,X(n.value,function(l){return p(),$(d(Me),ae({key:l.name},J({},l)),null,16)}),128))])}}}),ko={key:0,class:"vtj-setting"},wo={key:0,class:"vtj-setting__header"},Co={class:"vtj-setting__path"},Vo=W("i",{class:"vtj-icon-layers"},null,-1),So=W("i",{class:"vtj-icon-help"},null,-1),jo=H({__name:"setting",setup:function(r,e){var t,n=e.expose,i=re(),u=i.engine,l=i.regions,o=Ee(),s=o.selected,c=l.value||{},v=c.setting,f=U(function(){var _;return se((_=s.value)===null||_===void 0?void 0:_.node)?"Block":"Node"}),m=U(function(){return v.filter(function(_){return!_.disabled&&_.group===f.value}).map(function(_){var w;return{name:_.name,label:((w=_.trigger)===null||w===void 0?void 0:w.label)||_.name,closable:!1}})}),h=I((t=m.value[0])===null||t===void 0?void 0:t.name);ce(s,function(_,w){(_==null?void 0:_.node.id)!==(w==null?void 0:w.node.id)&&g(0)});var g=function(){var w,E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;h.value=(w=m.value[E])===null||w===void 0?void 0:w.name};n({currentTab:h,tabs:m,change:g});var C=U(function(){var _,w,E=(_=s.value)===null||_===void 0?void 0:_.node;return E?(w=u.assets.componentMap[E.name])===null||w===void 0?void 0:w.doc:null}),b=function(){if(C.value){var w=tt(u.skeleton.regionInstances.workspace);w&&w.openTab("docs",{url:C.value})}};return function(_,w){return d(s)&&d(s).node?(p(),O("div",ko,[f.value==="Node"?(p(),O("div",wo,[W("div",Co,[Vo,W("span",null,[te(ee(d(s).node.name.fileName||d(s).node.name)+": ",1),W("i",null,ee(d(s).node.id),1)])]),C.value?(p(),O("div",{key:0,class:"vtj-setting__doc",onClick:b},[So,te(" 帮助 ")])):T("",!0)])):T("",!0),d(s).node.lock?T("",!0):(p(),$(on,{key:1,class:"vtj-setting__tabs",items:m.value,modelValue:h.value,"onUpdate:modelValue":w[0]||(w[0]=function(E){return h.value=E}),stretch:"","body-padding":!1},{default:k(function(){return[(p(!0),O(Y,null,X(d(v),function(E){return p(),$(d(Me),ae({key:E.name},J({},E),{visible:E.name===h.value}),null,16,["visible"])}),128))]}),_:1},8,["items","modelValue"])),d(s).node.lock?(p(),$(d(fe),{key:2,"image-size":1,description:"组件已被锁定，不能更改设置。"})):T("",!0)])):(p(),$(d(fe),{key:1,description:"请在左侧画布选中节点"}))}}}),Eo={class:"vtj-status"},$o={class:"vtj-status__left"},Ao={class:"vtj-status__right"},Po=H({__name:"status",setup:function(r){var e=re(),t=e.regions,n=U(function(){return t.value.status}),i=U(function(){return n.value.filter(function(l){return!l.disabled&&!l.trigger})}),u=U(function(){return n.value.filter(function(l){return!l.disabled&&!!l.trigger})});return function(l,o){return p(),O("div",Eo,[W("div",$o,[(p(!0),O(Y,null,X(i.value,function(s){return p(),$(d(Me),ae({key:s.name},J({},s)),null,16)}),128))]),W("div",Ao,[(p(!0),O(Y,null,X(u.value,function(s){return p(),$(d(Me),ae({key:s.name},J({},s)),null,16)}),128))])])}}}),Io={class:"vtj-toolbar"},Do=H({__name:"toolbar",setup:function(r){var e=re(),t=e.regions,n=U(function(){return t.value.toolbar});return function(i,u){return p(),O("div",Io,[(p(!0),O(Y,null,X(n.value,function(l){return p(),$(d(Me),ae({key:l.name},J({},l)),null,16)}),128))])}}}),Fo=H({__name:"workspace",setup:function(r,e){var t,n=e.expose,i=re(),u=i.regions,l=i.emitter,o=U(function(){return u.value.workspace}),s=o.value.filter(function(b){return b.name==="designer"}).map(function(b){var _;return{name:b.name,label:((_=b.trigger)===null||_===void 0?void 0:_.label)||b.name}}),c=I(o.value.filter(function(b){return!b.disabled&&b.name!=="designer"}).map(function(b){var _;return{name:b.name,label:((_=b.trigger)===null||_===void 0?void 0:_.label)||b.name,checked:!1,closable:!0}})),v=U(function(){var b=c.value.filter(function(_){return!!_.checked});return b.unshift(s[0]),b}),f=I((t=v.value[0])===null||t===void 0?void 0:t.name);ce(f,function(b){l.emit(ir,b==="designer")});var m=function(_){var w=c.value.find(function(E){return E.name===_});w&&(w.checked=!1),_===f.value&&(f.value=v.value[0].name)},h=I({}),g=function(_,w){var E=c.value.find(function(S){return S.name===_});E&&(h.value[_]=w,E.checked=!0),f.value=_},C=function(_){_.checked=!_.checked,_.checked?f.value=_.name:f.value===_.name&&(f.value="designer")};return n({openTab:g}),function(b,_){return p(),$(d(on),{class:"vtj-workspace",items:v.value,modelValue:f.value,"onUpdate:modelValue":_[0]||(_[0]=function(w){return f.value=w}),more:c.value,onTabRemove:m,onMore:C,checkable:""},{default:k(function(){return[(p(!0),O(Y,null,X(o.value,function(w){return p(),$(d(Me),ae({key:w.name},J(J({},w),h.value[w.name]),{visible:w.name===f.value}),null,16,["visible"])}),128))]}),_:1},8,["items","modelValue","more"])}}}),Oo=H({__name:"App",props:{engine:{}},setup:function(r,e){var t=e.expose,n=r,i=I(),u=I(),l=I(),o=I(),s=I(),c=I(),v=I(),f=I(),m=I(),h=I(!1),g=I(!0),C=400;n.engine.skeleton.regionInstances={brand:i,toolbar:u,action:l,status:o,setting:s,workspace:c,apps:v};var b=vn(f,{dirs:["e"],maxWidth:600}),_=b.width,w=b.resizing,E=vn(m,{dirs:["w"],maxWidth:600}),S=E.width,P=E.resizing;function R(j){j?C=_.value:_.value=C,h.value=j}return B.on(rr,function(j){R(!j)}),Ar(dn,n.engine),t({setLeftCollapsed:R,showSetting:g}),function(j,L){return p(),$(d(Br),{locale:d(di)},{default:k(function(){return[y(d(Tt),{class:"vtj-layout"},{default:k(function(){return[y(d(Or),{class:"vtj-layout__header",height:"36px"},{default:k(function(){return[y(d(bo),{ref_key:"brand",ref:i},null,512),y(d(Do),{ref_key:"toolbar",ref:u},null,512),y(d(Ru),{ref_key:"action",ref:l},null,512)]}),_:1}),y(d(Tt),{class:"vtj-layout__wrapper"},{default:k(function(){return[y(d(Lt),{width:"400px",ref_key:"leftRef",ref:f,class:ue(["vtj-layout__left",{"e-resizing":d(w),"is-collapsed":h.value}]),style:We({width:`${d(_)||d(C)}px`})},{default:k(function(){return[y(d(yo),{ref_key:"apps",ref:v},null,512)]}),_:1},8,["class","style"]),y(d(zn),{class:"vtj-layout__main"},{default:k(function(){return[y(d(Fo),{ref_key:"workspace",ref:c},null,512)]}),_:1}),g.value?(p(),$(d(Lt),{key:0,ref_key:"rightRef",ref:m,width:"350px",class:ue(["vtj-layout__right",{"w-resizing":d(P)}]),style:We({width:`${d(S)||350}px`})},{default:k(function(){return[y(d(jo),{ref_key:"setting",ref:s},null,512)]}),_:1},8,["class","style"])):T("",!0)]}),_:1}),y(d(Rr),{class:"vtj-layout__footer",height:"20px"},{default:k(function(){return[y(d(Po),{ref_key:"status",ref:o},null,512)]}),_:1})]}),_:1})]}),_:1},8,["locale"])}}}),Ro=["brand","toolbar","action","status","apps","workspace","setting"],Bo=function(){function a(r){var e=this;ge(this,a),D(this,"widgets",void 0),D(this,"widgetInstances",{}),D(this,"regions",void 0),D(this,"regionInstances",{}),this.widgets=Re(r),this.regions=U(function(){return Ro.reduce(function(t,n){return t[n]=e.getWidgets(n),t},{})})}return he(a,[{key:"load",value:function(e){var t=this;e.forEach(function(n){t.add(n)})}},{key:"get",value:function(e){return this.widgets.find(function(t){return t.name===e})}},{key:"set",value:function(e,t){var n=this.get(e);n&&Dn(n,t)}},{key:"add",value:function(e){this.get(e.name)?this.set(e.name,e):this.widgets.push(e)}},{key:"remove",value:function(e){var t=this.widgets.findIndex(function(i){return i.name===e});if(t>=0){var n=this.widgets[t];n.disabled=!0,this.widgets.splice(t,1)}}},{key:"getComponent",value:function(e){return e?Kn(e)?et[e]||et.Empty:e:et.Empty}},{key:"getWidgets",value:function(e){return this.widgets.filter(function(t){return t.region===e}).sort(function(t,n){return(t.order||0)-(n.order||0)})}},{key:"dispose",value:function(){this.widgetInstances={},this.regionInstances={}}}]),a}(),B=br(),rr="EVENT_SKELETON_LEFT_COLLAPSED_CHANGE",Se="EVENT_PROJECT_UPDATE",To="EVENT_PROJECT_ACTIVE_FILE",dt="EVENT_FILE_CREATE",Ut="EVENT_FILE_UPDATE",Ht="EVENT_FILE_REMOVE",Jt="EVENT_ASSETS_LOADED",Lo="EVENT_SIMULATOR_OPEN",Wt="EVENT_SIMULATOR_READY",Qt="EVENT_COMPONENETS_DRAG_START",Kt="EVENT_COMPONENETS_DRAG_END",G="EVENT_NODE_CHANGE",ar="EVENT_VIEWPORT_MODE_CHANGE",sn="EVENT_OUTLINE_SELECTED",cn="EVENT_OUTLINE_HOVER",Je="EVENT_OUTLINE_CHANGE",ir="EVENT_DESIGNER_ACTIVE_CHANGE",ur="EVENT_ACTION_PREVIEW",lr="EVENT_ACTION_HOME",or="EVENT_ACTION_CODER",xo="EVENT_HISTORY_GO",No="EVENT_HISTORY_BACK",qe="EVENT_HISTORY_CHANGE",Mo="EVENT_HISTORY_PUSH",zo="EVENT_HISTORY_REMOVE",yt="EVENT_HISTORY_SAVE",Uo=[{id:"elements",category:"特殊元素"},{id:"components",category:"内置组件"}],sr=[{name:"component",title:"动态组件",categoryId:"elements",doc:"https://cn.vuejs.org/api/built-in-special-elements.html#component",props:[{name:"is",label:"组件名",defaultValue:"div",setters:"InputSetter"}],snippet:{children:"组件文本内容示例"}},{name:"slot",title:"插槽",categoryId:"elements",doc:"https://cn.vuejs.org/api/built-in-special-elements.html#slot",props:[{name:"name",label:"名称",defaultValue:"default",setters:"InputSetter"}],snippet:{children:"插槽默认内容"}}],ot=[].concat(sr,[{name:"Transition",title:"过渡效果",categoryId:"components",package:"vue",doc:"https://cn.vuejs.org/api/built-in-components.html#transition",props:[{name:"name",label:"名称",defaultValue:"",title:"用于自动生成过渡 CSS class 名",setters:"InputSetter"},{name:"css",label:"应用CSS",defaultValue:!0,title:"是否应用 CSS 过渡 class",setters:"BooleanSetter"},{name:"type",label:"事件类型",defaultValue:void 0,title:"指定要等待的过渡事件类型来确定过渡结束的时间，默认情况下会自动检测持续时间较长的类型",setters:"SelectSetter",options:["transition","animation"]},{name:"duration",label:"持续时间",defaultValue:void 0,title:"显式指定过渡的持续时间",setters:["NumberSetter","JSONSetter"]},{name:"mode",label:"时序",defaultValue:"default",title:"控制离开/进入过渡的时序。",setters:"SelectSetter",options:["in-out","out-in","default"]},{name:"appear",label:"使用过渡",defaultValue:!1,title:"是否对初始渲染使用过渡",setters:"BooleanSetter"},{name:"enterFromClass",label:"enterFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"enterActiveClass",label:"enterActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"enterToClass",label:"enterToClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearFromClass",label:"appearFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearActiveClass",label:"appearActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearToClass",label:"appearToClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveFromClass",label:"leaveFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveActiveClass",label:"leaveActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveToClass",label:"leaveToClass",defaultValue:void 0,setters:"InputSetter"}],events:["before-enter","before-leave","enter","leave","appear","after-enter","after-leave","after-appear","enter-cancelled","leave-cancelled","ppear-cancelled"],snippet:{children:"Transition"}},{name:"TransitionGroup",title:"过渡效果组",package:"vue",categoryId:"components",doc:"https://cn.vuejs.org/api/built-in-components.html#transitiongroup",props:[{name:"name",label:"名称",defaultValue:"",title:"用于自动生成过渡 CSS class 名",setters:"InputSetter"},{name:"tag",label:"标签名",defaultValue:void 0,title:"如果未定义，则渲染为片段 (fragment)",setters:"InputSetter"},{name:"moveClass",label:"moveClass",defaultValue:void 0,title:"用于自定义过渡期间被应用的 CSS class。",setters:"InputSetter"},{name:"css",label:"应用CSS",defaultValue:!0,title:"是否应用 CSS 过渡 class",setters:"BooleanSetter"},{name:"type",label:"事件类型",defaultValue:void 0,title:"指定要等待的过渡事件类型来确定过渡结束的时间，默认情况下会自动检测持续时间较长的类型",setters:"SelectSetter",options:["transition","animation"]},{name:"duration",label:"持续时间",defaultValue:void 0,title:"显式指定过渡的持续时间",setters:["NumberSetter","JSONSetter"]},{name:"appear",label:"使用过渡",defaultValue:!1,title:"是否对初始渲染使用过渡",setters:"BooleanSetter"},{name:"enterFromClass",label:"enterFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"enterActiveClass",label:"enterActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"enterToClass",label:"enterToClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearFromClass",label:"appearFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearActiveClass",label:"appearActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearToClass",label:"appearToClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveFromClass",label:"leaveFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveActiveClass",label:"leaveActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveToClass",label:"leaveToClass",defaultValue:void 0,setters:"InputSetter"}],events:["before-enter","before-leave","enter","leave","appear","after-enter","after-leave","after-appear","enter-cancelled","leave-cancelled","ppear-cancelled"],snippet:{children:"TransitionGroup"}},{name:"KeepAlive",title:"缓存切换组件",package:"vue",categoryId:"components",doc:"https://cn.vuejs.org/api/built-in-components.html#keepalive",props:[{name:"include",label:"匹配包含",title:"如果指定，则只有与 `include` 名称, 匹配的组件才会被缓存。",setters:["InputSetter","JSONSetter"]},{name:"exclude",label:"匹配排除",title:"任何名称与 `exclude` 匹配的组件都不会被缓存。",setters:["InputSetter","JSONSetter"]},{name:"max",label:"最大缓存数",title:"最多可以缓存多少组件实例。",setters:["InputSetter"]}]},{name:"Teleport",title:"传送组件",package:"vue",categoryId:"components",doc:"https://cn.vuejs.org/api/built-in-components.html#teleport",props:[{name:"to",label:"目标容器",title:"指定目标容器,可以是选择器或实际元素",setters:["InputSetter"]},{name:"disabled",label:"目标容器",title:"当值为 `true` 时，内容将保留在其原始位置, 而不是移动到目标容器中, 可以动态更改",setters:["BooleanSetter"]}]},{name:"Suspense",title:"异步依赖",package:"vue",categoryId:"components",doc:"https://cn.vuejs.org/api/built-in-components.html#suspense",props:[{name:"timeout",label:"timeout",setters:["InputSetter"]}]}]),Ho=function(){function a(r,e){var t=this;ge(this,a),D(this,"unwatch",void 0),D(this,"packages",[]),D(this,"elements",[].concat(sr)),D(this,"elementsMap",{}),D(this,"components",nt(ot)),D(this,"componentMap",{}),D(this,"componentGroups",[]),D(this,"isReady",!1),this.service=r,this.project=e,e&&(this.unwatch=ce(e.dependencies,function(n){return t.load(n)},{deep:!0})),this.elementsMap=this.parseMap(this.elements,!1)}return he(a,[{key:"clear",value:function(){this.components=nt(ot),this.componentMap={},this.componentGroups=[]}},{key:"getCateoryComponents",value:function(e,t){var n=t.filter(function(i){return i.categoryId===e.id&&i.hidden!==!0});return{name:e.id,label:e.category,count:n.length,components:n}}},{key:"parseGroups",value:function(e){var t=this,n=[],i=Fe(e),u;try{var l=function(){var c=u.value,v=c.categories,f=c.components,m=c.label,h=c.name,g=c.library,C=c.names;if(!v||!f)return"continue";var b=v.map(function(E){return t.getCateoryComponents(E,f)}),_=b.reduce(function(E,S){return S.count+E},0),w={name:c.name,label:m||h,library:g,names:C,count:_,children:b};n.push(w)};for(i.s();!(u=i.n()).done;)var o=l()}catch(s){i.e(s)}finally{i.f()}return n}},{key:"parseMap",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n={};if(t){var i=Fe(e),u;try{for(i.s();!(u=i.n()).done;){var l=u.value;l.package&&(n[l.name]=l)}}catch(v){i.e(v)}finally{i.f()}}else{var o=Fe(e),s;try{for(o.s();!(s=o.n()).done;){var c=s.value;n[c.name]=c}}catch(v){o.e(v)}finally{o.f()}}return n}},{key:"load",value:function(){var r=K(F().mark(function t(n){var i,u,l,o,s,c,v,f,m;return F().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:this.packages=n,this.isReady=!1,i=n.filter(function(C){return!!C.assetsUrl&&C.enabled}),this.clear(),u=[{name:"vue",label:"内置",names:ot.map(function(C){return C.name}),library:"Vue",components:ot,categories:Uo}],l=Fe(i),g.prev=5,l.s();case 7:if((o=l.n()).done){g.next=15;break}return s=o.value,g.next=11,Fn(s.assetsUrl,{},{name:s.assetsLibrary,script:!0}).catch(function(C){return null});case 11:c=g.sent,c&&(c.name=c.name||s.assetsLibrary,c.library=s.library,c.names=(c.components||[]).map(function(C){return C.name}),u.push(c),this.components=this.components.concat(c.components||[]));case 13:g.next=7;break;case 15:g.next=20;break;case 17:g.prev=17,g.t0=g.catch(5),l.e(g.t0);case 20:return g.prev=20,l.f(),g.finish(20);case 23:return this.componentGroups=this.parseGroups(u),this.componentMap=this.parseMap(this.components),this.isReady=!0,B.emit(Jt),v=this.components,f=this.componentGroups,m=this.componentMap,g.abrupt("return",{components:v,componentGroups:f,componentMap:m});case 26:case"end":return g.stop()}},t,this,[[5,17,20,23]])}));function e(t){return r.apply(this,arguments)}return e}()},{key:"getBlockDescription",value:function(){var r=K(F().mark(function t(n){var i,u,l,o,s,c,v,f;return F().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(!n||typeof n=="string")){h.next=2;break}return h.abrupt("return",null);case 2:if(i=n.type==="Schema"?n.id:null,i){h.next=5;break}return h.abrupt("return",null);case 5:return h.next=7,this.service.getFile(i);case 7:if(u=h.sent,u){h.next=10;break}return h.abrupt("return",null);case 10:return l=u.id,o=u.name,s=u.slots,c=u.props,v=u.emits,f=function(C){var b=Array.isArray(C)?C:[C],_=[],w=Fe(b),E;try{for(w.s();!(E=w.n()).done;){var S=E.value;_=_.concat(nr[S.toLowerCase()]||[])}}catch(P){w.e(P)}finally{w.f()}return _},h.abrupt("return",{id:l,name:o,childIncludes:s!=null&&s.length?void 0:!1,props:(c||[]).map(function(g){return typeof g=="string"?{name:g}:{name:g.name,type:g.type,setters:f(g.type)}}),events:v,slots:s});case 12:case"end":return h.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"dispose",value:function(){this.clear(),this.unwatch&&this.unwatch()}}]),a}();function Jo(a,r,e){var t=a.value,n=a.iterator,i=n||{},u=i.item,l=u===void 0?"item":u,o=i.index,s=o===void 0?"index":o,c=e.__parseExpression(t)||[];return Number.isInteger(c)&&(c=new Array(c).fill(!0).map(function(v,f){return f+1})),Array.isArray(c)?c.map(function(v,f){var m;return r(e.__clone((m={},D(m,l,v),D(m,s,f),m)))}):(console.warn("[vForRender]:",`${t==null?void 0:t.value} is not a Arrary`),[])}function Wo(a,r){return!!r.__parseExpression(a.value)}function Qo(a,r){return r.__parseExpression(a.value)?{}:{display:"none"}}function Ko(a,r,e){var t,n={type:"JSFunction",value:(t=r.value)!==null&&t!==void 0&&t.value?`(v) => {
        ${r.value.value} = v;
      }`:"(v) => {}"},i=e.__parseFunction(n),u=Gn(r.modifiers),l=Ve(r.arg)?e.__parseExpression(r.arg):r.arg||"modelValue";return D({modelValue:e.__parseExpression(r.value)},`onUpdate:${l}`,u.length&&i?a.withModifiers(i,u):i)}function qo(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default";return typeof a=="string"?{name:a,params:[]}:J({params:[]},a)}function Go(a,r){var e=a.props,t=(e==null?void 0:e.name)||"default";return{name:Ve(t)?r.__parseExpression(t):t,params:[]}}function Yo(a){var r={default:{params:[],nodes:[]}},e=Fe(a),t;try{for(e.s();!(t=e.n()).done;){var n=t.value,i=qo(n.slot),u=i.name;r[u]?(r[u].nodes.push(n),r[u].params=r[u].params.concat(i.params)):r[u]={nodes:[n],params:i.params}}}catch(l){e.e(l)}finally{e.f()}return r}function Xo(a,r,e){if(!r)return null;if(Kn(r))return{default:function(){return r}};if(Ve(r))return{default:function(){return qn(e.__parseExpression(r))}};if(Array.isArray(r)){var t=Yo(r);return Object.entries(t).reduce(function(n,i){var u=Ie(i,2),l=u[0],o=u[1],s=o.nodes,c=o.params;return n[l]=function(v){var f=c.length?Ja(v!=null?v:{},c):v!=null?v:{};return s.map(function(m){return _t(a,m,e.__clone(f))})},n},{})}}function Zo(a,r,e){var t=Object.keys(r||{}).reduce(function(n,i){var u=r[i];return Ve(u)?u=e.__parseExpression(u):Vt(u)&&(u=e.__parseFunction(u)),n[i]=u,n},{});return t.ref=e.__ref(a,t.ref),t}function es(a,r,e){var t=["passive","capture","once"],n={capture:"Capture",once:"Once",passive:"OnceCapture"};return Object.keys(r||{}).reduce(function(i,u){var l=r[u],o=Gn(l.modifiers),s=o.find(function(f){return t.includes(f)}),c="on"+mr(u)+(s&&n[s]||""),v=e.__parseFunction(l.handler);return v&&(i[c]=a.withModifiers(v,o)),i},{})}function ts(a,r,e,t){var n,i=r.children,u=Go(r,t),l=(n=t.$slots)===null||n===void 0?void 0:n[u.name];return l?l(e):i?typeof i=="string"?a.createTextVNode(i):Ve(i)?a.createTextVNode(qn(t.__parseExpression(i))):Array.isArray(i)?i.map(function(o){return _t(a,o,t)}):null:null}function ns(a,r){return r?Ve(r)?a.__parseExpression(r):r:"div"}function _t(a,r,e){if(!r||!r.name||r.invisible)return null;var t=r.id,n=t===void 0?null:t,i=r.directives,u=i===void 0?[]:i,l=Wa(u),o=l.vIf,s=l.vFor,c=l.vShow,v=l.vModels,f=l.vBind;if(o&&!Wo(o,e))return null;var m=function(g){var C,b,_,w,E=g.$components,S=function(L){if(r.name==="component")return ns(g,r.props.is);if(r.name==="slot")return r.name;var x=g.__loader(a,r.name,r.from);return typeof x=="string"&&(L=E[x])!==null&&L!==void 0?L:x}(),P=Zo(n,(C=r.props)!==null&&C!==void 0?C:{},g),R=es(a,(b=r.events)!==null&&b!==void 0?b:{},g);if(r.name==="slot")return ts(a,r,P,g);f&&Object.assign(P,g.__parseExpression(f.value)),c&&(P.style=Object.assign((_=P.style)!==null&&_!==void 0?_:{},Qo(c,g))),v.forEach(function(L){Object.assign(P,Ko(a,L,g))});var j=Xo(a,(w=r.children)!==null&&w!==void 0?w:[],g);return a.createVNode(S,J(J({},P),R),j)};return s?Jo(s,m,e):m(e)}var rs=function(r,e){return e};function cr(a){var r=a.getFile,e=a.options;return function(t,n,i){return!i||typeof i=="string"?n:i.type==="Schema"?t.defineAsyncComponent(K(F().mark(function u(){var l;return F().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,r(i.id);case 2:return l=s.sent,s.abrupt("return",l?dr(J(J({},e),{},{Vue:t,dsl:l,loader:cr(a)})):null);case 4:case"end":return s.stop()}},u)}))):n}}var qt=function(a){return a.RUNTIME="runtime",a.DESIGN="design",a.RAW="raw",a.VNODE="vnode",a}(qt||{}),as=function(){function a(r){ge(this,a),D(this,"__id",null),D(this,"__name",""),D(this,"__mode",void 0),D(this,"__dsl",null),D(this,"__instance",null),D(this,"__context_refs",{}),D(this,"__loader",rs),D(this,"__proto__",null),D(this,"props",{}),D(this,"state",{}),D(this,"context",{}),D(this,"refs",{}),D(this,"$refs",{}),D(this,"$el",null),D(this,"$emit",null),D(this,"$nextTick",null),D(this,"$parent",null),D(this,"$root",null),D(this,"$attrs",null),D(this,"$slots",null),D(this,"$watch",null),D(this,"$options",null),D(this,"$forceUpdate",null),D(this,"$components",{}),D(this,"$libs",{}),D(this,"$apis",{}),D(this,"__transform",{});var e=r.mode,t=e===void 0?"runtime":e,n=r.dsl,i=r.loader,u=r.attrs;this.__mode=t,n&&(this.__id=n.id||null,this.__name=n.name,this.__dsl=n,t==="runtime"&&(this.__transform=n.transform||{})),i&&(this.__loader=i),u&&Object.assign(this,u)}return he(a,[{key:"setup",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_r,i=n.getCurrentInstance();if(i){this.__instance=i.proxy;var u=i.appContext.config.globalProperties;Object.assign(this,u),Object.assign(this,t||{}),this.__proxy(),n.onMounted(function(){e.__proxy()}),n.onUnmounted(function(){e.__cleanup()})}}},{key:"__clone",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=J({},J(J({},this.context),e));return t.__proto__=this,t}},{key:"__parseFunction",value:function(e){if(e)if(this.__mode==="runtime"){var t,n=e.id,i=e.type,u=n&&(t=this.__transform[n])!==null&&t!==void 0?t:e.value;return rt({type:i,value:u},this)}else return rt(e,this)}},{key:"__parseExpression",value:function(e){if(e)if(this.__mode==="runtime"){var t,n=e.id,i=e.type,u=n&&(t=this.__transform[n])!==null&&t!==void 0?t:e.value;return Ge({type:i,value:u},this)}else return Ge(e,this)}},{key:"__proxy",value:function(){var e=this;this.__instance&&Vn.forEach(function(t){var n;e[t]=(n=e.__instance)===null||n===void 0?void 0:n[t]})}},{key:"__cleanup",value:function(){var e=this;Vn.forEach(function(t){e[t]=null})}},{key:"__ref",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;if(this.__mode!=="vnode")return function(i){var u=(i==null?void 0:i.$el)||i;if(!u){typeof n=="string"&&(delete e.$refs[n],t&&delete e.refs[t]);return}if(u.nodeType===3&&u.nextSibling&&(u=u.nextSibling),u.__vtj__=t,e.__mode==="design"&&(u.__context__=e,t&&t!==e.__id&&(e.__context_refs[t]=e)),t&&(e.refs[t]=i),typeof n=="function")n(i);else if(n){var l=e.$refs[n];if(l){var o=new Set([].concat(l,i));e.$refs[n]=Array.from(o)}else e.$refs[n]=i}return i}}}]),a}(),is=["Transition","TransitionGroup","KeepAlive","Teleport","Suspense"],us={String,Number,Boolean,Array,Object};function ls(a,r,e){return a.reactive(Object.keys(r||{}).reduce(function(t,n){var i=r[n];return Ve(i)?i=e.__parseExpression(i):Vt(i)&&(i=e.__parseFunction(i)),t[n]=i,t},{}))}function os(a,r){return Object.entries(a!=null?a:{}).reduce(function(e,t){var n=Ie(t,2),i=n[0],u=n[1];return e[i]=r.__parseFunction(u),e},{})}function ss(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],e=arguments.length>2?arguments[2]:void 0;r.forEach(function(t){a.watch(e.__parseExpression(t.source),e.__parseFunction(t.handler),{deep:t.deep,immediate:t.immediate})})}function cs(a,r,e){return Object.entries(r!=null?r:{}).reduce(function(t,n){var i=Ie(n,2),u=i[0],l=i[1];return t[u]=a.computed(e.__parseFunction(l)),t},{})}function ds(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,e=function(n){return n?(Array.isArray(n)?n:[n]).map(function(i){return us[i]}):void 0};return a.map(function(t){return typeof t=="string"?{name:t}:{name:t.name,type:t.type,required:t.required,default:Ve(t.default)?r.__parseExpression(t.default):t.default}}).reduce(function(t,n){return t[n.name]={type:e(n.type),required:n.required,default:n.default},t},{})}function vs(a,r){return Object.entries(a!=null?a:{}).reduce(function(e,t){var n=Ie(t,2),i=n[0],u=n[1];return e[i]=r.__parseFunction(u),e},{})}function fs(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],e=arguments.length>2?arguments[2]:void 0;return r.reduce(function(t,n){var i,u=n||{},l=u.name,o=u.from;n.default;var s=Ve(o)?e.__parseExpression(o)||l:o!=null?o:l,c=Ve(n.default)?e.__parseExpression(n.default):(i=n.default)!==null&&i!==void 0?i:null;return t[l]=a.inject(s,c),t},{})}function ps(a,r,e){return Object.keys(r).reduce(function(t,n){var i=r[n],u=e.$apis[i.detail],l=Vt(i.transform)?i.transform.value?e.__parseFunction(i.transform):void 0:i.transform;return t[n]=K(F().mark(function o(){var s,c,v,f,m=arguments;return F().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:for(s=m.length,c=new Array(s),v=0;v<s;v++)c[v]=m[v];return g.next=3,u.apply(e,c);case 3:return f=g.sent,g.abrupt("return",l?l(f):f);case 5:case"end":return g.stop()}},o)})),t},{})}function ms(a,r,e){var t=a.CSSStyleSheet;if(t.prototype.replaceSync){var n=new t;n.id=r,n.replaceSync(e);var i=a.document,u=i.adoptedStyleSheets,l=Array.from(u).filter(function(c){return c.id!==r});i.adoptedStyleSheets=[].concat(nt(l),[n])}else{var o=a.document,s=o.getElementById(r);s?s.innerHTML=e:(s=o.createElement("style"),s.id=r,s.innerHTML=e,o.head.appendChild(s))}}function dr(a){var r,e,t,n=a.Vue,i=a.block,u=a.components,l=u===void 0?{}:u,o=a.libs,s=o===void 0?{}:o,c=a.apis,v=c===void 0?{}:c,f=a.loader,m=i?qt.DESIGN:qt.RUNTIME,h=n.computed(function(){return a.dsl}),g=is.reduce(function(b,_){return b[_]=n[_],b},{}),C=new as({mode:m,dsl:h.value,loader:f,attrs:{$components:J(J({},g),l),$libs:s,$apis:v}});return h.value.id&&ms(a.window||window,h.value.id,h.value.css||""),n.defineComponent(J({name:h.value.name,props:J({},ds((r=h.value.props)!==null&&r!==void 0?r:[],C)),setup:function(_){var w,E,S,P;C.props=_,C.state=ls(n,(w=h.value.state)!==null&&w!==void 0?w:{},C);var R=cs(n,(E=h.value.computed)!==null&&E!==void 0?E:{},C),j=vs((S=h.value.methods)!==null&&S!==void 0?S:{},C),L=fs(n,h.value.inject,C),x=ps(n,h.value.dataSources||{},C),M=J(J(J(J({},L),R),j),x);return C.setup(M,n),ss(n,(P=h.value.watch)!==null&&P!==void 0?P:[],C),i&&i.id===C.__id&&(i.runtimeContext=C),n.onUnmounted(function(){i&&i.id===C.__id&&(i.runtimeContext=void 0)}),{vtj:C}},emits:nt((e=h.value.emits)!==null&&e!==void 0?e:[]),expose:["vtj"],render:function(){if(!h.value.children)return null;var _=h.value.children||[];return _.length===1?_t(n,_[0],C):_.map(function(w){return _t(n,w,C)})}},os((t=h.value.lifeCycles)!==null&&t!==void 0?t:{},C)))}var hs=function(){function a(r,e,t){ge(this,a),D(this,"app",null),D(this,"dsl",null),D(this,"onNodeChangeProxy",void 0),this.env=r,this.service=e,this.history=t,this.onNodeChangeProxy=this.onNodeChange.bind(this)}return he(a,[{key:"install",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=Object.values(t);this.app&&(Object.assign(this.app.config.globalProperties,n),this.app.config.errorHandler=function(u,l,o){var s=`[ ${l==null?void 0:l.$options.name}] ${(u==null?void 0:u.message)||u||"未知错误"}`;console.error({err:u,instance:l,info:o}),Pe.error({title:"运行错误",message:s})},i.forEach(function(u){var l;(typeof u=="function"||u.install)&&((l=e.app)===null||l===void 0||l.use(u))}))}},{key:"render",value:function(e){this.app&&this.dispose();var t=this.env,n=t.Vue,i=t.container,u=t.components,l=t.libs,o=t.apis,s=t.window,c=t.globals,v=cr({getFile:this.service.getFile,options:{Vue:n,block:e,components:u,libs:l,apis:o,window:s}});this.dsl=n.reactive(e.toDsl());var f=dr({Vue:n,dsl:this.dsl,block:e,components:u,libs:l,apis:o,window:s,loader:v});this.app=n.createApp(f),this.install(l,c),this.app.mount(i),B.on(G,this.onNodeChangeProxy)}},{key:"onNodeChange",value:function(e){if(se(e))this.render(e);else if(this.dsl){var t=e.toDsl();this.updateChild(t,this.dsl)}this.dsl&&this.history.value&&this.history.value.push(this.dsl)}},{key:"updateChild",value:function(e,t){var n=t.children||[];if(Array.isArray(n))for(var i=0;i<n.length;i++){var u=n[i];if(u.id===e.id){n.splice(i,1,e);return}else this.updateChild(e,u)}}},{key:"dispose",value:function(){this.app&&(this.app.unmount(),this.app=null),this.dsl=null,B.off(G,this.onNodeChangeProxy)}}]),a}(),gs=function(){function a(r){var e=this;ge(this,a),D(this,"unwatches",[]),D(this,"iframe",null),D(this,"contentWindow",null),D(this,"project",void 0),D(this,"renderer",null),D(this,"assets",void 0),D(this,"service",void 0),D(this,"globals",void 0),D(this,"history",I(null)),D(this,"isReady",!1);var t=r.project,n=r.assets,i=r.service,u=r.globals;this.project=t,this.assets=n,this.service=i,this.globals=u,B.on(Jt,function(){return e.open()}),B.on(yt,function(l){return e.service.saveHistory(l)}),B.on(qe,function(l){var o,s=t.current.value;s&&(s.init(l.block),(o=e.renderer)===null||o===void 0||o.render(s))}),this.unwatches.push(ce(t.current,function(){var l=K(F().mark(function o(s){var c,v;return F().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(!s){m.next=6;break}return m.next=3,e.loadHistory(s);case 3:(c=e.renderer)===null||c===void 0||c.render(s),m.next=7;break;case 6:e.history.value=null,(v=e.renderer)===null||v===void 0||v.dispose();case 7:case"end":return m.stop()}},o)}));return function(o){return l.apply(this,arguments)}}()))}return he(a,[{key:"loadHistory",value:function(){var r=K(F().mark(function t(n){var i;return F().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.service.getHistory(n.id);case 2:i=l.sent,this.history.value=new Ti({history:{blockId:n.id,items:i}});case 4:case"end":return l.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"init",value:function(e){var t=this;ce(e,function(n){n&&(t.iframe=n,t.assets.isReady&&t.open())})}},{key:"open",value:function(){if(this.iframe){this.isReady=!1,this.contentWindow=this.iframe.contentWindow,this.contentWindow.__simulator__=this;var e=this.contentWindow.document;B.emit(Lo,e);var t=this.parseDependencies(),n=t.scripts,i=t.css;e.open(),e.write(`
     <!DOCTYPE html>
     <html lang="zh-CN">
       <head>
       <meta charset="utf-8">
       <meta name="viewport"
             content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0,viewport-fit=cover"/>
         <style>
            html, body {
              background: #fff;
              padding: 0;
              margin: 0;
              min-height: 100vh;
              width: 100%;
              height: 100%;
              font-size:12px;
            }
         </style>
         ${Ga(i)}
         ${qa(n)}
       </head>
       <body> 
       </body>
       <script>
       __simulator__.ready();
     <\/script> 
     </html>
    `),e.close()}}},{key:"parseDependencies",value:function(){var e=this.project.dependencies.value.filter(function(i){return i.enabled}),t=[],n=[];return e.forEach(function(i){var u=i.urls;u==null||u.forEach(function(l){Ka(l)&&t.push(l),Qa(l)&&n.push(l)})}),{scripts:t,css:n}}},{key:"parseApis",value:function(){return this.project.apis.value.reduce(function(e,t){return e[t.name]=Ya(t),e},{})}},{key:"createEnv",value:function(){var e=this.contentWindow,t=this.assets,n=this.globals,i=this.project.dependencies.value,u=t.componentGroups,l={window:e,Vue:null,libs:{},components:{},apis:this.parseApis(),container:e==null?void 0:e.document.body,globals:n};return i.filter(function(o){return!!o.enabled}).forEach(function(o){var s,c=o.library,v=e[c];v&&(l.libs[c]=v,c===Cn&&(l[Cn]=v),(((s=u.find(function(f){return f.library===c}))===null||s===void 0?void 0:s.names)||[]).forEach(function(f){l.components[f]=v[f]}))}),l}},{key:"ready",value:function(){var e,t;this.isReady=!0,(e=this.renderer)!==null&&e!==void 0&&e.dispose(),this.renderer=null;var n=this.project.current.value,i=this.createEnv();this.renderer=new hs(i,this.service,this.history),n&&this.renderer.render(n),B.emit(Wt,(t=this.contentWindow)===null||t===void 0?void 0:t.document)}},{key:"dispose",value:function(){var e;(e=this.renderer)!==null&&e!==void 0&&e.dispose(),this.contentWindow=null,this.iframe=null,this.renderer=null,this.history.value=null,this.unwatches.forEach(function(t){return t()}),B.off(Jt),B.off(yt),B.off(qe)}}]),a}(),dn=Symbol("VtjEngine"),ys=function(){function a(r){var e=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ge(this,a),D(this,"config",void 0),D(this,"skeleton",void 0),D(this,"app",void 0),D(this,"service",void 0),D(this,"emitter",B),D(this,"project",void 0),D(this,"assets",void 0),D(this,"simulator",void 0);var n=t.config,i=n===void 0?{}:n,u=t.service,l=u===void 0?new Zn:u,o=t.project,s=t.globals,c=s===void 0?{}:s;this.service=l,this.config=si(li,i),this.skeleton=new Bo(this.config.widgets||[]),this.project=xn(new Bi(o,this.config.dependencies)),this.assets=new Ho(this.service,this.project),this.simulator=new gs({project:this.project,assets:this.assets,service:this.service,globals:c}),this.app=Nn(Oo,{engine:vt(this)}),this.bindListeners(),this.loadProject(this.project.toDsl()),bt(function(){var v;e.app.mount((v=d(r))!==null&&v!==void 0?v:document.body)}),Ye(function(){e.dispose()})}return he(a,[{key:"loadProject",value:function(){var r=K(F().mark(function t(n){var i,u,l;return F().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return i=this.service,u=this.project,s.next=4,i.getProject(n||{name:"未命名项目"});case 4:l=s.sent,u.load(l);case 6:case"end":return s.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"bindListeners",value:function(){var e=this,t=this.emitter,n=this.service;t.on(Se,function(i){return n.updateProject(i)}),t.on(dt,function(i){return n.createFile(i)}),t.on(Ut,function(i){return n.updateFile(i)}),t.on(Ht,function(i){return n.removeFile(i)}),t.on(G,function(){var i=e.project.current.value;i&&n.updateFile(i.toDsl())})}},{key:"dispose",value:function(){this.emitter.all.clear(),this.skeleton.dispose(),this.assets.dispose(),this.simulator.dispose(),this.app.unmount()}}]),a}(),_s=function(){function a(r,e,t){var n=this;ge(this,a),D(this,"draggingComponent",null),D(this,"document",null),D(this,"proxied",{}),D(this,"hover",Et(null)),D(this,"dropping",Et(null)),D(this,"selected",Et(null)),this.engine=r,this.iframe=e,this.slotPicker=t,r.simulator.init(e),B.on(Wt,function(i){n.bindEvents(i)}),B.on(Qt,function(i){n.draggingComponent=i}),B.on(Kt,function(){n.draggingComponent=null}),B.on(qe,function(){n.selected.value=null,n.hover.value=null}),ce(r.project.current,function(){n.selected.value=null,n.hover.value=null})}return he(a,[{key:"dispose",value:function(){this.engine.simulator.dispose(),B.off(Wt),B.off(Qt),B.off(Kt),this.document&&(this.unbindEvents(this.document),this.document=null)}},{key:"getNodeByElement",value:function(e){var t,n=(t=e.__vtj__)!==null&&t!==void 0?t:"";return gt.nodes[n]||null}},{key:"getElementByNode",value:function(e){return!this.document||!e?null:se(e)?this.document.body:Array.from(this.document.querySelectorAll("*")).find(function(t){return t.__vtj__===e.id})}},{key:"getDropType",value:function(e,t,n){var i=e.left,u=e.top,l=e.width,o=e.height;return t>=i&&t<=i+l*.2?"left":t>=i+l*.8&&t<=i+l?"right":n>=u&&n<=u+o*.2?"top":n>=u+o*.8&&n<=u+o?"bottom":"inner"}},{key:"getElementAndNode",value:function(e){var t=this.engine,n=this.document,i=e.composedPath(),u=this.findVtjElement(i)||(n==null?void 0:n.body),l=u?this.getNodeByElement(u)||t.project.current.value:null;return{el:u,node:l,path:i}}},{key:"onDragOver",value:function(e){var t=this.getElementAndNode(e),n=t.el,i=t.node;if(i&&n&&this.allowDrop(i)){e.preventDefault();var u=n.getBoundingClientRect();this.dropping.value={el:n,node:i,rect:u,type:this.getDropType(u,e.clientX,e.clientY),path:[]}}else this.dropping.value=null}},{key:"onMouseOver",value:function(e){var t=this.getElementAndNode(e),n=t.el,i=t.node;if(n&&i){var u=n.getBoundingClientRect();this.hover.value={el:n,node:i,rect:u,type:"inner",path:[]}}}},{key:"onLeave",value:function(e){this.hover.value=null,this.dropping.value=null}},{key:"createNodeDsl",value:function(e){var t=e.name,n=e.snippet,i=n===void 0?{}:n,u=e.from;return J(J({},i),{},{name:t,from:u||e.package})}},{key:"getDropSlot",value:function(){var r=K(F().mark(function t(n){var i,u,l,o,s,c,v;return F().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(n){m.next=2;break}return m.abrupt("return");case 2:return u=this.engine,l=this.slotPicker,o=u.assets.componentMap,m.next=7,u.assets.getBlockDescription(n.from);case 7:if(m.t0=m.sent,m.t0){m.next=10;break}m.t0=o[n.name];case 10:if(s=m.t0,s!=null&&s.slots){m.next=13;break}return m.abrupt("return");case 13:if(c=((s==null?void 0:s.slots)||["default"]).map(function(h){return typeof h=="string"?{name:h,params:[]}:{name:h.name,params:h.params||[]}}),c.length!==0){m.next=16;break}return m.abrupt("return");case 16:if(c.length!==1){m.next=18;break}return m.abrupt("return",c[0]);case 18:return m.next=20,l(c).catch(function(h){});case 20:if(v=m.sent,v&&v.name==="default"&&(!v.params||((i=v.params)===null||i===void 0?void 0:i.length)===0)){m.next=23;break}return m.abrupt("return",v);case 23:case"end":return m.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"onDrop",value:function(){var r=K(F().mark(function t(n){var i,u,l,o,s,c,v,f,m,h;return F().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(n.preventDefault(),i=this.engine,u=this.draggingComponent,l=this.dropping,o=i.project.current.value,!(!o||!u||!l.value)){C.next=4;break}return C.abrupt("return");case 4:if(s=this.getElementAndNode(n),c=s.el,v=s.node,!(!c||!v||!this.allowDrop(v))){C.next=7;break}return C.abrupt("return");case 7:return f=this.createNodeDsl(u),m=new gt(f),h=l.value.type,C.next=10,this.getDropSlot(h==="inner"?v:v.parent);case 10:m.slot=C.sent,se(v)?o.appendChild(m):o.appendChild(m,v,h);case 12:case"end":return C.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"onSelected",value:function(e){var t=this.getElementAndNode(e),n=t.el,i=t.node,u=t.path;if(n&&i){var l=n.getBoundingClientRect();this.selected.value={el:n,node:i,rect:l,path:this.getNodePath(u),type:this.getDropType(l,e.clientX,e.clientY)}}}},{key:"onViewChange",value:function(){this.updateRect()}},{key:"updateRect",value:function(){var e=d(this.selected),t=d(this.hover);if(e){var n=e.el.getBoundingClientRect();this.selected.value=J(J({},e),{},{rect:n})}if(t){var i=t.el.getBoundingClientRect();this.hover.value=J(J({},t),{},{rect:i})}}},{key:"getNodePath",value:function(e){var t=this,n=e.filter(function(u){return t.isVtjElement(u)&&t.isCurrentContext(u)}).map(function(u){return t.getNodeByElement(u)}),i=this.engine.project.current.value;return i&&n.push(i),n}},{key:"isVtjElement",value:function(e){return!!e.__vtj__}},{key:"isCurrentContext",value:function(e){var t,n,i=(t=this.engine.project.current.value)===null||t===void 0?void 0:t.id,u=(n=e.__context__)===null||n===void 0?void 0:n.__id;return i===u}},{key:"findVtjElement",value:function(e){var t=this;return e.find(function(n){return t.isVtjElement(n)&&t.isCurrentContext(n)})}},{key:"bind",value:function(e,t){var n=this.proxied[t];return n||(n=e.bind(this),this.proxied[t]=n),n}},{key:"bindEvents",value:function(e){this.document&&this.unbindEvents(this.document);var t=this.engine.simulator.contentWindow;e.addEventListener("mouseover",this.bind(this.onMouseOver,"onMouseOver")),e.addEventListener("mouseleave",this.bind(this.onLeave,"onLeave")),e.addEventListener("dragover",this.bind(this.onDragOver,"onDragOver")),e.addEventListener("dragleave",this.bind(this.onLeave,"onLeave")),e.addEventListener("drop",this.bind(this.onDrop,"onDrop")),e.addEventListener("click",this.bind(this.onSelected,"onSelected")),e.addEventListener("scroll",this.bind(this.onViewChange,"onViewChange")),t!=null&&t.addEventListener("resize",this.bind(this.onViewChange,"onViewChange")),this.document=e}},{key:"unbindEvents",value:function(e){var t=this.engine.simulator.contentWindow;e.removeEventListener("mouseover",this.bind(this.onMouseOver,"onMouseOver")),e.removeEventListener("mouseleave",this.bind(this.onLeave,"onLeave")),e.removeEventListener("dragover",this.bind(this.onDragOver,"onDragOver")),e.removeEventListener("dragleave",this.bind(this.onLeave,"onLeave")),e.removeEventListener("drop",this.bind(this.onDrop,"onDrop")),e.removeEventListener("click",this.bind(this.onSelected,"onSelected")),e.removeEventListener("scroll",this.bind(this.onViewChange,"onViewChange")),t!=null&&t.removeEventListener("resize",this.bind(this.onViewChange,"onViewChange")),this.document=null}},{key:"allowDrop",value:function(e){var t=this.draggingComponent,n=this.engine;if(!t)return!0;var i=n.project.current.value;return i&&i.allowDrop(t,e,n.assets)}},{key:"setHover",value:function(e){var t=this.getElementByNode(e);if(t){var n=t.getBoundingClientRect();this.hover.value={el:t,node:e,rect:n,type:"inner",path:[]}}}},{key:"setSelected",value:function(e){if(this.document){var t=this.getElementByNode(e)||this.document.createElement("span"),n=t.getBoundingClientRect();this.selected.value={el:t,node:e,rect:n,path:this.findPathByNode(e),type:"inner"}}}},{key:"findPathByNode",value:function(e){var t=[e];if(se(e))return t;for(var n=e;n.parent&&n.parent!==n;)n=n.parent,n!==e&&t.unshift(n);return t.reverse()}}]),a}();const bs=a=>(Dr("data-v-56474b89"),a=a(),Fr(),a),ks={class:"vtj-ide"},ws={class:"file-list"},Cs={key:1},Vs=bs(()=>W("div",{class:"error-tip"}," 错误日志已保存. 这可能是系统的bug。您可以把日志提交给作者协助解决。 ",-1)),Ss=H({__name:"index",setup(a){return jt(this,null,function*(){const r=I(!1),e=I(!1),t=I([]),n=I(null),i=I(!1),u=I();Xt("VTJ_PROVIDER_OPTIONS",null);const l={},{project:o,raw:s=!0,service:c="storage",debug:v}=l||{},{id:f="ide",name:m="IDE",base:h="/",mode:g="hash",page:C="/page",preview:b="/preview",home:_="/"}=o||{},w=new ys(u,{service:c==="file"?new ci:new Zn,config:{widgets:[{name:"switcher",props:{link:`/#${_}`}},{name:"actions",props:{coder:s}}]},project:{id:f,name:m},globals:{$route:vr(),$router:fr()}});return w.emitter.on(ur,E=>{const S=g==="hash"?"#":"";let P="";hr(E)?P=s?`${h}${S}${b}/${E.id}`:`${h}${S}${C}/${E.id}`:P=`${h}${S}${b}/${E.id}`,window.open(P)}),w.emitter.on(lr,E=>{const P=`${h}${g==="hash"?"#":""}${_}`;window.open(P)}),w.emitter.on(or,E=>jt(this,null,function*(){if(c==="storage"){E.value=!1,r.value=!0;return}e.value=!0,i.value=!0,t.value=[],n.value=null;const S=w.project.toDsl(),P=w.assets.componentMap,R=w.assets.packages;t.value=yield gr({type:"projectCoder",data:{debug:v,project:S,assets:{componentMap:P,packages:R}}}).catch(j=>(n.value=j.data,console.log(j),[])),i.value=!1})),(E,S)=>(p(),O("div",ks,[W("div",{ref_key:"container",ref:u,class:"container"},null,512),y(d(pe),{modelValue:r.value,"onUpdate:modelValue":S[0]||(S[0]=P=>r.value=P),title:"温馨提示",width:"500px",height:"180px"},{default:k(()=>[y(d(it),{title:"当前设计器是Storage模式，不支持出码功能",type:"warning",closable:!1,description:"可以使用以下命令下载完整版本体验"}),y(d(it),{class:"npm-command",closable:!1,type:"info",title:"npm create vtj@latest -- -t web"})]),_:1},8,["modelValue"]),y(d(pe),{modelValue:e.value,"onUpdate:modelValue":S[1]||(S[1]=P=>e.value=P),title:"出码结果",width:"800px",height:"400px"},{default:k(()=>[y(d(Zr),{rows:3,animated:"",loading:i.value},{default:k(()=>[n.value?T("",!0):(p(),$(d(it),{key:0,closable:!1,type:"success",title:`输出文件数: ${t.value.length}`},null,8,["title"])),W("div",ws,[(p(!0),O(Y,null,X(t.value,P=>(p(),O("div",null,ee(P),1))),256))]),n.value?(p(),O("div",Cs,[y(d(it),{closable:!1,type:"error",title:"出码失败",description:n.value.msg},null,8,["description"]),Vs])):T("",!0)]),_:1},8,["loading"])]),_:1},8,["modelValue"])]))})}});const Ns=yr(Ss,[["__scopeId","data-v-56474b89"]]);export{Ns as default};
