(function(a,f){typeof exports=="object"&&typeof module!="undefined"?f(exports):typeof define=="function"&&define.amd?define(["exports"],f):(a=typeof globalThis!="undefined"?globalThis:a||self,f(a.VtjUI={}))})(this,function(a){"use strict";var Me=Object.defineProperty,je=Object.defineProperties;var De=Object.getOwnPropertyDescriptors;var ce=Object.getOwnPropertySymbols;var Ie=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable;var H=(a,f,g)=>f in a?Me(a,f,{enumerable:!0,configurable:!0,writable:!0,value:g}):a[f]=g,b=(a,f)=>{for(var g in f||(f={}))Ie.call(f,g)&&H(a,g,f[g]);if(ce)for(var g of ce(f))Oe.call(f,g)&&H(a,g,f[g]);return a},S=(a,f)=>je(a,De(f));var U=(a,f,g)=>(H(a,typeof f!="symbol"?f+"":f,g),g);var de=(a,f,g)=>new Promise((N,P)=>{var j=v=>{try{B(g.next(v))}catch(C){P(C)}},D=v=>{try{B(g.throw(v))}catch(C){P(C)}},B=v=>v.done?N(v.value):Promise.resolve(v.value).then(j,D);B((g=g.apply(a,f)).next())});const f="";function g(n){return typeof n=="string"?n:`${n}px`}function N(n=0,e){if(typeof n=="number")return n;if(/(%|vh|vw)$/i.test(n)){const u=Number.parseInt(n);return Math.floor(e*u/100)}return Number.parseInt(n)}function P(n,e){const t={};return Object.keys(n).forEach(u=>{e.includes(u)||(t[u]=n[u])}),t}function j(n,e){const t={};return Object.keys(n).forEach(u=>{e.includes(u)&&(t[u]=n[u])}),t}const D=()=>{},B=Symbol("INSTALLED_KEY"),v="is-dragging",C="is-resizing",F=(n=[])=>({install:t=>{t[B]||(t[B]=!0,n.forEach(u=>t.component(u.name,u)))}}),pe={class:"x-startup"},G=Vue.defineComponent({name:"XStartup",__name:"Startup",props:{text:{default:"Hello VTJ."}},setup(n){const e=n;return(t,u)=>(Vue.openBlock(),Vue.createElementBlock("div",pe,[Vue.renderSlot(t.$slots,"default",{},()=>[Vue.createElementVNode("span",null,Vue.toDisplayString(e.text),1)])]))}}),Ae="",Y={default:14,small:12,large:18},q={icon:{type:[String,Object]},color:{type:String},size:{type:[Number,String],default:"inherit"},src:{type:String},disabled:{type:Boolean}},Ve=["src"],E=Vue.defineComponent({name:"XIcon",__name:"Icon",props:q,setup(n){const e=n,t=Vue.useAttrs(),u=Vue.computed(()=>typeof e.icon=="object"?Vue.markRaw(e.icon):null),r=Vue.computed(()=>{const o={"is-pointer":!!t.onClick};return!u.value&&e.icon&&(o[e.icon]=!0),o}),l=Vue.computed(()=>{var o;return typeof e.size=="number"?e.size:(o=Y[e.size])!=null?o:void 0});return(o,i)=>(Vue.openBlock(),Vue.createBlock(Vue.unref(ElementPlus.ElIcon),{class:Vue.normalizeClass(["x-icon",r.value]),color:e.color,size:l.value},{default:Vue.withCtx(()=>[Vue.renderSlot(o.$slots,"default",{},()=>[u.value?(Vue.openBlock(),Vue.createBlock(Vue.resolveDynamicComponent(u.value),{key:0})):Vue.createCommentVNode("",!0),e.src?(Vue.openBlock(),Vue.createElementBlock("img",{key:1,src:e.src},null,8,Ve)):Vue.createCommentVNode("",!0)])]),_:3},8,["class","color","size"]))}}),W=Vue.defineComponent({name:"XMenuItem",__name:"MenuItem",props:{item:{}},setup(n){const e=n,t=Vue.getCurrentInstance(),u=(l="")=>{if(l){if(typeof l=="string"){const o=t==null?void 0:t.appContext.app;return(o==null?void 0:o.component(l))||l}return l}},r=l=>l.filter(o=>!o.hidden);return(l,o)=>e.item.children?(Vue.openBlock(),Vue.createBlock(Vue.unref(ElementPlus.ElSubMenu),{key:0,index:e.item.id},{title:Vue.withCtx(()=>[Vue.createElementVNode("div",null,[Vue.createVNode(Vue.unref(E),{icon:u(e.item.icon)},null,8,["icon"]),Vue.createElementVNode("span",null,Vue.toDisplayString(e.item.title),1)])]),default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(r(e.item.children),i=>(Vue.openBlock(),Vue.createBlock(Vue.unref(W),{item:i},null,8,["item"]))),256))]),_:1},8,["index"])):(Vue.openBlock(),Vue.createBlock(Vue.unref(ElementPlus.ElMenuItem),Vue.mergeProps({key:1,index:e.item.id},e.item),{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(E),{icon:u(e.item.icon)},null,8,["icon"]),Vue.createElementVNode("span",null,Vue.toDisplayString(e.item.title),1)]),_:1},16,["index"]))}}),I=Vue.defineComponent({name:"XMenu",__name:"Menu",props:{data:{default:()=>[]},mode:{},defaultActive:{},defaultOpeneds:{},uniqueOpened:{type:Boolean},router:{type:Boolean},menuTrigger:{},collapse:{type:Boolean},backgroundColor:{},textColor:{},activeTextColor:{},collapseTransition:{type:Boolean},ellipsis:{type:Boolean},popperEffect:{}},emits:["select"],setup(n,{emit:e}){const t=n,u=Vue.computed(()=>t.data.filter(o=>!o.hidden)),r=(o,i)=>{const s=(c,V=[])=>{var p;for(const m of V){if(m.id===c)return m;if((p=m.children)!=null&&p.length){const h=s(c,m.children);if(h)return h}}};return s(i,o)},l=o=>{const i=r(u.value,o);i&&e("select",i)};return(o,i)=>(Vue.openBlock(),Vue.createBlock(Vue.unref(ElementPlus.ElMenu),Vue.mergeProps({class:"x-menu"},t,{onSelect:l}),{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(u.value,s=>(Vue.openBlock(),Vue.createBlock(Vue.unref(W),{item:s},null,8,["item"]))),256))]),_:1},16))}}),me={class:"x-simple-mask__brand"},fe={class:"x-simple-mask__aciton"},K=Vue.defineComponent({name:"XSimpleMask",__name:"SimpleMask",props:{preview:{type:Boolean},project:{default:()=>({name:"Logo",home:"/"})},menu:{}},setup(n,{expose:e}){const t=n,u=VueRouter.useRouter(),r=VueRouter.useRoute(),l=Vue.computed(()=>r.params.id),o=()=>{const s=t.project.home;s&&u.push(s)},i=s=>{const c=s==null?void 0:s.id;if(c){const p=`${t.preview?"/preview":t.project.page}/${c}`;u.push(p)}};return e({goHome:o}),(s,c)=>(Vue.openBlock(),Vue.createBlock(Vue.unref(ElementPlus.ElContainer),{class:"x-simple-mask"},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(ElementPlus.ElHeader),{class:"x-simple-mask__header"},{default:Vue.withCtx(()=>[Vue.createElementVNode("div",me,[Vue.createElementVNode("span",{class:"x-simple-mask__logo",onClick:o},[Vue.renderSlot(s.$slots,"logo",{},()=>[Vue.createTextVNode(Vue.toDisplayString(t.project.name),1)])])]),Vue.createElementVNode("div",fe,[Vue.renderSlot(s.$slots,"action")])]),_:3}),Vue.createVNode(Vue.unref(ElementPlus.ElContainer),null,{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(ElementPlus.ElAside),{class:"x-simple-mask__aside"},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(I),Vue.mergeProps(t.menu,{"default-active":l.value,onSelect:i}),null,16,["default-active"])]),_:1}),Vue.createVNode(Vue.unref(ElementPlus.ElMain),{class:"x-simple-mask__main"},{default:Vue.withCtx(()=>[Vue.renderSlot(s.$slots,"default",{},()=>[Vue.createVNode(Vue.unref(VueRouter.RouterView))])]),_:3})]),_:3}),s.$slots.footer?(Vue.openBlock(),Vue.createBlock(Vue.unref(ElementPlus.ElFooter),{key:0,class:"x-simple-mask__footer",height:"40px"},{default:Vue.withCtx(()=>[Vue.renderSlot(s.$slots,"footer")]),_:3})):Vue.createCommentVNode("",!0)]),_:3}))}}),O={name:{type:String},label:{type:String},value:{type:[String,Number,Object,Array,Boolean]},icon:{type:[String,Object]},mode:{type:String,default:"button"},menus:{type:Array},tooltip:{type:[String,Object]},badge:{type:[String,Number,Object]},dropdown:{type:Object},button:{type:Object},disabled:{type:[Boolean,Function]},size:{type:String,default:"default"},type:{type:String,default:"primary"},background:{type:String,default:"always"},circle:{type:Boolean}};function ge(n){return Vue.computed(()=>{const e=n.tooltip;if(e)return typeof e=="string"?{content:e}:e})}function he(n){return Vue.computed(()=>{const e=n.badge;if(e)return typeof e=="object"?e:{value:e}})}function ye(n){return Vue.computed(()=>{const{dropdown:e,menus:t}=n;if(t&&t.length>0)return Object.assign({popperClass:"x-action__menus",size:n.size},e||{})})}function Z(n){return Vue.computed(()=>{const e=Vue.unref(n);return e?typeof e=="string"||e.setup||e.render||Vue.isVNode(e)?{icon:e}:e:null})}function A(n){const e=Z(n);return e.value?Vue.defineComponent({render:()=>Vue.h(E,e.value)}):null}function be(n,e={}){const t=e.edge||40,u=Vue.computed(()=>{var c;return e.selector?typeof e.selector=="string"?(c=Vue.unref(n))==null?void 0:c.querySelector(e.selector):Vue.unref(n):null}),r=Vue.computed(()=>Vue.unref(e.wrapper)),{x:l,y:o,isDragging:i}=VueUse.useDraggable(n,b({preventDefault:!1,stopPropagation:!1,handle:e.selector?u:null},P(e,["handle","edge"]))),s=(c,V,p,m,h,y)=>{const d=[-p.value+t,m.value-t];V.value=Math.min(Math.max(V.value,y.value),h.value-t),c.value<d[0]&&(c.value=d[0]),c.value>d[1]&&(c.value=d[1])};if(e.wrapper){const{width:c,height:V,top:p}=VueUse.useElementBounding(r),{width:m}=VueUse.useElementSize(n);Vue.watch([l,o],()=>{s(l,o,m,c,V,p)})}return Vue.watch(i,c=>{c?document.body.classList.add(v):document.body.classList.remove(v)}),{x:l,y:o,isDragging:i}}function _e(n,e,t){const{dirs:u=["n","s","w","e"],edge:r=5}=n;let l="";const{left:o,top:i,width:s,height:c}=t,{clientX:V,clientY:p}=e;return u.includes("n")&&p>i.value-r&&p<i.value+r?l+="n":u.includes("s")&&p<i.value+c.value+r&&p>i.value+c.value-r&&(l+="s"),u.includes("w")&&V>o.value-r&&V<o.value+r?l+="w":u.includes("e")&&V<o.value+s.value+r&&V>o.value+s.value-r&&(l+="e"),l}function ve(n,e,t,u){if(!t)return;const{minWidth:r=0,minHeight:l=0,maxWidth:o,maxHeight:i}=n,{clientX:s,clientY:c}=e,{left:V,top:p,width:m,height:h}=u;t.includes("e")&&(m.value=Math.max(s-V.value,r)),t.includes("w")&&(m.value=Math.max(m.value+V.value-s,r),V.value=s),t.includes("s")&&(h.value=Math.max(c-p.value,l)),t.includes("n")&&(h.value=Math.max(h.value+p.value-c,l),p.value=c),o&&(m.value=Math.min(m.value,o)),i&&(h.value=Math.min(h.value,i)),n.onResizing&&n.onResizing(u)}function ke(n,e={}){const t=b({edge:5,minWidth:50,minHeight:50,dirs:["n","s","w","e"]},e),u=Vue.effectScope(),r=Vue.ref(""),l=Vue.ref(!1),{onStart:o,onEnd:i,boundingOptions:s}=t,c=VueUse.useElementBounding(n,s),{left:V,top:p,width:m,height:h,update:y}=c;return u.run(()=>{VueUse.useEventListener(document,"mousemove",d=>{l.value?ve(t,d,r.value,c):r.value=_e(t,d,c)}),VueUse.useEventListener(document,"mousedown",()=>{y(),r.value&&(l.value=!0,o&&o(c))}),VueUse.useEventListener(document,"mouseup",()=>{l.value=!1,r.value="",i&&i(c),y()}),Vue.watch(r,d=>{const _=document.body;_.style.cursor=d?`${d}-resize`:"",d?_.classList.add(C):_.classList.remove(C)})}),Vue.onUnmounted(()=>{u.stop()}),{left:V,top:p,width:m,height:h,direction:r,resizing:l,update:y}}function M(n,e){return Vue.computed(()=>{const t=Vue.unref(n);return typeof t=="function"?t(e):!!t})}const we={key:0},Se=Vue.defineComponent({__name:"Trigger",props:O,emits:["click"],setup(n,{emit:e}){const t=n,u=A(Vue.toRef(t,"icon")),r=M(Vue.toRef(t,"disabled")),l=Vue.computed(()=>({[`is-${t.mode}`]:!!t.mode,[`is-${t.type}`]:!!t.type,[`is-${t.size}`]:!!t.size&&t.size!=="default",[`is-background-${t.background}`]:t.mode==="icon"&&!!t.background,"is-disabled":!!t.disabled,"is-circle":!!t.circle})),o=()=>{e("click")};return(i,s)=>t.mode==="button"?(Vue.openBlock(),Vue.createBlock(Vue.unref(ElementPlus.ElButton),Vue.mergeProps({key:0,icon:Vue.unref(u),type:t.type,size:t.size,disabled:Vue.unref(r)},t.button,{onClick:o}),{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(i.label),1)]),_:1},16,["icon","type","size","disabled"])):(Vue.openBlock(),Vue.createElementBlock("div",{key:1,class:Vue.normalizeClass(["x-action__inner",l.value]),onClick:o},[(Vue.openBlock(),Vue.createBlock(Vue.resolveDynamicComponent(Vue.unref(u)))),i.label?(Vue.openBlock(),Vue.createElementBlock("span",we,Vue.toDisplayString(i.label),1)):Vue.createCommentVNode("",!0)],2))}}),x=Vue.defineComponent({name:"XAction",__name:"Action",props:O,emits:["click","command"],setup(n,{emit:e}){const t=n,u=Vue.useSlots(),r=ge(t),l=he(t),o=ye(t),i=M(Vue.toRef(t,"disabled")),s=Vue.computed(()=>({[`x-action--${t.mode}`]:!!t.mode})),c=()=>{e("click",t)},V=d=>{var z;const _=(z=t.menus)==null?void 0:z.find(w=>w.command===d);e("command",_)},p=d=>Vue.h(ElementPlus.ElBadge,l.value,()=>[].concat(d)),m=d=>Vue.h(ElementPlus.ElDropdown,S(b({},o.value),{disabled:i.value,onCommand:V}),{default:()=>[d],dropdown:()=>[Vue.h(ElementPlus.ElDropdownMenu,()=>(t.menus||[]).map(_=>Vue.h(ElementPlus.ElDropdownItem,_,()=>_.label)))]}),h=d=>Vue.h(ElementPlus.ElTooltip,S(b({},r.value),{disabled:i.value}),()=>[d]),y=Vue.computed(()=>{let d=u.default?u.default()[0]:Vue.h(Vue.markRaw(Se),S(b({},t),{onClick:c}));return l.value&&(d=p(d)),o.value&&(d=m(d)),r.value&&(d=h(d)),d});return(d,_)=>(Vue.openBlock(),Vue.createElementBlock("div",{class:Vue.normalizeClass(["x-action",s.value])},[(Vue.openBlock(),Vue.createBlock(Vue.resolveDynamicComponent(y.value)))],2))}}),J={items:{type:Array},mode:{type:String,default:"button"},size:{type:String,default:"default"},type:{type:String,default:"primary"},background:{type:String,default:"always"},circle:{type:Boolean},disabled:{type:[Boolean,Function]},tooltip:{type:Object},badge:{type:Object},dropdown:{type:Object},button:{type:Object}},Q=Vue.defineComponent({name:"XActionBar",__name:"ActionBar",props:J,emits:["click","command"],setup(n,{emit:e}){const t=n,u=Vue.computed(()=>(t.items||[]).map(o=>o==="|"?o:S(b({},o),{badge:o.badge?b(b({},t.badge),typeof o.badge=="object"?o.badge||{}:{value:o.badge}):void 0,tooltip:o.tooltip?b(b({},t.tooltip),typeof o.tooltip=="object"?o.tooltip||{}:{content:o.tooltip}):void 0}))),r=o=>{e("click",o)},l=(o,i)=>{e("command",o,i)};return(o,i)=>(Vue.openBlock(),Vue.createBlock(Vue.unref(k),{class:"x-action-bar",align:"center"},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(u.value,s=>(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,[s==="|"?(Vue.openBlock(),Vue.createBlock(Vue.unref(ElementPlus.ElDivider),{key:0,direction:"vertical",class:"x-action-bar__divider"})):(Vue.openBlock(),Vue.createBlock(Vue.unref(x),Vue.mergeProps({key:1,mode:t.mode,size:t.size,type:t.type,circle:t.circle,background:t.background,button:t.button,dropdown:t.dropdown,disabled:Vue.unref(M)(t.disabled,s).value},s,{onClick:r,onCommand:c=>l(s,c)}),null,16,["mode","size","type","circle","background","button","dropdown","disabled","onCommand"]))],64))),256))]),_:1}))}}),ee={tag:{type:String,default:"div"},fit:{type:Boolean,default:!1},width:{type:[String,Number]},height:{type:[String,Number]},flex:{type:Boolean,default:!0},inline:{type:Boolean},direction:{type:String,default:"row"},wrap:{type:String,default:"nowrap"},justify:{type:String,default:"flex-start"},align:{type:String,default:"flex-start"},alignContent:{type:String,default:"stretch"},grow:{type:Boolean,default:!1},shrink:{type:Boolean,default:!1},alignSelf:{type:String,default:"auto"},overflow:{type:String},padding:{type:Boolean,default:!1}},k=Vue.defineComponent({name:"XContainer",__name:"Container",props:ee,setup(n){const e=n,t=Vue.getCurrentInstance(),u=Vue.computed(()=>{const o=t==null?void 0:t.parent;if(!o)return!1;const i=o.proxy;return i.$options.name==="XContainer"&&!!i.flex}),r=Vue.computed(()=>({"is-fit":e.fit,"is-flex":e.flex&&!e.inline,"is-inline-flex":e.flex&&e.inline,[`is-direction-${e.direction}`]:e.flex&&e.direction!=="row",[`is-wrap-${e.wrap}`]:e.flex&&e.wrap!=="nowrap",[`is-justify-${e.justify}`]:e.flex&&e.justify!=="flex-start",[`is-align-${e.align}`]:e.flex&&e.align!=="flex-start",[`is-align-content-${e.alignContent}`]:e.flex&&e.alignContent!=="stretch","is-grow":u.value&&e.grow,"is-shrink":u.value&&e.shrink,[`is-align-self-${e.alignSelf}`]:u.value&&e.alignSelf!=="auto",[`is-overflow-${e.overflow}`]:!!e.overflow,"is-padding":!!e.padding})),l=Vue.computed(()=>{const{width:o,height:i,fit:s}=e;return s?null:{width:o?g(o):void 0,height:i?g(i):void 0}});return(o,i)=>(Vue.openBlock(),Vue.createBlock(Vue.resolveDynamicComponent(e.tag),{class:Vue.normalizeClass(["x-container",r.value]),style:Vue.normalizeStyle(l.value)},{default:Vue.withCtx(()=>[Vue.renderSlot(o.$slots,"default")]),_:3},8,["class","style"]))}}),te={size:{type:String,default:"default"},content:{type:String,default:""},subtitle:{type:String},icon:{type:[String,Object]},border:{type:Boolean},more:{type:Boolean}},Be={key:2,class:"x-header__subtitle"},Ce={key:0,class:"x-header__actions"},R=Vue.defineComponent({name:"XHeader",inheritAttrs:!1,__name:"Header",props:te,setup(n){const e=n,t=Vue.useAttrs(),u=A(Vue.toRef(e,"icon")),r=Vue.computed(()=>({[`is-size-${e.size}`]:!!e.size&&e.size!=="default","is-border":e.border,"is-pointer":!!t.onClick}));return(l,o)=>(Vue.openBlock(),Vue.createBlock(Vue.unref(k),{class:Vue.normalizeClass(["x-header",r.value]),justify:"space-between",align:"center"},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(k),{align:"center",class:Vue.normalizeClass(["x-header__wrapper",r.value])},{default:Vue.withCtx(()=>[Vue.unref(u)?(Vue.openBlock(),Vue.createBlock(Vue.resolveDynamicComponent(Vue.unref(u)),{key:0,class:"x-header__icon"})):Vue.createCommentVNode("",!0),Vue.createElementVNode("span",Vue.mergeProps({class:"x-header__content"},l.$attrs),[Vue.renderSlot(l.$slots,"default",{},()=>[Vue.createTextVNode(Vue.toDisplayString(e.content),1)])],16),e.more?(Vue.openBlock(),Vue.createBlock(Vue.unref(E),{key:1,class:"x-header__more",icon:Vue.unref(ElementPlusIconsVue.ArrowRight)},null,8,["icon"])):Vue.createCommentVNode("",!0),e.subtitle||l.$slots.subtitle?(Vue.openBlock(),Vue.createElementBlock("span",Be,[Vue.renderSlot(l.$slots,"subtitle",{},()=>[Vue.createTextVNode(Vue.toDisplayString(e.subtitle),1)])])):Vue.createCommentVNode("",!0)]),_:3},8,["class"]),l.$slots.actions?(Vue.openBlock(),Vue.createElementBlock("div",Ce,[Vue.renderSlot(l.$slots,"actions")])):Vue.createCommentVNode("",!0)]),_:3},8,["class"]))}}),ne={fit:{type:Boolean,default:!1},width:{type:[String,Number]},height:{type:[String,Number]},border:{type:Boolean,default:!0},radius:{type:Boolean,default:!0},card:{type:Boolean},size:{type:String},shadow:{type:String},header:{type:[String,Object]},bodyPadding:{type:Boolean,default:!0},footerPadding:{type:Boolean,default:!0},body:{type:Object},footer:{type:Object}},T=Vue.defineComponent({name:"XPanel",__name:"Panel",props:ne,setup(n){const e=n,t=Vue.computed(()=>({"x-panel--card":!!e.card,"x-panel--default":!e.card,[`is-${e.size}`]:!!e.size&&e.size!=="default","is-border":!!e.border,"is-radius":!!e.radius,[`is-shadow-${e.shadow}`]:!!e.shadow&&e.shadow!=="none"})),u=Vue.computed(()=>!e.header===null?null:typeof e.header=="string"?{content:e.header,size:e.size}:S(b({},e.header),{size:e.size})),r=Vue.computed(()=>e.fit||e.height?"auto":void 0);return(l,o)=>(Vue.openBlock(),Vue.createBlock(Vue.unref(k),{class:Vue.normalizeClass(["x-panel",t.value]),direction:"column",fit:e.fit,width:e.width,height:e.height},{default:Vue.withCtx(()=>[u.value?(Vue.openBlock(),Vue.createBlock(Vue.unref(k),{key:0,flex:!1,class:"x-panel__header"},{default:Vue.withCtx(()=>[Vue.renderSlot(l.$slots,"header",{},()=>[Vue.createVNode(Vue.unref(R),Vue.normalizeProps(Vue.guardReactiveProps(u.value)),{default:Vue.withCtx(()=>[Vue.renderSlot(l.$slots,"title")]),actions:Vue.withCtx(()=>[Vue.renderSlot(l.$slots,"actions")]),_:3},16)])]),_:3})):Vue.createCommentVNode("",!0),Vue.createVNode(Vue.unref(k),Vue.mergeProps({flex:!1,overflow:r.value,grow:"",padding:"",class:"x-panel__body"},e.body),{default:Vue.withCtx(()=>[Vue.renderSlot(l.$slots,"default")]),_:3},16,["overflow"]),l.$slots.footer?(Vue.openBlock(),Vue.createBlock(Vue.unref(k),Vue.mergeProps({key:1,flex:!1,padding:"",class:"x-panel__footer"},e.footer),{default:Vue.withCtx(()=>[Vue.renderSlot(l.$slots,"footer")]),_:3},16)):Vue.createCommentVNode("",!0)]),_:3},8,["class","fit","width","height"]))}}),oe="user-select-none";class L{constructor(e,t={}){U(this,"scope");U(this,"dragging",!1);this.el=e,this.options=t,this.scope=Vue.effectScope(),this.scope.run(()=>{this.init()})}getHandle(){const{selector:e,handle:t}=this.options;return e?document.querySelector(e):t}getTarget(){const{target:e="body"}=this.options;return typeof e=="string"?document.querySelector(e):Vue.unref(e)}init(){const{el:e,options:t}=this,{disabled:u,delay:r=100,onStart:l,onEnd:o}=t;if(u)return;let i=null;const s=this.getHandle(),c=this.getTarget();let V=e.getBoundingClientRect(),p=null;const{x:m,y:h}=VueUse.useDraggable(e,S(b({initialValue:{x:V.x,y:V.y}},t),{handle:s,onStart:(y,d)=>{document.body.classList.add(oe),clearTimeout(i),i=setTimeout(()=>{this.dragging=!0,V=e.getBoundingClientRect(),p=c==null?void 0:c.getBoundingClientRect(),l&&l(y,d)},r)},onEnd:(y,d)=>{if(clearTimeout(i),document.body.classList.remove(oe),this.dragging&&p){const{x:_,y:z}=y,w=this.getPosition(p,V,_,z);o&&o(w,d),this.dragging=!1,p=null}}}));Vue.watch([m,h],()=>{if(this.dragging&&p){const y=this.getPosition(p,V,m.value,h.value);e.style.left=`${y.x}px`,e.style.top=`${y.y}px`}})}getPosition(e,t,u,r){const{edge:l=50}=this.options,o=-t.width+l,i=e.width-l,s=0,c=e.height-l,V=Math.min(i,Math.max(u,o)),p=Math.min(c,Math.max(r,s));return{x:V,y:p}}destory(){this.scope.stop()}}const ue={mounted(n,e){const t=e.value||{},u=new L(n,t);n.__draggable__=u},updated(n,e){const t=e.value||{};let u=n.__draggable__;u&&!VtjUtils.isEqual(u.options,t)&&(u.destory(),n.__draggable__=new L(n,t))},unmounted(n){const e=n.__draggable__;e&&(e.destory(),n.__draggable__=null)}},le={modelValue:{type:Boolean,default:!0},title:{type:String},subtitle:{type:String},icon:{type:[String,Object]},width:{type:[Number,String],default:"70%"},height:{type:[Number,String],default:"70%"},modal:{type:Boolean,default:!0},draggable:{type:[Boolean,Object],default:!0},resizable:{type:[Boolean,Object]},closable:{type:Boolean,default:!0},maximizable:{type:Boolean,default:!0},minimizable:{type:Boolean,default:!0},mode:{type:String,default:"normal"},content:{type:Object},src:{type:String},beforeClose:{type:Function},submit:{type:[Boolean,String]},cancel:{type:[Boolean,String]}};let X=1e3;function xe(n,e){const{width:t,height:u}=VueUse.useElementSize(e),r=Vue.reactive({mode:n.mode||"normal",wrapperWidth:0,wrapperHeight:0,width:0,height:0,top:0,left:0,zIndex:++X,dragging:!1,resizing:!1});return Vue.watch([t,u],([l,o])=>{r.wrapperWidth=l,r.wrapperHeight=o,r.width=N(n.width,l),r.height=N(n.height,o),r.left=Math.max(Math.floor((l-r.width)/2),0),r.top=Math.max(Math.floor((o-r.height)/2),0)}),Vue.watch(r,l=>{X=Math.max(l.zIndex,X)}),{state:r,normal:Vue.computed(()=>r.mode==="normal"),maximized:Vue.computed(()=>r.mode==="maximized"),minimized:Vue.computed(()=>r.mode==="minimized")}}function Ee(n,e){const t=Vue.computed(()=>{const{width:l,height:o,top:i,left:s,zIndex:c}=e;return{width:`${l}px`,height:`${o}px`,top:`${i}px`,left:`${s}px`,zIndex:c}}),u=Vue.computed(()=>({[`is-${e.mode}`]:!!e.mode,"is-draggable":!!n.draggable})),r=Vue.computed(()=>({[`is-${e.mode}`]:!!e.mode,"is-dragging":e.dragging,"is-resizing":e.resizing}));return{styles:t,classes:u,wrapperClass:r}}function ze(n,e,t){const u=s=>{e.mode=s,["maximized","minimized","normal"].includes(s)&&t(s),t("modeChange",s)};return{close:()=>de(this,null,function*(){(!n.beforeClose||(yield n.beforeClose()))&&(t("update:modelValue",!1),t("close"))}),changeMode:u,show:()=>u("normal"),hide:()=>u("minimized"),active:()=>{++e.zIndex}}}function $e(n,e,t,u){return Vue.computed(()=>{var l;const r=typeof n.draggable=="boolean"?!n.draggable:!!((l=n.draggable)!=null&&l.disabled);return S(b({},VtjUtils.isObject(n.draggable)?n.draggable:{}),{disabled:r,target:u,selector:".x-panel__header",onStart(o){e.dragging=!0,t("dragStart",o)},onMove(o){t("dragging",o)},onEnd(o){if(e.mode==="maximized")return;const{x:i,y:s}=o;e.left=i,e.top=s,e.dragging=!1,t("dragEnd",o)}})})}const Ne={key:0,class:"x-dialog__modal"},re=Vue.defineComponent({name:"XDialog",__name:"Dialog",props:le,emits:["update:modelValue","open","close","maximized","minimized","normal","modeChange","dragStart","dragging","dragEnd"],setup(n,{expose:e,emit:t}){const u=n,r=Vue.ref(),{state:l,maximized:o,minimized:i,normal:s}=xe(u,r),{styles:c,classes:V,wrapperClass:p}=Ee(u,l),{changeMode:m,active:h,close:y,show:d,hide:_}=ze(u,l,t),z=$e(u,l,t,r);return Vue.watchEffect(()=>{u.modelValue&&t("open")}),e({state:l,maximized:o,minimized:i,changeMode:m,show:d,hide:_}),(w,$)=>u.modelValue?(Vue.openBlock(),Vue.createBlock(Vue.Teleport,{key:0,to:"body"},[Vue.createElementVNode("div",{ref_key:"wrapper",ref:r,class:Vue.normalizeClass(["x-dialog__wrapper",Vue.unref(p)])},[u.modal?(Vue.openBlock(),Vue.createElementBlock("div",Ne)):Vue.createCommentVNode("",!0),Vue.withDirectives((Vue.openBlock(),Vue.createBlock(Vue.unref(T),{class:Vue.normalizeClass(["x-dialog",Vue.unref(V)]),card:"",shadow:"always",header:{icon:u.icon,subtitle:u.subtitle},width:"800px",height:"600px",footer:{justify:"space-between",flex:!0,align:"center"},style:Vue.normalizeStyle(Vue.unref(c))},{title:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(u.title),1)]),actions:Vue.withCtx(()=>[Vue.renderSlot(w.$slots,"actions"),u.minimizable?(Vue.openBlock(),Vue.createBlock(Vue.unref(x),{key:0,icon:Vue.unref(VtjIcons.Minimize),size:"small",mode:"icon",type:"primary",background:"hover",onClick:$[0]||($[0]=se=>Vue.unref(m)("minimized"))},null,8,["icon"])):Vue.createCommentVNode("",!0),u.maximizable?(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:1},[Vue.unref(s)?(Vue.openBlock(),Vue.createBlock(Vue.unref(x),{key:1,icon:Vue.unref(VtjIcons.Maximize),size:"small",mode:"icon",type:"primary",background:"hover",onClick:$[2]||($[2]=se=>Vue.unref(m)("maximized"))},null,8,["icon"])):(Vue.openBlock(),Vue.createBlock(Vue.unref(x),{key:0,icon:Vue.unref(VtjIcons.Popup),size:"small",mode:"icon",type:"primary",background:"hover",onClick:$[1]||($[1]=se=>Vue.unref(m)("normal"))},null,8,["icon"]))],64)):Vue.createCommentVNode("",!0),u.closable?(Vue.openBlock(),Vue.createBlock(Vue.unref(x),{key:2,icon:Vue.unref(VtjIcons.RawClose),size:"small",mode:"icon",type:"danger",background:"hover",onClick:Vue.unref(y)},null,8,["icon","onClick"])):Vue.createCommentVNode("",!0)]),footer:Vue.withCtx(()=>[Vue.renderSlot(w.$slots,"footer",{},()=>[Vue.createVNode(Vue.unref(k),null,{default:Vue.withCtx(()=>[Vue.renderSlot(w.$slots,"extra")]),_:3}),Vue.createVNode(Vue.unref(k),null,{default:Vue.withCtx(()=>[Vue.renderSlot(w.$slots,"handle"),Vue.createVNode(Vue.unref(ElementPlus.ElButton),{type:"default",size:"default"},{default:Vue.withCtx(()=>[Vue.createTextVNode("取消")]),_:1}),Vue.createVNode(Vue.unref(ElementPlus.ElButton),{type:"primary",size:"default"},{default:Vue.withCtx(()=>[Vue.createTextVNode("确定")]),_:1})]),_:3})])]),default:Vue.withCtx(()=>[Vue.renderSlot(w.$slots,"default")]),_:3},8,["header","class","style"])),[[Vue.unref(ue),Vue.unref(z)]])],2)])):Vue.createCommentVNode("",!0)}}),ae=[G,E,I,K,x,Q,k,R,T,re],Pe="0.5.3",ie=F(ae).install;a.Draggable=L,a.INSTALLED_KEY=B,a.IS_DRAGGING_CLASS_NAME=v,a.IS_RESIZING_CLASS_NAME=C,a.NOOP=D,a.XAction=x,a.XActionBar=Q,a.XContainer=k,a.XDialog=re,a.XHeader=R,a.XIcon=E,a.XMenu=I,a.XPanel=T,a.XSimpleMask=K,a.XStartup=G,a.actionBarProps=J,a.actionProps=O,a.components=ae,a.containerProps=ee,a.default=ie,a.dialogProps=le,a.getSizeValue=g,a.headerProps=te,a.iconProps=q,a.iconSizeMap=Y,a.install=ie,a.makeInstaller=F,a.omit=P,a.panelProps=ne,a.parseSize=N,a.pick=j,a.useDisabled=M,a.useDraggable=be,a.useIcon=A,a.useIconProps=Z,a.useResizable=ke,a.vDraggable=ue,a.version=Pe,Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
