function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./Editor-BKlikwSl-DGrNxonv.js","./monaco-editor-DioPL3jn.js","./monaco-editor-BoaUnmrp.css","./@vue-YzzUp3ER.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{c as ht,d as de,e as Ue,f as Bt,g as wl,h as It,i as nt,j as Tt,k as bt,l as st,m as ot,b as ae,n as _e,o as kl,p as _l,q as ve,r as Sl,s as xl,t as Cl,u as xt,v as Vl,w as Ct,x as jl,y as El,z as Al,E as zl,A as Ft,B as Wt,a as Ze,C as Pl,D as Lt,F as Dl,G as we,H as ft,I as Jl,J as $l,K as Rl,L as Bl,M as Il,N as Tl,O as Fl}from"./element-plus-CO97OAYw.js";import{i as Wl,a as Ll,p as Ol,s as Nl,r as Ul,b as Ml,c as Hl,$ as ql,k as Se,W as yt,o as Ql,d as Zl,L as Kl,M as Gl,e as Yl,f as Xl,y as ea,V as ta,R as la,g as it,h as fe,j as P,v as aa,l as Ot,m as Nt,n as Ut,I as O,Q as G,q as Mt,t as X,u as na,w as rt,x as sa,z as oa,C as ia,A as ra,D as ua,P as ut,J as da,G as ca,E as dt,F as Ie,N as ma,K as pa,S as Vt,T as va,U as ga,X as Te,Y as ha,Z as jt,_ as ba,a0 as Ht,a1 as fa,a2 as Ke,a3 as qt,a4 as be,a5 as Qt,a6 as ya,a7 as wt,a8 as xe,a9 as Zt,aa as Ge,ab as Kt,ac as Gt,ad as wa,ae as De,af as ka,ag as Qe,ah as _a,ai as Sa,aj as xa,ak as Et,al as ct,am as At,an as Ca,ao as Va,ap as ja,aq as We,ar as Ea,as as Aa,at as za,au as Yt,av as Pa,aw as Da,ax as Ja,ay as $a,az as Ra,aA as Ba,aB as Ia,aC as Ta,aD as Fa,aE as Wa,aF as La,aG as Oa,aH as Na,aI as Ua,aJ as Ma,aK as Ha,aL as qa,aM as Qa,aN as Za,aO as Xt,aP as Ka,aQ as Ga,aR as Ya,aS as Xa,aT as en,aU as tn,aV as ln,aW as an,aX as nn,aY as sn,aZ as on,a_ as rn,a$ as un,b0 as dn,b1 as cn,b2 as el,b3 as mn,b4 as pn,b5 as vn,b6 as gn,b7 as hn,b8 as bn,b9 as fn,ba as yn,bb as wn,bc as kn,bd as _n,be as Sn,bf as xn,bg as Cn,bh as Vn,bi as jn,bj as En,bk as An,bl as zn,bm as zt,bn as Pn,bo as Dn,bp as Jn,bq as $n,br as tl,bs as Rn,bt as Bn,bu as In,bv as Tn,bw as Fn,bx as Wn,by as Ln,bz as tt,bA as On,bB as Nn}from"./index-DYw8B707.js";import{_ as Un}from"./monaco-editor-DioPL3jn.js";import{d as V,o as u,c as C,Z as B,j as S,_ as c,U as b,u as l,a as x,S as f,X as j,r as _,Y as q,F as $,a9 as I,m as mt,f as H,O as N,P as Me,aa as He,a5 as Be,i as ll,I as al,at as nl,av as Mn,n as Ee,bD as Ve,J as Je,an as Pt,V as Pe,$ as $e,W as sl,Q as ie,a1 as Le,w as Hn,ab as qn,M as ke,bB as pt,aU as Qn,s as vt,G as Zn,ad as ol,ae as il,aC as rl,af as Kn}from"./@vue-YzzUp3ER.js";import{n as Fe,p as Gn,q as Yn}from"./@vueuse-B-y5qAz1.js";import{n as Xn,D as es,T as ts,P as ls,k as ul,j as as,M as dl,E as kt,B as ns,d as ss,U as os}from"./@element-plus-C4Q-KdIO.js";const mu="/vtj/",pu="LCDP",vu="低代码开发平台";/**!
 * Copyright (c) 2024, VTJ.PRO All rights reserved.
 * @name @vtj/designer 
 * @author CHC chenhuachun1549@dingtalk.com 
 * @version 0.7.28
 * @license <a href="https://vtj.pro/license.html">MIT License</a>
 */const is="0.7.28",Dt={width:390,height:844},Jt={width:1180,height:820},Ce=/^[A-Za-z_$][\w_-]*$/,rs=["click","dblclick","mouseenter","mouseleave","mousedown","mouseup","mouseover","contextmenu"],us=["keydown","keyup","keypress"],ds=["GET","POST","PUT","PATCH","DELETE","JSONP"],cs=["stop","prevent","capture","self","once","passive"];var he=(d=>(d.Block="block",d.Node="node",d))(he||{});const _t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAQd0lEQVR4nO2dCXRVxRnHf/clIPsekBgIS1hFdqVoZbGLFNTWWgQ3bLVurRYJcTuntbW22qooKKWl2toWquygIFa01doqmBBWWcomIkhACLIKyXvcnu/eefiSNzd57y4vAfI/553wuPfNzJ3/nW9m/t83M4Yx6iTVGOlAC6AD0Bs4F2gGtFT/lmtNgLpABDgMFAN7gCJgH3AQ2ACsAz5V91RbpFfDguUAg4EewBCgLdAQqJXAb5sD7RyuHVGfpcBy4AOgADjkc/k9obq0kP7AN4CrgK7qrQ8aJrALeAt4Q/3dV7XVULWEtAauBq5ThNSpqoIo7AReBWYA/6mqQlQFId2AW4HRwHmpzjwBSMv5N/BHYAHwRSozTyUhQsS9iohGqcrUI1YDE4GXgROpyDAVhMiIKBe4I0V9QxCQgcCvgdeCzigUcPo/BN4HHjiNyRAMBBYBs4BOQWYUFCFdgIXA80DHgPKoCowE3gHuCirvIAj5AfAmcEUAaVcHZAJTgHlqjuQr/CREJm/PAH8G2pyWVZ0crlbzl8v8TNQvQrLVGP5en9I7XdBV9S0/9qu8fhDSC1isZI6zEaKjTQYe8aM+vSZwqeq8u5+lZMTiYeA5oLaXRLwQMhSYe5b0F4niR8BUL6S4VXsvAWYCGZ6Kf2bi+8oVcDuQ9KzbTQvpqQS4GjKcIVrdU25+mCwhbZWuk+WhsGcLxgEPJvusyRAi84xpNR14UhD9a1QyP0iGkEeBQcGV/YyE1O+zwPnJ/CARSEc1NrBin9kQtftFoHEiT5kIIeLj/s3ZXqsecSHwUCJJVEZIGjAJaFXVT3QG4D7ga5U9RmWEiHI7/GyvSZ8QUkPhhhUlVxEhLZUcUAP/ILFld7slJK9GFgkEuRXEjjkSIh6/O0+fZzyt0EK5tLVwIiSvMltXA0+4yWluoiOkqwrVqUFwqA/ckygholI2SCUZZhjM4/bflOYrn1IwT4AZSW3eSlLpUP4/yxPSKtWtwyyBnPPgioHQtpX93Zd0TVXZEbviddcJQ59OMHwAZDTxL+8EIWFRN5a/tTwh31UxtymBtIrhF8GiBwwWPmDw2oMGg3t5rxghIi0NLugAbcRJUKoIiEUYbhwCrz9k57sgz6BvZ7u1pBBjlPk6hdjIRSHnXeV8ChzmF3DlJfDyWIP653yZ28ZP4dKHTfYdBCPNHRndsuGpmwwGdYNjJ2DiYpMnFtheI8OwTWPnLCh43KBR3S9/u/0z+N4Ek8KNYKQu9PvbKkDEQmwL6QP0S0UJhIxhA2D6PWXJEHTNhN7t7Tc46XQj0KQRzBhrMLwPNKgDLRvDY9cZfFOeLtrywjC0B2XIELTLgNm5Br072603RRgZm00sIcNSsSRAyBjSF6b/xIirEMHRE7D7gEtfZhiG9YGe2fGXLuwY41A1oOhzfRLtW8LMcQbnd0wZKd9UC40shGL+Xhl0zkLGwJ4w816D5g7juKlvwbqPwEhkvVRs2thPcfWFhvb62h02ERZqw+vL4e//1afVuTXMGW/QpV1KSMmIDaGKEtI+GSeKGwgZ/brZZLR08AzMWgY/e8l03TqyW8PXesRf2roH3t3w5aI46UdKwnDnVJNXC/XJiemcPd4gp03gpMhr8tXol+ijDwly7iFk9Opiv3VtmuvvmZsPtzxnWp2wm85cCBnRB5pr9IXFK2F/sXImKBjpcOQY3DTJ5LWV+iQvaGOTkp0Z+Ojr8mjoUJSQnkHlJG9X9xyYO96wOk0dFq6AHzxncvS4XVFJ52FCWh24+qJ4cxU5Ca8WmpZNK39VzOKhIzDmWZO31+nT7t0OZuUaZGYESkrbaOB2SMVmBeIrlwfo0h7mjTfo6ODikrdzzCSTw8eS7zdOIQzd28JXNCs3pO94f6PzGl6jNhQfhOsnmrz3P/09F+XAy7kGGc0CmzzWV2tQLEJaqD7EVwgZHdvA/DyDLpn6lN9aCzc/a/L5YfdkWJ15BIb1soe55TEv3+SYpF9BvySkFO2D6yeZrNyuv2dQV3hpnEHTRvZcJwB0jRIieko9X8kogQ5ZMC/PoJvDss531sMNE032H7QrxDVOQq168F2NuZIh9PyCsn2HE4xzYMduuPZpk3U79Td9vQdMG2vQqF4gpAgPTUPKi+XWWMRByDivpW13ezosZ/lgC9w4yWRvsUcysGWRAZ3UPKMclm6CDTsSD5gVUrbssEnZskd/jwwc/ibqQl3fSZGl4e1DakWQLxAyWjW3Z7v9HIygmIRRT5vs2mtXgBdE9SmZe6RpTJKYq8gJe5ibKEQyWb8NrnnS5KPP9D/6dn948W6DunV8JUVc5i1Dfi3GFDKaNYaX7zUY2Fl/z4ZdMPoZk493eyfDwklo2Bgu7x1/af8ReH1VYuaqPISUNZvhe0+ZfLJff8/Ir8Cff2xwTm3f3AZS0mYhxYwnCBkNG9id3lCH6aWYgJETTDZ97BMZ2Obqki5o+6klq2H7LveDBaMurNhoi427HWSW0RfDCz8ySE/3hRSplcyQ2lXHNaQg9evB9LEGlzvMZiwV9SmTddv8U1Etc2XYc4+QxiTN+cB0sRigLISU/HU2KZ85bFFz46Uw9Q5FijcnV3qUkBZuUzBPQnoaTLnd4CoHnViavDzQ6s0+S9oRaJkBwzXm6qO98M46f/Y6ElLeXwM3PGty4Kj+nluGwiOjDatMcX6X5HCutz6kFAb1gDEO08pPDyj/woYA/Aul8PULIEsjxSxaAcX73c36dRBS3iyAMZNNDjvsfJI7Avp2scvlAVYfohHBE0QELu+lH8KImbr2GdNq8ob7HLSw3sJaemW3NAxzlml0Eq+oA4veh9ummhQfiU+rTi3VWr2ZrXohT0mY0NbB4P1qnsl7+f6TYSEM7VrDEM0AYvUOyN/i/9Zs1tC5Dsx8A/70tv6erOae34JwyNOWdwbscNjyK3eEQe+eAUnXYfttbKFRdhcWmhw/7FIxrgzH4VuD4Iav6u/bVeytA5Hd7UJqj0J3SIf5+SZhTRvrrqSTCzra8rtfkIGEKLvXDIh/G4+VJC6VJAt5hqF9Ydo9BplN4398vNTuuzzm/VlIbRjpDrVg2Qb45Vz9myHu0Hn3++wOVcruAI2y+98N8OF2/82VkHFJT5hRgafzyYWwcpMnEUoq8dOQ2r3TFSy7mgaPzoDHFuhTyGkF8+4z6OqXOzSCNcQuHxwhmP2BaanMFSm7yULI6NvV1uacPJ3P/xMemWladZGMTFMO4m3ZJUV3EAcSg/XwafDT6SYTF+t/Ij7q+fcbdMn2RoqYqzoN4Dua0dWeg7BkjZ8yqU1Gz072C6UzU4KX3oO7nzeJRDz3WzJg3ivV6SAMJA4piGlA3l9MJr+h/5n4qOfeZ9C5rQdSSuGiTtBHI1z+60PYUeRf/2F5OjvaZc52GEnOWQa3TTEt/7wPcx5pIQdCapNhzxBSIibkvmjygsOw8PwsmDXesHwlrtyhJlzV31nZlf7Fg8n4Mpvj0Dkb5uYZlsnVQYIjbplicsyl21mD9SJshNSOzw6iQHIQUkojcPcfTaY5bLTaKxvm5CUfOCA6UcMmcEXf+Gtbimzvox/mSsjIaav6PQfHxOJVth/+8FEPbud4iMHdGfJ7+20h5UQp3PUHk9nL9Pf0aWcHo2W1SoKUsK3sdtJEHr+yHD53G1wXAylL+yw70uR8h70qpJ+6aaLJwSO+kiEQV1pJdGK41M+UpQlLBMmtk00WOsQ9DciBmbkG52YkGDhgwKiB8cqutMgFBfaw24u5EjKyzrXNVG9N5KPg3xtst3PxId/JKFVbn596p1b4mrwKsREhTpq2NfrR4OLOtkOrRdOKSRGJP7OV6Gbx11Zth8Jt3syV5enMgFnjDKv16rB0M4yaYLLvcx/czvGQAwM+JIaQpZ5lMQ2EFIkokbfqPxv19wzpDjPGGTRpXIE7NGJHJLbWDD1fKTD54rB7cyVkNG1im1AnT6fldp5gsmd/IGQIlkUVk+hjFHiZIFYEeYB9B2w/+vJt+hulsl8aa9CgfjwplrKbbo+uyuPIcZi/3B7qurFWklcD8XT+xGBwN/0963fans5Pinz0dMbj1Lg0SsghdTpAIJAH2b3XJuXDT/Q5fKt3DCmxbTUCHVrDZRplV2z6+iSiSmIhZrBeXTsKf5jGyYUavUkEytZPAl0vIkrfv6JfYhv6PwLLUgUObFNv26bd+nuu7AeTbzVID8V43kTZ7QPNNBrSPHHTliTfmVuhp2nwu9sMK4JEB/HnjJQYra2BL96ReeDa6JdYQpaoIXBgkAfbuN1+67Y5SJo3D4b+nWKWoaVLKKeDVLLWpZBYCiP6w/cH6y+LS0HKuGpTQP6cspgZ23/HElKsdhgNFEKK+NdHTzLZ6aCi1a6ltE/DLuqWong1WUJ8dha5JOSkPUHVQRYLSUhpQRBu53gcjV3OhmZsMt2zVzgByIMWrFeklPPGyIx7xRZ7GGu1i3T4wxLKBELvPwwTF6m5h5sCpMGba+wJbCyk1V03yeS9tSlbYyh9R5nxZ5rR4+ex33eqLYQc3h//IJNHiaV9ax00bWBw0oRFhTDur2UXfIqafPQYvFIIoZBhEZg3zSR/o/shqKS9cw98XAz9OthL6wq22v7yd9ekdMHneGBzmbJpzg8ZpXYdTQmsCWEte3Hm3gO2qdKJddbIy1RtOux9PmD1T6XQvb3tSFu+FfbsC2yeoUOhWvFcRjzSEVJXTVQCW8RTHlblnLQru6IRU3Tk5YeieyrNUpV3ekB+eGfcDPyt/FXd/FbGxRNSWTKpYCMBb5t1n8/hPaImyDwpxWTIUUpzdBecBIeZUbGrBoHgcYnJSIYQsWu/CELfqoGliMx2qoaKJLl/qGPjauAfpMf6WUV7wlemkcrOZw7LVmrgAhPVgMkRlRGytWYjTN8gXqHHKkssES/C8zWmyzPCamfwSiN8EiEkorY23VT1z3Xa4qfquL1KkaifbZfapTR1mxadOZiTzLwuGcfn20p7qUHiWKlOcEt4BWKynugp6tiKGlSObUoX3JtMXbkJDXhYEVMDZxSpzUQ3J1tHbkPLZMTwlxpCtNinDu0vcPNjt4SE1XHcf3L5+zMV0jKuTXREpYOX4MsSNfJ6+myt/XKQSfR3YkN63MDr0pawGnkldHrMGYxCdc6KZ4Xcr7VGv1F2M9ColWoKOfR+hF8TZz+P756htprN9zHN6oxSdU7hdZ7WaZaD3wfcS6TUN1SLOZN9KavVxpW/dXO8akXwmxBUWOpDyqauCiD9qkSJImGo187bCUEQEsUSdbz3A3426SrEEhUiJWbqQFDFCJIQgewK8oTacfN36vvpBmnl10s8uCyFD7rsujCgINFDnTl+bex+59UUMtP+vQr40AYkBIFUExKFbFl5gzqLKacqCuCAQ6pveEGZqNQe8VKFhEQhiwwuA66RXVj93JAzCRxTSwJmqWBzX5aJu0VVExILWZ4vCwQuVvY6M9EDfZNERAmABao1vKP6iWpREdWJkFjUUgHfMhjopD79Vb9TW20YWdlChOPK5JSoRflr1NLjfDVfcr8LUoDwed8c3yCzYFmUIB9BM3U6prQi+UjrkY9s4CnXZGdu0dWkD5CwJZFwxO0sw20JLJCFdPIJfKmFJwD/B4g2wB0X86iqAAAAAElFTkSuQmCC",ms=["title","src"],ps={key:1},vs=V({name:"LogoWidget",inheritAttrs:!1,__name:"index",props:{icon:{default:_t},text:{default:"VTJ"},link:{}},setup(d){const e=d,t=()=>{e.link&&(location.href=e.link)};return(a,n)=>(u(),C("div",{class:"v-logo-widget",onClick:t},[e.icon?(u(),C("img",{key:0,title:e.text,class:"v-logo-widget__icon",src:e.icon},null,8,ms)):(u(),C("span",ps,B(e.text),1))]))}}),gs={class:"v-empty-widget"},hs=V({name:"EmptyWidget",__name:"index",setup(d){return(e,t)=>(u(),C("div",gs,"EmptyWidget"))}});function cl(){const d=re(),e=S(()=>d.project.value?.dependencies??[]),t=S(()=>d.project.value?.apis??[]);return{engine:d,dependencies:e,apis:t}}function Ae(d,e){const t=S(()=>fl.getWidgets(l(d),l(e)).filter(n=>!n.invisible)),a=_();return{widgets:t,widgetsRef:a}}function ml(){const d=re();return{span:S(()=>{const e=d.skeleton?.skeletonRef.leftWidth||400,t=Math.min(Math.floor((e-50)/120),24);return Math.floor(24/t)}),engine:d}}function bs(){const d=re(),e=S(()=>d.project.value?.blocks??[]);return{engine:d,blocks:e}}const fs=(d=[])=>d.map(e=>e.name);function ys(){const d=re(),{components:e,groups:t,componentMap:a}=d.assets,n=Le({}),i=S(()=>{const y={};return t.value&&t.value.forEach(g=>{y[g.name]=g}),y}),s=S(()=>t.value?t.value.map(y=>({label:`${y.label} (${y.count})`,name:y.name,disabled:!y.children?.length})):[]),o=_(s.value[0]?.name),r=_(""),p=S(()=>i.value[o.value]);Hn(()=>{const y=s.value.reduce((g,h)=>(g[h.name]=fs(i.value[h.name].children),g),{});Object.assign(n,y)});const m=S(()=>{const y=r.value.toLowerCase();return!y||!e?[]:e.filter(g=>g.name.toLowerCase().includes(y)||g.label?.toLowerCase().includes(y))});return{components:e,groups:t,componentMap:a,groupMap:i,tabs:s,model:n,currentTab:o,currentGroup:p,searchKey:r,searchResult:m}}function oe(){const d=re(),e=S(()=>d.current.value),t=S(()=>d.simulator.renderer?.context??null),a=S(()=>d.isEmptyCurrent.value);return{engine:d,current:e,isEmpty:a,context:t}}function ws(d,e,t){const a=re();a.simulator.init(d,e,t);const n=S(()=>a.simulator.designer.value),i=S(()=>lt("hover",n.value?.hover.value)),s=S(()=>lt("dropping",n.value?.dropping.value)),o=S(()=>lt("selected",n.value?.selected.value));return H(a.changed,()=>{n.value?.updateRect()}),{designer:n,dropping:s,hover:i,selected:o}}function ks(d,e=!0){const{top:t,height:a,width:n,left:i}=d||{};if(a>100&&n>200)return"inner";let s,o;return o=t>30?"top":"bottom",s=e||i<300&&n<300?"left":"right",[s,o].join("-")}function _s(d){const{rect:e,type:t}=d,{left:a,width:n,top:i,height:s}=e,o={left:a,width:n,top:i,height:s};switch(t){case"left":o.left=0,o.width=0;break;case"right":o.left=o.left+o.width-4,o.width=0;break;case"bottom":o.top=o.top+o.height-4,o.height=0;break;case"top":o.height=0;break}return o}function lt(d,e){if(!e)return null;const{left:t,top:a,width:n,height:i}=d==="dropping"?_s(e):e.rect,s={left:`${t}px`,top:`${a}px`,width:`${n}px`,height:`${i}px`,visibility:n||i?"visible":"hidden"};return{...e,style:s,position:ks(e.rect,d!=="selected")}}function ye(){const d=re(),e=S(()=>d.simulator.designer.value),t=S(()=>e.value?.selected.value),a=S(()=>G(t.value?.model));return{engine:d,designer:e,selected:t,isSelectBlock:a}}function Ss(d,e){const t=_(""),{selected:a,isSelectBlock:n}=ye(),i=S(()=>a.value?.model.id),s=S(()=>{const r=pt(d),p=pt(e),m=[];if(!r)return m;const y=p?.__contextRefs[i.value||""],g=p===y||n.value?[]:Object.keys(y?.context||{}).filter(D=>!["context","ref"].includes(D)).map(D=>`this.context.${D}`);g.length&&m.push({title:"上下文",items:g});const h=r.inject.map(D=>`this.${D.name}`);h.length&&m.push({title:"注入",items:h});const v=r.props.map(D=>typeof D=="string"?`this.$props.${D}`:`this.$props.${D.name}`);v.length&&m.push({title:"属性",items:v});const w=Object.keys(r.state).map(D=>`this.state.${D}`);w.length&&m.push({title:"状态",items:w});const k=Object.keys(r.computed).map(D=>`this.${D}.value`);k.length&&m.push({title:"计算属性",items:k});const E=Object.keys(r.methods).map(D=>`this.${D}`);E.length&&m.push({title:"方法",items:E});const A=Object.keys(r.dataSources).map(D=>`this.${D}`);A.length&&m.push({title:"数据源",items:A});const z=Object.keys(p?.$refs||{}).map(D=>`this.$refs.${D}`);return z.length&&m.push({title:"refs",items:z}),m}),o=S(()=>{if(!t.value)return s.value;const r=t.value.toLowerCase(),p=[];return s.value.forEach(m=>{const y=m.items.filter(g=>g.toLowerCase().includes(r));y.length&&p.push({title:m.title,items:y})}),p});return{keyword:t,options:s,searchResult:o}}const Ne=[{name:"StringSetter",label:"文本"},{name:"ExpressionSetter",label:"表达式"}];function xs(d){const e=re(),t=S(()=>{const r=d.value?.model||null;return G(r)?null:r}),a=_();H(t,async r=>{r?.from?a.value=await e.assets.getBlockMaterial(r.from)||void 0:a.value=void 0},{immediate:!0});const n=S(()=>t.value?[{name:"key",setters:Ne,value:t.value.getPropValue("key")},{name:"ref",setters:Ne,value:t.value.getPropValue("ref")},{name:"class",label:"class",setters:Ne,value:t.value.getPropValue("class")},{name:"children",label:"文本",title:"如设置组件文本，将清空子组件",setters:Ne,value:Array.isArray(t.value.children)?"":t.value.children}]:[]),i=S(()=>{if(!t.value)return[];const r=a.value||e.assets.componentMap.get(t.value.name);return r?(r.props||[]).map(p=>({...p,value:t.value?.getPropValue(p.name)??p.defaultValue})):[]}),s=r=>n.value.some(p=>p.name===r)||i.value.some(p=>p.name===r)||r==="style",o=S(()=>t.value?Object.keys(t.value.props).filter(r=>!s(r)).map(r=>({name:r,setters:"InputSetter",value:t.value?.getPropValue(r)})):[]);return{commonProps:n,componentProps:i,customProps:o,node:t,change:(r,p)=>{t.value&&(r==="children"?t.value.setChildren(p):t.value.setProp(r,p))},addCustom:r=>{r&&t.value?.setProp(r,"")},removeCustom:r=>{t.value?.removeProp(r)},isExist:s}}function te(d,e="提示"){return we.warning({title:e,message:d})}async function Re(d){return await ft.confirm(d,"提示",{type:"warning"}).catch(()=>!1)}function ue(d,e="success"){return Ze({message:d,type:e})}function se(d,e,t=!1){let a=!0;try{d.type==="JSExpression"?Qe(d,e,t,!0):ja(d,e,t,!0)}catch(n){a=!1,we.error({title:"代码错误",message:n.message})}return a}function pl(){const d=re(),e=S(()=>d.simulator.designer.value),t=S(()=>d.current.value?d.history.value:null),a=S(()=>t.value?.items.length||0),n=()=>{e.value?.cleanHelper(),t.value?.forward()},i=()=>{t.value?.backward(),e.value?.cleanHelper()},s=p=>{e.value?.cleanHelper(),t.value?.load(p),ue("已载入历史记录","success")},o=S(()=>a.value<=1?!0:(t.value?.index||-1)<=0),r=S(()=>a.value<=1?!0:(t.value?.index||-1)>=a.value-1);return{engine:d,history:t,total:a,forward:n,backward:i,load:s,forwardDisabled:o,backwardDisabled:r}}function Ye(){const d=re(),e=S(()=>d.project.value);return{engine:d,project:e}}function Cs(d){const e=re(),t=S(()=>{const o=d.value?.model||null;return!o||G(o)?null:o}),a=_();H(t,async o=>{o?.from?a.value=await e.assets.getBlockMaterial(o.from)||void 0:a.value=void 0},{immediate:!0});const n=S(()=>{if(G(t.value))return[];const o=t.value?.events||{};return rs.map(r=>({name:r,event:o[r]}))}),i=S(()=>{if(G(t.value))return[];const o=t.value?.events||{};return us.map(r=>({name:r,event:o[r]}))}),s=S(()=>{if(!t.value||G(t.value))return[];const o=t.value.events||{};return(a.value?.events||e.assets.componentMap.get(t.value.name)?.events||[]).map(r=>{const p=typeof r=="string"?r:r.name;return{name:p,event:o[p]}})});return{mouseEventList:n,keyboardEventList:i,componentEventList:s}}const Vs=(d,e)=>new tl({name:d,value:void 0,iterator:e}),js=(d="modelValue")=>new tl({name:"vModel",value:void 0,arg:d});function Es(d){if(!d)return[];const{props:e=[],events:t=[]}=d;if(e.length&&t.length){const a=t.filter(n=>(typeof n=="string"?n:n.name).startsWith("update:")).map(n=>n=typeof n=="string"?n:n.name);return a.length?e.filter(n=>a.some(i=>i.includes(n.name))):[]}return[]}function As(d){const e=re(),t=S(()=>{const y=d.value?.model||null;return G(y)?null:y}),a=y=>S(()=>t.value&&(t.value.directives||[]).find(g=>g.name===y)||Vs(y)),n=()=>S(()=>{if(!t.value)return[];const y=e.assets.componentMap.get(t.value.name||"");return(y?Es(y):[]).map(g=>(t.value?.directives||[]).find(h=>h.name==="vModel"&&h.arg==g.name)||js(g.name))}),i=a("vIf"),s=a("vShow"),o=a("vBind"),r=a("vFor"),p=n(),m={vIf:i,vShow:s,vBind:o,vFor:r};return{engine:e,node:t,vIf:i,vShow:s,vBind:o,vFor:r,vModels:p,onValueChange:(y,g)=>{const h=m[y];t.value&&(g?(h.value.value=g,t.value.setDirective(h.value)):(h.value.value=void 0,t.value.removeDirective(h.value)))},onForChange:(y,g)=>{if(t.value){if(y==="value"){g?(r.value.value=g,t.value.setDirective(r.value)):t.value.removeDirective(r.value);return}(y==="item"||y==="index")&&(r.value.iterator={...r.value.iterator,[y]:g||void 0},t.value.setDirective(r.value))}},onModelChange:(y,g)=>{if(!t.value)return;const h=parseInt(y),v=p.value[h];v&&(g?(v.value=g,t.value.setDirective(v)):(v.value=void 0,t.value.removeDirective(v)))}}}function zs(){const{engine:d,project:e}=Ye(),t=S(()=>e.value?.apis||[]);return{engine:d,project:e,apis:t}}const Ps={class:"v-switcher-widget"},Ds={key:1},Js=V({name:"SwitcherWidget",inheritAttrs:!1,__name:"index",emits:["click"],setup(d,{emit:e}){const t=e,{engine:a}=oe(),n=S(()=>a.project.value?.name),i=S(()=>a.project.value?.currentFile?.title),s=()=>{t("click",a.project.value)};return(o,r)=>(u(),C("div",Ps,[c(l(de),{size:"small",round:"",onClick:s},{default:b(()=>[c(l(Ql),{class:"v-switcher-widget__back"}),x("span",null,B(n.value),1),i.value?(u(),f(l(ht),{key:0,direction:"vertical"})):j("",!0),i.value?(u(),C("span",Ds,B(i.value),1)):j("",!0)]),_:1})]))}}),$s={class:"v-toolbar-widget"},Rs=V({name:"ToolbarWidget",inheritAttrs:!1,__name:"index",props:{preview:{type:Boolean}},setup(d,{expose:e}){const t=d,{forward:a,backward:n,forwardDisabled:i,backwardDisabled:s}=pl(),o=_("pc");return e({mode:o}),(r,p)=>(u(),C("div",$s,[c(l(Bt),{size:"small",modelValue:o.value,"onUpdate:modelValue":p[0]||(p[0]=m=>o.value=m)},{default:b(()=>[c(l(Ue),{label:"pc",value:"pc"},{default:b(()=>[c(l(Zl))]),_:1}),c(l(Ue),{label:"mobile",value:"mobile"},{default:b(()=>[c(l(Kl))]),_:1}),c(l(Ue),{label:"pad",value:"pad"},{default:b(()=>[c(l(Gl))]),_:1})]),_:1},8,["modelValue"]),j("",!0),c(l(wl),null,{default:b(()=>[c(l(de),{type:"default",size:"small",onClick:l(n),disabled:l(s)||!!t.preview},{default:b(()=>[c(l(Yl))]),_:1},8,["onClick","disabled"]),c(l(de),{type:"default",size:"small",onClick:l(a),disabled:l(i)||!!t.preview},{default:b(()=>[c(l(Xl))]),_:1},8,["onClick","disabled"])]),_:1})]))}}),Bs={class:"v-actions-widget"},Is=x("span",null,"发布",-1),Ts=V({name:"ActionsWidget",inheritAttrs:!1,__name:"index",props:{coder:{type:Boolean,default:!0}},setup(d){const{engine:e,designer:t}=ye(),a=_(!1),n=()=>{e.current.value?(a.value?e.skeleton?.getWidget("Previewer")?.widgetRef.refresh():(t.value?.setSelected(null),e.simulator.refresh()),ue("刷新完成","success")):ue("请先打开文件","warning")},i=async()=>{e.current.value?(a.value&&(e.skeleton?.closePreview(),a.value=!1,await qt(1e3)),t.value?.setSelected(e.current.value)):ue("请先打开文件","warning")},s=()=>{if(e.project.value)if(e.current.value){if(a.value){e.skeleton?.closePreview(),a.value=!1;return}e.skeleton?.openPreview(""),a.value=!0}else ue("请先打开文件","warning")},o=()=>{const p=e.project.value;p&&(p.currentFile?p.publish(p.currentFile):ue("请先打开文件","warning"))},r=p=>{const m=e.project.value;m&&(p==="current"?o():m.publish())};return(p,m)=>(u(),C("div",Bs,[j("",!0),j("",!0),c(l(de),{onClick:s,type:a.value?"warning":"default",size:"small",title:"预览"},{default:b(()=>[c(l(ea))]),_:1},8,["type"]),c(l(de),{onClick:n,type:"default",size:"small",title:"刷新"},{default:b(()=>[c(l(ta))]),_:1}),c(l(de),{type:"default",size:"small",title:"页面设置",onClick:i},{default:b(()=>[c(l(la))]),_:1}),c(l(ht),{direction:"vertical"}),c(l(Tt),{"split-button":"",type:"primary",size:"small",onClick:o,onCommand:r},{dropdown:b(()=>[c(l(It),null,{default:b(()=>[c(l(nt),{command:"current"},{default:b(()=>[q("发布页面")]),_:1}),c(l(nt),{command:"project"},{default:b(()=>[q("整站发布")]),_:1})]),_:1})]),default:b(()=>[Is]),_:1})]))}}),Fs={class:"v-icon-setter"},Ws={class:"v-icon-setter__content"},Ls={class:"v-icon-setter__list"},vl=V({name:"IconSetter",__name:"icon",props:{modelValue:{default:""},size:{default:"small"}},emits:["change","update:modelValue"],setup(d,{emit:e}){const t=d,a=e,n=_(!1),i=_(t.modelValue),s=_(""),o=S(()=>it[t.modelValue]||t.modelValue),r=S(()=>{const h=Object.entries(it);return s.value?h.filter(v=>v[0].toLowerCase().includes(s.value)):h}),p=h=>{i.value=h},m=()=>{a("change",i.value),a("update:modelValue",i.value),n.value=!1},y=()=>{i.value="",a("change",""),a("update:modelValue",""),n.value=!1},g=()=>{n.value=!0};return(h,v)=>(u(),C("div",Fs,[c(l(_e),{size:t.size,readonly:"",placeholder:"请选择图标","model-value":t.modelValue,"suffix-icon":l(ul),onFocus:g},{prepend:b(()=>[c(l(xe),{icon:o.value},null,8,["icon"])]),_:1},8,["size","model-value","suffix-icon"]),n.value?(u(),f(l(We),{key:0,title:"图标选择器",width:"1000px",height:"600px",cancel:"",submit:"",clear:"",modelValue:n.value,"onUpdate:modelValue":v[1]||(v[1]=w=>n.value=w),onSubmit:m},{extra:b(()=>[c(l(de),{size:"default",type:"warning",onClick:y},{default:b(()=>[q(" 清除绑定 ")]),_:1})]),default:b(()=>[x("div",Ws,[c(l(_e),{size:t.size,"prefix-icon":l(dl),clearable:"",modelValue:s.value,"onUpdate:modelValue":v[0]||(v[0]=w=>s.value=w),placeholder:"请输入查询关键字"},null,8,["size","prefix-icon","modelValue"]),x("div",Ls,[(u(!0),C($,null,I(r.value,w=>(u(),f(l(xe),{icon:w[1],onClick:k=>p(w[0]),class:N({"is-active":i.value===w[0]})},null,8,["icon","onClick","class"]))),256)),r.value.length===0?(u(),f(l(ae),{key:0})):j("",!0)])])]),_:1},8,["modelValue"])):j("",!0)]))}}),Os=V({name:"PageForm",__name:"form",props:{item:{},parentId:{}},setup(d){const e=d,{project:t}=Ye(),a=S(()=>e.item?"编辑页面":"新增页面"),n=()=>({dir:!1,name:"",title:"",icon:"",mask:!0,hidden:!1,raw:!1}),i=_(e.item||n()),s=[{label:"页面",value:!1},{label:"目录",value:!0}],o=p=>{i.value&&(i.value.name=Kt(p))},r=async p=>t.value?.existPageName(p.name,[p.id])?(te("页面名称已存在，请更换"),!1):(e.item?t.value?.updatePage(p):t.value?.createPage(p,e.parentId),!0);return(p,m)=>(u(),f(l(fe),{title:a.value,width:"800px",height:"500px","form-props":{tooltipMessage:!1},model:i.value,"submit-method":r},{default:b(()=>[c(l(P),{name:"dir",label:"类型",editor:"radio",options:s,props:{button:!0,size:"small"},disabled:!!e.item,required:""},null,8,["disabled"]),c(l(P),{name:"name",label:"名称",required:"",onChange:o,rules:{pattern:l(Ce),message:"名称格式不正确"}},null,8,["rules"]),c(l(P),{name:"title",label:"标题",required:""}),c(l(P),{name:"icon",label:"菜单图标",editor:"none"},{editor:b(()=>[c(vl,{modelValue:i.value.icon,"onUpdate:modelValue":m[0]||(m[0]=y=>i.value.icon=y),size:"default"},null,8,["modelValue"])]),_:1}),c(l(P),{visible:{dir:!1},name:"mask",label:"包含母版",editor:"switch"}),c(l(P),{name:"hidden",label:"隐藏菜单",editor:"switch"}),c(l(P),{visible:{dir:!1},disabled:!!e.item,inline:"",name:"raw",label:"源码模式",editor:"switch",tip:"页面是非低代码开发，不能在线编辑"},null,8,["disabled"])]),_:1},8,["title","model"]))}}),$t=V({name:"VIcon",__name:"Icon",props:{icon:{},label:{},active:{type:Boolean,default:!1},open:{type:Boolean,default:!1}},emits:["click"],setup(d,{emit:e}){const t=d,a=e,n=S(()=>({"is-active":t.active,"is-open":t.open})),i=()=>{a("click")};return(s,o)=>(u(),f(l(Ft),{effect:"dark",placement:"right",content:s.label,"show-after":600},{default:b(()=>[x("div",{class:N(["v-apps-region__icon",n.value]),onClick:i},[(u(),f(sl(s.icon)))],2)]),_:1},8,["content"]))}}),L=V({name:"VPanel",__name:"panel",props:{title:{},subtitle:{},plus:{type:Boolean},back:{type:Boolean},edit:{type:Boolean},remove:{type:Boolean},save:{type:Boolean},header:{type:Boolean,default:!0},collapsable:{type:Boolean}},emits:["plus","back","remove","save","edit"],setup(d,{emit:e}){const t=d,a=e,n=_(!1),i=S(()=>({"is-collapsed":!!n.value})),s=()=>{a("plus")},o=()=>{a("edit")},r=()=>{a("back")},p=()=>{a("remove")},m=()=>{a("save")},y=S(()=>t.header?{content:t.title,subtitle:t.subtitle,icon:t.back?es:void 0,onClickBack:t.back?r:void 0,onClick:t.collapsable?()=>{n.value=!n.value}:void 0}:null),g=h=>{n.value=h};return(h,v)=>(u(),f(l(wt),{class:N(["v-panel",i.value]),border:!1,header:y.value,fit:""},qn({actions:b(()=>[t.plus?(u(),f(l(be),{key:0,size:h.$attrs.size,mode:"icon",icon:l(Qt),background:"hover",title:"新增",onClick:s},null,8,["size","icon"])):j("",!0),t.edit?(u(),f(l(be),{key:1,size:h.$attrs.size,mode:"icon",icon:l(ts),background:"hover",title:"编辑",onClick:o},null,8,["size","icon"])):j("",!0),t.remove?(u(),f(l(be),{key:2,size:h.$attrs.size,mode:"icon",icon:l(ls),background:"hover",title:"清除",onClick:p},null,8,["size","icon"])):j("",!0),t.save?(u(),f(l(be),{key:3,size:h.$attrs.size,mode:"icon",icon:l(ya),background:"hover",title:"保存",onClick:m},null,8,["size","icon"])):j("",!0),t.collapsable?Pe((u(),f(l(be),{key:4,size:h.$attrs.size,mode:"icon",icon:l(ul),background:"hover",title:"展开",onClick:v[0]||(v[0]=w=>g(!1))},null,8,["size","icon"])),[[$e,n.value]]):j("",!0),t.collapsable?Pe((u(),f(l(be),{key:5,size:h.$attrs.size,mode:"icon",icon:l(as),background:"hover",title:"收起",onClick:v[1]||(v[1]=w=>g(!0))},null,8,["size","icon"])),[[$e,!n.value]]):j("",!0),ke(h.$slots,"actions")]),default:b(()=>[ke(h.$slots,"default")]),_:2},[h.$slots.footer?{name:"footer",fn:b(()=>[ke(h.$slots,"footer")]),key:"0"}:void 0]),1032,["class","header"]))}}),Ns={class:"v-tabs__header"},Us={key:0,class:"v-tabs__actions"},Xe=V({__name:"tabs",props:{items:{default:()=>[]},menus:{},modelValue:{},stretch:{type:Boolean},checkable:{type:Boolean}},emits:["update:modelValue","command","remove","action-click"],setup(d,{emit:e}){const t=d,a=e,n=_((t.modelValue||t.items[0]?.name)??"");H(n,()=>{a("update:modelValue",n.value)}),H(()=>t.modelValue,r=>{n.value=r});const i=r=>{a("command",r)},s=r=>{a("remove",r)},o=r=>{a("action-click",r)};return(r,p)=>(u(),f(l(wt),{class:"v-tabs",border:!1,fit:"",radius:!1},{header:b(()=>[x("div",Ns,[c(l(Ot),{class:"v-tabs__tabs",items:t.items,type:"card",modelValue:n.value,"onUpdate:modelValue":p[0]||(p[0]=m=>n.value=m),onTabRemove:s,onActionClick:o,stretch:t.stretch},null,8,["items","modelValue","stretch"]),t.menus&&t.menus.length?(u(),C("div",Us,[t.menus&&t.menus.length?(u(),f(l(be),{key:0,mode:"icon",size:"small",icon:l(kt),background:"hover",dropdown:{size:"small",placement:"bottom-end"},menus:t.menus,onCommand:i},{item:b(({item:m})=>[x("span",null,[t.checkable?(u(),f(l(Ht),{key:0,class:N({"v-tabs__checked":!0,"is-checked":m.checked})},null,8,["class"])):j("",!0),q(" "+B(m.label),1)])]),_:1},8,["icon","menus"])):j("",!0)])):j("",!0)])]),default:b(()=>[ke(r.$slots,"default")]),_:3}))}}),Ms={key:2,class:"v-item__index"},Hs={class:"v-item__content"},qs={key:3,class:"v-item__subtitle"},ne=V({name:"VItem",__name:"item",props:{icon:{},index:{},tag:{},tagType:{},title:{},subtitle:{},actions:{default:()=>[]},background:{type:Boolean},border:{type:Boolean},switch:{type:Boolean},modelValue:{},active:{type:Boolean},hover:{type:Boolean},small:{type:Boolean}},emits:["click","action","update:modelValue","switch"],setup(d,{emit:e}){const t={add:{label:"创建",icon:Qt},copy:{label:"复制",icon:Yt},edit:{label:"编辑",icon:Zt},remove:{label:"删除",icon:Ke},lock:{label:"锁定",icon:Nt},unlock:{label:"解锁",icon:Rn},invisible:{label:"隐藏",icon:Ut},visible:{label:"显示",icon:Bn},home:{label:"主页",icon:In}},a=d,n=e,i=_(!!a.modelValue),s=S(()=>a.actions.map(m=>{const y=t[m];return{name:m,...y}})),o=S(()=>({"is-background":a.background,"is-border":a.border,"is-active":a.active,"is-hover":a.hover,"is-small":a.small})),r=()=>{n("click",a.modelValue)},p=async m=>{m==="remove"?await ft.confirm("确定删除吗？","提示",{type:"warning"}).catch(()=>!1)&&n("action",{name:m,modelValue:a.modelValue}):n("action",{name:m,modelValue:a.modelValue})};return H(i,m=>{n("update:modelValue",m),n("switch",m)}),H(()=>a.modelValue,m=>{i.value=!!m}),(m,y)=>(u(),f(l(O),{class:N(["v-item",o.value]),justify:"space-between",align:"center",onClick:r},{default:b(()=>[c(l(O),{class:"v-item__title",align:"center"},{default:b(()=>[ke(m.$slots,"default",{},()=>[m.icon?(u(),f(l(xe),{key:0,icon:m.icon},null,8,["icon"])):j("",!0),a.tag?(u(),f(l(Pl),{key:1,class:"v-item__tag",size:"small",type:a.tagType},{default:b(()=>[q(B(a.tag),1)]),_:1},8,["type"])):j("",!0),m.index!==void 0?(u(),C("span",Ms," # "+B(m.index),1)):j("",!0),x("span",Hs,B(m.title),1),m.subtitle?(u(),C("span",qs,B(m.subtitle),1)):j("",!0)])]),_:3}),c(l(O),{class:"v-item__actions",onClick:y[1]||(y[1]=Be(()=>{},["stop"]))},{default:b(()=>[(u(!0),C($,null,I(s.value,g=>(u(),f(l(be),{name:g.name,title:g.label,mode:"icon",size:"small",background:"none",type:"info",icon:g.icon,onClick:h=>p(g.name)},null,8,["name","title","icon","onClick"]))),256)),a.switch?(u(),f(l(Lt),{key:0,modelValue:i.value,"onUpdate:modelValue":y[0]||(y[0]=g=>i.value=g),class:"v-item__switch",size:"small"},null,8,["modelValue"])):j("",!0),ke(m.$slots,"status")]),_:3})]),_:3},8,["class"]))}}),Qs=["draggable"],Zs={class:"v-box__name"},Ks={class:"v-box__label"},gt=V({name:"VBox",__name:"box",props:{name:{},title:{},editable:{type:Boolean},active:{type:Boolean},draggable:{type:Boolean}},emits:["edit","remove","dragstart","dragend"],setup(d,{emit:e}){const t=d,a=e,n=()=>{a("edit")},i=async()=>{await ft.confirm("确认删除？","提示",{type:"warning"}).catch(()=>!1)&&a("remove")},s=S(()=>({"is-active":t.active,"is-draggable":t.draggable})),o=()=>{a("dragstart",t)},r=()=>{a("dragend",t)};return(p,m)=>(u(),C("div",{class:N(["v-box",s.value]),draggable:p.draggable,onDragstart:o,onDragend:r},[c(l(O),{direction:"column",justify:"center",align:"center"},{default:b(()=>[x("span",Zs,B(t.name),1),x("span",Ks,B(t.title),1)]),_:1}),t.editable?(u(),f(l(O),{key:0,class:"v-box__footer",justify:"flex-end",align:"center"},{default:b(()=>[c(l(xe),{icon:l(Zt),onClick:n},null,8,["icon"]),c(l(xe),{icon:l(Ke),onClick:i},null,8,["icon"])]),_:1})):j("",!0)],42,Qs))}}),Gs={class:"v-context-viewer"},Ys=V({__name:"viewer",props:{context:{}},emits:["pick","copy"],setup(d,{emit:e}){const t=d,a=e,n=["$provider","$apis","$components","context"],i=m=>{const y=m.value,g=tt(y);return g==="Object"||g==="Module"?Object.keys(y||{}).length===0:g==="Array"?y.length===0:!0},s=(m,y="this")=>typeof m=="object"?Array.isArray(m)?m.map((g,h)=>{const v=`[${h}]`;return{label:v,value:g,type:tt(g),path:`${y}${v}`}}):Object.entries(m).map(([g,h])=>({label:g,value:h,type:tt(h),path:`${y}.${g}`})).filter(g=>!g.label.startsWith("__")&&!n.includes(g.label)):[],o=(m,y)=>{if(m.level===0)y(s(t.context));else{const g=Kn(m.data.value);y(s(g,m.data.path))}},r=m=>{a("copy",m.path)},p=m=>{a("pick",m.path)};return(m,y)=>(u(),C("div",Gs,[m.context?(u(),f(l(bt),{key:0,lazy:"",load:o,"expand-on-click-node":!1,props:{isLeaf:i}},{default:b(({data:g})=>[c(ne,{title:g.label,clickable:"",onClick:h=>p(g),background:"",actions:["copy"],onAction:h=>r(g),grow:"",small:""},null,8,["title","onClick","onAction"])]),_:1},8,["props"])):j("",!0)]))}}),St=V({__name:"binder",props:{title:{},context:{},block:{},model:{},rules:{},modelValue:{type:Boolean},submitMethod:{type:Function},unbindEnabled:{type:Boolean}},emits:["unbind","submit","cancel","pick","update:modelValue","close"],setup(d,{emit:e}){const t=d,a=e,{searchResult:n,keyword:i}=Ss(t.block,t.context),{copy:s}=Gn({}),o=[{name:"normal",label:"常用"},{name:"viewer",label:"高级"}],r=_("normal"),p=_(),m=async E=>{a("submit",E),t.submitMethod?await t.submitMethod(E)&&y():y()},y=()=>{a("update:modelValue",!1),a("close")},g=()=>{a("unbind")},h=()=>{y()},v=async()=>{p.value?.submit()},w=E=>{a("pick",E)},k=E=>{s(E),Ze.success({message:"已经复制到粘贴板"})};return(E,A)=>(u(),f(l(We),{"model-value":t.modelValue,class:"v-binder",title:E.title,width:"1000px",height:"600px","body-padding":!1,maximizable:!1,minimizable:!1,onClose:y},{default:b(()=>[c(l(O),{fit:"",direction:"row",overflow:"hidden"},{default:b(()=>[c(l(O),{width:"30%",height:"100%"},{default:b(()=>[c(Xe,{class:"v-binder__tabs",items:o,modelValue:r.value,"onUpdate:modelValue":A[1]||(A[1]=z=>r.value=z)},{default:b(()=>[c(l(O),{class:"v-binder__tab-content",fit:"",padding:"",flex:!1},{default:b(()=>[Pe(x("div",null,[c(l(_e),{modelValue:l(i),"onUpdate:modelValue":A[0]||(A[0]=z=>mt(i)?i.value=z:null),size:"small",clearable:"","prefix-icon":l(dl),placeholder:"筛选可用项"},null,8,["modelValue","prefix-icon"]),(u(!0),C($,null,I(l(n),z=>(u(),C("div",null,[c(l(ht),{"border-style":"dotted"},{default:b(()=>[q(B(z.title),1)]),_:2},1024),(u(!0),C($,null,I(z.items,D=>(u(),f(ne,{title:D,background:"",actions:["copy"],small:"",onClick:J=>w(D),onAction:J=>k(D)},null,8,["title","onClick","onAction"]))),256))]))),256)),l(n).length?j("",!0):(u(),f(l(ae),{key:0}))],512),[[$e,r.value==="normal"]]),Pe(c(Ys,{context:t.context,onCopy:k,onPick:w},null,8,["context"]),[[$e,r.value==="viewer"]])]),_:1})]),_:1},8,["modelValue"])]),_:1}),c(l(wt),{grow:"",header:null,border:!1},{footer:b(()=>[c(l(O),{justify:"space-between"},{default:b(()=>[c(l(O),null,{default:b(()=>[E.unbindEnabled?(u(),f(l(de),{key:0,type:"warning",size:"default",onClick:g},{default:b(()=>[q(" 移除绑定 ")]),_:1})):j("",!0)]),_:1}),c(l(O),null,{default:b(()=>[c(l(de),{type:"default",size:"default",onClick:h},{default:b(()=>[q(" 取消 ")]),_:1}),c(l(de),{type:"primary",size:"default",onClick:v},{default:b(()=>[q(" 确定 ")]),_:1})]),_:1})]),_:1})]),default:b(()=>[c(l(Ea),{ref_key:"formRef",ref:p,class:"v-binder__form",footer:!1,"label-position":"top","tooltip-message":!1,model:t.model,rules:t.rules,"submit-method":m},{default:b(()=>[ke(E.$slots,"default")]),_:3},8,["model","rules"])]),_:3})]),_:3})]),_:3},8,["model-value","title"]))}}),Xs={class:"v-slots-picker__sn"},eo=V({__name:"slots",props:{slots:{default:()=>[]}},emits:["submit","update:modelValue"],setup(d,{emit:e}){const t=d,a=e,n=_(),i=S(()=>`${50*Math.ceil(t.slots.length/4)+180}px`),s=r=>{n.value=r},o=()=>{n.value?(a("submit",n.value),a("update:modelValue",!1)):te("请选择插槽")};return(r,p)=>(u(),f(l(We),ie({class:"v-slots-picker",title:"选择插槽",width:"600px",height:i.value,submit:"",cancel:"",onSubmit:o},r.$attrs),{default:b(()=>[c(l(Fl),{title:"该组件支持多个插槽，请选择放置到其中一个",type:"warning",closable:!1}),c(l(O),{class:"v-slots-picker__content",justify:"space-around",alignContent:"flex-start",gap:"",wrap:"wrap"},{default:b(()=>[(u(!0),C($,null,I(t.slots,(m,y)=>(u(),f(l(O),{class:N(["v-slots-picker__item",{"is-active":m.name===n.value?.name}]),grow:"",flex:!1,onClick:g=>s(m)},{default:b(()=>[x("span",Xs,"#"+B(y+1),1),q(" "+B(m.name),1)]),_:2},1032,["class","onClick"]))),256))]),_:1})]),_:1},16,["height"]))}}),gl=V({name:"Viewport",__name:"viewport",props:{mode:{default:"pc"},width:{},height:{}},setup(d){const e=d,t=S(()=>[`is-${e.mode}`]),a=S(()=>{if(e.mode==="pc")return 1;const i=e.mode==="mobile"?Dt:Jt,{width:s,height:o}=i,r=s>0?(e.width||0)/s:1,p=o>0?(e.height||0)/o:1;return Math.min(r,p)}),n=S(()=>{if(e.mode==="pc")return{};const i=e.mode==="mobile"?Dt:Jt,{width:s,height:o}=i;return{width:`${s}px`,height:`${o}px`,left:"50%",top:"50%",transform:`translate(-50%, -50%) scale(${a.value})`}});return(i,s)=>(u(),C("div",{class:N(["v-viewport",t.value]),style:Me(n.value)},[ke(i.$slots,"default")],6))}}),to=V({name:"PagesWidget",__name:"index",setup(d){const{project:e,engine:t}=Ye(),a=S(()=>e.value?.pages||[]),{current:n}=oe(),i=_(!1),s=_(),o=_(),r=()=>{o.value=void 0,s.value=void 0,i.value=!0},p=async h=>{const{name:v,modelValue:w}=h,{data:k,node:E}=w;if(v==="add"&&(s.value=void 0,o.value=k.id,i.value=!0),v==="edit"&&(s.value=Ge(k),o.value=void 0,i.value=!0),v==="remove"){if(k.dir){const A=e.value?.getPage(k.id);if(A&&A.children?.length){te("请先删除子页面");return}}e.value?.removePage(k.id)}if(v==="copy"){const A=E.parent?.data.id;e.value?.clonePage(k,A)}v==="home"&&(e.value?.setHomepage(k.id),ue("设置主页成功","success"))},m=async h=>{h.raw&&ue("这是源码模式页面，不能低代码设计","warning"),h.dir||h.raw?t.project.value?.deactivate():t.project.value?.active(h)},y=(h,v,w)=>w==="inner"?!!v.data.dir:!0,g=()=>{e.value?.update({pages:pt(a)})};return(h,v)=>(u(),f(l(L),{class:"v-pages-widget",title:"页面管理",plus:"",subtitle:"(共 0 条)",onPlus:r},{default:b(()=>[c(l(bt),{data:a.value,"node-key":"id","default-expand-all":"",draggable:"","allow-drop":y,onNodeDrop:g},{default:b(({data:w,node:k})=>[c(l(ne),{class:"v-pages-widget__item",icon:l(it)[w.icon],title:w.title,subtitle:w.name,"model-value":{data:w,node:k},actions:w.dir?["add","edit","remove"]:w.raw?["home","edit","remove"]:["home","copy","edit","remove"],onAction:p,onClick:E=>m(w),active:l(n)?.id===w.id,tag:l(e)?.homepage===w.id?"主页":void 0,"tag-type":"success",grow:"",small:"",background:"",hover:""},null,8,["icon","title","subtitle","model-value","actions","onClick","active","tag"])]),_:1},8,["data"]),i.value?(u(),f(Os,{key:0,modelValue:i.value,"onUpdate:modelValue":v[0]||(v[0]=w=>i.value=w),item:s.value,"parent-id":o.value},null,8,["modelValue","item","parent-id"])):j("",!0)]),_:1}))}}),lo=V({name:"BlocksWidget",__name:"index",setup(d){const{span:e}=ml(),{blocks:t,engine:a}=bs(),n=_(void 0),{current:i}=oe(),s=_(!1),o=S(()=>n.value?.id?"编辑":"新增"),r=S(()=>`(共 ${t.value.length} 个)`),p=()=>({name:"",title:"",type:"block"}),m=async A=>{const z=A,D=a.project.value;if(!D)return!1;if(A.id)if(!D.existBlockName(z.name,[z.id]))D.updateBlock(z);else return te(`名称【${z.name}】已经存在，请更换名称`),!1;else if(!D.existBlockName(z.name))D.createBlock(z);else return te(`名称【${z.name}】已经存在，请更换名称`),!1;return!0},y=()=>{n.value=p(),s.value=!0},g=A=>{n.value=Ge(A),s.value=!0},h=A=>{a.project.value?.removeBlock(A.id)},v=A=>{n.value&&(n.value.name=Kt(A))},w=async A=>{a.project.value?.active(A)},k=async A=>{const z={type:"Schema",id:A.id},D=await a.assets.getBlockMaterial(z),J=a.skeleton?.getWidget("Designer")?.widgetRef?.designer;J&&D&&J.setDragging(D)},E=()=>{const A=a.skeleton?.getWidget("Designer")?.widgetRef?.designer;A&&A.setDragging(null)};return(A,z)=>(u(),f(l(L),{class:"v-blocks-widget",title:"区块管理",subtitle:r.value,plus:"",onPlus:y},{default:b(()=>[c(l(st),{wrap:"wrap",gutter:5},{default:b(()=>[(u(!0),C($,null,I(l(t),D=>(u(),f(l(ot),{key:D.id,span:l(e)},{default:b(()=>[c(l(gt),{name:D.name,title:D.title,active:l(i)?.id===D.id,editable:"",onEdit:J=>g(D),onRemove:J=>h(D),onClick:J=>w(D),draggable:l(i)?.id!==D.id,onDragstart:J=>k(D),onDragend:E},null,8,["name","title","active","onEdit","onRemove","onClick","draggable","onDragstart"])]),_:2},1032,["span"]))),128))]),_:1}),l(t).length?j("",!0):(u(),f(l(ae),{key:0})),c(l(fe),{modelValue:s.value,"onUpdate:modelValue":z[0]||(z[0]=D=>s.value=D),title:o.value,model:n.value,width:"600px",height:"250px","form-props":{tooltipMessage:!1},"submit-method":m},{default:b(()=>[c(l(P),{name:"name",label:"名称",required:"",tip:"名称为英文驼峰格式",rules:{message:"名称格式错误",pattern:l(Ce)},onChange:v},null,8,["rules"]),c(l(P),{name:"title",label:"标题",required:""})]),_:1},8,["modelValue","title","model"])]),_:1},8,["subtitle"]))}}),ao={class:"v-components-widget__search"},no={key:0,class:"v-components-widget__result"},so={class:"v-components-widget__list"},oo=V({name:"ComponentsWidget",__name:"index",setup(d){const{span:e,engine:t}=ml(),{tabs:a,currentTab:n,currentGroup:i,model:s,searchKey:o,searchResult:r}=ys(),p=y=>{const g=t.skeleton?.getWidget("Designer")?.widgetRef?.designer;g&&g.setDragging(y)},m=()=>{const y=t.skeleton?.getWidget("Designer")?.widgetRef?.designer;y&&y.setDragging(null)};return(y,g)=>(u(),f(l(L),{class:"v-components-widget",title:"组件库",body:{flex:!0,direction:"column"}},{default:b(()=>[x("div",ao,[c(l(_e),{modelValue:l(o),"onUpdate:modelValue":g[0]||(g[0]=h=>mt(o)?o.value=h:null),placeholder:"搜索组件",clearable:"",size:"small"},{prefix:b(()=>[c(l(aa))]),_:1},8,["modelValue"])]),l(o)?(u(),C("div",no,[c(l(st),{wrap:"wrap",gutter:5},{default:b(()=>[(u(!0),C($,null,I(l(r),h=>(u(),f(l(ot),{span:l(e),key:h.name},{default:b(()=>[c(l(gt),{name:h.name,title:h.label||h.name,draggable:"",onDragstart:v=>p(h),onDragend:m},null,8,["name","title","onDragstart"])]),_:2},1032,["span"]))),128))]),_:1}),l(r).length?j("",!0):(u(),f(l(ae),{key:0}))])):(u(),f(l(Ot),{key:1,items:l(a),modelValue:l(n),"onUpdate:modelValue":g[2]||(g[2]=h=>mt(n)?n.value=h:null)},{default:b(()=>[x("div",so,[l(i)?(u(),f(l(kl),{key:0,modelValue:l(s)[l(n)],"onUpdate:modelValue":g[1]||(g[1]=h=>l(s)[l(n)]=h)},{default:b(()=>[(u(!0),C($,null,I(l(i).children,h=>(u(),f(l(_l),{key:h.name,name:h.name,title:`${h.label} (${h.count})`},{default:b(()=>[h.components?(u(),f(l(st),{key:0,wrap:"wrap",gutter:5},{default:b(()=>[(u(!0),C($,null,I(h.components,v=>(u(),f(l(ot),{span:l(e),key:v.name},{default:b(()=>[c(l(gt),{name:v.name,title:v.label||v.name,draggable:"",onDragstart:w=>p(v),onDragend:m},null,8,["name","title","onDragstart"])]),_:2},1032,["span"]))),128))]),_:2},1024)):j("",!0)]),_:2},1032,["name","title"]))),128))]),_:1},8,["modelValue"])):j("",!0)])]),_:1},8,["items","modelValue"]))]),_:1}))}}),io=V({name:"OutlineWidget",__name:"index",setup(d){const{engine:e,designer:t,selected:a}=ye(),{current:n}=oe(),i=_([]),s=J=>{if(G(J))return J.locked?["unlock"]:["lock"];const T=J.parent;return T&&(T.locked||T.invisible)?[]:n.value?.locked?[]:J.locked?["unlock"]:J.invisible?["visible"]:["lock","invisible","copy","remove"]},o=J=>{const T=[];return J.forEach(R=>{const ee={id:R.id,label:R.name,type:R.id,model:R};Array.isArray(R.children)&&(ee.children=o(R.children)),T.push(ee)}),T},r=()=>{if(!n.value)return[];const{id:J,name:T,nodes:R}=n.value;return[{id:J,label:T,type:J,model:n.value,children:o(R)}]},p=async()=>{i.value=r(),a.value?.model&&(await Ee(),t.value?.setSelected(a.value.model))},m=S(()=>a.value?.model.id),y=J=>{const T=J.data;if(G(T.model)||T.model.locked||T.model.name==="template")return!1;const R=e.assets.componentMap.get(T.model.name);return R?(t.value?.setDragging(R),!0):!1},g=async(J,T,R)=>{const ee=T.data,ge={prev:"top",next:"bottom",inner:"inner"}[R];let ce=!1;if(G(ee.model))ce=R==="inner",t.value?.setDropping(ce?ee.model:null,"inner");else{const U=ee.model;ce=!!await t.value?.allowDrop(U,ge),t.value?.setDropping(ce?U:null,"inner")}return ce},h=J=>{const T=J?.model;!T||T.invisible||(t.value?.setSelected(T),t.value?.setHover(null))},v=async(J,T,R)=>{const ee=J.data,ge=T.data;if(G(ge.model)){t.value?.setDropping(null),t.value?.setDragging(null);return}const ce=ge.model,U={before:"left",after:"right"}[R]||"inner";if(!await t.value?.allowDrop(ce,U)){t.value?.setDropping(null),p(),Ze.warning({message:`${ee.model.name}不能放置到该位置`}),t.value?.setDragging(null);return}const K=await t.value?.getDropSlot(R==="inner"?ce:ce.parent);if(K!==null){const F=ee.model;F.slot=K,n.value?.move(F,ce,U)}else p();t.value?.setDropping(null),t.value?.setDragging(null),e.simulator.refresh()},w=J=>{G(J.model)?t.value?.setHover(J.model):(t.value?.setHover(J.model),J.model.invisible&&t.value?.setHover(null),J.model.name==="slot"&&t.value?.setHover(null))},k=()=>{t.value?.setHover(null)},E=J=>{const T=J.data;T.dragging=!0;const R=e.assets.componentMap.get(T.model.name);R&&t.value?.setDragging(R)},A=async J=>{const T=J.data;T.dragging=!1},z=(J,T)=>{J&&((J.id===T.id||!G(J)&&T.isChild(J))&&t.value?.setSelected(null),t.value?.setHover(null))},D=J=>{const{name:T,modelValue:R}=J,ee=a.value?.model;switch(T){case"lock":z(ee,R),R.lock();break;case"unlock":z(ee,R),R.unlock();break;case"invisible":z(ee,R),R.setVisible(!1);break;case"visible":R.setVisible(!0);break;case"copy":const ge=n.value?.cloneNode(R);ge&&t.value?.setSelected(ge);break;case"remove":z(ee,R),n.value?.removeNode(R);break}};return H(e.changed,p,{immediate:!0}),(J,T)=>(u(),f(l(L),{class:"v-outline-widget",title:"大纲树"},{default:b(()=>[(u(),f(l(bt),{key:l(e).changed.value,data:i.value,"node-key":"id","default-expand-all":"",draggable:"","empty-text":"请新建或打开文件","current-node-key":m.value,"highlight-current":!0,"expand-on-click-node":!1,"allow-drop":g,"allow-drag":y,onCurrentChange:h,onNodeDrop:v,onNodeDragStart:E,onNodeDragEnd:A},{default:b(({data:R,node:ee})=>[c(l(ne),{class:N(["v-outline-widget__item",{"is-locked":R.model.locked,"is-invisible":R.model.invisible,"is-dragging":R.dragging}]),active:!R.model.invisible&&ee.isCurrent,grow:"",small:"",background:"",hover:"","model-value":R.model,icon:R.model.locked?l(Nt):R.model.invisible?l(Ut):void 0,title:R.label,subtitle:R.type,actions:s(R.model),onAction:D,onMouseenter:ge=>w(R),onMouseleave:k},null,8,["class","active","model-value","icon","title","subtitle","actions","onMouseenter"])]),_:1},8,["data","current-node-key"]))]),_:1}))}}),ro=V({name:"HistoryWidget",__name:"index",setup(d){const{history:e,load:t,total:a}=pl(),n=S(()=>`(共 ${a.value} 条)`),i=o=>{o.name==="remove"&&e.value?.remove(o.modelValue.id)},s=async()=>{await Re("确定要清空历史记录吗？")&&e.value?.clear()};return(o,r)=>(u(),f(l(L),{class:"v-history-widget",title:"历史记录",subtitle:n.value,remove:!!l(a),onRemove:s},{default:b(()=>[l(a)===0?(u(),f(l(ae),{key:0,"image-size":50})):j("",!0),l(e)?(u(!0),C($,{key:1},I(l(e).items,(p,m)=>(u(),f(l(ne),{index:m+1,title:p.label,"model-value":p,active:m==l(e).index,small:"",background:"",actions:["remove"],onAction:i,onClick:y=>l(t)(p.id)},null,8,["index","title","model-value","active","onClick"]))),256)):j("",!0)]),_:1},8,["subtitle","remove"]))}}),le=Qn({loader:()=>Un(()=>import("./Editor-BKlikwSl-DGrNxonv.js"),__vite__mapDeps([0,1,2,3]),import.meta.url),loadingComponent:V({render(){return Je("div","正在拼命加载...")}}),errorComponent:V({render(){return Je("div","组件加载失败！")}})}),uo=V({name:"ApisWidget",__name:"index",setup(d){const e=_(!1),t=_(null),a=_(!1),n=S(()=>a.value?"编辑API":"新增API"),i=S(()=>s.value?.apis||[]),{project:s}=Ye(),o=()=>({method:"get",name:"",label:"",url:"",settings:{loading:!0,failMessage:!0,validSuccess:!0,originResponse:!1,injectHeaders:!1,type:"form",headers:{type:"JSExpression",value:"({})"}}}),r=()=>{e.value=!0,a.value=!1,t.value=o()},p=ds.map(k=>({label:k,value:k.toLowerCase()})),m={get:"success",post:"primary",put:"warning",delete:"danger",patch:"warning",jsonp:"info"},y=[{label:"表单",value:"form"},{label:"JSON",value:"json"},{label:"文件",value:"data"}],g=(k,E,A)=>{se({type:"JSExpression",value:E},window)?A():A(new Error("代码错误"))},h=k=>{k.name==="edit"&&v(k.modelValue),k.name==="remove"&&s.value?.removeApi(k.modelValue.name)},v=k=>{a.value=!0,t.value=Ge(k),e.value=!0},w=async k=>s.value?.existApiName(k.name,a.value?[k.id]:[])?(te(`API名称 [ ${k.name} ] 已存在`),!1):(s.value?.setApi(k),!0);return(k,E)=>(u(),f(l(L),{class:"v-apis-widget",title:"API管理",plus:"",onPlus:r},{default:b(()=>[(u(!0),C($,null,I(i.value,A=>(u(),f(l(ne),{key:A.id,small:"",title:A.name,subtitle:A.label,"model-value":A,tag:A.method?.toUpperCase(),"tag-type":m[A.method||"get"],background:"",actions:["edit","remove"],onClick:z=>v(A),onAction:h},null,8,["title","subtitle","model-value","tag","tag-type","onClick"]))),128)),i.value.length===0?(u(),f(l(ae),{key:0,"image-size":50})):j("",!0),c(l(fe),{modelValue:e.value,"onUpdate:modelValue":E[1]||(E[1]=A=>e.value=A),model:t.value,title:n.value,width:"1000px",height:"600px","form-props":{labelPosition:"top",tooltipMessage:!1,size:"default"},"submit-method":w},{default:b(()=>[c(l(O),{gap:"",fit:""},{default:b(()=>[c(l(O),{direction:"column",grow:"",width:"50%",shrink:""},{default:b(()=>[c(l(P),{name:"method",label:"请求类型",required:"",editor:"radio",options:l(p),props:{button:!0}},null,8,["options"]),c(l(P),{name:"name",label:"接口名称",required:"",rules:{pattern:l(Ce),message:"名称格式不正确"}},null,8,["rules"]),c(l(P),{name:"label",label:"备注说明",required:""}),c(l(P),{name:"url",label:"接口URL",required:""})]),_:1}),c(l(O),{direction:"column",grow:"",width:"50%",shrink:""},{default:b(()=>[t.value.method!=="jsonp"?(u(),f(l(L),{key:0,title:"请求配置",subtitle:t.value.method,border:""},{default:b(()=>[c(l(O),{justify:"space-around"},{default:b(()=>[c(l(P),{name:"settings.loading",size:"small",label:"加载提示",editor:"switch"}),c(l(P),{size:"small",name:"settings.failMessage",label:"失败提示",editor:"switch"}),c(l(P),{size:"small",name:"settings.validSuccess",label:"校验成功",editor:"switch"}),c(l(P),{size:"small",name:"settings.originResponse",label:"原始响应",editor:"switch"}),c(l(P),{size:"small",name:"settings.injectHeaders",label:"注入请求头",editor:"switch"})]),_:1}),c(l(P),{size:"small",name:"settings.type",label:"发送数据类型",editor:"radio",options:y,props:{button:!0}}),c(l(P),{size:"small",name:"settings.headers.value",label:"请求头配置",tip:"支持 JSExpression 或 JSFunction",rules:{validator:g}},{editor:b(()=>[c(l(le),{modelValue:t.value.settings.headers.value,"onUpdate:modelValue":E[0]||(E[0]=A=>t.value.settings.headers.value=A),dark:"",height:"200px"},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["subtitle"])):j("",!0),t.value.method==="jsonp"?(u(),f(l(L),{key:1,title:"请求配置",subtitle:t.value.method,border:""},{default:b(()=>[c(l(P),{name:"jsonpOptions.jsonpCallback",size:"small",label:"jsonpCallback"}),c(l(P),{name:"jsonpOptions.jsonpCallbackFunction",size:"small",label:"jsonpCallbackFunction"}),c(l(P),{name:"jsonpOptions.timeout",size:"small",label:"timeout",editor:"number"}),c(l(P),{name:"jsonpOptions.crossorigin",size:"small",label:"crossorigin",editor:"switch"})]),_:1},8,["subtitle"])):j("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue","model","title"])]),_:1}))}}),co=V({name:"DepsWidget",__name:"index",setup(d){const{dependencies:e,engine:t}=cl(),a=_(!1),n=_(!1),i=_({}),s=S(()=>n.value?"查看依赖":i.value?"编辑依赖":"新增依赖"),o=v=>v.required||v.official?[]:["edit","remove"],r=v=>v.official&&!v.required,p=async v=>(v.urls=v.urls.split(`
`),t.project.value?.setDeps(v),!0),m=v=>{t.project.value?.setDeps(v)},y=()=>{n.value=!1,a.value=!0,i.value=null},g=v=>{n.value=!0,i.value={...v,urls:v.urls.join(`
`)},a.value=!0},h=(v,w)=>{w.name==="edit"&&(i.value={...v,urls:v.urls.join(`
`)},n.value=!1,a.value=!0),w.name==="remove"&&t.project.value?.removeDeps(v)};return(v,w)=>(u(),f(l(L),{class:"v-deps-widget",title:"依赖管理",plus:"",onPlus:y},{default:b(()=>[(u(!0),C($,null,I(l(e),k=>(u(),f(l(ne),{key:k.package,title:k.package,subtitle:k.version,actions:o(k),background:"",switch:r(k),modelValue:k.enabled,"onUpdate:modelValue":E=>k.enabled=E,onSwitch:E=>m(k),onClick:E=>g(k),onAction:E=>h(k,E)},null,8,["title","subtitle","actions","switch","modelValue","onUpdate:modelValue","onSwitch","onClick","onAction"]))),128)),c(l(fe),{modelValue:a.value,"onUpdate:modelValue":w[0]||(w[0]=k=>a.value=k),width:"600px",height:"500px",title:s.value,model:i.value,submitMethod:p,formProps:{disabled:n.value,tooltipMessage:!1}},{default:b(()=>[c(l(P),{name:"package",label:"包名",required:"",disabled:!!i.value},null,8,["disabled"]),c(l(P),{name:"version",label:"版本",required:""}),c(l(P),{name:"library",label:"导出名称",required:""}),c(l(P),{name:"urls",label:"资源文件",editor:"textarea",props:{rows:3},tip:"多个资源可以换行输入",required:""}),c(l(P),{name:"assetsUrl",label:"物料URL"}),c(l(P),{name:"assetsLibrary",label:"物料名称"})]),_:1},8,["modelValue","title","model","formProps"])]),_:1}))}}),mo=V({__name:"actions",props:{position:{},model:{},path:{default:()=>[]}},emits:["action"],setup(d,{emit:e}){const t=d,a=e,n=S(()=>t.model.name),i=S(()=>!G(t.model)&&!t.model.locked),s=S(()=>t.path.map(m=>({command:m,label:m.name,onMouseenter:()=>{a("action",{type:"hover",model:m})}}))),o=[{name:"prev",icon:Aa,title:"向前移动"},{name:"next",icon:za,title:"向后移动"},{name:"copy",icon:Yt,title:"复制"},{name:"remove",icon:Ke,title:"删除"}],r=m=>{a("action",{type:"selected",model:m.command})},p=async m=>{m.name==="remove"?await Re("确定删除?")&&a("action",{type:m.name,model:t.model}):a("action",{type:m.name,model:t.model})};return(m,y)=>(u(),C("div",{class:N(["v-actions",[`is-${t.position}`]])},[c(l(be),{mode:"icon",size:"small",icon:l(Gt),label:n.value,menus:s.value,background:"none",onCommand:r},null,8,["icon","label","menus"]),c(l(wa),{disabled:!i.value,mode:"icon",size:"small",items:o,background:"none",onClick:p},null,8,["disabled"])],2))}}),po={key:1,class:"v-designer__placeholder"},vo=V({name:"VDesigner",inheritAttrs:!1,__name:"index",setup(d,{expose:e}){const t=_(),a=_(),{width:n,height:i}=Fe(t),{dependencies:s,engine:o,apis:r}=cl(),{current:p,isEmpty:m}=oe(),y=S(()=>o.skeleton?.getWidget("Toolbar")?.widgetRef.mode??"pc"),{designer:g,hover:h,dropping:v,selected:w}=ws(a,s,r),k=E=>{const A=E.type,z=E.model;if(p.value)switch(A){case"remove":p.value.removeNode(z),g.value?.setSelected(null);break;case"copy":const D=p.value.cloneNode(z);g.value?.setSelected(D);break;case"prev":p.value.movePrev(z),g.value?.setSelected(z);break;case"next":p.value.moveNext(z),g.value?.setSelected(z);break;case"hover":g.value?.setHover(z);break;case"selected":g.value?.setSelected(z);break}};return e({designer:g,mode:y}),(E,A)=>(u(),C("div",{ref_key:"container",ref:t,class:"v-designer"},[c(l(gl),{mode:y.value,width:l(n),height:l(i)},{default:b(()=>[x("iframe",{ref_key:"iframe",ref:a,frameborder:"0"},null,512),l(v)?(u(),C("div",{key:0,class:N(["v-designer__dropping","is-inner"]),style:Me(l(v).style)},null,4)):j("",!0),l(h)?(u(),C("div",{key:1,class:"v-designer__hover",style:Me(l(h).style)},[x("span",{class:N(`is-${l(h).position}`)},[q(B(l(h).model.name)+": ",1),x("i",null,B(l(h).model.id),1)],2)],4)):j("",!0),l(w)?(u(),C("div",{key:2,class:"v-designer__selected",style:Me(l(w).style)},[c(mo,{position:l(w).position,model:l(w).model,path:l(w).path,onAction:k},null,8,["position","model","path"])],4)):j("",!0)]),_:1},8,["mode","width","height"]),l(p)?j("",!0):(u(),f(l(ae),{key:0,description:"请新建或打开文件"})),l(p)&&l(m)?(u(),C("div",po," 您可以拖拽组件放置到这里 ")):j("",!0)],512))}}),Oe=V({__name:"group",props:{context:{},current:{},title:{},nameLabel:{},valueLabel:{},createEmpty:{},list:{},remove:{},submit:{},itemTitle:{type:Function,default:d=>d.name}},setup(d){const e=d,t=_(),a=_(),n=_(!1),i=_(e.createEmpty()),s=_(!1),o=S(()=>s.value?`编辑${e.title}`:`新增${e.title}`),r=()=>{s.value=!1,i.value=e.createEmpty(),n.value=!0},p=(v,w)=>{switch(w.name){case"edit":y(v);break;case"remove":e.remove(v);break}},m=v=>{i.value.value=v},y=v=>{s.value=!0,i.value={...v},n.value=!0},g=async v=>e.submit(v,s.value),h=()=>{a.value?.itemRef.validate()};return(v,w)=>(u(),f(l(L),{title:e.title,class:"v-sub-panel",size:"small",fit:!1,plus:"",onPlus:r},{default:b(()=>[(u(!0),C($,null,I(v.list,k=>(u(),f(l(ne),{title:e.itemTitle(k),border:"",actions:["edit","remove"],onAction:E=>p(k,E),onClick:E=>y(k)},null,8,["title","onAction","onClick"]))),256)),v.list.length?j("",!0):(u(),f(l(ae),{key:0,"image-size":40})),c(l(St),{modelValue:n.value,"onUpdate:modelValue":w[1]||(w[1]=k=>n.value=k),title:o.value,"submit-method":g,model:i.value,block:v.current,context:v.context,onPick:m},{default:b(()=>[ke(v.$slots,"fields",ol(il({model:i.value,isEdit:s.value,nameLabel:v.nameLabel,valueLabel:v.valueLabel})),()=>[c(l(P),{name:"name",label:v.nameLabel,required:"",disabled:s.value},null,8,["label","disabled"]),c(l(P),{ref_key:"codeFieldRef",ref:a,name:"value",label:v.valueLabel,required:""},{editor:b(()=>[c(l(le),{ref_key:"editorRef",ref:t,dark:"",height:"350px",modelValue:i.value.value,"onUpdate:modelValue":w[0]||(w[0]=k=>i.value.value=k),onBlur:h},null,8,["modelValue"])]),_:1},8,["label"])])]),_:3},8,["modelValue","title","model","block","context"])]),_:3},8,["title"]))}}),go=V({__name:"state",props:{context:{},current:{}},setup(d){const e=d,t=S(()=>Object.entries(e.current?.state||{}).map(([s,o])=>({name:s,value:De(o)}))),a=()=>({name:"",value:""}),n=s=>e.current?.removeState(s.name),i=async(s,o)=>{const{name:r,value:p}=s;if(!o&&e.current?.state[r])return te(`名称 ${r} 已存在，请更换！`),!1;const m={type:"JSExpression",value:p};return se(m,e.context,!0)?(e.current?.setState(r,m),!0):!1};return(s,o)=>(u(),f(Oe,{title:"状态数据",current:e.current,context:e.context,list:t.value,nameLabel:"状态数据名称",valueLabel:"状态初始值 [ JSExpression ]",createEmpty:a,remove:n,submit:i},null,8,["current","context","list"]))}}),ho=V({__name:"computed",props:{context:{},current:{}},setup(d){const e=d,t=S(()=>Object.entries(e.current?.computed||{}).map(([s,o])=>({name:s,value:De(o)}))),a=()=>({name:"",value:"() => { }"}),n=s=>e.current?.removeFunction("computed",s.name),i=async(s,o)=>{const{name:r,value:p}=s;if(!o&&e.current?.computed[r])return te(`名称 ${r} 已存在，请更换！`),!1;const m={type:"JSFunction",value:p};return se(m,e.context,!0)?(e.current?.setFunction("computed",r,m),!0):!1};return(s,o)=>(u(),f(Oe,{title:"计算属性",current:e.current,context:e.context,list:t.value,nameLabel:"计算属性名称",valueLabel:"计算函数 [ JSFunction ]",createEmpty:a,remove:n,submit:i},null,8,["current","context","list"]))}}),bo=V({__name:"methods",props:{context:{},current:{}},setup(d){const e=d,t=S(()=>Object.entries(e.current?.methods||{}).map(([s,o])=>({name:s,value:De(o)}))),a=()=>({name:"",value:"() => { }"}),n=s=>e.current?.removeFunction("methods",s.name),i=async(s,o)=>{const{name:r,value:p}=s;if(!o&&e.current?.methods[r])return te(`名称 ${r} 已存在，请更换！`),!1;const m={type:"JSFunction",value:p};return se(m,e.context,!0)?(e.current?.setFunction("methods",r,m),!0):!1};return(s,o)=>(u(),f(Oe,{title:"组件方法",current:e.current,context:e.context,list:t.value,nameLabel:"方法名称",valueLabel:"方法函数 [ JSFunction ]",createEmpty:a,remove:n,submit:i},null,8,["current","context","list"]))}}),fo=V({__name:"lifeCycles",props:{context:{},current:{}},setup(d){const e=d,t=S(()=>ka.map(o=>({label:o,value:o}))),a=S(()=>Object.entries(e.current?.lifeCycles||{}).map(([o,r])=>({name:o,value:De(r)}))),n=()=>({name:"",value:"() => { }"}),i=o=>e.current?.removeFunction("lifeCycles",o.name),s=async(o,r)=>{const{name:p,value:m}=o;if(!r&&e.current?.lifeCycles[p])return te(`名称 ${p} 已存在，请更换！`),!1;const y={type:"JSFunction",value:m};return se(y,e.context,!0)?(e.current?.setFunction("lifeCycles",p,y),!0):!1};return(o,r)=>(u(),f(Oe,{title:"生命周期",current:e.current,context:e.context,list:a.value,nameLabel:"名称",valueLabel:"函数 [ JSFunction ]",createEmpty:n,remove:i,submit:s},{fields:b(({model:p,nameLabel:m,isEdit:y,valueLabel:g})=>[c(l(P),{name:"name",label:m,editor:"select",options:t.value,required:"",disabled:y},null,8,["label","options","disabled"]),c(l(P),{name:"value",label:g,required:""},{editor:b(()=>[c(l(le),{ref:"editorRef",dark:"",height:"350px",modelValue:p.value,"onUpdate:modelValue":h=>p.value=h},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"])]),_:1},8,["current","context","list"]))}}),yo=V({__name:"watch",props:{context:{},current:{}},setup(d){const e=d,t=S(()=>(e.current?.watch||[]).map(o=>({...o,source:De(o.source),handler:De(o.handler)}))),a=()=>({source:"() => { }",deep:!1,immediate:!1,handler:"() => { }"}),n=o=>o.source,i=o=>e.current?.removeWatch(o),s=async(o,r)=>{const p={type:"JSFunction",value:o.source},m={type:"JSFunction",value:o.handler};if(!se(p,e.context,!0)||!se(m,e.context,!0))return!1;const y={...o,source:p,handler:m};return e.current?.setWatch(y),!0};return(o,r)=>(u(),f(Oe,{title:"侦听器",current:e.current,context:e.context,list:t.value,nameLabel:"侦听源 [ JSFunction ]",valueLabel:"处理函数 [ JSFunction ]",createEmpty:a,remove:i,submit:s,itemTitle:n,grow:""},{fields:b(({model:p,nameLabel:m,valueLabel:y})=>[c(l(P),{name:"source",label:m,required:""},{editor:b(()=>[c(l(le),{dark:"",height:"100px",modelValue:p.source,"onUpdate:modelValue":g=>p.source=g},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"]),c(l(P),{name:"deep",modelValue:p.deep,"onUpdate:modelValue":g=>p.deep=g,label:"深度监听",editor:"switch"},null,8,["modelValue","onUpdate:modelValue"]),c(l(P),{name:"immediate",modelValue:p.immediate,"onUpdate:modelValue":g=>p.immediate=g,label:"立即执行",editor:"switch"},null,8,["modelValue","onUpdate:modelValue"]),c(l(P),{name:"handler",label:y,required:""},{editor:b(()=>[c(l(le),{dark:"",height:"130px",modelValue:p.handler,"onUpdate:modelValue":g=>p.handler=g},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"])]),_:1},8,["current","context","list"]))}}),wo=V({__name:"index",setup(d){const{current:e,context:t}=oe();return(a,n)=>(u(),f(l(O),{class:"v-scripts-widget",direction:"column",fit:""},{default:b(()=>[c(go,{current:l(e),context:l(t)},null,8,["current","context"]),c(ho,{current:l(e),context:l(t)},null,8,["current","context"]),c(bo,{current:l(e),context:l(t)},null,8,["current","context"]),c(fo,{current:l(e),context:l(t)},null,8,["current","context"]),c(yo,{current:l(e),context:l(t)},null,8,["current","context"])]),_:1}))}}),at=V({__name:"setters",props:{context:{},current:{},title:{},items:{},node:{},removable:{type:Boolean}},emits:["change","remove"],setup(d,{emit:e}){const t=d,a=e,n=(s,o)=>{a("change",s,o)},i=s=>{a("remove",s)};return(s,o)=>(u(),f(l(L),{title:t.title,class:"v-sub-panel",size:"small",fit:!1},{default:b(()=>[c(l(ve),{class:"v-properties-widget__form",size:"small","label-width":"90px",onKeydown:o[0]||(o[0]=He(Be(()=>{},["prevent","stop"]),["enter"]))},{default:b(()=>[(u(!0),C($,null,I(t.items,r=>(u(),f(l(W),ie(r,{key:`${r.name}_${t.node.id}`,current:t.current,context:t.context,removable:t.removable,onChange:n,onRemove:i}),null,16,["current","context","removable"]))),128))]),_:1})]),_:1},8,["title"]))}}),ko=V({name:"PropertiesWidget",__name:"index",setup(d){const{current:e,context:t}=oe(),{selected:a}=ye(),{node:n,commonProps:i,change:s,componentProps:o,customProps:r,addCustom:p,removeCustom:m,isExist:y}=xs(a),g=_(!1),h=_(),v=()=>{g.value=!0,h.value={name:""}},w=async E=>{const A=Object.keys(n.value?.props||{});return!y(E.name)&&!A.includes(E.name)?(p(E.name),!0):(te("已存在该属性名称"),!1)},k=async E=>{await Re("确定删除？")&&m(E)};return(E,A)=>l(e)?(u(),f(l(O),{key:0,class:"v-properties-widget",direction:"column",fit:""},{default:b(()=>[l(n)?(u(),f(at,{key:0,title:"通用属性",current:l(e),context:l(t),node:l(n),items:l(i),onChange:l(s)},null,8,["current","context","node","items","onChange"])):j("",!0),l(n)&&l(o).length?(u(),f(at,{key:1,title:"组件属性",current:l(e),context:l(t),node:l(n),items:l(o),onChange:l(s)},null,8,["current","context","node","items","onChange"])):j("",!0),l(n)?(u(),f(at,{key:2,title:"自定义属性",current:l(e),context:l(t),node:l(n),items:l(r),onChange:l(s),removable:"",plus:"",grow:"",onPlus:v,onRemove:k},null,8,["current","context","node","items","onChange"])):j("",!0),c(l(fe),{modelValue:g.value,"onUpdate:modelValue":A[0]||(A[0]=z=>g.value=z),title:"新增自定义属性",width:"400px",height:"150px","submit-method":w,formProps:{tooltipMessage:!1},model:h.value},{default:b(()=>[c(l(P),{name:"name",label:"属性名称",required:"",rules:{message:"名称格式错误",pattern:l(Ce)}},null,8,["rules"])]),_:1},8,["modelValue","model"])]),_:1})):j("",!0)}}),_o=V({name:"VariableBinder",__name:"variable",props:{context:{},current:{},value:{}},setup(d){const e=d,t=_(),a=Le({type:"JSExpression",value:e.value}),n=i=>{t.value.getEditor().setValue(i),a.value=i};return(i,s)=>(u(),f(l(St),{title:"绑定变量","unbind-enabled":"",block:e.current,context:e.context,model:a,onPick:n},{default:b(()=>[c(l(P),{name:"value",label:"绑定内容 [ JSExpression ]",required:""},{editor:b(()=>[c(l(le),{ref_key:"editorRef",ref:t,modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=o=>a.value=o),dark:"",height:"450px"},null,8,["modelValue"])]),_:1})]),_:1},8,["block","context","model"]))}}),So=V({name:"EventBinder",__name:"event",props:{context:{},current:{},name:{},event:{}},setup(d){const e=d,t=_(),a=Le({name:e.name,...e.event,modifiers:Object.keys(e.event?.modifiers||{}),handler:{type:"JSFunction",value:e.event?.handler?.value||"() => {}"}}),n=cs.map(s=>({label:s,value:s})),i=s=>{t.value.getEditor().setValue(s),a.handler.value=s};return(s,o)=>(u(),f(l(St),{title:"绑定事件","unbind-enabled":"",block:e.current,context:e.context,model:a,onPick:i},{default:b(()=>[c(l(P),{name:"modifiers",label:"事件修饰符",editor:"checkbox",options:l(n)},null,8,["options"]),c(l(P),{name:"handler.value",label:"事件处理函数 [ JSFunction ]",required:""},{editor:b(()=>[c(l(le),{ref_key:"editorRef",ref:t,modelValue:a.handler.value,"onUpdate:modelValue":o[0]||(o[0]=r=>a.handler.value=r),dark:"",height:"350px"},null,8,["modelValue"])]),_:1})]),_:1},8,["block","context","model"]))}}),xo=V({name:"EventsWidget",__name:"index",setup(d){const{current:e,context:t}=oe(),{selected:a}=ye(),{mouseEventList:n,keyboardEventList:i,componentEventList:s}=Cs(a),o=_({name:"",event:void 0}),r=_(!1),p=v=>{o.value=Ge(v),r.value=!0},m=async v=>{const w={...v,modifiers:v.modifiers.reduce((k,E)=>(k[E]=!0,k),{})};return se(w.handler,t.value,!0)?((a.value?.model).setEvent(w),!0):!1},y=async v=>{const w=a.value?.model;v.name&&(w.removeEvent(v.name),r.value=!1)},g=async()=>{o.value.name&&await Re("确定要删除该事件吗？")&&y(o.value)},h=v=>{const{name:w,modelValue:k}=v;w==="edit"&&p(k),w==="remove"&&y(k)};return(v,w)=>(u(),f(l(O),{class:"v-events-widget",direction:"column",fit:""},{default:b(()=>[c(l(L),{title:"组件事件",class:"v-sub-panel",size:"small",fit:!1},{default:b(()=>[l(s).length?j("",!0):(u(),f(l(ae),{key:0,"image-size":50,description:"该组件无自带事件"})),(u(!0),C($,null,I(l(s),k=>(u(),f(l(ne),{key:`component_${k.name}`,title:k.name,"model-value":k,border:"",small:"",actions:k.event?["edit","remove"]:["edit"],active:!!k.event,onClick:E=>p(k),onAction:h},null,8,["title","model-value","actions","active","onClick"]))),128))]),_:1}),c(l(L),{title:"鼠标事件",class:"v-sub-panel",size:"small",fit:!1},{default:b(()=>[(u(!0),C($,null,I(l(n),k=>(u(),f(l(ne),{key:`mouse_${k.name}`,title:k.name,"model-value":k,border:"",small:"",actions:k.event?["edit","remove"]:["edit"],active:!!k.event,onClick:E=>p(k),onAction:h},null,8,["title","model-value","actions","active","onClick"]))),128))]),_:1}),c(l(L),{title:"键盘事件",class:"v-sub-panel",size:"small",grow:"",fit:!1},{default:b(()=>[(u(!0),C($,null,I(l(i),k=>(u(),f(l(ne),{key:`keyboard_${k.name}`,title:k.name,"model-value":k,border:"",small:"",actions:k.event?["edit","remove"]:["edit"],active:!!k.event,onClick:E=>p(k),onAction:h},null,8,["title","model-value","actions","active","onClick"]))),128))]),_:1}),r.value?(u(),f(l(So),{key:0,modelValue:r.value,"onUpdate:modelValue":w[0]||(w[0]=k=>r.value=k),context:l(t),current:l(e),name:o.value.name,event:o.value.event,submitMethod:m,onUnbind:g},null,8,["modelValue","context","current","name","event"])):j("",!0)]),_:1}))}}),Co=V({name:"CssWidget",__name:"index",setup(d){const{current:e}=oe(),t=_(),a=S(()=>e.value?.css||""),n=s=>{e.value?.setCss(s)},i=()=>{const s=(t.value?.getEditor()).getValue();n(s),ue("保存成功")};return(s,o)=>(u(),f(l(L),{class:"v-css-widget v-sub-panel",title:"lang:css scoped",size:"small",fit:"",save:"",onSave:i},{default:b(()=>[c(l(le),{ref_key:"editorRef",ref:t,"model-value":a.value,height:"100%",lang:"css",dark:"",onBlur:n},null,8,["model-value"])]),_:1}))}}),Vo=V({name:"DirectivesWidget",__name:"index",setup(d){const{current:e,context:t}=oe(),{selected:a}=ye(),{vIf:n,vShow:i,vBind:s,vFor:o,vModels:r,onValueChange:p,onForChange:m,onModelChange:y}=As(a),g=h=>h.arg?typeof h.arg=="string"?h.arg:Qe(h.arg,{}):"modelValue";return(h,v)=>(u(),f(l(O),{class:"v-directives-widget",direction:"column",fit:""},{default:b(()=>[c(l(L),{class:"v-sub-panel",title:"内置指令",size:"small",fit:!1},{default:b(()=>[c(l(ve),{size:"small","label-width":"80px",onKeydown:v[0]||(v[0]=He(Be(()=>{},["prevent","stop"]),["enter"]))},{default:b(()=>[c(l(W),{name:"vIf",label:"v-if",setters:"ExpressionSetter",current:l(e),context:l(t),value:l(n).value,onChange:l(p)},null,8,["current","context","value","onChange"]),c(l(W),{name:"vShow",label:"v-show",setters:"ExpressionSetter",current:l(e),context:l(t),value:l(i).value,onChange:l(p)},null,8,["current","context","value","onChange"]),c(l(W),{name:"vBind",label:"v-bind",setters:"ExpressionSetter",current:l(e),context:l(t),value:l(s).value,onChange:l(p)},null,8,["current","context","value","onChange"])]),_:1})]),_:1}),c(l(L),{class:"v-sub-panel",title:"循环",size:"small",fit:!1},{default:b(()=>[c(l(ve),{size:"small","label-width":"80px",onKeydown:v[1]||(v[1]=He(Be(()=>{},["prevent","stop"]),["enter"]))},{default:b(()=>[c(l(W),{name:"value",label:"循环数据",setters:"ExpressionSetter",current:l(e),context:l(t),value:l(o).value,onChange:l(m)},null,8,["current","context","value","onChange"]),c(l(W),{name:"item",label:"迭代变量名",setters:{name:"StringSetter",props:{placeholder:"item"}},current:l(e),context:l(t),value:l(o).iterator?.item,onChange:l(m)},null,8,["current","context","value","onChange"]),c(l(W),{name:"index",label:"索引变量名",setters:{name:"StringSetter",props:{placeholder:"index"}},current:l(e),context:l(t),value:l(o).iterator?.index,onChange:l(m)},null,8,["current","context","value","onChange"])]),_:1})]),_:1}),c(l(L),{class:"v-sub-panel",title:"双向绑定",size:"small",fit:!1,grow:""},{default:b(()=>[(u(!0),C($,null,I(l(r),(w,k)=>(u(),f(l(L),{card:"",border:"",class:"v-sub-panel",size:"small",title:`v-model: ${g(w)}`,body:{grow:!1},fit:!1},{default:b(()=>[c(l(ve),{size:"small","label-width":"60px",onKeydown:v[2]||(v[2]=He(Be(()=>{},["prevent","stop"]),["enter"]))},{default:b(()=>[c(l(W),{name:k.toString(),label:"绑定变量",setters:"ExpressionSetter",current:l(e),context:l(t),value:w.value,onChange:l(y)},null,8,["name","current","context","value","onChange"])]),_:2},1024)]),_:2},1032,["title"]))),256)),l(r).length?j("",!0):(u(),f(l(ae),{key:0,description:"当前组件没有双向绑定属性","image-size":50}))]),_:1})]),_:1}))}}),jo=V({name:"DefinedPropsDialog",__name:"props",props:{item:{},current:{},context:{}},setup(d){const e=d,t=S(()=>e.item?"编辑定义属性":"新增定义属性"),a=_(Object.assign({default:{type:"JSExpression",value:""}},e.item)),n=Object.keys(_a).map(s=>({label:s,value:s})),i=async s=>{const o=s.default;return o&&!se(o,e.context,!0)?!1:(e.current.setProp(s),!0)};return(s,o)=>(u(),f(l(fe),{title:t.value,width:"800px",height:"500px",model:a.value,"form-props":{tooltipMessage:!1},"submit-method":i},{default:b(()=>[c(l(P),{name:"name",label:"属性名称",required:"",tip:"名称为英文驼峰格式",disabled:!!e.item,rules:{message:"名称格式错误",pattern:l(Ce)}},null,8,["disabled","rules"]),c(l(P),{name:"type",label:"数据类型",editor:"checkbox",props:{button:!0,size:"small"},options:l(n),required:""},null,8,["options"]),c(l(P),{name:"required",label:"必须",editor:"switch"}),c(l(P),{name:"default.value",label:"默认值",editor:"none"},{default:b(()=>[c(l(le),{modelValue:a.value.default.value,"onUpdate:modelValue":o[0]||(o[0]=r=>a.value.default.value=r),height:"200px",dark:""},null,8,["modelValue"])]),_:1})]),_:1},8,["title","model"]))}}),Eo=V({name:"DefinedEventsDialog",__name:"events",props:{item:{},current:{},context:{}},setup(d){const e=d,t=S(()=>e.item?"编辑定义事件":"新增定义事件"),a=_({name:e.item}),n=async i=>(e.item&&e.current.removeEmit(e.item,!0),e.current.setEmit(i.name),!0);return(i,s)=>(u(),f(l(fe),{title:t.value,width:"600px",height:"200px",model:a.value,"form-props":{tooltipMessage:!1},"submit-method":n},{default:b(()=>[c(l(P),{name:"name",label:"事件名称",required:"",disabled:!!e.item,rules:{message:"名称格式错误",pattern:l(Ce)}},null,8,["disabled","rules"])]),_:1},8,["title","model"]))}}),Ao=V({name:"DefinedSlotsDialog",__name:"slots",props:{item:{},current:{},context:{}},setup(d){const e=d,t=S(()=>e.item?"编辑定义插槽":"新增定义插槽"),a=_({name:e.item}),n=async i=>(e.item&&e.current.removeSlot(e.item,!0),e.current.setSlot(i.name),!0);return(i,s)=>(u(),f(l(fe),{title:t.value,width:"600px",height:"200px",model:a.value,"form-props":{tooltipMessage:!1},"submit-method":n},{default:b(()=>[c(l(P),{name:"name",label:"插槽名称",disabled:!!e.item,required:"",rules:{message:"名称格式错误",pattern:l(Ce)}},null,8,["disabled","rules"])]),_:1},8,["title","model"]))}}),zo=V({name:"DefinedInjectsDialog",__name:"injects",props:{item:{},current:{},context:{}},setup(d){const e=d,t=S(()=>e.item?"编辑注入":"新增注入"),a=_(Object.assign({default:{type:"JSExpression",value:""}},e.item)),n=async i=>{const s=i.default;return s&&!se(s,e.context,!0)?!1:(e.current.setInject(i),!0)};return(i,s)=>(u(),f(l(fe),{title:t.value,width:"800px",height:"500px",model:a.value,"form-props":{tooltipMessage:!1},"submit-method":n},{default:b(()=>[c(l(P),{name:"name",label:"注入名称",required:"",tip:"名称为英文驼峰格式",disabled:!!e.item,rules:{message:"名称格式错误",pattern:l(Ce)}},null,8,["disabled","rules"]),c(l(P),{name:"from",label:"来源名称",tip:"默认和注入名称一致"}),c(l(P),{name:"default.value",label:"默认值",editor:"none"},{default:b(()=>[c(l(le),{modelValue:a.value.default.value,"onUpdate:modelValue":s[0]||(s[0]=o=>a.value.default.value=o),height:"200px",dark:""},null,8,["modelValue"])]),_:1})]),_:1},8,["title","model"]))}}),Po=V({name:"DefinedWidget",__name:"index",setup(d){const{current:e,context:t}=oe(),a=S(()=>(e.value?.props||[]).map(U=>typeof U=="string"?{name:U}:U)),n=S(()=>e.value?.emits||[]),i=S(()=>e.value?.slots||[]),s=S(()=>e.value?.inject||[]),o=_(!1),r=_(),p=_(!1),m=_(),y=_(!1),g=_(),h=_(!1),v=_(),w=()=>{r.value=void 0,o.value=!0},k=U=>{const{name:K,modelValue:F}=U;K==="edit"&&E(F),K==="remove"&&e.value?.removeProp(F)},E=U=>{r.value=U,o.value=!0},A=()=>{m.value=void 0,p.value=!0},z=U=>{m.value=U,p.value=!0},D=U=>{const{name:K,modelValue:F}=U;K==="edit"&&z(F),K==="remove"&&e.value?.removeEmit(F)},J=()=>{g.value=void 0,y.value=!0},T=U=>{g.value=U,y.value=!0},R=U=>{const{name:K,modelValue:F}=U;K==="edit"&&T(F),K==="remove"&&e.value?.removeSlot(F)},ee=()=>{v.value=void 0,h.value=!0},ge=U=>{v.value=U,h.value=!0},ce=U=>{const{name:K,modelValue:F}=U;K==="edit"&&ge(F),K==="remove"&&e.value?.removeInject(F)};return(U,K)=>l(e)&&l(t)?(u(),f(l(O),{key:0,class:"v-defined-widget",direction:"column",fit:""},{default:b(()=>[c(l(L),{class:"v-sub-panel",title:"定义属性",size:"small",plus:"",fit:!1,onPlus:w},{default:b(()=>[(u(!0),C($,null,I(a.value,F=>(u(),f(l(ne),{"model-value":F,title:F.name,border:"",actions:["edit","remove"],onClick:et=>E(F),onAction:k},null,8,["model-value","title","onClick"]))),256)),a.value.length?j("",!0):(u(),f(l(ae),{key:0,"image-size":50})),o.value?(u(),f(jo,{key:1,current:l(e),context:l(t),modelValue:o.value,"onUpdate:modelValue":K[0]||(K[0]=F=>o.value=F),item:r.value},null,8,["current","context","modelValue","item"])):j("",!0)]),_:1}),c(l(L),{class:"v-sub-panel",title:"定义事件",size:"small",plus:"",fit:!1,onPlus:A},{default:b(()=>[(u(!0),C($,null,I(n.value,F=>(u(),f(l(ne),{"model-value":F,title:F,border:"",actions:["remove"],onClick:et=>z(F),onAction:D},null,8,["model-value","title","onClick"]))),256)),n.value.length?j("",!0):(u(),f(l(ae),{key:0,"image-size":50})),p.value?(u(),f(Eo,{key:1,modelValue:p.value,"onUpdate:modelValue":K[1]||(K[1]=F=>p.value=F),current:l(e),context:l(t),item:m.value},null,8,["modelValue","current","context","item"])):j("",!0)]),_:1}),c(l(L),{class:"v-sub-panel",title:"定义插槽",size:"small",plus:"",fit:!1,onPlus:J},{default:b(()=>[(u(!0),C($,null,I(i.value,F=>(u(),f(l(ne),{"model-value":F,title:F,border:"",actions:["remove"],onClick:et=>T(F),onAction:R},null,8,["model-value","title","onClick"]))),256)),i.value.length?j("",!0):(u(),f(l(ae),{key:0,"image-size":50})),y.value?(u(),f(Ao,{key:1,modelValue:y.value,"onUpdate:modelValue":K[2]||(K[2]=F=>y.value=F),current:l(e),context:l(t),item:g.value},null,8,["modelValue","current","context","item"])):j("",!0)]),_:1}),c(l(L),{class:"v-sub-panel",title:"注入",size:"small",plus:"",fit:!1,grow:"",onPlus:ee},{default:b(()=>[(u(!0),C($,null,I(s.value,F=>(u(),f(l(ne),{"model-value":F,title:F.name,border:"",actions:["remove"],onClick:et=>ge(F),onAction:ce},null,8,["model-value","title","onClick"]))),256)),s.value.length?j("",!0):(u(),f(l(ae),{key:0,"image-size":50})),h.value?(u(),f(zo,{key:1,modelValue:h.value,"onUpdate:modelValue":K[3]||(K[3]=F=>h.value=F),current:l(e),context:l(t),item:v.value},null,8,["modelValue","current","context","item"])):j("",!0)]),_:1})]),_:1})):j("",!0)}}),Do=V({name:"DataSourceDialogForm",__name:"form",props:{context:{},current:{},item:{}},setup(d){const e=d,{apis:t}=zs(),a=_(Object.assign({type:"api",ref:"",name:"",label:"",transform:{type:"JSFunction",value:`(res) => {
    /* 在这里可对接口返回数据进行转换  */
    return res;
}`},test:{type:"JSFunction",value:`() => this.runApi({
    /* 在这里可输入接口参数  */
})`}},e.item)),n=_(!1),i=_(""),s=_(!1),o=S(()=>t.value.map(g=>({label:g.label||"",value:g.id,data:g}))),r=S(()=>e.item?"编辑数据源":"新增数据源"),p=g=>{const h=t.value.find(v=>v.id===g);h&&(a.value.name=h.name,a.value.label=h.label||"")},m=async g=>{const{transform:h,test:v,name:w}=g;if(!e.current)return!1;if(!e.item&&e.current.dataSources[w])return te(`名称【${w}】已经存在，请更换名称`),!1;if(h?.value){if(!se(h,e.context,!0))return!1}else g.transform=void 0;if(v?.value){if(!se(v,e.context,!0))return!1}else g.test=void 0;return e.current?.setDataSource(g),!0},y=async()=>{if(!e.context)return;if(!a.value.ref){te("请先选择API");return}if(!a.value.test?.value){te("请先填写测试用例");return}if(!se(a.value.test,e.context,!0))return;const g=async(...w)=>{const k=e.context?.$apis[a.value.ref];if(k)return await k.apply(k,w);Se.warn(`API【${a.value.ref}】不存在`)},h=Qe(a.value.test,{runApi:g}),v=a.value.transform?.value?Qe(a.value.transform,{},!0):w=>w;n.value=!0;try{const w=await h();i.value=JSON.stringify(await v(w),null,2)}catch(w){Se.error(w)}n.value=!1,s.value=!0};return(g,h)=>(u(),f(l(fe),{width:"1000px",height:"600px",title:r.value,model:a.value,"form-props":{tooltipMessage:!1},"submit-method":m},{extra:b(()=>[c(l(de),{loading:n.value,type:"warning",onClick:y},{default:b(()=>[q(" 运行测试用例 ")]),_:1},8,["loading"])]),default:b(()=>[c(l(P),{name:"ref",label:"引用API",editor:"select",required:"",disabled:!!e.item,options:o.value,props:{filterable:!0},onChange:p},{option:b(({option:v})=>[q(B(v.data.label)+" ",1),x("i",null,"[ "+B(v.data.name)+" ]",1)]),_:1},8,["disabled","options"]),c(l(P),{name:"name",label:"调用名称",required:"",tip:"名称为英文驼峰格式",disabled:!!e.item,rules:{message:"名称格式错误",pattern:l(Ce)}},null,8,["disabled","rules"]),c(l(P),{name:"label",label:"备注说明",required:""}),c(l(P),{name:"transform.value",label:"转换函数",editor:"none"},{default:b(()=>[c(l(le),{modelValue:a.value.transform.value,"onUpdate:modelValue":h[0]||(h[0]=v=>a.value.transform.value=v),height:"200px",dark:""},null,8,["modelValue"])]),_:1}),c(l(P),{name:"test.value",label:"测试用例",editor:"none"},{default:b(()=>[c(l(le),{modelValue:a.value.test.value,"onUpdate:modelValue":h[1]||(h[1]=v=>a.value.test.value=v),height:"100px",dark:""},null,8,["modelValue"])]),_:1}),s.value?(u(),f(l(Dl),{key:0,class:"v-drawer",modelValue:s.value,"onUpdate:modelValue":h[2]||(h[2]=v=>s.value=v),title:"测试用例运行结果",direction:"btt","append-to-body":"",size:"80%"},{default:b(()=>[c(l(le),{"model-value":i.value,border:"",dark:"",height:"100%",lang:"json"},null,8,["model-value"])]),_:1},8,["modelValue"])):j("",!0)]),_:1},8,["title","model"]))}}),Jo=V({name:"DataSourcesWidget",__name:"index",setup(d){const{current:e,context:t}=oe(),a=_(!1),n=_(),i=S(()=>Object.values(e.value?.dataSources||{}).filter(p=>p.type==="api")),s=()=>{n.value=void 0,a.value=!0},o=p=>{n.value=p,a.value=!0},r=p=>{const{name:m,modelValue:y}=p;m==="edit"&&o(y),m==="remove"&&e.value?.removeDataSource(y.name)};return(p,m)=>(u(),f(l(O),{class:"v-data-sources-widget",direction:"column",fit:""},{default:b(()=>[c(l(L),{title:"API",class:"v-sub-panel",size:"small",plus:"",onPlus:s},{default:b(()=>[(u(!0),C($,null,I(i.value,y=>(u(),f(l(ne),{border:"",title:y.name,subtitle:y.label,"model-value":y,actions:["edit","remove"],onAction:r,onClick:g=>o(y)},null,8,["title","subtitle","model-value","onClick"]))),256)),i.value.length?j("",!0):(u(),f(l(ae),{key:0,"image-size":50}))]),_:1}),a.value?(u(),f(Do,{key:0,modelValue:a.value,"onUpdate:modelValue":m[0]||(m[0]=y=>a.value=y),current:l(e),context:l(t),item:n.value},null,8,["modelValue","current","context","item"])):j("",!0)]),_:1}))}}),$o=V({__name:"layout",props:{styleJson:{},setStyle:{type:Function}},setup(d){const e=d,t=_();H(()=>e.styleJson.display,p=>{t.value=p==="flex"},{immediate:!0});const a=[{label:"block-块级布局",value:"block",svg:Pa},{label:"flex-弹性布局",value:"flex",svg:Da},{label:"inline-block-行内块级布局",value:"inline-block",svg:Ja},{label:"inline-行内布局",value:"inline",svg:$a},{label:"invisible-不可见",value:"none",svg:Ra}],n=[{label:"row-水平",value:"row",svg:Ba},{label:"row-reverse-水平",value:"row-reverse",svg:Ia},{label:"column-垂直",value:"column",svg:Ta},{label:"column-reverse-垂直",value:"column-reverse",svg:Fa}],i=[{label:"flex-start",value:"flex-start",svg:Wa},{label:"flex-end",value:"flex-end",svg:La},{label:"center",value:"center",svg:Oa},{label:"space-between",value:"space-between",svg:Na},{label:"space-around",value:"space-around",svg:Ua}],s=[{label:"不换行",value:"nowrap"},{label:"正换行",value:"wrap"},{label:"逆换行",value:"wrap-reverse"}],o=[{label:"flex-start",value:"flex-start",svg:Ma},{label:"flex-end",value:"flex-end",svg:Ha},{label:"center",value:"center",svg:qa},{label:"baseline",value:"baseline",svg:Qa},{label:"stretch",value:"stretch",svg:Za}],r=(p,m)=>{t.value=m==="flex",e.setStyle("display",m),t.value||(e.setStyle("flex-direction",void 0),e.setStyle("justify-content",void 0),e.setStyle("align-items",void 0),e.setStyle("flex-wrap",void 0))};return(p,m)=>(u(),f(l(L),{title:"布局",class:"v-sub-panel",size:"small",fit:!1,collapsable:""},{default:b(()=>[c(l(ve),{size:"small","label-width":"80px"},{default:b(()=>[c(l(W),{name:"display",label:"排布",setters:{name:"TagSetter"},options:a,variable:!1,value:e.styleJson.display,onChange:r},null,8,["value"]),t.value?(u(),C($,{key:0},[c(l(W),{name:"flex-direction",label:"主轴方向",setters:{name:"TagSetter"},options:n,variable:!1,value:e.styleJson["flex-direction"],onChange:e.setStyle},null,8,["value","onChange"]),c(l(W),{name:"justify-content",label:"主轴对齐",setters:{name:"TagSetter"},options:i,variable:!1,value:e.styleJson["justify-content"],onChange:e.setStyle},null,8,["value","onChange"]),c(l(W),{name:"align-items",label:"辅轴对齐",setters:{name:"TagSetter"},options:o,variable:!1,value:e.styleJson["align-items"],onChange:e.setStyle},null,8,["value","onChange"]),c(l(W),{name:"flex-wrap",label:"换行模式",setters:{name:"TagSetter"},options:s,variable:!1,value:e.styleJson["flex-wrap"],onChange:e.setStyle},null,8,["value","onChange"])],64)):j("",!0)]),_:1})]),_:1}))}}),Ro=V({name:"StyleWidget",__name:"JsonMode",setup(d){const{selected:e}=ye(),t=_(),a=S(()=>{const o=e.value?.model||null;return G(o)?null:o}),n=S(()=>JSON.stringify(a.value?.getPropValue("style")||{},null,2)),i=o=>{try{const r=JSON.parse(o);a.value?.setProp("style",r)}catch{te("JSON格式错误")}},s=()=>{const o=(t.value?.getEditor()).getValue();i(o),ue("保存成功")};return(o,r)=>(u(),f(l(L),{class:"v-css-widget v-sub-panel",title:"JSON",size:"small",fit:"",save:"",onSave:s},{default:b(()=>[c(l(le),{ref_key:"editorRef",ref:t,"model-value":n.value,height:"100%",lang:"json",dark:"",onBlur:i},null,8,["model-value"])]),_:1}))}}),Bo={class:"v-spacing-input"},Io=x("div",{class:"v-spacing-input__modal"},null,-1),To={class:"v-spacing-input__content"},Fo=["onClick"],hl=V({__name:"spacing-input",props:{name:{},modelValue:{},auto:{type:Boolean}},emits:["close","update:modelValue","submit"],setup(d,{emit:e}){const t=[0,10,20,40,60,100,140,220],a=d,n=e,i=S(()=>a.auto||a.name.includes("margin")),s=_(),o=_(a.modelValue),r=_("px");Yn(s,()=>{n("close")});const p=h=>{o.value=typeof h=="number"?`${h}px`:"auto",m(o.value)},m=h=>{r.value=h==="auto"?void 0:"px"},y=()=>{o.value?(n("update:modelValue",o.value),n("submit",a.name,o.value),n("close")):te("请输入有效值","提示")},g=()=>{o.value=void 0,n("update:modelValue",o.value),n("submit",a.name,void 0),n("close")};return(h,v)=>(u(),C("div",Bo,[Io,x("div",To,[c(l(O),{class:"v-spacing-input__body",ref_key:"bodyRef",ref:s,direction:"column"},{default:b(()=>[c(l(O),null,{default:b(()=>[c(l(Xt),{modelValue:o.value,"onUpdate:modelValue":v[0]||(v[0]=w=>o.value=w),size:"small","with-unit":!!r.value,unit:r.value,format:r.value?"0":void 0,onChange:m},null,8,["modelValue","with-unit","unit","format"])]),_:1}),c(l(O),null,{default:b(()=>[i.value?(u(),f(l(O),{key:0,class:"v-spacing-input__auto",width:"20%"},{default:b(()=>[x("span",{onClick:v[1]||(v[1]=w=>p("auto"))},"auto")]),_:1})):j("",!0),c(l(O),{grow:"",class:"v-spacing-input__values",align:"center",wrap:"wrap"},{default:b(()=>[(u(),C($,null,I(t,w=>x("span",{onClick:k=>p(w)},B(w),9,Fo)),64))]),_:1})]),_:1}),c(l(O),null,{default:b(()=>[c(l(de),{size:"small",type:"primary",round:"",style:{width:"100%"},onClick:y},{default:b(()=>[q(" 确定 ")]),_:1}),c(l(de),{size:"small",round:"",style:{width:"100%"},onClick:g},{default:b(()=>[q(" 重置 ")]),_:1})]),_:1})]),_:1},512)])]))}}),Wo={class:"spacing-wrap"},Lo={class:"spacing-max-icon"},Oo=["width","height"],No=["d"],Uo=["d"],Mo=["d"],Ho=["d"],qo={id:"margin-outer"},Qo=["width","height"],Zo=["width","height"],Ko={id:"margin-inner"},Go=["width","height"],Yo=["width","height"],Xo=["width","height"],ei=["d"],ti=["d"],li=["d"],ai=["d"],ni={id:"padding-outer"},si=["width","height"],oi=["width","height"],ii={id:"padding-inner"},ri=["width","height"],ui=["width","height"],di={xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",style:{"grid-area":"3 / 3 / span 3 / span 3","pointer-events":"none"}},ci=x("text",{x:"6",y:"4",fill:"#a6a6a6","font-style":"italic","font-weight":"bold","font-size":"8","dominant-baseline":"hanging"}," padding ",-1),mi=[ci],pi={xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",style:{"grid-area":"1 / 1 / -1 / -1","pointer-events":"none"}},vi=x("text",{x:"6",y:"4",fill:"#a6a6a6","font-style":"italic","font-weight":"bold","font-size":"8","dominant-baseline":"hanging"}," margin ",-1),gi=[vi],Q=36,Z=24,hi=V({__name:"spacing",props:{styleJson:{},setStyle:{type:Function}},setup(d){const e=d,t=_(),a=_(),{width:n,height:i}=Fe(t),{width:s,height:o}=Fe(a),r=_(!1),p=_(),m=_(),y=()=>{r.value=!1,p.value=void 0,m.value=void 0},g=h=>{p.value=h,m.value=e.styleJson[h],r.value=!0};return(h,v)=>(u(),f(l(L),{title:"间距",class:"v-sub-panel",size:"small",fit:!1,collapsable:""},{default:b(()=>[x("div",{class:"v-style-widget__spacing",ref_key:"container",ref:t},[x("div",Wo,[x("div",Lo,[l(n)&&l(i)?(u(),C("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",width:l(n),height:l(i),style:{"grid-area":"1 / 1 / -1 / -1"}},[x("g",null,[x("g",null,[x("path",{mode:"delta",fill:"currentColor",d:`
              m1,1
              h${l(n)-1}
              l-${Q},${Z}
              h-${l(n)-2*Q}
              l-${Q},-${Z}z`,"data-automation-id":"margin-top-button","aria-label":"Margin top button",class:"tb-path-color",onClick:v[0]||(v[0]=w=>g("margin-top"))},null,8,No)])]),x("g",null,[x("g",null,[x("path",{mode:"delta",fill:"currentColor",d:`
              m${l(n)-1},1
              v${l(i)-1}
              l-${Q},-${Z}
              v-${l(i)-2*Z}
              l${Q},-${Z}z`,"data-automation-id":"margin-right-button","aria-label":"Margin right button",class:"lr-path-color",onClick:v[1]||(v[1]=w=>g("margin-right"))},null,8,Uo)])]),x("g",null,[x("g",null,[x("path",{mode:"delta",fill:"currentColor",d:`
              m1,${l(i)-1}
              h${l(n)-1}
              l-${Q},-${Z}
              h-${l(n)-2*Q}
              l-${Q},${Z}z`,"data-automation-id":"margin-bottom-button","aria-label":"Margin bottom button",class:"tb-path-color",onClick:v[2]||(v[2]=w=>g("margin-bottom"))},null,8,Mo)])]),x("g",null,[x("g",null,[x("path",{mode:"delta",fill:"currentColor",d:`
              m1,1
              v${l(i)-1}
              l${Q},-${Z}
              v-${l(i)-2*Z}
              l-${Q},-${Z}z`,"data-automation-id":"margin-left-button","aria-label":"Margin left button",class:"lr-path-color",onClick:v[3]||(v[3]=w=>g("margin-left"))},null,8,Ho)])]),x("clipPath",qo,[x("rect",{x:"0",y:"0",width:l(n),height:l(i),fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none"}},null,8,Qo)]),x("rect",{class:"stroke","clip-path":"url(#margin-outer)",x:"0",y:"0",width:l(n),height:l(i),fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none","stroke-width":"2px"}},null,8,Zo),x("clipPath",Ko,[x("rect",{x:"36",y:"24",width:l(n)-2*Q+1,height:l(i)-2*Z+1,fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none"}},null,8,Go)]),x("rect",{class:"stroke","clip-path":"url(#margin-inner)",x:"36",y:"24",width:l(n)-2*Q+1,height:l(i)-2*Z+1,fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none","stroke-width":"2px"}},null,8,Yo)],8,Oo)):j("",!0),x("div",{class:N(["spacing-edit margin-top",{"is-setting":e.styleJson["margin-top"]}]),onClick:v[4]||(v[4]=w=>g("margin-top"))},B(e.styleJson["margin-top"]||"-"),3),x("div",{class:N(["spacing-edit margin-right",{"is-setting":e.styleJson["margin-right"]}]),onClick:v[5]||(v[5]=w=>g("margin-right"))},B(e.styleJson["margin-right"]||"-"),3),x("div",{class:N(["spacing-edit margin-bottom",{"is-setting":e.styleJson["margin-bottom"]}]),onClick:v[6]||(v[6]=w=>g("margin-bottom"))},B(e.styleJson["margin-bottom"]||"-"),3),x("div",{class:N(["spacing-edit margin-left",{"is-setting":e.styleJson["margin-left"]}]),onClick:v[7]||(v[7]=w=>g("margin-left"))},B(e.styleJson["margin-left"]||"-"),3)]),x("div",{ref_key:"inner",ref:a,class:"spacing-min-icon"},[l(n)&&l(i)?(u(),C("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",width:l(s),height:l(o),style:{"grid-area":"1 / 1 / -1 / -1"}},[x("g",null,[x("g",null,[x("path",{mode:"delta",fill:"currentColor",d:`
              m1,1
              h${l(s)-1}
              l-${Q},${Z}
              h-${l(s)-2*Q}
              l-${Q},-${Z}z`,"data-automation-id":"padding-top-button","aria-label":"Padding top button",class:"tb-path-color",onClick:v[8]||(v[8]=w=>g("padding-top"))},null,8,ei)])]),x("g",null,[x("g",null,[x("path",{mode:"delta",fill:"currentColor",d:`
              m${l(s)-1},1
              v${l(o)-1}
              l-${Q},-${Z}
              v-${l(o)-2*Z}
              l${Q},-${Z}z`,"data-automation-id":"padding-right-button","aria-label":"Padding right button",class:"lr-path-color",onClick:v[9]||(v[9]=w=>g("padding-right"))},null,8,ti)])]),x("g",null,[x("g",null,[x("path",{mode:"delta",fill:"currentColor",d:`
              m1,${l(o)-1}
              h${l(s)-1}
              l-${Q},-${Z}
              h-${l(s)-2*Q}
              l-${Q},${Z}z`,"data-automation-id":"padding-bottom-button","aria-label":"Padding bottom button",class:"tb-path-color",onClick:v[10]||(v[10]=w=>g("padding-bottom"))},null,8,li)])]),x("g",null,[x("g",null,[x("path",{mode:"delta",fill:"currentColor",d:`
              m1,1
              v${l(o)-1}
              l${Q},-${Z}
              v-${l(o)-2*Z}
              l-${Q},-${Z}z`,"data-automation-id":"padding-left-button","aria-label":"Padding left button",class:"lr-path-color",onClick:v[11]||(v[11]=w=>g("padding-left"))},null,8,ai)])]),x("clipPath",ni,[x("rect",{x:"0",y:"0",width:l(s),height:l(o),fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none"}},null,8,si)]),x("rect",{class:"stroke","clip-path":"url(#padding-outer)",x:"0",y:"0",width:l(s),height:l(o),fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none","stroke-width":"2px"}},null,8,oi),x("clipPath",ii,[x("rect",{x:"36",y:"24",width:l(s)-2*Q+1,height:l(o)-2*Z+1,fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none"}},null,8,ri)]),x("rect",{class:"stroke","clip-path":"url(#padding-inner)",x:"36",y:"24",width:l(s)-2*Q+1,height:l(o)-2*Z+1,fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none","stroke-width":"2px"}},null,8,ui)],8,Xo)):j("",!0),x("div",{class:N(["spacing-edit padding-top",{"is-setting":e.styleJson["padding-top"]}]),onClick:v[12]||(v[12]=w=>g("padding-top"))},B(e.styleJson["padding-top"]||"-"),3),x("div",{class:N(["spacing-edit padding-right",{"is-setting":e.styleJson["padding-right"]}]),onClick:v[13]||(v[13]=w=>g("padding-right"))},B(e.styleJson["padding-right"]||"-"),3),x("div",{class:N(["spacing-edit padding-bottom",{"is-setting":e.styleJson["padding-bottom"]}]),onClick:v[14]||(v[14]=w=>g("padding-bottom"))},B(e.styleJson["padding-bottom"]||"-"),3),x("div",{class:N(["spacing-edit padding-left",{"is-setting":e.styleJson["padding-left"]}]),onClick:v[15]||(v[15]=w=>g("padding-left"))},B(e.styleJson["padding-left"]||"-"),3)],512),(u(),C("svg",di,mi)),(u(),C("svg",pi,gi))]),r.value?(u(),f(hl,{key:0,name:p.value,modelValue:m.value,"onUpdate:modelValue":v[16]||(v[16]=w=>m.value=w),onClose:y,onSubmit:e.setStyle},null,8,["name","modelValue","onSubmit"])):j("",!0)],512)]),_:1}))}}),bi=V({__name:"sizing",props:{styleJson:{},setStyle:{type:Function}},setup(d){const e=d,t=[{name:"width",label:"宽(W)",setter:"SizeSetter"},{name:"height",label:"高(H)",setter:"SizeSetter"},{name:"min-width",label:"最小宽",setter:"SizeSetter"},{name:"min-height",label:"最小高",setter:"SizeSetter"},{name:"max-width",label:"最大宽",setter:"SizeSetter"},{name:"max-height",label:"最大高",setter:"SizeSetter"},{name:"overflow",label:"溢出",setter:"SelectSetter",options:[{label:"自动",value:"auto"},{label:"隐藏",value:"hidden"},{label:"滚动",value:"scroll"},{label:"显示",value:"visible"}]},{name:"object-fit",label:"适应",setter:"SelectSetter",options:[{label:"填充",value:"fill"},{label:"适应",value:"contain"},{label:"覆盖",value:"cover"},{label:"拉伸",value:"scale-down"},{label:"原始",value:"none"}]}];return(a,n)=>(u(),f(l(L),{title:"尺寸",class:"v-sub-panel v-",size:"small",fit:!1,collapsable:""},{default:b(()=>[c(l(ve),{class:"v-style-widget__sizing",size:"small","label-width":"60px",inline:""},{default:b(()=>[(u(),C($,null,I(t,i=>c(l(W),{name:i.name,label:i.label,setters:{name:i.setter},options:i.options,variable:!1,value:e.styleJson[i.name],onChange:a.setStyle},null,8,["name","label","setters","options","value","onChange"])),64))]),_:1})]),_:1}))}}),fi={class:"v-style-widget__positioning"},yi={class:"spacing-wrap"},wi=["width","height"],ki=["d"],_i=["d"],Si=["d"],xi=["d"],Ci={id:"margin-outer"},Vi=["width","height"],ji=["width","height"],Ei={id:"margin-inner"},Ai=["width","height"],zi=["width","height"],me=36,pe=24,Pi=V({__name:"positioning",props:{styleJson:{},setStyle:{type:Function}},setup(d){const e=d,t=_(),{width:a,height:n}=Fe(t),i=_(!1),s=_(),o=_(),r=[{label:"静态",value:"static"},{label:"相对",value:"relative"},{label:"绝对",value:"absolute"},{label:"固定",value:"fixed"},{label:"粘性",value:"sticky"}],p=[{label:"左上",svg:Ka,value:"0% auto auto 0%"},{label:"右上",svg:Ga,value:"0% 0% auto auto"},{label:"左下",svg:Ya,value:"auto auto 0% 0%"},{label:"右下",svg:Xa,value:"auto 0% 0% auto"},{label:"左",svg:en,value:"0% auto 0% 0%"},{label:"右",svg:tn,value:"0% 0% 0% auto"},{label:"上",svg:ln,value:"auto 0% 0% 0%"},{label:"下",svg:an,value:"0% 0% auto 0%"},{label:"填充",svg:nn,value:"0% 0% 0% 0%"}],m=S(()=>(e.styleJson.inset||"").split(" ")),y=h=>{s.value=h,o.value=e.styleJson[h],i.value=!0},g=()=>{i.value=!1,s.value=void 0,o.value=void 0};return(h,v)=>(u(),f(l(L),{title:"定位",class:"v-sub-panel",size:"small",fit:!1,collapsable:""},{default:b(()=>[x("div",fi,[c(l(ve),{"label-width":"60px",size:"small"},{default:b(()=>[c(l(W),{name:"position",label:"定位",setters:{name:"SelectSetter"},options:r,variable:!1,value:e.styleJson.position,onChange:e.setStyle},null,8,["value","onChange"]),c(l(W),{name:"inset",label:" ",setters:{name:"TagSetter"},options:p,variable:!1,value:e.styleJson.inset,onChange:e.setStyle},null,8,["value","onChange"]),c(l(Wt),{label:" "},{default:b(()=>[x("div",yi,[x("div",{ref_key:"inner",ref:t,class:"spacing-min-icon"},[l(a)&&l(a)?(u(),C("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",width:l(a),height:l(n),style:{"grid-area":"1 / 1 / -1 / -1"}},[x("g",null,[x("g",null,[x("path",{mode:"delta",fill:"currentColor",d:`
              m1,1
              h${l(a)-1}
              l-${me},${pe}
              h-${l(a)-2*me}
              l-${me},-${pe}z`,"data-automation-id":"padding-top-button","aria-label":"Padding top button",class:"tb-path-color",onClick:v[0]||(v[0]=w=>y("top"))},null,8,ki)])]),x("g",null,[x("g",null,[x("path",{mode:"delta",fill:"currentColor",d:`
              m${l(a)-1},1
              v${l(n)-1}
              l-${me},-${pe}
              v-${l(n)-2*pe}
              l${me},-${pe}z`,"data-automation-id":"padding-right-button","aria-label":"Padding right button",class:"lr-path-color",onClick:v[1]||(v[1]=w=>y("right"))},null,8,_i)])]),x("g",null,[x("g",null,[x("path",{mode:"delta",fill:"currentColor",d:`
              m1,${l(n)-1}
              h${l(a)-1}
              l-${me},-${pe}
              h-${l(a)-2*me}
              l-${me},${pe}z`,"data-automation-id":"padding-bottom-button","aria-label":"Padding bottom button",class:"tb-path-color",onClick:v[2]||(v[2]=w=>y("bottom"))},null,8,Si)])]),x("g",null,[x("g",null,[x("path",{mode:"delta",fill:"currentColor",d:`
              m1,1
              v${l(n)-1}
              l${me},-${pe}
              v-${l(n)-2*pe}
              l-${me},-${pe}z`,"data-automation-id":"padding-left-button","aria-label":"Padding left button",class:"lr-path-color",onClick:v[3]||(v[3]=w=>y("left"))},null,8,xi)])]),x("clipPath",Ci,[x("rect",{x:"0",y:"0",width:l(a),height:l(n),fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none"}},null,8,Vi)]),x("rect",{class:"stroke","clip-path":"url(#margin-outer)",x:"0",y:"0",width:l(a),height:l(n),fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none","stroke-width":"2px"}},null,8,ji),x("clipPath",Ei,[x("rect",{x:"36",y:"24",width:l(a)-2*me+1,height:l(n)-2*pe+1,fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none"}},null,8,Ai)]),x("rect",{class:"stroke","clip-path":"url(#margin-inner)",x:"36",y:"24",width:l(a)-2*me+1,height:l(n)-2*pe+1,fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none","stroke-width":"2px"}},null,8,zi)],8,wi)):j("",!0),x("div",{class:N(["spacing-edit padding-top",{"is-setting":e.styleJson.top}]),onClick:v[4]||(v[4]=w=>y("top"))},B(e.styleJson.top||m.value[0]||"-"),3),x("div",{class:N(["spacing-edit padding-right",{"is-setting":e.styleJson.right}]),onClick:v[5]||(v[5]=w=>y("right"))},B(e.styleJson.right||m.value[1]||"-"),3),x("div",{class:N(["spacing-edit padding-bottom",{"is-setting":e.styleJson.bottom}]),onClick:v[6]||(v[6]=w=>y("bottom"))},B(e.styleJson.bottom||m.value[2]||"-"),3),x("div",{class:N(["spacing-edit padding-left",{"is-setting":e.styleJson.left}]),onClick:v[7]||(v[7]=w=>y("left"))},B(e.styleJson.left||m.value[3]||"-"),3)],512),i.value?(u(),f(hl,{key:0,auto:"",name:s.value,modelValue:o.value,"onUpdate:modelValue":v[8]||(v[8]=w=>o.value=w),onClose:g,onSubmit:e.setStyle},null,8,["name","modelValue","onSubmit"])):j("",!0)])]),_:1}),c(l(W),{name:"z-index",label:"层级",setters:{name:"NumberSetter"},variable:!1,value:e.styleJson["z-index"],onChange:e.setStyle},null,8,["value","onChange"])]),_:1})])]),_:1}))}}),Di=V({__name:"texting",props:{styleJson:{},setStyle:{type:Function}},setup(d){const e=d,t=[{name:"font-size",label:"字号",setter:"SizeSetter"},{name:"font-family",label:"字体",setter:"SelectSetter",options:["Arial","Verdana","Georgia",'"Times New Roman"','"Microsoft YaHei"',"SimSun","SimHei","KaiTi","FangSong","STSong","STKaiti","STFangsong","STCaiyun","STHupo","STLiti","STXingkai","STXinwei","STXinwei","STZhongsong"]},{name:"line-height",label:"行高",setter:"SizeSetter"},{name:"font-weight",label:"字重",setter:"SelectSetter",options:[{label:"正常",value:"normal"},{label:"粗体",value:"bold"},{label:"更粗",value:"bolder"},{label:"更细",value:"lighter"}]}],a=[{label:"左",value:"left",svg:sn},{label:"中",value:"center",svg:on},{label:"右",value:"right",svg:rn},{label:"两端",value:"justify",svg:un}],n=[{label:"正常",value:"normal",svg:dn},{label:"斜体",value:"italic",svg:cn}],i=[{label:"无",value:"none",svg:el},{label:"下划线",value:"underline",svg:mn},{label:"删除线",value:"line-through",svg:pn},{label:"上划线",value:"overline",svg:vn}];return(s,o)=>(u(),f(l(L),{title:"文本",class:"v-sub-panel",size:"small",fit:!1,collapsable:""},{default:b(()=>[c(l(ve),{class:"v-style-widget__texting",size:"small","label-width":"60px",inline:""},{default:b(()=>[(u(),C($,null,I(t,r=>c(l(W),{name:r.name,label:r.label,setters:{name:r.setter},options:r.options,variable:!1,value:e.styleJson[r.name],onChange:s.setStyle},null,8,["name","label","setters","options","value","onChange"])),64))]),_:1}),c(l(ve),{size:"small","label-width":"60px"},{default:b(()=>[c(l(W),{name:"color",label:"颜色",setters:{name:"ColorSetter"},variable:!1,value:e.styleJson.color,onChange:s.setStyle},null,8,["value","onChange"]),c(l(W),{name:"text-align",label:"对齐",setters:{name:"TagSetter"},variable:!1,options:a,value:e.styleJson["text-align"],onChange:s.setStyle},null,8,["value","onChange"]),c(l(W),{name:"font-style",label:"风格",setters:{name:"TagSetter"},variable:!1,options:n,value:e.styleJson["font-style"],onChange:s.setStyle},null,8,["value","onChange"]),c(l(W),{name:"text-decoration",label:"修饰",setters:{name:"TagSetter"},variable:!1,options:i,value:e.styleJson["text-decoration"],onChange:s.setStyle},null,8,["value","onChange"])]),_:1})]),_:1}))}}),Ji=V({__name:"backgound",props:{styleJson:{},setStyle:{type:Function}},setup(d){const e=d,t=(r,p)=>{p?e.setStyle("background-image",`url(${p})`):e.setStyle("background-image",void 0)},a=r=>{const p=/^url\(([\w\W]+)\)$/;return r?.match(p)?.[1]},n=[{label:"重复",value:"repeat",svg:gn},{label:"水平重复",value:"repeat-x",svg:hn},{label:"垂直重复",value:"repeat-y",svg:bn},{label:"不重复",value:"no-repeat",svg:fn}],i=[{label:"固定",value:"fixed"},{label:"滚动",value:"scroll"}],s=[{label:"裁剪到填充",value:"padding-box"},{label:"裁剪到内容",value:"content-box"},{label:"裁剪到文字",value:"text"}],o=[{label:"自动",value:"auto"},{label:"长度",value:"length"},{label:"百分比",value:"percentage"},{label:"覆盖",value:"cover"},{label:"填充",value:"contain"}];return(r,p)=>(u(),f(l(L),{title:"背景",class:"v-sub-panel",size:"small",fit:!1,collapsable:""},{default:b(()=>[c(l(ve),{"label-width":"60px",size:"small"},{default:b(()=>[c(l(W),{name:"background-image",label:"图片",setters:{name:"ImageSetter"},variable:!1,value:a(e.styleJson["background-image"]),onChange:t},null,8,["value"]),c(l(W),{name:"background-color",label:"颜色",setters:{name:"ColorSetter"},variable:!1,value:e.styleJson["background-color"],onChange:e.setStyle},null,8,["value","onChange"]),c(l(W),{name:"background-repeat",label:"重复",setters:{name:"TagSetter"},variable:!1,value:e.styleJson["background-repeat"],options:n,onChange:e.setStyle},null,8,["value","onChange"]),c(l(W),{name:"background-attachment",label:"固定",setters:{name:"RadioSetter"},variable:!1,value:e.styleJson["background-attachment"],options:i,onChange:e.setStyle},null,8,["value","onChange"]),c(l(W),{name:"background-position",label:"位置",setters:{name:"SectionSetter",props:{sections:2}},variable:!1,value:e.styleJson["background-position"],onChange:e.setStyle},null,8,["value","onChange"]),c(l(W),{name:"background-size",label:"大小",setters:{name:"SelectSetter"},variable:!1,value:e.styleJson["background-size"],options:o,onChange:e.setStyle},null,8,["value","onChange"]),c(l(W),{name:"background-clip",label:"裁剪",setters:{name:"SelectSetter"},variable:!1,value:e.styleJson["background-clip"],options:s,onChange:e.setStyle},null,8,["value","onChange"])]),_:1})]),_:1}))}}),$i=V({__name:"border",props:{styleJson:{},setStyle:{type:Function}},setup(d){const e=d,t=_("border"),a=[{label:"全边框",svg:yn,value:"border"},{label:"左边框",svg:wn,value:"border-left"},{label:"上边框",svg:kn,value:"border-top"},{label:"下边框",svg:_n,value:"border-bottom"},{label:"右边框",svg:Sn,value:"border-right"}],n=[{label:"无",value:"none",svg:el},{label:"实线",value:"solid",svg:xn},{label:"虚线",value:"dashed",svg:Cn},{label:"点线",value:"dotted",svg:Vn}],i=(s,o)=>{t.value=o};return(s,o)=>(u(),f(l(L),{title:"边框",class:"v-sub-panel",size:"small",fit:!1,collapsable:""},{default:b(()=>[c(l(ve),{"label-width":"60px",size:"small"},{default:b(()=>[c(l(W),{name:"border-radius",label:"圆角",setters:{name:"SectionSetter",props:{sections:4}},variable:!1,value:e.styleJson["border-radius"],onChange:e.setStyle},null,8,["value","onChange"]),c(l(W),{name:"borders",label:"边框",setters:{name:"TagSetter"},variable:!1,options:a,value:t.value,onChange:i},null,8,["value"]),t.value?(u(),C($,{key:0},[(u(),f(l(W),{name:`${t.value}-width`,key:`${t.value}-width`,label:"宽度",setters:{name:"SizeSetter"},variable:!1,value:e.styleJson[`${t.value}-width`],onChange:e.setStyle},null,8,["name","value","onChange"])),(u(),f(l(W),{name:`${t.value}-style`,key:`${t.value}-style`,label:"样式",setters:{name:"TagSetter"},options:n,variable:!1,value:e.styleJson[`${t.value}-style`],onChange:e.setStyle},null,8,["name","value","onChange"])),(u(),f(l(W),{name:`${t.value}-color`,key:`${t.value}-color`,label:"颜色",setters:{name:"ColorSetter"},variable:!1,value:e.styleJson[`${t.value}-color`],onChange:e.setStyle},null,8,["name","value","onChange"]))],64)):j("",!0)]),_:1})]),_:1}))}}),Ri=V({__name:"effect",props:{styleJson:{},setStyle:{type:Function}},setup(d){const e=d,t=[{label:"自动",value:"auto",svg:jn},{label:"Pointer",value:"pointer",svg:En},{label:"NotAllowed",value:"not-allowed",svg:An},{label:"无",value:"none",svg:zn}],a=[{label:"Basic",value:"var(--el-box-shadow)"},{label:"Light",value:"var(--el-box-shadow-light)"},{label:"Lighter",value:"var(--el-box-shadow-lighter)"},{label:"Dark",value:"var(--el-box-shadow-dark)"}],n=(s,o)=>{e.setStyle("opacity",o!==void 0?(Number(o)||0)/100:void 0)},i=()=>Number(e.styleJson.opactiy||0)*100;return(s,o)=>(u(),f(l(L),{title:"效果",class:"v-sub-panel",size:"small",fit:!1,collapsable:""},{default:b(()=>[c(l(ve),{"label-width":"60px",size:"small"},{default:b(()=>[c(l(W),{name:"opacity",label:"透明度",setters:{name:"SliderSetter"},variable:!1,value:i(),onChange:n},null,8,["value"]),c(l(W),{name:"box-shadow",label:"阴影",setters:{name:"SelectSetter"},variable:!1,options:a,value:e.styleJson["box-shadow"],onChange:e.setStyle},null,8,["value","onChange"]),c(l(W),{name:"cursor",label:"光标",setters:{name:"TagSetter"},variable:!1,options:t,value:e.styleJson.cursor,onChange:e.setStyle},null,8,["value","onChange"])]),_:1})]),_:1}))}}),Bi=V({name:"StyleWidget",__name:"index",props:{isStyleCodeMode:{type:Boolean}},setup(d){const e=d,{selected:t}=ye(),a=S(()=>{const s=t.value?.model||null;return G(s)?null:s}),n=S(()=>a.value?.getPropValue("style")||{}),i=(s,o)=>{const r=a.value?.getPropValue("style")||{};o!==void 0?r[s]=o:delete r[s],a.value?.setProp("style",r)};return(s,o)=>e.isStyleCodeMode?(u(),f(Ro,{key:0})):(u(),f(l(O),{key:`widget-style-${a.value?.id}`,class:"v-style-widget",direction:"column",fit:""},{default:b(()=>[(u(),f($o,{key:`Layout${a.value?.id}`,"style-json":n.value,setStyle:i},null,8,["style-json"])),(u(),f(hi,{key:`Spacing${a.value?.id}`,"style-json":n.value,setStyle:i},null,8,["style-json"])),(u(),f(bi,{key:`Sizing${a.value?.id}`,"style-json":n.value,setStyle:i},null,8,["style-json"])),(u(),f(Pi,{key:`Positioning${a.value?.id}`,"style-json":n.value,setStyle:i},null,8,["style-json"])),(u(),f(Di,{key:`Texting${a.value?.id}`,"style-json":n.value,setStyle:i},null,8,["style-json"])),(u(),f(Ji,{key:`Backgound${a.value?.id}`,"style-json":n.value,setStyle:i},null,8,["style-json"])),(u(),f($i,{key:`Border${a.value?.id}`,"style-json":n.value,setStyle:i},null,8,["style-json"])),(u(),f(Ri,{key:`Effect${a.value?.id}`,"style-json":n.value,setStyle:i},null,8,["style-json"]))]),_:1}))}}),Ii=["src"],Ti=V({name:"PreviewerWidget",__name:"index",props:{path:{type:Function}},setup(d,{expose:e}){const t=d,a=_(),n=_(Symbol()),{current:i,engine:s}=oe(),{width:o,height:r}=Fe(a),p=S(()=>i.value&&t.path?t.path(i.value):null),m=S(()=>s.skeleton?.getWidget("Toolbar")?.widgetRef.mode??"pc");return e({refresh:()=>{n.value=Symbol()}}),(y,g)=>(u(),C("div",{ref_key:"container",ref:a,class:"v-previewer",key:n.value},[c(l(gl),{mode:m.value,width:l(o),height:l(r)},{default:b(()=>[p.value?(u(),C("iframe",{key:0,ref:"iframe",frameborder:"0",src:p.value},null,8,Ii)):j("",!0)]),_:1},8,["mode","width","height"])]))}}),Fi=V({name:"NodePathWidget",inheritAttrs:!1,__name:"index",setup(d){const{selected:e,designer:t}=ye(),a=S(()=>(e.value?.path||[]).slice(0).reverse()),n=s=>{t.value?.setSelected(s)},i=s=>{t.value?.setHover(s)};return(s,o)=>l(e)?(u(),f(l(xl),{key:0,class:"v-nodepath-widget","separator-icon":l(Xn)},{default:b(()=>[(u(!0),C($,null,I(a.value,r=>(u(),f(l(Sl),{onClick:p=>n(r),onMouseover:p=>i(r)},{default:b(()=>[q(B(r.name),1)]),_:2},1032,["onClick","onMouseover"]))),256))]),_:1},8,["separator-icon"])):j("",!0)}}),Wi=V({name:"SchemaWidget",__name:"index",setup(d){const{current:e}=oe(),t=_(),a=S(()=>JSON.stringify(e.value?.toDsl()||{},null,2)),n=S(()=>e.value?e.value.name:""),i=async()=>{const s=(t.value?.getEditor()).getValue();if(s&&await Re("手动修改DSL有风险，可能导致页面无法加载，请确认您的操作无误。"))try{const o=JSON.parse(s);e.value?.update(o),ue("保存成功")}catch(o){te(o?.message)}};return(s,o)=>(u(),f(l(L),{class:"v-schema-widget",title:n.value,subtitle:"手动修改DSL有风险，可能导致页面无法加载，请确认您的操作无误。",size:"small",fit:"",save:"",onSave:i},{default:b(()=>[c(l(le),{ref_key:"editorRef",ref:t,"model-value":a.value,height:"100%",lang:"json",dark:""},null,8,["model-value"])]),_:1},8,["title"]))}}),Li=V({name:"SchemaWidget",__name:"index",setup(d){const{current:e,engine:t}=oe(),a=_(),n=_(""),i=S(()=>e.value?`$vtj/vue/${e.value.id}.vue`:""),s=S(()=>e.value?e.value.name:"");return H(e,async o=>{const r=t.project.value;r&&o?n.value=await t.service.genVueContent(r.toDsl(),o.toDsl()):n.value=""},{immediate:!0,deep:!0}),(o,r)=>(u(),f(l(L),{class:"v-raw-widget",title:s.value,subtitle:i.value,size:"small",fit:""},{default:b(()=>[c(l(le),{ref_key:"editorRef",ref:a,"model-value":n.value,height:"100%",lang:"html",dark:"",readonly:""},null,8,["model-value"])]),_:1},8,["title","subtitle"]))}}),Oi=["src"],Ni=V({name:"DocsWidget",__name:"index",props:{url:{default:"https://newgateway.gitee.io/vtj/help/index.html"}},setup(d){const e=d,t=_();let a=null;ll(()=>{a||(a=Cl.service({target:t.value?.$el}))}),al(()=>{n(),a=null});const n=()=>{a?.close()};return(i,s)=>(u(),f(l(L),{class:"v-docs-widget",size:"small",fit:"",body:{padding:!1},header:!1,ref_key:"panel",ref:t},{default:b(()=>[x("iframe",{ref:"frame",src:e.url,onLoad:n},null,40,Oi)]),_:1},512))}}),Ui={class:"v-about-widget"},Mi={class:"v-about-widget__logo"},Hi=["src"],qi=x("div",{class:"v-about-widget__name"},"VTJ.PRO",-1),Qi={class:"v-about-widget__version"},Zi=V({name:"AboutWidget",__name:"index",setup(d){return(e,t)=>(u(),C("div",Ui,[x("div",Mi,[x("img",{src:l(_t)},null,8,Hi)]),qi,x("div",Qi,"版本："+B(l(is)),1)]))}}),M={Logo:vs,EmptyWidget:hs,Switcher:Js,Toolbar:Rs,Actions:Ts,Pages:to,Blocks:lo,Components:oo,Outline:io,History:ro,Apis:uo,Deps:co,Designer:vo,Scripts:wo,Properties:ko,Events:xo,Css:Co,Directives:Vo,Defined:Po,DataSources:Jo,Style:Bi,Previewer:Ti,NodePath:Fi,Schema:Wi,Raw:Li,Docs:Ni,About:Zi},Ki=[{name:"Logo",region:"Brand",component:M.Logo},{name:"Switcher",region:"Brand",component:M.Switcher},{name:"Toolbar",region:"Toolbar",component:M.Toolbar},{name:"Actions",region:"Actions",component:M.Actions},{name:"Pages",region:"Apps",component:M.Pages,type:"app",openType:"panel",icon:Wl,label:"页面管理"},{name:"Blocks",region:"Apps",component:M.Blocks,type:"app",openType:"panel",icon:Ll,label:"区块管理"},{name:"Components",region:"Apps",component:M.Components,type:"app",openType:"panel",icon:Ol,label:"组件库"},{name:"Outline",region:"Apps",component:M.Outline,type:"app",openType:"panel",icon:Nl,label:"大纲树"},{name:"History",region:"Apps",component:M.History,type:"app",openType:"panel",icon:Ul,label:"历史记录"},{name:"Apis",region:"Apps",component:M.Apis,type:"app",openType:"panel",icon:Ml,label:"API管理"},{name:"Deps",region:"Apps",component:M.Deps,type:"app",openType:"panel",icon:Hl,label:"依赖管理"},{name:"About",region:"Apps",component:M.About,type:"app",openType:"dialog",icon:ql,label:"关于",props:{width:500,height:300}},{name:"Designer",region:"Workspace",component:M.Designer,type:"tab",closable:!1,label:"设计视图"},{name:"Previewer",region:"Preview",component:M.Previewer,type:"tab",closable:!1,label:"预览视图"},{name:"Schema",region:"Workspace",component:M.Schema,type:"tab",closable:!0,label:"DSL视图"},{name:"Raw",region:"Workspace",component:M.Raw,type:"tab",closable:!0,label:"源码视图"},{name:"Docs",region:"Workspace",component:M.Docs,type:"tab",closable:!0,label:"帮助中心"},{name:"Scripts",region:"Settings",component:M.Scripts,type:"tab",group:he.Block,label:"设置"},{name:"Css",region:"Settings",component:M.Css,type:"tab",group:he.Block,label:"CSS"},{name:"DataSources",region:"Settings",component:M.DataSources,type:"tab",group:he.Block,label:"数据源"},{name:"Defined",region:"Settings",component:M.Defined,type:"tab",group:he.Block,label:"定义"},{name:"Properties",region:"Settings",component:M.Properties,type:"tab",group:he.Node,label:"属性"},{name:"Style",region:"Settings",component:M.Style,type:"tab",group:he.Node,label:"样式"},{name:"Events",region:"Settings",component:M.Events,type:"tab",group:he.Node,label:"事件"},{name:"Directives",region:"Settings",component:M.Directives,type:"tab",group:he.Node,label:"指令"},{name:"NodePath",region:"Status",component:M.NodePath}],Gi=[{package:"vue",version:"latest",library:"Vue",urls:["@vtj/materials/deps/vue/vue.global.prod.js"],assetsLibrary:Tn,required:!0,official:!0,enabled:!0},{package:"vue-router",version:"latest",library:"VueRouter",urls:["@vtj/materials/deps/vue-router/vue-router.global.prod.js"],assetsLibrary:Fn,required:!0,official:!0,enabled:!0},{package:"@vtj/utils",version:"latest",library:"VtjUtils",urls:["@vtj/materials/deps/@vtj/utils/index.umd.js"],required:!0,official:!0,enabled:!0},{package:"@vtj/icons",version:"latest",library:"VtjIcons",urls:["@vtj/materials/deps/@vtj/icons/style.css","@vtj/materials/deps/@vtj/icons/index.umd.js"],required:!0,official:!0,enabled:!0},{package:"element-plus",version:"latest",library:"ElementPlus",urls:["@vtj/materials/deps/element-plus/dark/css-vars.css","@vtj/materials/deps/element-plus/index.css","@vtj/materials/deps/element-plus/index.full.min.js"],assetsUrl:"@vtj/materials/assets/element/index.umd.js",assetsLibrary:"ElementPlusMaterial",required:!1,official:!0,enabled:!0},{package:"echarts",version:"latest",library:"echarts",urls:["@vtj/materials/deps/echarts/echarts.min.js"],required:!1,official:!0,enabled:!0},{package:"@vtj/ui",version:"latest",library:"VtjUI",urls:["@vtj/materials/deps/@vtj/ui/style.css","@vtj/materials/deps/@vtj/ui/index.umd.js"],assetsUrl:"@vtj/materials/assets/ui/index.umd.js",assetsLibrary:"VtjUIMaterial",required:!1,official:!0,enabled:!0},{package:"ant-design-vue",version:"latest",library:"antd",urls:["@vtj/materials/deps/ant-design-vue/rest.css","@vtj/materials/deps/ant-design-vue/dayjs/dayjs.min.js","@vtj/materials/deps/ant-design-vue/dayjs/plugin/customParseFormat.js","@vtj/materials/deps/ant-design-vue/dayjs/plugin/weekday.js","@vtj/materials/deps/ant-design-vue/dayjs/plugin/localeData.js","@vtj/materials/deps/ant-design-vue/dayjs/plugin/weekOfYear.js","@vtj/materials/deps/ant-design-vue/dayjs/plugin/weekYear.js","@vtj/materials/deps/ant-design-vue/dayjs/plugin/advancedFormat.js","@vtj/materials/deps/ant-design-vue/dayjs/plugin/quarterOfYear.js","@vtj/materials/deps/ant-design-vue/antd.min.js"],assetsUrl:"@vtj/materials/assets/antdv/index.umd.js",assetsLibrary:"AntdvMaterial",required:!1,official:!0,enabled:!1}],Yi=[{id:"html",category:"HTML"},{id:"elements",category:"特殊元素"},{id:"components",category:"内置组件"}],Xi=[{name:"div",label:"容器",categoryId:"html",snippet:{children:"容器文本内容示例"}},{name:"span",label:"内联",categoryId:"html",snippet:{children:"内联容器文本内容示例"}},{name:"a",label:"链接",categoryId:"html",props:[{name:"href",label:"href",setters:"InputSetter"}],snippet:{children:"链接文本内容示例",props:{href:"#"}}},{name:"img",label:"图片",categoryId:"html",childIncludes:!1,props:[{name:"src",label:"src",setters:"InputSetter"},{name:"width",label:"width",setters:"InputSetter"},{name:"height",label:"height",setters:"InputSetter"}],snippet:{props:{src:_t,width:"200",height:"200"}}},{name:"h1",label:"大标题",categoryId:"html",snippet:{children:"标题"}},{name:"h2",label:"中标题",categoryId:"html",snippet:{children:"标题"}},{name:"h3",label:"小标题",categoryId:"html",snippet:{children:"标题"}},{name:"p",label:"段落",categoryId:"html",snippet:{children:"段落文本"}},{name:"component",label:"动态组件",categoryId:"elements",doc:"https://cn.vuejs.org/api/built-in-special-elements.html#component",props:[{name:"is",label:"组件名",setters:"InputSetter"}],snippet:{children:"组件文本内容示例",props:{is:"div"}}},{name:"slot",label:"插槽",categoryId:"elements",doc:"https://cn.vuejs.org/api/built-in-special-elements.html#slot",props:[{name:"name",label:"名称",defaultValue:"default",setters:"InputSetter"}],snippet:{children:"默认插槽内容"}}],er=[...Xi,{name:"Transition",label:"过渡效果",categoryId:"components",doc:"https://cn.vuejs.org/api/built-in-components.html#transition",package:"vue",props:[{name:"name",label:"名称",defaultValue:"",title:"用于自动生成过渡 CSS class 名",setters:"InputSetter"},{name:"css",label:"应用CSS",defaultValue:!0,title:"是否应用 CSS 过渡 class",setters:"BooleanSetter"},{name:"type",label:"事件类型",defaultValue:void 0,title:"指定要等待的过渡事件类型来确定过渡结束的时间，默认情况下会自动检测持续时间较长的类型",setters:"SelectSetter",options:["transition","animation"]},{name:"duration",label:"持续时间",defaultValue:void 0,title:"显式指定过渡的持续时间",setters:["NumberSetter","JSONSetter"]},{name:"mode",label:"时序",defaultValue:"default",title:"控制离开/进入过渡的时序。",setters:"SelectSetter",options:["in-out","out-in","default"]},{name:"appear",label:"使用过渡",defaultValue:!1,title:"是否对初始渲染使用过渡",setters:"BooleanSetter"},{name:"enterFromClass",label:"enterFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"enterActiveClass",label:"enterActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"enterToClass",label:"enterToClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearFromClass",label:"appearFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearActiveClass",label:"appearActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearToClass",label:"appearToClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveFromClass",label:"leaveFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveActiveClass",label:"leaveActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveToClass",label:"leaveToClass",defaultValue:void 0,setters:"InputSetter"}],events:["before-enter","before-leave","enter","leave","appear","after-enter","after-leave","after-appear","enter-cancelled","leave-cancelled","ppear-cancelled"],snippet:{children:"Transition"}},{name:"TransitionGroup",label:"过渡效果组",categoryId:"components",doc:"https://cn.vuejs.org/api/built-in-components.html#transitiongroup",package:"vue",props:[{name:"name",label:"名称",defaultValue:"",title:"用于自动生成过渡 CSS class 名",setters:"InputSetter"},{name:"tag",label:"标签名",defaultValue:void 0,title:"如果未定义，则渲染为片段 (fragment)",setters:"InputSetter"},{name:"moveClass",label:"moveClass",defaultValue:void 0,title:"用于自定义过渡期间被应用的 CSS class。",setters:"InputSetter"},{name:"css",label:"应用CSS",defaultValue:!0,title:"是否应用 CSS 过渡 class",setters:"BooleanSetter"},{name:"type",label:"事件类型",defaultValue:void 0,title:"指定要等待的过渡事件类型来确定过渡结束的时间，默认情况下会自动检测持续时间较长的类型",setters:"SelectSetter",options:["transition","animation"]},{name:"duration",label:"持续时间",defaultValue:void 0,title:"显式指定过渡的持续时间",setters:["NumberSetter","JSONSetter"]},{name:"appear",label:"使用过渡",defaultValue:!1,title:"是否对初始渲染使用过渡",setters:"BooleanSetter"},{name:"enterFromClass",label:"enterFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"enterActiveClass",label:"enterActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"enterToClass",label:"enterToClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearFromClass",label:"appearFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearActiveClass",label:"appearActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearToClass",label:"appearToClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveFromClass",label:"leaveFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveActiveClass",label:"leaveActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveToClass",label:"leaveToClass",defaultValue:void 0,setters:"InputSetter"}],events:["before-enter","before-leave","enter","leave","appear","after-enter","after-leave","after-appear","enter-cancelled","leave-cancelled","ppear-cancelled"],snippet:{children:"TransitionGroup"}},{name:"KeepAlive",label:"缓存切换组件",categoryId:"components",doc:"https://cn.vuejs.org/api/built-in-components.html#keepalive",package:"vue",props:[{name:"include",label:"匹配包含",title:"如果指定，则只有与 `include` 名称, 匹配的组件才会被缓存。",setters:["InputSetter","JSONSetter"]},{name:"exclude",label:"匹配排除",title:"任何名称与 `exclude` 匹配的组件都不会被缓存。",setters:["InputSetter","JSONSetter"]},{name:"max",label:"最大缓存数",title:"最多可以缓存多少组件实例。",setters:["InputSetter"]}]},{name:"Teleport",label:"传送组件",categoryId:"components",doc:"https://cn.vuejs.org/api/built-in-components.html#teleport",package:"vue",props:[{name:"to",label:"目标容器",title:"指定目标容器,可以是选择器或实际元素",setters:["InputSetter"]},{name:"disabled",label:"禁用",title:"当值为 `true` 时，内容将保留在其原始位置, 而不是移动到目标容器中, 可以动态更改",setters:["BooleanSetter"]}]},{name:"Suspense",label:"异步依赖",categoryId:"components",doc:"https://cn.vuejs.org/api/built-in-components.html#suspense",package:"vue",props:[{name:"timeout",label:"timeout",setters:["InputSetter"]}]},{name:"RouterLink",label:"路由链接",categoryId:"components",doc:"https://router.vuejs.org/zh/api/interfaces/RouterLinkProps.html",package:"vue-router",props:[{name:"to",label:"to",setters:["InputSetter"]},{name:"replace",label:"replace",setters:["BooleanSetter"]}],snippet:{children:"RouterLink",props:{to:"/"}}}],tr=[{name:ct,version:"latest",label:"内置",library:ct,order:0,categories:Yi,components:er}],lr=V({name:"StringSetter",__name:"string",setup(d){return(e,t)=>(u(),f(l(_e),ie({clearable:""},e.$attrs),null,16))}}),ar=V({name:"BooleanSetter",__name:"boolean",setup(d){return(e,t)=>(u(),f(l(Lt),ie(e.$attrs,{"model-value":!!e.$attrs.modelValue}),null,16,["model-value"]))}}),nr="{{",sr="}}",or=V({name:"ExpressionSetter",__name:"expression",props:{modelValue:{},context:{}},emits:["change"],setup(d,{emit:e}){const t=(r="")=>({type:"JSExpression",value:Te(r)?r.value:r}),a=d,n=e,i=r=>se(r,a.context,!0),s=_(t(a.modelValue).value);H(()=>a.modelValue,r=>{s.value=t(r).value},{immediate:!0});const o=r=>{const p={type:"JSExpression",value:r};i(p)&&n("change",p)};return(r,p)=>(u(),f(l(_e),{class:"v-expression-setter",modelValue:s.value,"onUpdate:modelValue":p[0]||(p[0]=m=>s.value=m),onChange:o},{prefix:b(()=>[q(B(nr))]),suffix:b(()=>[q(B(sr))]),_:1},8,["modelValue"]))}}),ir=V({name:"SelectSetter",__name:"select",props:{options:{default:()=>[]}},setup(d){const e=d;return(t,a)=>(u(),f(l($l),ie({clearable:""},t.$attrs),{default:b(()=>[(u(!0),C($,null,I(e.options,n=>(u(),f(l(Jl),ie({key:n.label},n),null,16))),128))]),_:1},16))}}),rr=V({name:"NumberSetter",__name:"number",props:{modelValue:{}},emits:["change"],setup(d,{emit:e}){const t=d,a=e,n=S(()=>Te(t.modelValue)?void 0:Number(t.modelValue||0)),i=s=>{a("change",s)};return(s,o)=>(u(),f(l(Rl),ie({class:"v-number-setter","controls-position":"right","model-value":n.value},s.$attrs,{onChange:i}),null,16,["model-value"]))}}),ur=V({name:"ColorSetter",__name:"color",setup(d){return(e,t)=>(u(),f(l(Bl),ol(il(e.$attrs)),null,16))}}),dr=V({name:"JsonSetter",__name:"json",props:{modelValue:{default:void 0},type:{default:"JSON"}},emits:["change"],setup(d,{emit:e}){const t=d,a=_(),n=_(typeof t.modelValue=="object"?JSON.stringify(t.modelValue,null,2):void 0),i=S(()=>!!n.value),s=_(!1),o=e,r=g=>{let h=!0;try{const v=JSON.parse(g);if(t.type==="Array"&&!Array.isArray(v))throw new Error(`"${g}" is not a Array`);if(t.type==="Object"&&!On(v))throw new Error(`"${g}" is not a PlainObject`);if(typeof v!="object")throw new Error(`"${g}" is not a ${t.type}`)}catch(v){h=!1,we.error({title:"代码错误",message:v?.message||v})}return h},p=()=>{const g=a.value?.getEditor();if(g){const h=g.getValue();r(h)&&(n.value=h,o("change",JSON.parse(h)),s.value=!1)}},m=()=>{n.value="",o("change",void 0),s.value=!1},y=()=>{s.value=!0};return(g,h)=>(u(),C("div",{class:N(["v-json-setter",{"is-active":i.value}])},[c(l(_e),ie({readonly:"",onFocus:y,"model-value":t.type,"suffix-icon":l(kt)},g.$attrs),null,16,["model-value","suffix-icon"]),s.value?(u(),f(l(We),{key:0,modelValue:s.value,"onUpdate:modelValue":h[0]||(h[0]=v=>s.value=v),title:t.type,width:"1000px",height:"600px",cancel:"",submit:"",clear:"",onSubmit:p,onClear:m},{default:b(()=>[c(l(le),{ref_key:"codeEditor",ref:a,height:"100%",lang:"json",dark:"","model-value":n.value},null,8,["model-value"])]),_:1},8,["modelValue","title"])):j("",!0)],2))}}),cr=V({name:"FunctionSetter",__name:"function",props:{modelValue:{default:()=>({type:"JSFunction",value:""})}},emits:["change"],setup(d,{emit:e}){const t=d,a=_(),n=_(t.modelValue.value),i=_(!1),s=S(()=>!!n.value),o=e,r=()=>{const y=a.value?.getEditor();if(y){const g=y.getValue(),h={type:"JSFunction",value:g};se(h,{})&&(n.value=g,o("change",h),i.value=!1)}},p=()=>{n.value="",o("change",void 0),i.value=!1},m=()=>{i.value=!0};return(y,g)=>(u(),C("div",{class:N(["v-function-setter",{"is-active":s.value}])},[c(l(_e),ie({readonly:"",onFocus:m,"model-value":"JSFunction","suffix-icon":l(kt)},y.$attrs),null,16,["suffix-icon"]),i.value?(u(),f(l(We),{key:0,modelValue:i.value,"onUpdate:modelValue":g[0]||(g[0]=h=>i.value=h),title:"JSFunction",width:"1000px",height:"600px",cancel:"",submit:"",clear:"",onSubmit:r,onClear:p},{default:b(()=>[c(l(le),{ref_key:"codeEditor",ref:a,height:"100%","model-value":n.value,dark:""},null,8,["model-value"])]),_:1},8,["modelValue"])):j("",!0)],2))}}),mr=V({name:"RadioSetter",__name:"radio",props:{options:{default:()=>[]}},setup(d){const e=d;return(t,a)=>(u(),f(l(Bt),ie({class:"v-radio-setter",size:"small"},t.$attrs),{default:b(()=>[(u(!0),C($,null,I(e.options,n=>(u(),f(l(Ue),{label:n.label,value:n.value,title:n.label},{default:b(()=>[n.svg?(u(),f(l(xe),{key:0,src:n.svg},null,8,["src"])):(u(),C($,{key:1},[q(B(n.label),1)],64))]),_:2},1032,["label","value","title"]))),256))]),_:1},16))}}),pr=["label","title","onClick"],vr=V({name:"TagSetter",__name:"tag",props:{options:{default:()=>[]},modelValue:{}},emits:["update:modelValue","change"],setup(d,{emit:e}){const t=d,a=e,n=i=>{i.value===t.modelValue?(a("update:modelValue",void 0),a("change",void 0)):(a("update:modelValue",i.value),a("change",i.value))};return(i,s)=>(u(),C("div",ie({class:"v-tag-setter",size:"small"},i.$attrs),[(u(!0),C($,null,I(t.options,o=>(u(),C("span",{label:o.value,title:o.label,class:N({"is-active":t.modelValue===o.value}),onClick:r=>n(o)},[o.svg?(u(),f(l(xe),{key:0,src:o.svg,size:16},null,8,["src"])):(u(),C($,{key:1},[q(B(o.label),1)],64))],10,pr))),256))],16))}}),bl=V({name:"SizeSetter",__name:"size",props:{modelValue:{}},emits:["change"],setup(d,{emit:e}){const t=d,a=e,n=_(!0),i=S(()=>n.value?"px":void 0),s=_(t.modelValue),o=r=>{n.value=!!Number(r)};return H(s,r=>{a("change",r)}),H(()=>t.modelValue,r=>{r&&(n.value=r.endsWith("px"),s.value=r)},{immediate:!0}),(r,p)=>(u(),f(l(Xt),ie({clearable:"",unit:i.value,"with-unit":!!i.value,modelValue:s.value,"onUpdate:modelValue":p[0]||(p[0]=m=>s.value=m),onChange:o},r.$attrs),null,16,["unit","with-unit","modelValue"]))}}),gr={class:"v-image-setter__plus"},hr=V({name:"ImageSetter",__name:"image",props:{modelValue:{},limit:{default:1}},emits:["change"],setup(d,{emit:e}){const t=d,a=e,n=_([]),i=S(()=>n.value.length<t.limit),s=r=>r.type.includes("image")?(Wn(r).then(p=>{n.value=[{name:r.name,url:p}]}),!1):(Ze.error("只能上传图片"),!1),o=()=>{n.value=[]};return H(()=>t.modelValue,r=>{n.value=r?[{name:"",url:r}]:[]},{immediate:!0}),H(n,()=>{a("change",n.value[0]?.url)}),(r,p)=>(u(),f(l(Il),ie({class:["v-image-setter",{"v-image-setter--addable":i.value}],"list-type":"picture-card",limit:1,action:"#","file-list":n.value,"onUpdate:fileList":p[0]||(p[0]=m=>n.value=m),"before-upload":s,"auto-upload":!0,"on-remove":o},r.$attrs),{default:b(()=>[x("span",gr,[c(l(xe),{icon:l(ns)},null,8,["icon"])])]),_:1},16,["class","file-list"]))}}),br={class:"v-section-setter"},fr=V({name:"SectionSetter",__name:"section",props:{modelValue:{},sections:{default:4}},emits:["change"],setup(d,{emit:e}){const t=d,a=e,n=_(new Array(t.sections).fill(""));H(()=>t.modelValue,s=>{n.value=s?s.split(" "):new Array(t.sections).fill("")},{immediate:!0});const i=()=>{a("change",n.value.join(" ").trim())};return(s,o)=>(u(),C("div",br,[(u(!0),C($,null,I(t.sections,r=>(u(),f(bl,{name:r-1,modelValue:n.value[r-1],"onUpdate:modelValue":p=>n.value[r-1]=p,onChange:i,class:"v-section-setter__item"},null,8,["name","modelValue","onUpdate:modelValue"]))),256))]))}}),yr={class:"v-slider-setter"},wr=V({name:"SliderSetter",__name:"slider",props:{modelValue:{default:void 0}},emits:["change","update:modelValue"],setup(d,{emit:e}){const t=d,a=e,n=_();H(()=>t.modelValue,s=>{n.value=s},{immediate:!0}),H(n,s=>{a("change",s),a("update:modelValue",s)});const i=()=>{n.value=void 0,a("change",void 0),a("update:modelValue",void 0)};return(s,o)=>(u(),C("div",yr,[c(l(Tl),ie({size:"small"},s.$attrs,{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=r=>n.value=r)}),null,16,["modelValue"]),c(l(xe),{onClick:i,class:"v-slider-setter__close",size:16,icon:l(ss)},null,8,["icon"])]))}}),Y={StringSetter:lr,BooleanSetter:ar,ExpressionSetter:or,SelectSetter:ir,NumberSetter:rr,ColorSetter:ur,IconSetter:vl,JsonSetter:dr,FunctionSetter:cr,RadioSetter:mr,TagSetter:vr,SizeSetter:bl,ImageSetter:hr,SectionSetter:fr,SliderSetter:wr},kr={name:"StringSetter",component:Y.StringSetter,type:"String"},_r=[{name:"InputSetter",component:Y.StringSetter,type:"String"},{name:"StringSetter",component:Y.StringSetter,type:"String"},{name:"BooleanSetter",component:Y.BooleanSetter,type:"Boolean"},{name:"ExpressionSetter",component:Y.ExpressionSetter,type:"Object"},{name:"SelectSetter",component:Y.SelectSetter,type:"String"},{name:"NumberSetter",component:Y.NumberSetter,type:"Number"},{name:"ColorSetter",component:Y.ColorSetter,type:"String"},{name:"IconSetter",component:Y.IconSetter,type:"String"},{name:"ObjectSetter",component:Y.JsonSetter,type:"Object",props:{type:"Object"}},{name:"ArraySetter",component:Y.JsonSetter,type:"Array",props:{type:"Array"}},{name:"JsonSetter",component:Y.JsonSetter,type:"Object",props:{type:"JSON"}},{name:"JSONSetter",component:Y.JsonSetter,type:"Object",props:{type:"JSON"}},{name:"FunctionSetter",component:Y.FunctionSetter,type:"Function"},{name:"RadioSetter",component:Y.RadioSetter,type:"String"},{name:"TagSetter",component:Y.TagSetter,type:"String"},{name:"SizeSetter",component:Y.SizeSetter,type:"String"},{name:"ImageSetter",component:Y.ImageSetter,type:"String"},{name:"SectionSetter",component:Y.SectionSetter,type:"String"},{name:"SliderSetter",component:Y.SliderSetter,type:"Number"},{name:"RangeSetter",component:Y.SliderSetter,type:"Array",props:{range:!0}}];class Sr{widgets={};constructor(){this.widgets=this.createWidgets()}createWidgets(){const e={};for(const t of Ki)e[t.name]=t;return e}register(e){this.widgets[e.name]=e}get(e){return this.widgets[e]}set(e,t){const a=this.widgets[e];if(!a){Se.warn(`widget '${e}' is not found`);return}yt(a,t),t.component&&(a.component=t.component)}getWidgets(e,t){const a=Object.values(this.widgets);return e?a.filter(n=>n.region===e&&(!t||t&&t===n.group)):a}}const fl=new Sr;class xr{constructor(e=Gi){this.deps=e}get(){return this.deps}set(e){this.deps=e}add(e){const t=this.deps.find(a=>a.package===e.package);t?Object.assign(t,e):this.deps.push(e)}merge(e){const t=[];for(const a of this.deps){const n=e.find(i=>i.package===a.package);t.push({...a,...n})}for(const a of e)this.deps.find(n=>n.package===a.package)||t.push(a);return t}remove(e){const t=this.deps.findIndex(a=>a.package===e);t>-1&&this.deps.splice(t,1)}}const Cr=new xr;class Vr{setters={};defaultSetter=kr;constructor(){this.setters=this.createSetters()}createSetters(){const e={};for(const t of _r)e[t.name]=t;return e}register(e){this.setters[e.name]=e}get(e){return this.setters[e]}set(e,t){const a=this.setters[e];if(!a){Se.warn(`setter '${e}' is not found`);return}yt(a,t),t.component&&(a.component=t.component)}getByType(e){return Object.values(this.setters).filter(t=>t.type===e).map(t=>t.name)}}const qe=new Vr;function jr(d){return new Promise((e,t)=>{const a=nl(eo,{slots:d,onClose:()=>{a.unmount(),t(null)},onSubmit:n=>{a.unmount(),e(n)}});a.mount(document.createElement("div"))})}class Er{constructor(e,t,a){this.engine=e,this.contentWindow=t,this.dependencies=a,this.document=this.contentWindow.document,this.bindEvents(t,this.document)}proxied={};document=null;hover=vt(null);dropping=vt(null);selected=_(null);dragging=null;bind(e,t){let a=this.proxied[t];return a||(a=e.bind(this),this.proxied[t]=a),a}bindEvents(e,t){t.addEventListener("mouseover",this.bind(this.onMouseOver,"onMouseOver")),t.addEventListener("scroll",this.bind(this.onViewChange,"onViewChange")),e.addEventListener("resize",this.bind(this.onViewChange,"onViewChange")),t.addEventListener("mouseleave",this.bind(this.onLeave,"onLeave")),t.addEventListener("dragleave",this.bind(this.onLeave,"onLeave")),t.addEventListener("dragover",this.bind(this.onDragOver,"onDragOver")),t.addEventListener("drop",this.bind(this.onDrop,"onDrop")),t.addEventListener("click",this.bind(this.onSelected,"onSelected")),X.on(ut,this.bind(this.onActiveChange,"onActiveChange")),X.on(Ie,this.bind(this.onViewChange,"onViewChange"))}unbindEvents(e,t){t.removeEventListener("mouseover",this.bind(this.onMouseOver,"onMouseOver")),t.removeEventListener("scroll",this.bind(this.onViewChange,"onViewChange")),e.removeEventListener("resize",this.bind(this.onViewChange,"onViewChange")),t.removeEventListener("mouseleave",this.bind(this.onLeave,"onLeave")),t.removeEventListener("dragleave",this.bind(this.onLeave,"onLeave")),t.removeEventListener("dragover",this.bind(this.onDragOver,"onDragOver")),t.removeEventListener("drop",this.bind(this.onDrop,"onDrop")),t.removeEventListener("click",this.bind(this.onSelected,"onSelected")),X.off(ut,this.bind(this.onActiveChange,"onActiveChange")),X.off(Ie,this.bind(this.onViewChange,"onViewChange"))}onMouseOver(e){const t=this.getHelper(e);t?.model.id!==this.selected.value?.model.id&&(this.hover.value=t)}onViewChange(){this.updateRect()}onLeave(e){this.hover.value=null,this.dropping.value=null}onActiveChange(){this.hover.value=null,this.dropping.value=null,this.selected.value=null}async getDropSlot(e){if(!e)return;const{engine:t}=this,a=t.assets,n=a.componentMap,i=await a.getBlockMaterial(e.from)||n.get(e.name);if(!i?.slots)return;const s=(i?.slots||["default"]).map(r=>typeof r=="string"?{name:r,params:[]}:{name:r.name,params:r.params||[]});if(s.length===0)return;if(s.length===1)return s[0];const o=await jr(s).catch(()=>null);if(!(o&&o.name==="default"&&(!o.params||o.params?.length===0)))return o}async onDrop(e){e.preventDefault();const{engine:t,dragging:a,dropping:n}=this,i=t.current.value,s=this.getHelper(e);if(!i||!a||!n.value||!s)return;const o=s.model,r=n.value.type;if(!await this.allowDrop(o,r))return;const p=this.createNodeDsl(a),m=new zt(p);if(G(o))i.addNode(m,void 0,r);else{const y=await this.getDropSlot(r==="inner"?o:o.parent);if(y===null){this.dropping.value=null;return}m.slot=y,i.addNode(m,o,r)}this.dropping.value=null,t.assets.clearCaches()}onSelected(e){this.setHover(null),this.selected.value=this.getHelper(e)}async onDragOver(e){const t=this.getHelper(e);if(!t)return;const{model:a,type:n}=t;a&&await this.allowDrop(a,n)?(e.preventDefault(),this.dropping.value=t):this.dropping.value=null}isVtjElement(e){return!!e.__vtj__&&!!e.__context__}findVtjElement(e){return e.find(t=>this.isVtjElement(t))}getNodeByElement(e){const t=e.__vtj__??"";return zt.nodes[t]||null}getDropType(e,t,a){const{left:n,top:i,width:s,height:o}=e;return t>=n&&t<=n+s*.2?"left":t>=n+s*.8&&t<=n+s?"right":a>=i&&a<=i+o*.2?"top":a>=i+o*.8&&a<=i+o?"bottom":"inner"}getNodePath(e=[]){const t=e.filter(n=>this.isVtjElement(n)),a=this.engine.current.value;return[...t.map(n=>this.getNodeByElement(n)).filter(n=>!!n),a]}setDslFrom(e){const t=this.engine.assets.componentMap.get(e.name);if(e.from=e.from||t?.package,Array.isArray(e.children))for(const a of e.children)this.setDslFrom(a)}createNodeDsl(e){const{name:t,snippet:a={},from:n}=e,i={...a,name:t,from:n||e.package};return this.setDslFrom(i),i}getElmenetByModel(e){return!this.document||!e?null:G(e)?this.document.body:Array.from(this.document.querySelectorAll("*")).find(t=>t.__vtj__===e.id)}findPathByNode(e){const t=[e];let a=e;for(;a.parent&&a.parent!==a;)a=a.parent,a!==e&&t.unshift(a);const n=this.engine.current.value;return t.unshift(n),t.reverse()}getHelper(e){const t=e.composedPath()||[],a=this.findVtjElement(t)||this.document?.body;if(!a)return null;const n=this.getNodeByElement(a)||this.engine.current.value;if(!n)return null;const i=a.getBoundingClientRect(),s=this.getDropType(i,e.clientX,e.clientY),o=this.getNodePath(t);return{el:a,model:n,rect:i,type:s,path:o}}cleanHelper(){this.setSelected(null),this.setHover(null),this.setDragging(null),this.setDropping(null)}async updateRect(){await qt(100);const e=l(this.selected),t=l(this.hover);if(e){const a=e.el.getBoundingClientRect();this.selected.value={...e,rect:a}}if(t){const a=t.el.getBoundingClientRect();this.hover.value={...t,rect:a}}}setDragging(e){this.dragging=e}async setHover(e){if(await Ee(),e){const t=this.getElmenetByModel(e);if(!t)return;const a=t.getBoundingClientRect(),n=G(e)?[]:this.findPathByNode(e);this.hover.value={el:t,model:e,rect:a,type:"inner",path:n}}else this.hover.value=null}async setSelected(e){if(await Ee(),e){const t=this.getElmenetByModel(e)||this.document?.createElement("span");if(!t)return;const a=t.getBoundingClientRect(),n=G(e)?[]:this.findPathByNode(e);this.selected.value={el:t,model:e,rect:a,type:"inner",path:n}}else this.selected.value=null}async setDropping(e,t="inner"){if(await Ee(),e){const a=this.getElmenetByModel(e);if(!a)return;const n=a.getBoundingClientRect(),i=G(e)?[]:this.findPathByNode(e);this.dropping.value={el:a,model:e,rect:n,type:t,path:i}}else this.dropping.value=null}async allowDrop(e,t="inner"){const{dragging:a,engine:n}=this,i=n.current.value;if(!a||!i)return!1;if(G(e))return!0;const s=n.assets.componentMap,o=t!=="inner"&&e.parent||e,r=await n.assets.getBlockMaterial(o.from)||s.get(o.name);if(!r)return!1;const{parentIncludes:p=!0,name:m}=a,{childIncludes:y=!0}=r,g=p===!0||Array.isArray(p)&&p.includes(o.name),h=y===!0||Array.isArray(y)&&y.includes(m);return g&&h}dispose(){const{contentWindow:e,document:t}=this;this.setSelected(null),this.setHover(null),this.setDragging(null),e&&t&&this.unbindEvents(e,t),this.document=null}}class Ar{constructor(e,t,a=null){this.env=e,this.service=t,this.designer=a,this.nodeChange=this.__onNodeChange.bind(this),this.blockChange=this.__onBlockChange.bind(this)}app=null;dsl=null;nodeChange;blockChange;context=null;install(e){const{library:t,globals:a,VueRouter:n}=this.env;if(n){const s=n.createRouter({history:n.createWebHashHistory(),routes:[]});e.use(s)}const i=Object.values(t);Object.assign(e.config.globalProperties,a),e.config.errorHandler=(s,o,r)=>{const p=o?.$options.name,m=s?.message||s?.msg||"未知错误",y=`[ ${p} ] ${m}`;console.error({err:s,instance:o,info:r}),we.error({title:"运行错误",message:y})},i.forEach(s=>{(typeof s=="function"||typeof s.install=="function")&&e?.use(s)})}render(e){const{window:t,container:a,Vue:n,components:i,library:s,apis:o}=this.env,r=t.document.createElement("div");r.id="app",a.appendChild(r),this.dsl=n.reactive(e.toDsl());const p=Pn({getDsl:async g=>await this.service.getFile(g)||null,options:{mode:rt.Design,Vue:n,components:i,libs:s,apis:o,window:t}}),{renderer:m,context:y}=Dn({Vue:n,mode:rt.Design,dsl:this.dsl,components:i,libs:s,apis:o,loader:p,window:t});this.app=n.createApp(m),this.install(this.app);try{this.app.mount(r)}catch(g){te(g.message||"未知错误","运行时错误"),console.error(g)}this.context=y,X.on(Ie,this.nodeChange),X.on(dt,this.blockChange)}dispose(){if(this.app){this.app.unmount();const e=this.app._container;e&&e.parentNode&&(e.parentNode.removeChild(e),this.app._container=null),this.app=null}this.dsl=null,this.context=null,X.off(Ie,this.nodeChange),X.off(dt,this.blockChange)}updateChild(e,t){const a=t.children||t.nodes||[];if(Array.isArray(a))for(let n=0;n<a.length;n++){const i=a[n];if(i.id===e.id){a.splice(n,1,e);return}else this.updateChild(e,i)}}__onNodeChange(e){this.dsl&&this.updateChild(e.toDsl(),this.dsl)}__onBlockChange(e){this.dispose(),this.render(e),this.designer?.selected.value&&this.designer.setSelected(e)}}class zr extends Mt{contentWindow=null;renderer=null;designer=vt(null);engine;materialPath;constructor(e){super();const{engine:t,materialPath:a}=e;this.engine=t,this.materialPath=a,H(this.engine.current,()=>{this.refresh()})}init(e,t,a){H([e,t,a],()=>{e.value&&t.value.length&&(this.resetReady(),this.setup(e.value,t.value),this.contentWindow&&(this.designer.value?.dispose(),this.designer.value=new Er(this.engine,this.contentWindow,t)))},{immediate:!0,deep:!0})}setup(e,t){const a=e.contentWindow;if(!a){Se.warn("Simulator contentWindow is null");return}a.__simulator__=this;const n=a.document;this.contentWindow=a;const{scripts:i,css:s,materials:o,libraryExports:r,materialExports:p,materialMapLibrary:m}=Sa(t,this.materialPath);n.open(),n.write(`
     <!DOCTYPE html>
     <html lang="zh-CN">
       <head>
       <meta charset="utf-8">
       <meta name="viewport"
             content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0,viewport-fit=cover"/>
         <style>
            html, body, #app {
              padding: 0;
              margin: 0;
              min-height: 100vh;
              width: 100%;
              height: 100%;
              background: #fff;
            }
         </style>
         ${xa(s)}
         ${Et(i)}
         ${Et(o)}
       </head>
       <body> 
       </body>
       <script>
       __simulator__.emitReady(${JSON.stringify(r)},
        ${JSON.stringify(p)}, 
    ${JSON.stringify(m)});
     <\/script> 
     </html>
    `),n.close()}async emitReady(e=[],t=[],a={}){this.renderer?.dispose(),this.renderer=null;const n=this.contentWindow,{assets:i,service:s,current:o,provider:r}=this.engine,p=r.materials||{},m=[];for(const g of t){const h=p[g]?(await p[g]()).default:n[g];m.push(h)}i.load(m);const y=this.createEnv(e,a,m);this.renderer=new Ar(y,s,this.designer.value),o.value&&this.renderer.render(o.value),this.triggerReady()}createEnv(e=[],t={},a=[]){const n=this.contentWindow,{engine:i}=this,{project:s,assets:o,provider:r}=i,p=e.reduce((k,E)=>(k[E]=n[E],k),{}),m={},{groups:y,componentMap:g}=o;for(const k of y.value){const E=k.names||[];if(k.name===ct)E.forEach(A=>{const z=g.get(A),D=z?.package||"",J=Jn[D],T=p[J];T&&z&&(m[A]=At(z,T))});else{const A=p[t[k.library||""]];A&&E.forEach(z=>{const D=g.get(z);D?m[z]=At(D,A):m[z]=A[z]})}}const{adapter:h,globals:v}=r,w=Ca(s.value?.apis,h);return{window:n,Vue:n.Vue,VueRouter:n.VueRouter,library:p,materials:a,components:m,container:n.document.body,apis:w,globals:v}}refresh(){this.renderer?.dispose();const e=this.engine.current.value;e&&this.renderer?.render(e)}dispose(){this.renderer?.dispose(),this.designer.value?.dispose(),this.contentWindow=null,this.renderer=null,this.designer.value=null,this.resetReady()}}class Pr{constructor(e){this.service=e}components=[];componentMap=new Map;groups=_([]);caches={};getCateoryComponents(e,t){const a=t.filter(n=>n.categoryId===e.id&&n.hidden!==!0);return{name:e.id,label:e.category,count:a.length,components:a}}parseGroups(e){const t=[];for(let a of e){const{categories:n,components:i,label:s,name:o,library:r}=a;if(!n||!i)continue;const p=i.filter(h=>!!h.package).map(h=>h.name),m=n.map(h=>this.getCateoryComponents(h,i)),y=m.reduce((h,v)=>v.count+h,0),g={name:a.name,label:s||o,count:y,names:p,library:r,children:m};t.push(g)}return t}load(e){const t=[...tr,...e].filter(a=>!!a);t.sort((a,n)=>a.order-n.order);for(let a of t)a.components&&(this.components=this.components.concat(a.components));this.groups.value=this.parseGroups(t),this.componentMap=Va(this.components,"name")}async getBlockMaterial(e){if(!e||typeof e=="string")return null;const t=e.type==="Schema"?e.id:null;if(!t)return null;const a=this.caches[t]||await this.service.getFile(t);if(!a)return null;this.caches[t]=a;const{id:n,name:i,slots:s,props:o,emits:r}=a,p=m=>{const y=Array.isArray(m)?m:[m];let g=[];for(const h of y)g=g.concat(qe.getByType(h));return g};return{id:n,name:i,childIncludes:s?.length?void 0:!1,props:(o||[]).map(m=>typeof m=="string"?{name:m}:{name:m.name,type:m.type,setters:p(m.type)}),events:r,slots:s,from:e}}clearCaches(){this.caches={}}}const yl=Symbol("VtjEngine");class gu extends Mt{app;skeleton;container;service;assets;simulator;emitter=X;project=_(null);current=_(null);context=_(null);isEmptyCurrent=_(!1);history=_(null);provider;changed=_(Symbol());constructor(e){super();const{container:t,service:a,project:n={},globals:i={},dependencies:s,materials:o,materialPath:r="./"}=e;this.container=t,this.service=a,this.provider=new na({mode:rt.Design,globals:i,project:n,service:a,dependencies:s,materials:o,materialPath:r}),this.assets=new Pr(this.service),this.simulator=new zr({engine:this,materialPath:r}),this.bindEvents(),this.init(n),ll(this.render.bind(this)),al(this.dispose.bind(this))}async init(e){const t=await this.service.init(e).catch(a=>(Se.warn("VTJEngine service init fail.",a),null));t&&(t.dependencies=Cr.merge(t.dependencies||[]),this.project.value=new sa(t),this.saveMaterials(),this.triggerReady())}render(){const e=l(this.container);if(e){const t=nl(Dr);t.provide(yl,Mn(this)),t.mount(e),this.app=t}else Se.warn("VTJEngine constructor param [ container ] is undefined")}bindEvents(){X.on(oa,e=>this.saveProject(e)),X.on(ia,e=>this.saveBlockFile(e)),X.on(ra,e=>this.saveBlockFile(e)),X.on(ua,()=>this.saveMaterials()),X.on(ut,e=>this.activeFile(e)),X.on(da,()=>this.publish()),X.on(ca,()=>this.publishCurrent()),X.on(dt,e=>this.changeFile(e)),X.on(Ie,()=>this.changeCurrentFile()),X.on(ma,e=>this.saveHistory(e)),X.on(pa,e=>this.loadHistory(e))}async activeFile(e){await Ee();const t=e.model,a=e.model.currentFile;if(a){if(t.isPageFile(a)&&a.raw)return;const n=await this.service.getFile(a.id);n&&(a.dsl=n)}if(a?.dsl){const n=new Vt(a.dsl);this.updateCurrent(n),this.initHistory(n)}else this.updateCurrent(null);Ve(this.project)}async changeFile(e){await Ee();const t=e.toDsl();this.service.saveFile(t),this.updateCurrent(e),this.history.value?.add(t),Ve(this.history)}changeCurrentFile(){this.saveCurrentFile(),this.current.value&&(this.history.value?.add(this.current.value.toDsl()),Ve(this.history))}async updateCurrent(e,t=!0){this.current.value=e,await Ee(),this.context.value=this.simulator.renderer?.context||null,this.isEmptyCurrent.value=this.current.value?.nodes.length===0,this.changed.value=Symbol(),t&&Ve(this.context)}async saveProject(e){const t=e.model.toDsl();await this.service.saveProject(t),Ve(this.project)}async saveBlockFile(e){const t=e.type,a=e.model;if(t==="create"){const n=e.data;a.isPageFile(n)&&n.raw?(await this.service.createRawPage(n),ue(`源码文件已经生成：/.vtj/vue/${n.id}.vue`,"success")):n.dsl&&await this.service.saveFile(n.dsl)}if(t==="update"){const n=e.data;if(a.isPageFile(n)&&(n.dir||n.raw))return;const i=await this.service.getFile(n.id);i&&(i.name=n.name,await this.service.saveFile(i))}if(t==="delete"){const n=e.data;n&&a.isPageFile(n)&&n.raw?await this.service.removeRawPage(n.id):n.dir||(await this.service.removeFile(n.id),await this.service.removeHistory(n.id))}if(t==="clone"){const{page:n,newPage:i}=e.data,s=await this.service.getFile(n.id);s&&(s.id=i.id,s.name=i.name,await this.service.saveFile(s))}Ve(this.project)}async saveMaterials(){await Ee(),this.simulator.ready(()=>{const e=this.project.value;if(e){const t=this.assets.componentMap;this.service.saveMaterials(e.toDsl(),t)}})}saveCurrentFile(){const e=this.current.value;e&&(this.updateCurrent(e),this.service.saveFile(e.toDsl()))}async initHistory(e){if(e){const t=await this.service.getHistory(e.id).catch(()=>null);this.history.value=new va(Object.assign(t||{},{id:e.id}))}else this.history.value=null}async saveHistory(e){const t=e.type,a=e.model;t==="create"&&await this.service.saveHistoryItem(a.id,e.data),t==="delete"&&await this.service.removeHistoryItem(a.id,e.data),t==="clear"&&await this.service.removeHistoryItem(a.id,e.data);const n=a.toDsl();await this.service.saveHistory(n),Ve(this.history)}async loadHistory(e){const t=e.model,a=e.data,n=await this.service.getHistoryItem(t.id,a.id);if(n&&n.dsl){const i=new Vt(n.dsl);await this.updateCurrent(i),Ve(this.history)}}async publish(){const e=this.project.value;if(e){const t={...e.toDsl(),pages:e.getPages()};await this.service.publish(t)&&ue("整站发布成功","success")}}async publishCurrent(){const e=this.project.value,t=e?.currentFile;if(e&&t){const a={...e.toDsl(),pages:e.getPages()};await this.service.publishFile(a,t)&&ue("发布成功","success")}}dispose(){this.emitter.all.clear(),this.simulator.dispose(),this.app&&(this.app.unmount(),this.container=void 0)}async openFile(e){const t=this.project.value,a=this.skeleton?.getRegion("Apps"),n=e||t?.homepage;if(!t||!a||!n)return;const i=t.getPage(n);i&&!i.raw&&(a.regionRef?.setActive("Pages"),this.simulator.ready(()=>{t.active(i)}));const s=t.getBlock(n);s&&(a.regionRef?.setActive("Blocks"),this.simulator?.ready(()=>{t.active(s)}))}}function re(){const d=Zn(yl,null);return d||Se.error("VTJEngine is not exist"),d}const je=V({name:"RegionWrapper",props:{region:{type:String,required:!0}},setup(){return{regionRef:_()}},render(){const d=Rt[this.region]||Rt.EmptyRegion;return Je(d,{...this.$props,...this.$attrs,ref:"regionRef"})}}),ze=V({name:"WidgetWrapper",props:{region:{type:String,required:!0},widget:{type:Object,required:!0}},setup(){return{widgetRef:_()}},render(){return Je(this.widget.component,{...this.widget.props,...this.$props,...this.$attrs,ref:"widgetRef"})}}),Dr=V({name:"SkeletonWrapper",setup(){const d=_(),e=re(),t=_({});return{skeletonRef:d,engine:e,widgets:t}},mounted(){this.engine.skeleton=this},render(){return Je(Jr,{...this.$props,...this.$attrs,ref:"skeletonRef"})},methods:{getRegion(d){return this.skeletonRef[d.toLowerCase()]},toggleCollapse(d){if(this.skeletonRef){const e=this.skeletonRef.collapsed;this.skeletonRef.collapsed=d??!e}},settable(d){this.skeletonRef&&(this.skeletonRef.settable=d)},getWidgets(d){const e=this.getRegion(d);return e?ga(e.regionRef?.widgetsRef||[]):[]},getWidget(d){const e=fl.get(d);if(!e){Se.warn(`widget [ ${d} ] is not exsit`);return}return this.getWidgets(e.region).find(t=>t.widget.name===d)},openPreview(d){this.skeletonRef&&(this.skeletonRef.isPreview=!0)},closePreview(){this.skeletonRef&&(this.skeletonRef.isPreview=!1)}}}),W=V({name:"SetterWrapper",props:{context:{type:Object,default:null},current:{type:Object,default:null},name:String,label:String,title:String,value:{type:[String,Object,Array,Number,Boolean],default:void 0},setters:{type:[String,Object,Array],required:!0,default(){return[]}},options:{type:Array,default(){return[]}},variable:{type:Boolean,default:!0},removable:{type:Boolean,default:!1}},computed:{computedSetters(){return(Array.isArray(this.setters)?this.setters:[this.setters]).map(d=>{let e;if(typeof d=="string")return e=this.getSetter(d),{component:Pt(e.component),name:e.name,label:d,props:e.props||{}};{const t=d;return e=this.getSetter(t.name),{component:Pt(t.component||e.component),name:t.name,label:t.label||t.name,props:Object.assign(e.props||{},t.props)}}})},computedOptions(){return(this.options||[]).map(d=>typeof d=="string"?{label:d,value:d}:d)},defaultSetter(){const{value:d,computedSetters:e}=this;let t=typeof d;t==="Object"&&(Array.isArray(d)?t="Array":Te(d)?t="Object":ha(d)&&(t="Function"));const a=qe.getByType(t)||[];return a.length?(e.find(n=>a.includes(n.name))||e[0])?.name:e[0]?.name}},render(){const{context:d,current:e,name:t,label:a,title:n,value:i,computedSetters:s,computedOptions:o,variable:r,changeValue:p,defaultSetter:m,removable:y,onRemove:g}=this;return Je(Wr,{context:d,current:e,name:t,label:a,title:n,setters:s,defaultSetter:m,variable:r,value:i,removable:y,options:o,onChange:p,onRemove:g})},emits:["change","remove"],methods:{getSetter(d){return typeof d=="string"?qe.get(d)||qe.defaultSetter:d},changeValue(d){this.$emit("change",this.name,d)},onRemove(d){this.$emit("remove",d)}}}),Jr=V({name:"Skeletion",__name:"skeleton",props:{headerHeight:{default:"36px"},leftWidth:{default:"400px"},rightWidth:{default:"350px"},footerHeight:{default:"20px"}},setup(d,{expose:e}){const t=d,a=_(!1),n=_(parseInt(t.leftWidth)),i=_(parseInt(t.rightWidth)),s={dirs:["e"],maxWidth:600,minWidth:49,onResizing(A,z){n.value=z.elementWidth.value},onEnd(A,z){n.value=z.elementWidth.value}},o={dirs:["w"],maxWidth:600,minWidth:2,onResizing(A,z){i.value=z.elementWidth.value},onEnd(A,z){i.value=z.elementWidth.value}},r=_(),p=_(),m=_(),y=_(),g=_(),h=_(),v=_(),w=_(),k=_(!1),E=_(!1);return e({brand:r,toolbar:p,actions:m,apps:y,workspace:g,settings:h,status:v,collapsed:k,settable:E,leftWidth:n,rightWidth:i,preview:w,isPreview:a}),(A,z)=>(u(),f(l(zl),{locale:l(Al)},{default:b(()=>[c(l(xt),{class:"v-skeleton"},{default:b(()=>[c(l(Vl),{class:"v-skeleton__header",height:A.headerHeight},{default:b(()=>[c(l(je),{ref_key:"brand",ref:r,region:"Brand"},null,512),c(l(je),{ref_key:"toolbar",ref:p,region:"Toolbar",preview:a.value},null,8,["preview"]),c(l(je),{ref_key:"actions",ref:m,region:"Actions"},null,512)]),_:1},8,["height"]),c(l(xt),{class:"v-skeleton__wrapper"},{default:b(()=>[a.value?j("",!0):Pe((u(),f(l(Ct),{key:0,width:t.leftWidth,class:N(["v-skeleton__left",{"is-collapsed":k.value}])},{default:b(()=>[c(l(je),{ref_key:"apps",ref:y,region:"Apps"},null,512)]),_:1},8,["width","class"])),[[l(jt),s]]),c(l(jl),{class:"v-skeleton__main"},{default:b(()=>[a.value?(u(),f(l(je),{key:0,ref_key:"preview",ref:w,region:"Preview",preview:a.value},null,8,["preview"])):j("",!0),Pe(c(l(je),{ref_key:"workspace",ref:g,region:"Workspace"},null,512),[[$e,!a.value]])]),_:1}),a.value?j("",!0):Pe((u(),f(l(Ct),{key:1,width:t.rightWidth,class:"v-skeleton__right"},{default:b(()=>[c(l(je),{ref_key:"settings",ref:h,region:"Settings"},null,512)]),_:1},8,["width"])),[[$e,E.value],[l(jt),o]])]),_:1}),a.value?j("",!0):(u(),f(l(El),{key:0,class:"v-skeleton__footer",height:A.footerHeight},{default:b(()=>[c(l(je),{ref_key:"status",ref:v,region:"Status"},null,512)]),_:1},8,["height"]))]),_:1})]),_:1},8,["locale"]))}}),$r={key:1},Rr={class:"v-setter__content"},Br={key:0,class:"v-setter__input"},Ir={class:"v-setter__action"},Tr="{{",Fr="}}",Wr=V({__name:"setter",props:{context:{},current:{},name:{},label:{default:""},title:{},setters:{},variable:{type:Boolean,default:!0},value:{},options:{default:()=>[]},defaultSetter:{},removable:{type:Boolean}},emits:["change","remove"],setup(d,{emit:e}){const t=d,a=e,n=_(!1),i=_(""),s=_(t.setters.find(E=>E.name===t.defaultSetter)||t.setters[0]),o=_(t.value),r=S(()=>!!Te(o.value)),p={[s.value.name]:o.value},m=E=>{p[s.value.name]=o.value,s.value=E,o.value=p[E.name]??void 0,y(o.value)};H(()=>t.value,()=>{o.value=t.value}),H(()=>t.defaultSetter,()=>{s.value=t.setters.find(E=>E.name===t.defaultSetter)||t.setters[0]});const y=E=>{a("change",E)},g=()=>{a("remove",t.name)},h=()=>{n.value=!0,i.value=Te(o.value)?o.value.value:""},v=()=>{n.value=!1,i.value=""},w=async E=>se(E,t.context,!0)?(p[s.value.name]=o.value,o.value=E,a("change",E),!0):!1,k=async()=>{await Re("确定要解除绑定吗？")&&(v(),o.value=void 0,a("change",""))};return(E,A)=>(u(),f(l(Wt),{class:"v-setter",size:"small","label-positon":"left"},{label:b(()=>[t.title?(u(),f(l(Ft),{key:0,placement:"top-start",content:t.title},{default:b(()=>[q(B(t.label||t.name),1)]),_:1},8,["content"])):(u(),C("span",$r,B(t.label||t.name),1))]),default:b(()=>[x("div",Rr,[s.value?(u(),C("div",Br,[r.value?j("",!0):(u(),f(sl(s.value.component),ie({key:0,current:t.current,context:t.context},s.value.props,{options:t.options,modelValue:o.value,"onUpdate:modelValue":A[0]||(A[0]=z=>o.value=z),onChange:y,disabled:r.value}),null,16,["current","context","options","modelValue","disabled"])),r.value?(u(),f(l(_e),{key:1,class:"v-expression-setter",disabled:"","model-value":"JSExpression"},{prefix:b(()=>[q(B(Tr))]),suffix:b(()=>[q(B(Fr))]),_:1})):j("",!0)])):j("",!0),x("div",Ir,[t.variable?(u(),f(l(ba),{key:0,onClick:h,class:N(["v-icon-vars",{"is-active":r.value}]),title:"绑定变量"},null,8,["class"])):j("",!0),t.setters.length>1?(u(),f(l(Tt),{key:1,disabled:r.value,size:"small","popper-class":"v-setter-switch",onCommand:m},{dropdown:b(()=>[c(l(It),null,{default:b(()=>[(u(!0),C($,null,I(t.setters,z=>(u(),f(l(nt),{command:z,key:z.name},{default:b(()=>[c(l(Ht),{class:N({"is-placeholder":z.name!==s.value.name})},null,8,["class"]),q(" "+B(z.label),1)]),_:2},1032,["command"]))),128))]),_:1})]),default:b(()=>[c(l(fa),{title:"切换设置器"})]),_:1},8,["disabled"])):j("",!0),t.removable?(u(),f(l(Ke),{key:2,onClick:g,title:"删除"})):j("",!0)])]),n.value?(u(),f(l(_o),{key:0,current:t.current,context:t.context,value:i.value,modelValue:n.value,"onUpdate:modelValue":A[1]||(A[1]=z=>n.value=z),submitMethod:w,onUnbind:k},null,8,["current","context","value","modelValue"])):j("",!0)]),_:1}))}}),Lr={class:"v-empty-region"},Or=V({name:"EmptyRegion",__name:"empty",props:{region:{}},setup(d){return(e,t)=>(u(),C("div",Lr,"找不到符合【"+B(e.region)+"】名称的区域组件",1))}}),Nr={class:"v-brand-region"},Ur=V({name:"BrandRegion",inheritAttrs:!1,__name:"brand",props:{region:{}},setup(d,{expose:e}){const t=d,{widgets:a,widgetsRef:n}=Ae(t.region);return e({widgets:a,widgetsRef:n}),(i,s)=>(u(),C("div",Nr,[(u(!0),C($,null,I(l(a),o=>(u(),f(l(ze),{ref_for:!0,ref_key:"widgetsRef",ref:n,region:i.region,widget:o},null,8,["region","widget"]))),256))]))}}),Mr={class:"v-toolbar-region"},Hr=V({name:"ToolbarRegion",__name:"toolbar",props:{region:{},preview:{type:Boolean}},setup(d,{expose:e}){const t=d,{widgets:a,widgetsRef:n}=Ae(t.region);return e({widgets:a,widgetsRef:n}),(i,s)=>(u(),C("div",Mr,[(u(!0),C($,null,I(l(a),o=>(u(),f(l(ze),{ref_for:!0,ref_key:"widgetsRef",ref:n,region:i.region,widget:o,preview:i.preview},null,8,["region","widget","preview"]))),256))]))}}),qr={class:"v-actions-region"},Qr=V({name:"ActionsRegion",inheritAttrs:!1,__name:"actions",props:{region:{}},setup(d,{expose:e}){const t=d,{widgets:a,widgetsRef:n}=Ae(t.region);return e({widgets:a,widgetsRef:n}),(i,s)=>(u(),C("div",qr,[(u(!0),C($,null,I(l(a),o=>(u(),f(l(ze),{ref_for:!0,ref_key:"widgetsRef",ref:n,region:i.region,widget:o},null,8,["region","widget"]))),256))]))}}),Zr={class:"v-apps-region"},Kr={class:"v-apps-region__header"},Gr={class:"v-apps-region__top"},Yr={class:"v-apps-region__bottom"},Xr={class:"v-apps-region__panels"},eu=V({name:"AppsRegion",inheritAttrs:!1,__name:"apps",props:{region:{},index:{default:0}},setup(d,{expose:e}){const t=d,a=re(),{widgets:n,widgetsRef:i}=Ae(t.region),s=S(()=>n.value.filter(h=>h.openType==="panel")),o=S(()=>n.value.filter(h=>h.openType!=="panel")),r=s.value[t.index],p=_(r),m=_(r),y=h=>{p.value=h,m.value=m.value?.name===h.name?null:h},g=h=>{h.openType==="link"&&h.url&&window.open(h.url),h.openType==="dialog"&&Ln({title:h.label,icon:h.icon,...h.props,content:h.component})};return H(m,h=>{a.skeleton?.toggleCollapse(!h)}),e({widgets:n,widgetsRef:i,setActive:h=>{const v=s.value.find(w=>w.name===h);p.value=v,m.value=v}}),(h,v)=>(u(),C("div",Zr,[x("div",Kr,[x("div",Gr,[(u(!0),C($,null,I(s.value,w=>(u(),f(l($t),{key:`icon-${w.name}`,icon:w.icon,label:w.label,active:p.value?.name===w.name,open:m.value?.name===w.name,onClick:k=>y(w)},null,8,["icon","label","active","open","onClick"]))),128))]),x("div",Yr,[(u(!0),C($,null,I(o.value,w=>(u(),f(l($t),{key:`icon-${w.name}`,icon:w.icon,label:w.label,onClick:k=>g(w)},null,8,["icon","label","onClick"]))),128))])]),x("div",Xr,[(u(!0),C($,null,I(s.value,w=>(u(),f(rl,{key:w.name},[p.value?.name===w.name?(u(),f(l(ze),{key:0,ref_for:!0,ref_key:"widgetsRef",ref:i,region:h.region,widget:w},null,8,["region","widget"])):j("",!0)],1024))),128))])]))}}),tu=V({name:"WorkspaceRegion",__name:"workspace",props:{region:{}},setup(d,{expose:e}){const t=d,{widgets:a,widgetsRef:n}=Ae(t.region),i=Le(a.value.map(g=>({name:g.name,command:g.name,label:g.label,closable:!!g.closable,props:g.props||{},checked:!g.closable}))),s=S(()=>i.filter(g=>!g.closable||g.checked)),o=S(()=>i.map(g=>({...g,disabled:!g.closable}))),r=_(s.value[0]?.name),p=S(()=>i.find(g=>g.name===r.value)?.props||{}),m=g=>{const h=i.find(v=>v.name===g);h&&(h.checked=!1),r.value===g&&(r.value=s.value[0]?.name)},y=g=>{const h=i.find(v=>v.name===g.name);h&&h.closable&&(h.checked=!h.checked,h.checked&&(r.value=h.name),!h.checked&&r.value===h.name&&(r.value=s.value[0]?.name))};return e({currentTab:r,widgets:a,widgetsRef:n,openTab:(g,h={})=>{const v=i.find(w=>w.name===g);v&&(v.props=Object.assign({},v.props,h),v.checked=!0,r.value=v.name)}}),(g,h)=>(u(),f(l(Xe),{class:"v-workspace-region",items:s.value,menus:o.value,modelValue:r.value,"onUpdate:modelValue":h[0]||(h[0]=v=>r.value=v),checkable:"",onRemove:m,onCommand:y},{default:b(()=>[(u(!0),C($,null,I(l(a),v=>(u(),C($,{key:v.name},[r.value===v.name?(u(),f(l(ze),{key:0,ref_for:!0,ref_key:"widgetsRef",ref:n,region:g.region,widget:{...v,props:p.value}},null,8,["region","widget"])):j("",!0)],64))),128))]),_:1},8,["items","menus","modelValue"]))}}),lu=V({name:"SettingsRegion",__name:"settings",props:{region:{}},setup(d,{expose:e}){const t=d,a=re(),{current:n}=oe(),{selected:i,isSelectBlock:s}=ye(),o=S(()=>s.value?he.Block:he.Node),{widgets:r,widgetsRef:p}=Ae(t.region,o),m=_(),y=_(!1),g=S(()=>r.value.map(k=>({name:k.name,label:k.label,actions:k.name==="Style"?[{name:"switch",icon:os,background:"hover"}]:void 0}))),h=S(()=>{const k=i.value?.model;return k?a.assets.componentMap.get(k.name)?.doc:null});H(n,k=>{a.skeleton?.settable(!!k)}),H(o,()=>{m.value=g.value[0]?.name},{immediate:!0}),H(m,()=>{y.value=!1});const v=()=>{if(h.value){const k=a.skeleton?.getRegion("Workspace");k&&k.regionRef.openTab("Docs",{url:h.value})}},w=k=>{k.name==="switch"&&(y.value=!y.value)};return e({widgets:r,widgetsRef:p}),(k,E)=>l(n)?(u(),f(l(O),{key:0,class:"v-settings-region",fit:"",direction:"column"},{default:b(()=>[l(i)?(u(),f(l(O),{key:0,flex:"",justify:"space-between",align:"center",class:"v-settings-region__header"},{default:b(()=>[c(l(O),{class:"v-settings-region__title"},{default:b(()=>[c(l(Gt)),x("span",null,[q(B(l(i)?.model.name)+": ",1),x("i",null,B(l(i)?.model.id),1)])]),_:1}),h.value?(u(),f(l(O),{key:0},{default:b(()=>[c(l(be),{onClick:v,icon:l($n),mode:"text",label:"帮助"},null,8,["icon"])]),_:1})):j("",!0)]),_:1})):j("",!0),l(i)&&!l(i).model.locked?(u(),f(l(O),{key:1,grow:"",padding:!1},{default:b(()=>[c(l(Xe),{items:g.value,modelValue:m.value,"onUpdate:modelValue":E[0]||(E[0]=A=>m.value=A),stretch:"",body:{padding:!1},onActionClick:w},{default:b(()=>[(u(!0),C($,null,I(l(r),A=>(u(),C($,{key:A.name},[m.value===A.name?(u(),f(l(ze),{key:0,ref_for:!0,ref_key:"widgetsRef",ref:p,region:k.region,widget:l(yt)({props:{isStyleCodeMode:y.value}},A)},null,8,["region","widget"])):j("",!0)],64))),128))]),_:1},8,["items","modelValue"])]),_:1})):j("",!0),l(i)?j("",!0):(u(),f(l(ae),{key:2,description:"请在左侧画布选中节点"})),l(i)&&l(i).model.locked?(u(),f(l(ae),{key:3,"image-size":1,description:"节点已被锁定, 禁止编辑"})):j("",!0)]),_:1})):j("",!0)}}),au={class:"v-status-region"},nu=V({name:"StatusRegion",inheritAttrs:!1,__name:"status",props:{region:{}},setup(d,{expose:e}){const t=d,{widgets:a,widgetsRef:n}=Ae(t.region);return e({widgets:a,widgetsRef:n}),(i,s)=>(u(),C("div",au,[(u(!0),C($,null,I(l(a),o=>(u(),f(l(ze),{ref_for:!0,ref_key:"widgetsRef",ref:n,region:i.region,widget:o},null,8,["region","widget"]))),256))]))}}),su=V({name:"PreviewRegion",__name:"preview",props:{region:{}},setup(d,{expose:e}){const t=d,{widgets:a,widgetsRef:n}=Ae(t.region),i=Le(a.value.map(r=>({name:r.name,command:r.name,label:r.label,closable:!!r.closable,checked:!1}))),s=S(()=>i.filter(r=>!r.closable||r.checked)),o=_(s.value[0]?.name);return e({currentTab:o,widgets:a,widgetsRef:n}),(r,p)=>(u(),f(l(Xe),{class:"v-workspace-region",items:s.value,modelValue:o.value,"onUpdate:modelValue":p[0]||(p[0]=m=>o.value=m)},{default:b(()=>[(u(!0),C($,null,I(l(a),m=>(u(),f(rl,{key:m.name},[o.value===m.name?(u(),f(l(ze),{key:0,ref_for:!0,ref_key:"widgetsRef",ref:n,region:r.region,widget:m},null,8,["region","widget"])):j("",!0)],1024))),128))]),_:1},8,["items","modelValue"]))}}),Rt={EmptyRegion:Or,Brand:Ur,Toolbar:Hr,Actions:Qr,Apps:eu,Workspace:tu,Settings:lu,Status:nu,Preview:su};class hu extends Nn{publish(e){return we.warning({title:"提示",message:"在线演示版本不支持发布功能，如需体验请下载本地版本。"}),Promise.resolve(!1)}publishFile(e,t){return we.warning({title:"提示",message:"在线演示版本不支持发布功能，如需体验请下载本地版本。"}),Promise.resolve(!1)}genVueContent(e,t){return we.warning({title:"提示",message:"在线演示版本不支持源码生成功能，如需体验请下载本地版本。"}),Promise.resolve("")}async createRawPage(e){return we.warning({title:"提示",message:"在线演示版本不支持源码模式页面，如需体验请下载本地版本。"}),Promise.resolve(!1)}async removeRawPage(e){return we.warning({title:"提示",message:"在线演示版本不支持源码模式页面，如需体验请下载本地版本。"}),Promise.resolve(!1)}}export{hu as L,mu as M,pu as P,fl as _,vu as a,gu as v};
