const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Editor-Dtm2GYTx-CPDoLWQj.js","./monaco-editor-DXF939Xd.js","./monaco-editor-BgBQhOSF.css","./@vue-BvMObo90.js"])))=>i.map(i=>d[i]);
var bn=Object.defineProperty,yn=Object.defineProperties;var wn=Object.getOwnPropertyDescriptors;var Vt=Object.getOwnPropertySymbols;var Wa=Object.prototype.hasOwnProperty,Ma=Object.prototype.propertyIsEnumerable;var Gt=(i,e,t)=>e in i?bn(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,L=(i,e)=>{for(var t in e||(e={}))Wa.call(e,t)&&Gt(i,t,e[t]);if(Vt)for(var t of Vt(e))Ma.call(e,t)&&Gt(i,t,e[t]);return i},ae=(i,e)=>yn(i,wn(e));var Kt=(i,e)=>{var t={};for(var a in i)Wa.call(i,a)&&e.indexOf(a)<0&&(t[a]=i[a]);if(i!=null&&Vt)for(var a of Vt(i))e.indexOf(a)<0&&Ma.call(i,a)&&(t[a]=i[a]);return t};var x=(i,e,t)=>Gt(i,typeof e!="symbol"?e+"":e,t);var j=(i,e,t)=>new Promise((a,l)=>{var n=u=>{try{o(t.next(u))}catch(d){l(d)}},r=u=>{try{o(t.throw(u))}catch(d){l(d)}},o=u=>u.done?a(u.value):Promise.resolve(u.value).then(n,r);o((t=t.apply(i,e)).next())});import{n as we,o as ol,p as ba,h as me,q as Et,r as rl,s as kn,t as ul,u as ta,v as dl,w as ya,x as aa,y as la,m as ve,A as Oe,B as _n,C as Sn,e as Ae,D as xn,F as Cn,G as Ua,H as Vn,I as qa,J as jn,K as An,z as En,E as Pn,L as cl,b as ml,a as It,M as Rn,N as pl,O as vl,P as wa,g as hl,k as Dn,j as Bn,f as On,Q as Fn,R as Tn,S as zn}from"./element-plus-DbtG_n5j.js";import{D as Pe,E as In,C as De,a as Tt,$ as gt,t as wt,L as kt,b as Nn,c as Jn,e as $n,s as Ln,d as Wn,I as lt,B as Ha,k as xe,M as Mn,Z as Ga,i as Un,K as qn,P as Hn,l as et,f as Gn,g as Kn,h as Qn,O as Xn,F as Yn,j as Zn,w as es,p as ts,m as as,r as ls,n as ns,o as ss,R as gl,q as is,u as os,v as rs,x as us,y as ds,H as cs,z as ms,A as ps,G as vs,J as na,N as Le,W as N,Q as hs,S as ka,T as fl,X as bl,U as Q,Y as _a,_ as gs,a0 as Ka,a1 as fs,a2 as yl,a3 as bs,a4 as Nt,a5 as Re,a6 as wl,a7 as ys,a8 as Jt,a9 as Je,aa as kl,ab as ws,ac as Ye,ad as _l,ae as ks,af as _s,ag as Sl,ah as Ss,ai as xs,aj as xl,ak as Cs,al as Vs,am as js,an as As,ao as Es,ap as Ps,aq as Rs,ar as Ds,as as Bs,at as Os,au as Fs,av as Ts,aw as zs,ax as Is,ay as Ns,az as Js,aA as $s,aB as Ls,aC as Ws,aD as Cl,aE as Ms,aF as Us,aG as qs,aH as Hs,aI as Gs,aJ as Ks,aK as Qs,aL as Xs,aM as Ys,aN as Zs,aO as ei,aP as ti,aQ as ai,aR as li,aS as ni,aT as Vl,aU as si,aV as ii,aW as oi,aX as ri,aY as ui,aZ as di,a_ as ci,a$ as mi,b0 as pi,b1 as vi,b2 as hi,b3 as gi,b4 as fi,b5 as bi,b6 as yi,b7 as wi,b8 as ki,b9 as _i,ba as Si,bb as xi,bc as Ci,bd as Vi,be as ji,bf as Ai,bg as Qt,bh as Ei}from"./index-DJIx_HG3.js";import{_ as Pi}from"./monaco-editor-DXF939Xd.js";import{aU as sa,r as S,w as jl,d as D,I as $e,G as $t,f as X,t as Ri,e as Al,h as Di,E as Bi,k as V,g as El,b as Pl,u as s,i as Lt,j as _t,am as ia,o as h,c as B,Y as U,Z as f,S as y,a as P,R as k,W as O,X as ee,F as M,a8 as q,l as oa,M as Z,O as Pt,a9 as Rt,a4 as ct,H as Rl,at as Dl,av as Oi,n as Te,bC as We,U as He,_ as Xe,V as Bl,P as ge,a0 as St,aa as Fi,L as Ne,bA as ra,K as Ti,s as ua,ac as Ol,ad as Fl,aC as Tl,ae as zi}from"./@vue-BvMObo90.js";import{V as Wt}from"./vue-wQDX-gIh.js";import{useRoute as zl}from"./vue-router-BzBdwOyF.js";import{A as ft}from"./mockjs-szxIEzdK.js";import{T as Ii,M as Sa,n as Ni,D as Ji,U as $i,P as Li,k as Il,j as Wi,V as Mi,W as Ui,E as xa,B as qi,d as Hi,X as Gi}from"./@element-plus-CUAQWPzw.js";/**!
 * Copyright (c) 2024, VTJ.PRO All rights reserved.
 * @name @vtj/core 
 * @author CHC chenhuachun1549@dingtalk.com 
 * @version 0.8.96
 * @license <a href="https://vtj.pro/license.html">MIT License</a>
 */const da="BuiltIn",Nl="VueMaterial",Jl="VueRouterMaterial",Ki={vue:"Vue","vue-router":"VueRouter"},Qi={[Nl]:["Transition","TransitionGroup","KeepAlive","Teleport","Suspense"],[Jl]:["RouterView","RouterLink"]};class Ca{constructor(){x(this,"listeners",[]);x(this,"isReady",!1)}triggerReady(){this.isReady=!0;for(const e of this.listeners)e();this.listeners=[]}ready(e){this.isReady?e():this.listeners.push(e)}resetReady(){this.isReady=!1}}class mt{constructor(e,t,a){x(this,"isUnset",!1);this.name=e,this.value=t,this.defaultValue=a,this.setValue(t)}setValue(e){this.value=e,this.isUnset=this.value===this.defaultValue}getValue(){var e;return(e=this.value)!=null?e:this.defaultValue}static toDsl(e={}){return Object.entries(e).reduce((t,[a,l])=>(l.isUnset||(t[a]=l.getValue()),t),{})}static parse(e={}){return Object.entries(e).reduce((t,[a,l])=>(t[a]=new mt(a,l),t),{})}}let Xt=class $l{constructor(e){x(this,"name");x(this,"handler");x(this,"modifiers",{});this.schema=e;const{name:t,handler:a}=this.schema;this.name=t,this.handler=a,this.update(e)}update(e){Object.assign(this.schema,e);const{handler:t,modifiers:a={}}=this.schema;this.handler=t,this.modifiers=a}static toDsl(e){return Object.entries(e).reduce((t,[a,l])=>{const{handler:n,modifiers:r}=l;return t[a]={name:a,handler:n,modifiers:r},t},{})}static parse(e={}){return Object.entries(e).reduce((t,[a,l])=>(t[a]=new $l(l),t),{})}};class Ue{constructor(e){x(this,"id");x(this,"name","");x(this,"arg");x(this,"modifiers");x(this,"value");x(this,"iterator");this.schema=e,this.id=e.id||Pe(),this.update(e)}update(e){Object.assign(this.schema,e);const{name:t,arg:a,modifiers:l,value:n,iterator:r}=this.schema;this.name=t,this.arg=a,this.modifiers=l,this.value=n,this.iterator=r}static parse(e=[]){return e.map(t=>new Ue(t))}static toDsl(e=[]){return e.map(t=>{const{name:a,arg:l,modifiers:n,value:r,iterator:o,id:u}=t;return{id:u,name:a,arg:l,modifiers:n,value:r,iterator:o}})}}const oe="EVENT_NODE_CHANGE",at=class at{constructor(e,t=null){x(this,"__VTJ_NODE__",!0);x(this,"locked",!1);x(this,"id");x(this,"name");x(this,"from");x(this,"invisible",!1);x(this,"children","");x(this,"slot");x(this,"props",{});x(this,"events",{});x(this,"directives",[]);x(this,"disposed",!1);this.parent=t;const{id:a=Pe(),name:l,from:n=""}=e;this.id=a,this.name=l,this.from=n,this.update(e,!0),at.nodes[this.id]=this}update(e,t=!1){const{invisible:a=!1,locked:l=!1,children:n=[],slot:r,props:o={},events:u={},directives:d=[]}=e;this.invisible=a,this.locked=l,this.setChildren(n,!0),this.setSlot(r,!0),this.props=mt.parse(o),this.events=Xt.parse(u),this.directives=Ue.parse(d),t||R.emit(oe,this)}setChildren(e="",t=!1){Array.isArray(e)?this.children=e.map(a=>new at(a,this)):this.children=e,t||R.emit(oe,this)}setSlot(e,t=!1){this.slot=typeof e=="string"?{name:e,params:[]}:e,t||R.emit(oe,this)}setProp(e,t,a,l=!1){const n=this.props[e];n?n.setValue(t):this.props[e]=new mt(e,t,a),l||R.emit(oe,this)}removeProp(e,t=!1){delete this.props[e],t||R.emit(oe,this)}getPropValue(e){const t=this.props[e];if(t)return t.getValue()}setEvent(e,t=!1){const a=this.events[e.name];a?a.update(e):this.events[e.name]=new Xt(e),t||R.emit(oe,this)}removeEvent(e,t=!1){delete this.events[e],t||R.emit(oe,this)}setDirective(e,t=!1){const a=this.directives.findIndex(l=>l.id===e.id);a>=0?this.directives.splice(a,1,new Ue(e)):this.directives.push(new Ue(e)),t||R.emit(oe,this)}removeDirective(e,t=!1){const a=this.directives.findIndex(l=>l===e||l.id===e.id);a>=0&&this.directives.splice(a,1),t||R.emit(oe,this)}removeChild(e,t=!1){const{children:a,disposed:l}=this;if(l||!Array.isArray(a))return;const n=a.findIndex(r=>r===e);e.parent=null,a.splice(n,1),t||R.emit(oe,this)}appendChild(e,t=!1){const{children:a,disposed:l}=this;l||(e.parent=this,Array.isArray(a)?a.push(e):this.children=[e],t||R.emit(oe,this))}insertAfter(e,t=!1){if(!this.parent)return;const a=this.parent.children;if(Array.isArray(a)){e.parent=this.parent;const l=a.indexOf(this);a.splice(l+1,0,e),t||R.emit(oe,this.parent)}}insertBefore(e,t=!1){if(!this.parent)return;const a=this.parent.children;if(Array.isArray(a)){e.parent=this.parent;const l=a.indexOf(this);a.splice(l,0,e),t||R.emit(oe,this.parent)}}movePrev(e=!1){const t=this.parent;if(!t)return;const a=t.children;if(Array.isArray(a)){const l=a.indexOf(this);l>0&&(a.splice(l,1),a.splice(l-1,0,this),e||R.emit(oe,t))}}moveNext(e=!1){const t=this.parent;if(!t)return;const a=t.children;if(Array.isArray(a)){const l=a.indexOf(this);l>-1&&l<a.length-1&&(a.splice(l,1),a.splice(l+1,0,this),e||R.emit(oe,t))}}toDsl(){const{id:e,name:t,from:a,invisible:l,locked:n,slot:r,children:o,props:u,directives:d,events:c}=this,m=Array.isArray(o)?o.map(p=>p.toDsl()):o;return{id:e,name:t,from:a,invisible:l,locked:n,slot:r,children:m,props:mt.toDsl(u),directives:Ue.toDsl(d),events:Xt.toDsl(c)}}dispose(e=!1){const{children:t,disposed:a}=this;a||(Array.isArray(t)&&t.forEach(l=>l.dispose(!0)),this.parent?this.parent.removeChild(this,e):e||R.emit(oe,this),this.parent=null,this.disposed=!0,delete at.nodes[this.id])}lock(e=!1){if(this.locked=!0,Array.isArray(this.children))for(const t of this.children)t.lock(!0);e||R.emit(oe,this)}unlock(e=!1){if(this.locked=!1,Array.isArray(this.children))for(const t of this.children)t.unlock(!0);e||R.emit(oe,this)}setVisible(e,t=!1){if(this.invisible=!e,Array.isArray(this.children))for(const a of this.children)a.setVisible(e,!0);t||R.emit(oe,this)}isChild(e){let t=!1;if(Array.isArray(this.children)){for(const a of this.children)if(e===a||e.id===a.id){t=!0;break}else if(t=a.isChild(e),t)break}return t}};x(at,"nodes",{});let nt=at;const le="EVENT_BLOCK_CHANGE",ht=class ht{constructor(e){x(this,"__VTJ_BLOCK__",!0);x(this,"id");x(this,"name","");x(this,"inject",[]);x(this,"state",{});x(this,"lifeCycles",{});x(this,"methods",{});x(this,"computed",{});x(this,"watch",[]);x(this,"css","");x(this,"props",[]);x(this,"emits",[]);x(this,"slots",[]);x(this,"dataSources",{});x(this,"nodes",[]);x(this,"locked",!1);x(this,"disposed",!1);const{id:t}=e;this.id=t||Pe(),this.update(e,!0)}update(e,t=!1){for(const l of ht.normalAttrs){const n=e[l];n&&(this[l]=n)}const{nodes:a=[]}=e;a.length&&(this.nodes=a.map(l=>new nt(l))),t||R.emit(le,this)}toDsl(e){const{__VTJ_BLOCK__:t,id:a,nodes:l}=this;return ae(L({},ht.normalAttrs.reduce((n,r)=>(n[r]=this[r],n),{})),{__VTJ_BLOCK__:t,__VERSION__:e||In().toString(),id:a,nodes:l.map(n=>n.toDsl())})}dispose(){this.nodes.map(e=>e.dispose(!0)),this.nodes=[],this.disposed=!0}setFunction(e,t,a,l=!1){this[e][t]=a,l||R.emit(le,this)}removeFunction(e,t,a=!1){delete this[e][t],a||R.emit(le,this)}setState(e,t,a=!1){this.state[e]=t,a||R.emit(le,this)}removeState(e,t=!1){delete this.state[e],t||R.emit(le,this)}setCss(e,t=!1){this.css=e,t||R.emit(le,this)}setWatch(e,t=!1){e.id=e.id||Pe();const a=this.watch.findIndex(l=>l.id&&l.id===e.id||l===e);a>-1?this.watch.splice(a,1,e):this.watch.push(e),t||R.emit(le,this)}removeWatch(e,t=!1){const a=this.watch.findIndex(l=>l.id&&l.id===e.id||l===e);a>-1&&(this.watch.splice(a,1),t||R.emit(le,this))}setProp(e,t=!1){const a=this.props.findIndex(l=>typeof l=="string"?l===e.name:l.name===e.name);a>-1?this.props.splice(a,1,e):this.props.push(e),t||R.emit(le,this)}removeProp(e,t=!1){const a=this.props.findIndex(l=>typeof l=="string"?l===e.name:l.name===e.name);a>-1&&(this.props.splice(a,1),t||R.emit(le,this))}setEmit(e,t=!1){const a=De(e)?{name:e,params:[]}:e,l=this.emits.findIndex(n=>n===a.name||n===a);l>-1?this.emits.splice(l,1,a):this.emits.push(a),t||R.emit(le,this)}removeEmit(e,t=!1){const a=this.emits.findIndex(l=>De(l)?l===e:l.name===e);a>-1&&(this.emits.splice(a,1),t||R.emit(le,this))}setSlot(e,t=!1){const a=De(e)?{name:e,params:[]}:e,l=this.slots.findIndex(n=>n===a.name||n===a);l>-1?this.slots.splice(l,1,a):this.slots.push(a),t||R.emit(le,this)}removeSlot(e,t=!1){const a=this.slots.findIndex(l=>De(l)?l===e:l.name===e);a>-1&&(this.slots.splice(a,1),t||R.emit(le,this))}setInject(e,t=!1){const a=this.inject.findIndex(l=>l.name===e.name);a>-1?this.inject.splice(a,1,e):this.inject.push(e),t||R.emit(le,this)}removeInject(e,t=!1){const a=this.inject.findIndex(l=>l.name===e.name);a>-1&&(this.inject.splice(a,1),t||R.emit(le,this))}setDataSource(e,t=!1){this.dataSources[e.name]=e,t||R.emit(le,this)}removeDataSource(e,t=!1){delete this.dataSources[e],t||R.emit(le,this)}insertAfter(e,t,a=!1){e.parent=null;const l=this.nodes.indexOf(t);this.nodes.splice(l+1,0,e),a||R.emit(le,this)}insertBefore(e,t,a=!1){e.parent=null;const l=this.nodes.indexOf(t);this.nodes.splice(l,0,e),a||R.emit(le,this)}appendNode(e,t=!1){e.parent=null,this.nodes.push(e),t||R.emit(le,this)}addNode(e,t,a="inner",l=!1){t?["left","top"].includes(a)?t.parent?t.insertAfter(e,l):this.insertBefore(e,t,l):["right","bottom"].includes(a)?t.parent?t.insertAfter(e,l):this.insertAfter(e,t,l):t.appendChild(e,l):this.appendNode(e,l)}__removeNode(e,t=!1){const a=this.nodes.findIndex(l=>l.id===e.id);a>-1&&(this.nodes.splice(a,1),t||R.emit(le,this))}removeNode(e,t=!1){e.parent?e.dispose(t):(e.dispose(!0),this.__removeNode(e,t))}move(e,t,a="inner",l=!1){e.parent?e.parent.removeChild(e,!0):this.__removeNode(e,!0),this.addNode(e,t,a,l)}movePrev(e,t=!1){if(e.parent)e.movePrev(t);else{const a=this.nodes,l=a.indexOf(e);l>0&&(a.splice(l,1),a.splice(l-1,0,e),t||R.emit(le,this))}}moveNext(e,t=!1){if(e.parent)e.moveNext(t);else{const a=this.nodes,l=a.indexOf(e);l>-1&&l<a.length-1&&(a.splice(l,1),a.splice(l+1,0,e),t||R.emit(le,this))}}cloneNode(e,t=!1){const a=Ul(e.toDsl()),l=new nt(a);return this.addNode(l,e,"bottom",t),l}lock(e=!1){this.locked=!0;for(const t of this.nodes)t.lock(!0);e||R.emit(le,this)}unlock(e=!1){this.locked=!1;for(const t of this.nodes)t.unlock(!0);e||R.emit(le,this)}isChild(e){let t=!1;for(const a of this.nodes)if(e===a||e.id===a.id){t=!0;break}else if(t=a.isChild(e),t)break;return t}};x(ht,"normalAttrs",["name","locked","inject","state","lifeCycles","methods","computed","watch","css","props","emits","slots","dataSources"]);let Ge=ht;const pe="EVENT_PROJECT_CHANGE",bt="EVENT_PROJECT_ACTIVED",ca="EVENT_PROJECT_DEPS_CHANGE",ut="EVENT_PROJECT_PAGES_CHANGE",Dt="EVENT_PROJECT_BLOCKS_CHANGE",Qa="EVENT_PROJECT_APIS_CHANGE",Xa="EVENT_PROJECT_META_CHANGE",Ll="EVENT_PROJECT_PUBLISH",Wl="EVENT_PROJECT_FILE_PUBLISH";var qe;let ma=(qe=class{constructor(e){x(this,"id","");x(this,"name","");x(this,"description","");x(this,"homepage","");x(this,"dependencies",[]);x(this,"pages",[]);x(this,"blocks",[]);x(this,"apis",[]);x(this,"meta",[]);x(this,"currentFile",null);x(this,"config",{});const{id:t}=e;this.id=t||Pe(),this.update(e,!0)}update(e,t=!1){for(const a of qe.attrs){const l=e[a];l&&(this[a]=l)}t||R.emit(pe,{model:this,type:"update",data:e})}isPageFile(e){return e.type==="page"}toDsl(e){const{id:t}=this,a=qe.attrs.reduce((l,n)=>(l[n]=this[n],l),{});return a.pages&&(a.pages=a.pages.map(l=>(delete l.dsl,l))),a.blocks&&(a.blocks=a.blocks.map(l=>(delete l.dsl,l))),L({__VTJ_PROJECT__:!0,id:t},a)}active(e,t=!1){this.currentFile=e,t||R.emit(bt,{model:this,type:"update",data:e})}deactivate(e=!1){this.currentFile=null,e||R.emit(bt,{model:this,type:"update",data:null})}setDeps(e,t=!1){const a=this.dependencies,l=a.findIndex(r=>r.package===e.package);let n;if(l>-1?(n="update",a.splice(l,1,L(L({},a[l]),e))):(n="create",a.push(e)),!t){const r={model:this,type:n,data:e};R.emit(ca,r),R.emit(pe,r)}}removeDeps(e,t=!1){const a=this.dependencies,l=a.findIndex(n=>n.package===e.package);if(l>-1&&a.splice(l,1),!t){const n={model:this,type:"delete",data:e};R.emit(ca,n),R.emit(pe,n)}}getPage(e){const t=(a,l=[])=>{for(const n of l){if(n.id===a)return n;if(n.children&&n.children.length){const r=t(a,n.children);if(r)return r}}};return t(e,this.pages)}getPages(){const e=(t=[])=>{let a=[];for(const l of t)l.dir?l.children&&l.children.length&&(a=a.concat(e(l.children))):a.push(l);return a};return e(this.pages)}createPage(e,t,a=!1){return j(this,null,function*(){if(e.id=e.raw?e.name:e.id||Pe(),e.type="page",e.dir?e.children=[]:e.dsl=e.dsl||new Ge({id:e.id,name:Tt(e.name)}).toDsl(),t){const l=this.getPage(t);l?l.children?l.children.push(e):l.children=[e]:console.warn(`not found PageFile for id: ${t} `)}else this.pages.push(e);if(!a){const l={model:this,type:"create",data:e};R.emit(ut,l),R.emit(pe,l)}!this.currentFile&&!e.dir&&(yield gt(1e3),this.active(e,a))})}updatePage(e,t=!1){const a=this.getPage(e.id);if(a?Object.assign(a,e):console.warn(`not found PageFile for id: ${e.id} `),!t){const l={model:this,type:"update",data:e};R.emit(ut,l),R.emit(pe,l)}}clonePage(e,t,a=!1){var m;const l=Pe(),n=`${e.name}Copy`,r=`${e.title}_副本`,o=new Ge({id:l,name:n}).toDsl(),u=wt({},e,{id:l,name:n,title:r,dsl:o}),d=t?((m=this.getPage(t))==null?void 0:m.children)||[]:this.pages,c=d.findIndex(p=>p.id===e.id);if(d.splice(c+1,0,u),!a){const p={model:this,type:"clone",data:{page:e,newPage:u}};R.emit(ut,p),R.emit(pe,p)}}removePage(e,t=!1){var n;const a=this.getPage(e),l=(r,o)=>{const u=o.findIndex(d=>d.id===r);if(u>=0){o.splice(u,1);return}for(const d of o)if(d.children&&d.children.length)return l(r,d.children)};if(l(e,this.pages),e===this.homepage&&(this.homepage=""),((n=this.currentFile)==null?void 0:n.id)===e&&this.deactivate(t),!t){const r={model:this,type:"delete",data:a};R.emit(ut,r),R.emit(pe,r)}}getBlock(e){return this.blocks.find(t=>t.id===e)}createBlock(e,t=!1){return j(this,null,function*(){const a=e.id||Pe(),l=Tt(e.name);e.id=a,e.type="block",e.dsl=new Ge({id:a,name:l}).toDsl(),this.blocks.push(e);const n=e.fromType||"Schema";if(!t){const r={model:this,type:"create",data:e};R.emit(Dt,r),R.emit(pe,r)}!this.currentFile&&n==="Schema"&&(yield gt(1e3),this.active(e,t))})}updateBlock(e,t=!1){const a=this.getBlock(e.id);if(a?(Object.assign(a,e),a.dsl&&(a.dsl.name=e.name)):console.warn(`not found PageFile for id: ${e.id} `),!t){const l={model:this,type:"update",data:e};R.emit(Dt,l),R.emit(pe,l)}}removeBlock(e,t=!1){var r;const a=this.getBlock(e),l=this.blocks,n=l.findIndex(o=>o.id===e);if(n>-1?(l.splice(n,1),((r=this.currentFile)==null?void 0:r.id)===e&&this.deactivate(t)):console.warn(`not found PageFile for id: ${e} `),!t){const o={model:this,type:"delete",data:a};R.emit(Dt,o),R.emit(pe,o)}}existBlockName(e,t=[]){return this.blocks.some(a=>a.name===e&&!t.includes(a.id))}existPageName(e,t=[]){return this.getPages().some(a=>a.name===e&&!t.includes(a.id))}setApi(e,t=!1){const a=this.apis.find(n=>n.name===e.name||n.id===e.id);let l;if(a?(l="update",Object.assign(a,e)):(l="create",e.id=Pe(),this.apis.push(e)),!t){const n={model:this,type:l,data:e};R.emit(Qa,n),R.emit(pe,n)}}removeApi(e,t=!1){const a=this.apis.findIndex(l=>l.name===e||l.id===e);if(a>-1?this.apis.splice(a,1):console.warn(`not found Api for name: ${e} `),!t){const l={model:this,type:"delete",data:e};R.emit(Qa,l),R.emit(pe,l)}}existApiName(e,t=[]){return this.apis.some(a=>a.name===e&&!t.includes(a.id))}setMeta(e,t=!1){const a=this.meta.find(n=>n.code===e.code||n.id===e.id);let l;if(a?(l="update",Object.assign(a,e)):(l="create",e.id=Pe(),this.meta.push(e)),!t){const n={model:this,type:l,data:e};R.emit(Xa,n),R.emit(pe,n)}}removeMeta(e,t=!1){const a=this.meta.findIndex(l=>l.code===e||l.id===e);if(a>-1?this.meta.splice(a,1):console.warn(`not found meta for name: ${name} `),!t){const l={model:this,type:"delete",data:e};R.emit(Xa,l),R.emit(pe,l)}}existMetaCode(e,t=[]){return this.meta.some(a=>a.code===e&&!t.includes(a.id))}setHomepage(e,t=!1){if(this.homepage=e,!t){const a={model:this,type:"update",data:e};R.emit(pe,a)}}setConfig(e,t=!1){if(this.config=Object.assign(this.config,e),!t){const a={model:this,type:"update",data:e};R.emit(pe,a)}}publish(e){const t={model:this,type:"publish",data:e||this};e?R.emit(Wl,t):R.emit(Ll,t)}},x(qe,"attrs",["name","homepage","description","dependencies","pages","blocks","apis","meta","config"]),qe);const dt="EVENT_HISTORY_CHANGE",Bt="EVENT_HISTORY_LOAD";let Ml=class{constructor(e,t={}){x(this,"options",{max:50});x(this,"index",-1);x(this,"id");x(this,"items");Object.assign(this.options,t);const{id:a,items:l=[]}=e;this.id=a,this.items=l}toDsl(){const{id:e,items:t}=this;return{id:e,items:t.map(a=>({id:a.id,label:a.label}))}}get(e){return this.items.find(t=>t.id===e)}add(e,t=!1){const{max:a}=this.options,l={id:Pe(),label:new Date().toLocaleString(),dsl:kt(e)};if(this.items.unshift(l),this.items.length>a){const n=this.items.splice(a);t||R.emit(dt,{model:this,type:"delete",data:n.map(r=>r.id)})}this.index=-1,t||R.emit(dt,{model:this,type:"create",data:l})}remove(e,t=!1){const a=this.items.findIndex(l=>l.id===e);a>-1?(this.items.splice(a,1),a===this.index?this.index=-1:this.index>=this.items.length&&(this.index=this.items.length-1)):console.warn(`not found HistoryItem for id: ${e} `),t||R.emit(dt,{model:this,type:"delete",data:[e]})}forward(e=!1){const{index:t,items:a}=this;if(t<0)return;--this.index;const l=a[this.index];l&&!e&&R.emit(Bt,{model:this,type:"load",data:l})}backward(e=!1){const{index:t,items:a}=this;if(t>=a.length-1)return;t<0&&(this.index=0),++this.index;const l=a[this.index];l&&!e&&R.emit(Bt,{model:this,type:"load",data:l})}load(e,t=!1){const a=this.items.findIndex(l=>l.id===e);a>=0&&(this.index=a,t||R.emit(Bt,{model:this,type:"load",data:this.items[a]}))}clear(e=!1){this.index=-1;const t=this.items.map(a=>a.id);this.items=[],e||R.emit(dt,{model:this,type:"clear",data:t})}};const R=Nn();function ue(i){return i instanceof Ge}function Ul(i){return delete i.id,Array.isArray(i.children)&&(i.children=i.children.map(e=>Ul(e))),i}function Xi(i){const e=i.fromType||"Schema";return e==="Schema"?{type:"Schema",id:i.id}:e==="UrlSchema"?{type:"UrlSchema",url:(i.urls||"").split(",")[0]||""}:e==="Plugin"?{type:"Plugin",urls:(i.urls||"").split(","),library:i.library}:""}/**!
 * Copyright (c) 2024, VTJ.PRO All rights reserved.
 * @name @vtj/renderer 
 * @author CHC chenhuachun1549@dingtalk.com 
 * @version 0.8.96
 * @license <a href="https://vtj.pro/license.html">MIT License</a>
 */const pt="0.8.96";var je=(i=>(i.Runtime="Runtime",i.Design="Design",i.Raw="Raw",i.VNode="VNode",i))(je||{});const Ya=["$el","$emit","$nextTick","$parent","$root","$attrs","$slots","$watch","$props","$options","$forceUpdate"],Yi=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeUnmount","unmounted","errorCaptured","renderTracked","renderTriggered","activated","deactivated"],Zi=["vIf","vShow","vModel","vFor","vBind"],ql={String,Number,Boolean,Array,Object,Function,Date};function jt(i,e){return i.map(t=>Qn(t)?t:`${e}${t}`)}function Va(i){return/\.css$/.test(i)}function ja(i){return/\.js$/.test(i)}function eo(i){return/\.json$/.test(i)}function Za(i){return i.map(e=>`<script src="${lt.append(e,{v:pt})}"><\/script>`).join("")}function to(i=[]){return i.map(e=>`<link rel="stylesheet" href="${lt.append(e,{v:pt})}" />`).join("")}function Hl(i,e){const t=i.filter(m=>!!m.enabled),a=[],l=[],n=[],r=[],o={},u={},d=[],c={};return t.forEach(({urls:m,assetsUrl:p,library:g,assetsLibrary:v,localeLibrary:b})=>{m==null||m.forEach(w=>{ja(w)&&a.push(w),Va(w)&&l.push(w)}),g&&(r.push(g),o[g]=jt(m||[],e),b&&(u[g]=b)),p&&n.push(p),v&&d.push(v),g&&v&&(c[v]=g)}),{scripts:jt(a,e),css:jt(l,e),materials:jt(n,e),libraryExports:r,materialExports:Mn(d),materialMapLibrary:c,libraryMap:o,libraryLocaleMap:u}}function pa(i,e){var n;const{name:t,parent:a,alias:l}=i;return a?(n=e[a])==null?void 0:n[l||t]:e[l||t]}function Gl(i){return De(i)?i:JSON.stringify(i)}function Kl(i,e,t){const a=i.CSSStyleSheet;if(a.prototype.replaceSync){const l=new a;l.id=e,l.replaceSync(t);const n=i.document,r=n.adoptedStyleSheets,o=Array.from(r).filter(u=>u.id!==e);n.adoptedStyleSheets=[...o,l]}else{const l=i.document;let n=l.getElementById(e);n?n.innerHTML=t:(n=l.createElement("style"),n.id=e,n.innerHTML=t,l.head.appendChild(n))}}function ao(i,e){return j(this,null,function*(){const t=yield window.fetch(e).then(a=>a.text()).catch(()=>"");t&&Kl(window,i,t)})}function Ql(i,e=window){const t=e.document,a=e.document.head;for(const l of i)if(!t.getElementById(l)){const n=t.createElement("link");n.rel="stylesheet",n.id=l,n.href=l,a.appendChild(n)}}function lo(a,l){return j(this,arguments,function*(i,e,t=window){const n=t.document,r=t.document.head;let o=t[e];return o?o.default||o:new Promise((u,d)=>{for(const c of i){const m=n.createElement("script");m.src=c,m.onload=()=>{o=t[e],o?u(o.default||o):d(null)},m.onerror=p=>{d(p)},r.appendChild(m)}})})}function no(i){return Ga(i)||Ga(i==null?void 0:i.install)}function ze(i,e,t=!1,a=!1){var l;try{const n=['"use strict";',"var __self = arguments[0];"];n.push("return ");let r=(i.value||"").trim();r=r.replace(/this(\W|$)/g,(u,d)=>`__self${d}`),r=n.join(`
`)+r;const o=`with(${t?"{}":"$scope || {}"}) { ${r} }`;return new Function("$scope",o)(e)}catch(n){if(xe.error("parseExpression.error",n,i,(l=e==null?void 0:e.__self)!=null?l:e),a)throw n}}function va(i,e,t=!1,a=!1){var n;const l=ze(i,e,t,a);if(typeof l!="function"&&(xe.error("parseFunction.error","not a function",i,(n=e==null?void 0:e.__self)!=null?n:e),a))throw new Error(`"${i.value}" not a function`);return l}function ye(i){return i&&i.type==="JSExpression"}function xt(i){return typeof i=="object"&&i&&i.type==="JSFunction"}function so(i){return ye(i)||xt(i)}function st(i){return so(i)?i.value:JSON.stringify(i)}let tt=null;const io=Jn({settings:{type:"form",validSuccess:!0,originResponse:!1,loading:!0,validate:i=>{var e,t;return((e=i.data)==null?void 0:e.code)===0||!!((t=i.data)!=null&&t.success)},failMessage:!0,showError:i=>{we.error({message:i||"未知错误"})},showLoading:()=>{tt&&tt.close(),tt=ol.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.05)"})},hideLoading:()=>{tt&&(tt.close(),tt=null)}}});function oo(i,e){const{jsonp:t,request:a}=e;if(i.method==="jsonp")return(l={})=>t(i.url,ae(L({},i.jsonpOptions),{query:l}));{const l=i.headers?ze(i.headers,{},!0):void 0,n={url:i.url,method:i.method,settings:ae(L({},i.settings),{headers:l})};return(r,o)=>a.send(wt(n,o||{},{data:r}))}}function ro(i,e){const{metaQuery:t}=e;if(!t)return;const{code:a,queryCode:l}=i;return(n,r)=>{if(!t){console.warn("adapter.metaQuery is not defined!");return}return t(a,l,n,r)}}function Xl(i=[],e=[],t){const a={};for(const l of i)a[l.id]=oo(l,t);for(const l of e)a[l.id]=ro(l,t);return a}function Yl(i=[]){ft.setup({timeout:"50-500"}),Aa(),i.forEach(e=>uo(e))}function uo(i){if(!i.mock)return;const{url:e,mockTemplate:t}=i;if(e&&t){const a=Un(`${e}(.*)`),l=qn(e,{decode:decodeURIComponent}),n=ze(t,{},!0);ft.mock(a,r=>{var c;const o=lt.parse(r.url)||{},u=r.body instanceof FormData?Hn(r.body):r.body,d=(c=l(r.url))==null?void 0:c.params;return Object.assign(r,{data:u,params:o,query:d}),ft.mock(n(r))})}}function Aa(){ft._mocked={}}let co=class{constructor(e){x(this,"__id",null);x(this,"__mode");x(this,"__instance",null);x(this,"__contextRefs",{});x(this,"__refs",{});x(this,"context",{});x(this,"state",{});x(this,"props",{});x(this,"$props",{});x(this,"$refs",{});x(this,"$el",null);x(this,"$emit",null);x(this,"$nextTick",null);x(this,"$parent",null);x(this,"$root",null);x(this,"$attrs",null);x(this,"$slots",null);x(this,"$watch",null);x(this,"$options",null);x(this,"$forceUpdate",null);x(this,"$components",{});x(this,"$libs",{});x(this,"$apis",{});x(this,"__transform",{});const{mode:t,dsl:a,attrs:l}=e;this.__mode=t,a&&(this.__id=a.id||null,this.__transform=a.transform||{}),l&&Object.assign(this,l)}setup(e,t=Wt){const a=t.getCurrentInstance();if(!a)return;this.__refs={},this.$refs={},this.context={},this.__contextRefs={},this.__instance=a.proxy;const l=a.appContext.config.globalProperties;Object.assign(this,l),Object.assign(this,e||{}),this.__proxy(),t.onMounted(()=>{this.__proxy()}),t.onUnmounted(()=>{this.__cleanup()}),t.onBeforeUpdate(()=>{this.__refs={},this.$refs={},this.__contextRefs={},this.context={}})}__proxy(){this.__instance&&Ya.forEach(e=>{var t;this[e]=(t=this.__instance)==null?void 0:t[e]})}__cleanup(){Ya.forEach(e=>{this[e]=null})}__parseFunction(e){var t;if(e)if(this.__mode===je.Runtime){const{id:a,type:l}=e,n=a&&(t=this.__transform[a])!=null?t:e.value;return va({type:l,value:n},this)}else return va(e,this)}__parseExpression(e){var t;if(e)if(this.__mode===je.Runtime){const{id:a,type:l}=e,n=a&&(t=this.__transform[a])!=null?t:e.value;return ze({type:l,value:n},this)}else return ze(e,this)}__ref(e=null,t){if(this.__mode!==je.VNode)return e&&e!==this.__id&&(this.__contextRefs[e]=this),a=>j(this,null,function*(){var n,r;yield gt(0);let l=(a==null?void 0:a.$vtjEl)||(a==null?void 0:a.$el)||((r=(n=a==null?void 0:a._)==null?void 0:n.vnode)==null?void 0:r.el)||a;if(!l){typeof t=="string"&&(delete this.$refs[t],e&&delete this.__refs[e]);return}if(l.nodeType===3&&l.nextSibling&&(l=l.nextSibling),l.__vtj__=e,je.Design===this.__mode&&(l.__context__=this),e&&(this.__refs[e]=a),typeof t=="function")t(a);else if(t){const o=this.$refs[t];if(o){const u=new Set([].concat(o,a));this.$refs[t]=Array.from(u)}else this.$refs[t]=a}return a})}__clone(e={}){const t=L(L({},this.context),e),a=ae(L({},t),{context:t});return a.context.__proto__=this.context,a.__proto__=this,a}};function ha(i){var m,p;const{Vue:e=Wt,mode:t=je.Runtime,components:a={},libs:l={},apis:n={},loader:r}=i,o=e.computed(()=>i.dsl),u={$components:a,$libs:l,$apis:n},d=new co({mode:t,dsl:o.value,attrs:u}),c=e.defineComponent(L({name:o.value.name,props:L({},po((m=o.value.props)!=null?m:[],d)),setup(g){var F,I,H,E;d.$props=g,d.props=g,o.value.id&&Kl(i.window||window,o.value.id,o.value.css||""),d.state=vo(e,(F=o.value.state)!=null?F:{},d);const v=ho(e,(I=o.value.computed)!=null?I:{},d),b=go((H=o.value.methods)!=null?H:{},d),w=fo(e,o.value.inject,d),_=bo(o.value.dataSources||{},d),C=L(L(L(L({},w),v),b),_);return d.setup(C,e),yo(e,(E=o.value.watch)!=null?E:[],d),{vtj:d}},emits:mo(o.value.emits),expose:["vtj"],render(){if(!o.value.nodes)return null;const g=o.value.nodes||[];return g.length===1?zt(g[0],d,e,r):g.map(v=>zt(v,d,e,r))}},wo((p=o.value.lifeCycles)!=null?p:{},d)));return{renderer:e.markRaw(c),context:d}}function mo(i=[]){return i.map(e=>De(e)?e:e.name)}function po(i=[],e){const t=a=>a?(Array.isArray(a)?a:[a]).map(l=>ql[l]):void 0;return i.map(a=>De(a)?{name:a}:{name:a.name,type:a.type,required:a.required,default:ye(a.default)?e.__parseExpression(a.default):a.default}).reduce((a,l)=>(a[l.name]={type:t(l.type),required:l.required,default:l.default},a),{})}function vo(i,e,t){return i.reactive(Object.keys(e||{}).reduce((a,l)=>{let n=e[l];return ye(n)?n=t.__parseExpression(n):xt(n)&&(n=t.__parseFunction(n)),a[l]=n,a},{}))}function ho(i,e,t){return Object.entries(e!=null?e:{}).reduce((a,[l,n])=>(a[l]=i.computed(t.__parseFunction(n)),a),{})}function go(i,e){return Object.entries(i!=null?i:{}).reduce((t,[a,l])=>(t[a]=e.__parseFunction(l),t),{})}function fo(i,e=[],t){return e.reduce((a,l)=>{var d;const{name:n,from:r}=l||{};l.default;const o=ye(r)?t.__parseExpression(r)||n:r!=null?r:n,u=ye(l.default)?t.__parseExpression(l.default):(d=l.default)!=null?d:null;return a[n]=i.inject(o,u),a},{})}function bo(i,e){return Object.keys(i).reduce((t,a)=>{const l=i[a],n=e.$apis[l.ref],r=xt(l.transform)?l.transform.value?e.__parseFunction(l.transform):void 0:l.transform;return t[a]=(...o)=>j(this,null,function*(){const u=yield n.apply(e,o);return r?r(u):u}),t},{})}function yo(i,e=[],t){e.forEach(a=>{i.watch(t.__parseExpression(a.source),t.__parseFunction(a.handler),{deep:a.deep,immediate:a.immediate})})}function wo(i,e){return Object.entries(i!=null?i:{}).reduce((t,[a,l])=>(t[a]=e.__parseFunction(l),t),{})}let Yt=[];const ko=i=>i;function Zl(t){return j(this,arguments,function*(i,e=window){const{urls:a=[],library:l}=i,n=a.filter(u=>ja(u));if(n.length===0||!l)return null;const r=a.filter(u=>Va(u)),o=yield lo(n,l,e).catch(u=>(console.warn("loadScriptUrl error",n,l,u),null));return o?{component:o,css:r}:null})}function ga(i){const{getDsl:e,getDslByUrl:t,options:a}=i;return a.window&&(Yt.forEach(l=>{delete a.window[l]}),Yt=[]),(l,n,r=Wt)=>!n||typeof n=="string"?l:n.type==="Schema"&&n.id?r.defineAsyncComponent(()=>j(this,null,function*(){const o=yield e(n.id);return o&&(o.name=l),o?ha(ae(L({},a),{Vue:r,dsl:o,mode:je.Runtime,loader:ga(i)})).renderer:null})):n.type==="UrlSchema"&&n.url?r.defineAsyncComponent(()=>j(this,null,function*(){const o=yield t(n.url);return o&&(o.name=l),o?ha(ae(L({},a),{Vue:r,dsl:o,mode:je.Runtime,loader:ga(i)})).renderer:null})):n.type==="Plugin"?(n.library&&Yt.push(n.library),r.defineAsyncComponent(()=>j(this,null,function*(){const o=yield Zl(n,a.window);return o?(Ql(o.css,a.window),o.component):(console.warn("getPlugin result is null",n),null)}))):l}function zt(i,e,t=Wt,a=ko){if(!i||!i.name||i.invisible)return null;const{id:l=null,directives:n=[]}=i,{vIf:r,vFor:o,vShow:u,vModels:d,vBind:c}=_o(n);if(r&&!So(r,e))return null;const m=p=>{var C,F,I,H;const g=p.$components,v=(()=>{var T,A;if(i.name==="component")return xo(p,(T=i.props)==null?void 0:T.is);if(i.name==="slot")return i.name;const E=a(i.name,i.from,t);return De(E)&&(A=g[E])!=null?A:E})(),b=Co(l,(C=i.props)!=null?C:{},p),w=Vo(t,(F=i.events)!=null?F:{},p);if(i.name==="slot")return jo(t,i,b,p,a);c&&Object.assign(b,p.__parseExpression(c.value)),u&&(b.style=Object.assign((I=b.style)!=null?I:{},Eo(u,p))),d.forEach(E=>{Object.assign(b,Po(t,E,p))});const _=Ro(t,(H=i.children)!=null?H:[],p,a,i);return t.createVNode(v,L(L({},b),w),_)};return o?Oo(o,m,e):m(e)}function _o(i=[]){const e=i.find(o=>et(o.name)==="vIf"),t=i.find(o=>et(o.name)==="vFor"),a=i.find(o=>et(o.name)==="vShow"),l=i.find(o=>et(o.name)==="vBind"),n=i.filter(o=>et(o.name)==="vModel"),r=i.filter(o=>!Zi.includes(et(o.name)));return{vIf:e,vFor:t,vShow:a,vModels:n,vBind:l,others:r}}function So(i,e){return!!e.__parseExpression(i.value)}function xo(i,e){return e?ye(e)?i.__parseExpression(e):e:"div"}function Co(i,e,t){const a=Object.keys(e||{}).reduce((l,n)=>{let r=e[n];return ye(r)?r=t.__parseExpression(r):xt(r)&&(r=t.__parseFunction(r)),l[n]=r,l},{});return a.ref=t.__ref(i,a.ref),a}function Vo(i,e,t){const a=["passive","capture","once"],l={capture:"Capture",once:"Once",passive:"OnceCapture"};return Object.keys(e||{}).reduce((n,r)=>{const o=e[r],u=en(o.modifiers),d=u.find(p=>a.includes(p)),c="on"+Xn(r)+(d&&l[d]||""),m=t.__parseFunction(o.handler);return m&&(n[c]=i.withModifiers(m,u)),n},{})}function en(i={},e=!1){const t=Object.keys(i);return e?t.map(a=>"."+a):t}function jo(i,e,t,a,l){var u;const{children:n}=e,r=Ao(e,a),o=(u=a.$slots)==null?void 0:u[r.name];return o?o(t):n?De(n)?i.createTextVNode(n):ye(n)?i.createTextVNode(Gl(a.__parseExpression(n))):Array.isArray(n)?n.map(d=>zt(d,a,i,l)):null:null}function Ao(i,e){const{props:t}=i,a=(t==null?void 0:t.name)||"default";return{name:ye(a)?e.__parseExpression(a):a,params:[]}}function Eo(i,e){return e.__parseExpression(i.value)?{}:{display:"none"}}function Po(i,e,t){var o;const a={type:"JSFunction",value:(o=e.value)!=null&&o.value?`(v) => {
        ${e.value.value} = v;
      }`:"(v) => {}"},l=t.__parseFunction(a),n=en(e.modifiers),r=ye(e.arg)?t.__parseExpression(e.arg):e.arg||"modelValue";return{[r]:t.__parseExpression(e.value),[`onUpdate:${r}`]:n.length&&l?i.withModifiers(l,n):l}}function Ro(i,e,t,a,l){if(!e)return null;if(De(e))return{default:()=>e};if(ye(e))return{default:()=>Gl(t.__parseExpression(e))};if(Array.isArray(e)&&e.length>0){const n=Do(e),r=o=>!o||!l?{}:l!=null&&l.id&&Object.keys(o).length?{[`scope_${l.id}`]:o}:{};return Object.entries(n).reduce((o,[u,{nodes:d,params:c}])=>(o[u]=m=>{const p=c.length?Yn(m!=null?m:{},c):r(m);return d.map(g=>zt(g,t.__clone(p),i,a))},o),{})}return null}function Do(i){const e={default:{params:[],nodes:[]}};for(const t of i){const a=Bo(t.slot),l=a.name;e[l]?(e[l].nodes.push(t),e[l].params=e[l].params.concat(a.params)):e[l]={nodes:[t],params:a.params}}return e}function Bo(i="default"){return De(i)?{name:i,params:[]}:L({params:[]},i)}function Oo(i,e,t){const{value:a,iterator:l}=i,{item:n="item",index:r="index"}=l||{};let o=t.__parseExpression(a)||[];return Number.isInteger(o)&&(o=new Array(o).fill(!0).map((u,d)=>d+1)),Array.isArray(o)?o.map((u,d)=>e(t.__clone({[n]:u,[r]:d}))):(console.warn("[vForRender]:",`${a==null?void 0:a.value} is not a Arrary`),[])}function Fo(i){return El()?(Pl(i),!0):!1}function Ea(i){return typeof i=="function"?i():s(i)}const tn=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const To=i=>i!=null,zo=()=>{};function Io(i){return Lt()}function No(...i){if(i.length!==1)return Ri(...i);const e=i[0];return typeof e=="function"?Al(Di(()=>({get:e,set:zo}))):S(e)}function Jo(i,e){Io()&&Bi(i,e)}function $o(i){var e;const t=Ea(i);return(e=t==null?void 0:t.$el)!=null?e:t}const Lo=tn?window:void 0,Wo=tn?window.document:void 0;function Mo(){const i=S(!1),e=Lt();return e&&_t(()=>{i.value=!0},e),i}function Uo(i){const e=Mo();return V(()=>(e.value,!!i()))}function qo(i,e,t={}){const p=t,{window:a=Lo}=p,l=Kt(p,["window"]);let n;const r=Uo(()=>a&&"MutationObserver"in a),o=()=>{n&&(n.disconnect(),n=void 0)},u=V(()=>{const g=Ea(i),v=(Array.isArray(g)?g:[g]).map($o).filter(To);return new Set(v)}),d=X(()=>u.value,g=>{o(),r.value&&g.size&&(n=new MutationObserver(e),g.forEach(v=>n.observe(v,l)))},{immediate:!0,flush:"post"}),c=()=>n==null?void 0:n.takeRecords(),m=()=>{o(),d()};return Fo(m),{isSupported:r,stop:m,takeRecords:c}}function Ho(i=null,e={}){var t,a,l;const{document:n=Wo,restoreOnUnmount:r=m=>m}=e,o=(t=n==null?void 0:n.title)!=null?t:"",u=No((a=i!=null?i:n==null?void 0:n.title)!=null?a:null),d=i&&typeof i=="function";function c(m){if(!("titleTemplate"in e))return m;const p=e.titleTemplate||"%s";return typeof p=="function"?p(m):Ea(p).replace(/%s/g,m)}return X(u,(m,p)=>{m!==p&&n&&(n.title=c(typeof m=="string"?m:""))},{immediate:!0}),e.observe&&!e.titleTemplate&&n&&!d&&qo((l=n.head)==null?void 0:l.querySelector("title"),()=>{n&&n.title!==u.value&&(u.value=c(n.title))},{childList:!0}),Jo(()=>{if(r){const m=r(o,u.value||"");m!=null&&n&&(n.title=m)}}),u}const el=D({name:"VtjPageContainer",setup(){return j(this,null,function*(){const i=nn(),e=zl(),t=e.params.id,a=t?i.getPage(t):i.getHomepage(),l=a?yield i.getRenderComponent(a.id):null;return a&&Ho(a.title||"VTJ"),{provider:i,component:l,file:a,query:e.query}})},render(){return this.component?$e(this.component,this.query):$e("div","页面不存在")}}),Go=D({name:"VtjStartupContainer",render(){return $e(Gn)}}),an=Symbol("Provider");let ln=class extends Ca{constructor(t){super();x(this,"mode");x(this,"globals",{});x(this,"modules",{});x(this,"adapter",{request:io,jsonp:Wn});x(this,"apis",{});x(this,"dependencies",{});x(this,"materials",{});x(this,"library",{});x(this,"service");x(this,"project",null);x(this,"components",{});x(this,"nodeEnv","development");x(this,"router",null);x(this,"materialPath","./");x(this,"urlDslCaches",{});this.options=t;const{service:a,mode:l=je.Raw,dependencies:n,materials:r,project:o={},adapter:u={},globals:d={},modules:c={},router:m=null,materialPath:p="./",nodeEnv:g="development"}=t;this.mode=l,this.modules=c,this.service=a,this.router=m,this.materialPath=p,this.nodeEnv=g,n&&(this.dependencies=n),r&&(this.materials=r),Object.assign(this.globals,d),Object.assign(this.adapter,u),l!==je.Design&&this.load(o)}load(t){return j(this,null,function*(){var o;const a=this.modules[`.vtj/projects/${t.id}.json`];if(this.project=a?yield a():yield this.service.init(t),!this.project)throw new Error("project is null");const{apis:l=[],meta:n=[]}=this.project,r=window;r.CKEDITOR_VERSION=void 0,this.nodeEnv!=="production"&&(yield this.loadAssets(r)),this.apis=Xl(l,n,this.adapter),Aa(),(o=this.project.config)!=null&&o.mock&&Yl(l),this.initRouter(),this.triggerReady()})}loadAssets(t){return j(this,null,function*(){const{dependencies:a=[]}=this.project,{dependencies:l,library:n,components:r,materialPath:o}=this,{libraryExports:u,libraryMap:d,materials:c,materialExports:m,materialMapLibrary:p}=Hl(a,o);for(const v of u){const b=l[v],w=t[v];if(w)n[v]=w;else if(b)t[v]=n[v]=yield b();else{const _=d[v]||[];for(const C of _)Va(C)&&(yield ao(v,lt.append(C,{v:pt}))),ja(C)&&(yield Ha(lt.append(C,{v:pt})));n[v]=t[v]}}for(const v of c)yield Ha(lt.append(v,{v:pt}));const g=this.materials||{};for(const v of m){const b=t[p[v]],w=Qi[v];if(w)b&&w.forEach(_=>{r[_]=b[_]});else{const _=g[v]?(yield g[v]()).default:t[v];_&&b&&(_.components||[]).forEach(C=>{r[C.name]=pa(C,b)})}}})}initRouter(){const{router:t,project:a}=this;t&&(t.addRoute({path:"/page/:id",name:"VtjPage",component:el}),t.addRoute({path:"/",name:"VtjHomepage",component:a!=null&&a.homepage?el:Go}))}install(t){const a=t.config.globalProperties.installed||{};for(const[l,n]of Object.entries(this.library))!a[l]&&no(n)&&(t.use(n),a[l]=!0);this.options.install&&t.use(this.options.install),t.provide(an,this),t.config.globalProperties.installed=a,this.nodeEnv==="development"&&(t.config.errorHandler=(l,n,r)=>{const o=n==null?void 0:n.$options.name,u=(l==null?void 0:l.message)||(l==null?void 0:l.msg)||"未知错误",d=`[ ${o} ] ${u}`;console.error("[VTJ Error]:",{err:l,instance:n,info:r},l==null?void 0:l.stack),we.error({title:"运行时错误：请在控制台查看详情",message:d})})}getFile(t){const{blocks:a=[]}=this.project||{};return this.getPage(t)||a.find(l=>l.id===t)||null}getPage(t){const{pages:a=[]}=this.project||{},l=(n,r=[])=>{for(const o of r){if(o.id===n)return o;if(o.children&&o.children.length){const u=l(n,o.children);if(u)return u}}};return l(t,a)||null}getHomepage(){const{homepage:t}=this.project||{};return t?this.getPage(t):null}getDsl(t){return j(this,null,function*(){const a=this.modules[`.vtj/files/${t}.json`];return a?yield a():this.service.getFile(t).catch(()=>null)})}getDslByUrl(t){return j(this,null,function*(){return this.urlDslCaches[t]||(this.urlDslCaches[t]=this.adapter.request.send({url:t,method:"get",settings:{validSuccess:!1,originResponse:!0}}).then(l=>l.data).catch(()=>null))})}createDslRenderer(t,a={}){const{library:l,components:n,mode:r,apis:o}=this,u=L({mode:r,Vue:l.Vue,components:n,libs:l,apis:o,window},a),d=ga({getDsl:c=>j(this,null,function*(){return(yield this.getDsl(c))||null}),getDslByUrl:c=>j(this,null,function*(){return(yield this.getDslByUrl(c))||null}),options:u});return ha(ae(L({},u),{dsl:t,loader:d}))}getRenderComponent(t){return j(this,null,function*(){var o;const a=this.getFile(t);if(!a)return xe.warn(`Can not find file: ${t}`),null;const l=`.vtj/vue/${t}.vue`,n=this.modules[l];if(n)return(o=yield n())==null?void 0:o.default;const r=yield this.getDsl(a.id);return r?this.createDslRenderer(r).renderer:(xe.warn(`Can not find dsl: ${t}`),null)})}defineUrlSchemaComponent(t,a){return sa(()=>j(this,null,function*(){const l=yield this.getDslByUrl(t);return l?(l.name=a||l.name,this.createDslRenderer(l).renderer):null}))}definePluginComponent(t){return sa(()=>j(this,null,function*(){const a=yield Zl(t,window);return a?(Ql(a.css),a.component):null}))}};function Dm(i){const e=new ln(i);return{provider:e,onReady:t=>e.ready(t)}}function nn(i={}){const e=$t(an);if(!e)throw new Error("Can not find provider");if(e.nodeEnv==="development"){const{id:t,version:a}=i;t&&a&&j(this,null,function*(){const l=yield e.getDsl(t);(l==null?void 0:l.__VERSION__)!==a&&we.warning({title:l==null?void 0:l.name,message:"当前组件源码版本与运行时版本不一致，请重新发布组件"})})}return e}const Pa=new $n({settings:{type:"json",validSuccess:!0,originResponse:!1,failMessage:!0,validate:i=>{var e;return((e=i.data)==null?void 0:e.code)===0},showError:i=>{we.error({message:i||"未知错误"})}}}),Ko=(i="/vtj/local/repository/${type}.json")=>(e,t)=>Pa.send({url:i,method:"post",query:{type:e},data:{type:e,data:t}}),Qo=(i="/vtj/local/repository/uploader.json")=>(e,t)=>j(void 0,null,function*(){return yield Pa.send({url:i,method:"post",data:{files:e,projectId:t},settings:{type:"data"}}).then(a=>a&&a[0]?a[0]:null).catch(()=>null)});class Xo{constructor(){x(this,"api");x(this,"pluginCaches",{});x(this,"uploader");this.api=Ko(),this.uploader=Qo()}getExtension(){return j(this,null,function*(){console.log("BaseService.getExtension")})}init(e){return j(this,null,function*(){return console.log("BaseService.init",e),{}})}saveProject(e){return j(this,null,function*(){return!!(yield this.api("saveProject",e).catch(()=>!1))})}saveMaterials(e,t){return j(this,null,function*(){return console.log("BaseService.saveMaterials",e,t),!1})}saveFile(e){return j(this,null,function*(){return console.log("BaseService.saveFile",e),!1})}getFile(e){return j(this,null,function*(){return console.log("BaseService.getFile",e),{}})}removeFile(e){return j(this,null,function*(){return console.log("BaseService.removeFile",e),!1})}saveHistory(e){return j(this,null,function*(){return console.log("BaseService.saveHistory",e),!1})}removeHistory(e){return j(this,null,function*(){return console.log("BaseService.removeHistory",e),!1})}getHistory(e){return j(this,null,function*(){return console.log("BaseService.getHistory",e),{}})}getHistoryItem(e,t){return j(this,null,function*(){return console.log("BaseService.getHistoryItem",e,t),{}})}saveHistoryItem(e,t){return j(this,null,function*(){return console.log("BaseService.saveHistoryItem",e,t),!1})}removeHistoryItem(e,t){return j(this,null,function*(){return console.log("BaseService.removeHistoryItem",e,t),!1})}publish(e){return j(this,null,function*(){return!!(yield this.api("publish",e).catch(()=>!1))})}publishFile(e,t){return j(this,null,function*(){return!!(yield this.api("publishFile",{project:e,file:t}).catch(()=>!1))})}genVueContent(e,t){return j(this,null,function*(){return yield this.api("genVueContent",{project:e,dsl:t}).catch(()=>"")})}createRawPage(e){return j(this,null,function*(){return yield this.api("createRawPage",e).catch(()=>"")})}removeRawPage(e){return j(this,null,function*(){return yield this.api("removeRawPage",e).catch(()=>"")})}uploadStaticFile(e,t){return j(this,null,function*(){return yield this.uploader(e,t).catch(()=>null)})}getStaticFiles(e){return j(this,null,function*(){return yield this.api("getStaticFiles",e).catch(()=>[])})}removeStaticFile(e,t){return j(this,null,function*(){return yield this.api("removeStaticFile",{name:e,projectId:t}).catch(()=>"")})}clearStaticFiles(e){return j(this,null,function*(){return yield this.api("clearStaticFiles",e).catch(()=>"")})}getPluginMaterial(e){return j(this,null,function*(){const{urls:t=[]}=e,a=t.filter(n=>eo(n))[0];return a?this.pluginCaches[a]||(this.pluginCaches[a]=Pa.send({url:a,method:"get",settings:{validSuccess:!1,originResponse:!0}}).then(n=>n.data).catch(()=>null)):null})}}const _e=new Ln({type:"local",expired:0,prefix:"__VTJ_"});class Yo extends Xo{init(e){const t=new ma(e),a=_e.get(`project_${t.id}`),l=Object.assign(t.toDsl(),a||{});return _e.save(`project_${t.id}`,l),Promise.resolve(l)}saveProject(e){const t=new ma(e);return _e.save(`project_${t.id}`,t.toDsl()),Promise.resolve(!0)}saveMaterials(e,t){return _e.save(`materials_${e.id}`,Kn(t)),Promise.resolve(!0)}saveFile(e){return _e.save(`file_${e.id}`,e),Promise.resolve(!0)}getFile(e){const t=_e.get(`file_${e}`);return t?Promise.resolve(t):Promise.reject(null)}removeFile(e){return _e.remove(`file_${e}`),Promise.resolve(!0)}saveHistory(e){return _e.save(`history_${e.id}`,e),Promise.resolve(!0)}removeHistory(e){const t=_e.get(`history_${e}`);if(t){const a=(t.items||[]).map(l=>l.id);this.removeHistoryItem(e,a),_e.remove(`history_${e}`)}return Promise.resolve(!0)}getHistory(e){const t=_e.get(`history_${e}`),a=new Ml(t||{id:e});return Promise.resolve(a.toDsl())}getHistoryItem(e,t){const a=_e.get(`history_${e}_${t}`);return Promise.resolve(a)}saveHistoryItem(e,t){return _e.save(`history_${e}_${t.id}`,t),Promise.resolve(!0)}removeHistoryItem(e,t){return t.forEach(a=>{_e.remove(`history_${e}_${a}`)}),Promise.resolve(!0)}}function sn(i=[]){return i.map(e=>{const{id:t,title:a,icon:l,children:n,hidden:r}=e;return{id:t,title:a,icon:l,hidden:r,url:`/page/${t}`,children:n&&n.length?sn(n):void 0}})}function Bm(){const i=nn(),e=zl(),t=S(!1),a=i.project;jl(()=>{const{name:r,params:o,meta:u}=e;if(r==="VtjPage"){const d=i.getPage(o.id);t.value=!(d!=null&&d.mask)}else if(r==="VtjHomepage"){const d=i.getHomepage();t.value=!(d!=null&&d.mask)}else t.value=!u.mask});const l=sn(a==null?void 0:a.pages),n=a==null?void 0:a.config;return{disabled:t,logo:n==null?void 0:n.logo,themeSwitchable:n==null?void 0:n.themeSwitchable,title:(n==null?void 0:n.title)||(a==null?void 0:a.description)||(a==null?void 0:a.name)||"VTJ App",menus:l}}const Om="/",Fm="LCDP",Tm="低代码开发平台";/**!
 * Copyright (c) 2024, VTJ.PRO All rights reserved.
 * @name @vtj/designer 
 * @author CHC chenhuachun1549@dingtalk.com 
 * @version 0.8.96
 * @license <a href="https://vtj.pro/license.html">MIT License</a>
 */const Zo="0.8.96",tl={width:390,height:844},al={width:1180,height:820},Fe=/^[A-Za-z_$][\:\w_-]*$/,er=["click","dblclick","mouseenter","mouseleave","mousedown","mouseup","mouseover","contextmenu"],tr=["keydown","keyup","keypress"],ar=["GET","POST","PUT","PATCH","DELETE","JSONP"],lr=["stop","prevent","capture","self","once","passive"];var Ee=(i=>(i.Block="block",i.Node="node",i))(Ee||{});function on(){const i=ke(),e=V(()=>{var l,n;return(n=(l=i.project.value)==null?void 0:l.dependencies)!=null?n:[]}),t=V(()=>{var l,n;return(n=(l=i.project.value)==null?void 0:l.apis)!=null?n:[]}),a=V(()=>{var l,n;return(n=(l=i.project.value)==null?void 0:l.meta)!=null?n:[]});return{engine:i,dependencies:e,apis:t,meta:a}}function Ke(i,e){const t=V(()=>gn.getWidgets(s(i),s(e)).filter(l=>!l.invisible)),a=S();return{widgets:t,widgetsRef:a}}function rn(){const i=ke();return{span:V(()=>{var a;const e=((a=i.skeleton)==null?void 0:a.skeletonRef.leftWidth)||400,t=Math.min(Math.floor((e-50)/120),24);return Math.floor(24/t)}),engine:i}}function nr(){const i=ke(),e=V(()=>{var t,a;return(a=(t=i.project.value)==null?void 0:t.blocks)!=null?a:[]});return{engine:i,blocks:e}}const sr=(i=[])=>i.map(e=>e.name);function ir(){var m;const i=ke(),{components:e,groups:t,componentMap:a}=i.assets,l=St({}),n=V(()=>{const p={};return t.value&&t.value.forEach(g=>{p[g.name]=g}),p}),r=V(()=>t.value?t.value.map(p=>{var g;return{label:`${p.label} (${p.count})`,name:p.name,disabled:!((g=p.children)!=null&&g.length)}}):[]),o=S((m=r.value[0])==null?void 0:m.name),u=S(""),d=V(()=>n.value[o.value]);jl(()=>{const p=r.value.reduce((g,v)=>(g[v.name]=sr(n.value[v.name].children),g),{});Object.assign(l,p)}),X(r,p=>{p.length&&!o.value&&(o.value=p[0].name)},{immediate:!0});const c=V(()=>{const p=u.value.toLowerCase();return!p||!e?[]:e.filter(g=>{var v;return g.name.toLowerCase().includes(p)||((v=g.label)==null?void 0:v.toLowerCase().includes(p))})});return{components:e,groups:t,componentMap:a,groupMap:n,tabs:r,model:l,currentTab:o,currentGroup:d,searchKey:u,searchResult:c}}function fe(){const i=ke(),e=V(()=>i.current.value),t=V(()=>{var l,n;return(n=(l=i.simulator.renderer)==null?void 0:l.context)!=null?n:null}),a=V(()=>i.isEmptyCurrent.value);return{engine:i,current:e,isEmpty:a,context:t}}function or(i,e,t,a,l){const n=ke();n.simulator.init(i,e,t,a,l);const r=V(()=>n.simulator.designer.value),o=V(()=>{var c;return Zt("hover",(c=r.value)==null?void 0:c.hover.value)}),u=V(()=>{var c;return Zt("dropping",(c=r.value)==null?void 0:c.dropping.value)}),d=V(()=>{var c;return Zt("selected",(c=r.value)==null?void 0:c.selected.value)});return X(n.changed,()=>{var c;(c=r.value)==null||c.updateRect()}),{designer:r,dropping:u,hover:o,selected:d}}function rr(i,e=!0){const{top:t,height:a,width:l,left:n}=i||{};if(a>100&&l>200)return"inner";let r,o;return o=t>30?"top":"bottom",r=e||n<300&&l<300?"left":"right",[r,o].join("-")}function ur(i){const{rect:e,type:t}=i,{left:a,width:l,top:n,height:r}=e,o={left:a,width:l,top:n,height:r};switch(t){case"left":o.left=0,o.width=0;break;case"right":o.left=o.left+o.width-4,o.width=0;break;case"bottom":o.top=o.top+o.height-4,o.height=0;break;case"top":o.height=0;break}return o}function Zt(i,e){if(!e)return null;const{left:t,top:a,width:l,height:n}=i==="dropping"?ur(e):e.rect,r={left:`${t}px`,top:`${a}px`,width:`${l}px`,height:`${n}px`,visibility:l||n?"visible":"hidden"};return ae(L({},e),{style:r,position:rr(e.rect,i!=="selected")})}function Ie(){const i=ke(),e=V(()=>i.simulator.designer.value),t=V(()=>{var l;return(l=e.value)==null?void 0:l.selected.value}),a=V(()=>{var l;return ue((l=t.value)==null?void 0:l.model)});return{engine:i,designer:e,selected:t,isSelectBlock:a}}function dr(i,e){const t=S(""),{selected:a,isSelectBlock:l}=Ie(),n=V(()=>{var u;return(u=a.value)==null?void 0:u.model.id}),r=V(()=>{const u=ra(i),d=ra(e),c=[];if(!u)return c;const m=d==null?void 0:d.__contextRefs[n.value||""],p=d===m||l.value?[]:Object.keys((m==null?void 0:m.context)||{}).filter(I=>!["context","ref"].includes(I)).map(I=>`this.context.${I}`);p.length&&c.push({title:"上下文",items:p});const g=u.inject.map(I=>`this.${I.name}`);g.length&&c.push({title:"注入",items:g});const v=u.props.map(I=>typeof I=="string"?`this.props.${I}`:`this.props.${I.name}`);v.length&&c.push({title:"属性",items:v});const b=Object.keys(u.state).map(I=>`this.state.${I}`);b.length&&c.push({title:"状态",items:b});const w=Object.keys(u.computed).map(I=>`this.${I}.value`);w.length&&c.push({title:"计算属性",items:w});const _=Object.keys(u.methods).map(I=>`this.${I}`);_.length&&c.push({title:"方法",items:_});const C=Object.keys(u.dataSources).map(I=>`this.${I}`);C.length&&c.push({title:"数据源",items:C});const F=Object.keys((d==null?void 0:d.$refs)||{}).map(I=>`this.$refs.${I}`);return F.length&&c.push({title:"refs",items:F}),c}),o=V(()=>{if(!t.value)return r.value;const u=t.value.toLowerCase(),d=[];return r.value.forEach(c=>{const m=c.items.filter(p=>p.toLowerCase().includes(u));m.length&&d.push({title:c.title,items:m})}),d});return{keyword:t,options:r,searchResult:o}}const At=[{name:"StringSetter",label:"文本"},{name:"ExpressionSetter",label:"表达式"}];function cr(i){const e=ke(),t=V(()=>{var d;const u=((d=i.value)==null?void 0:d.model)||null;return ue(u)?null:u}),a=S();X(t,u=>j(this,null,function*(){u!=null&&u.from?a.value=(yield e.assets.getBlockMaterial(u.from))||void 0:a.value=void 0}),{immediate:!0});const l=V(()=>t.value?[{name:"key",setters:At,value:t.value.getPropValue("key")},{name:"ref",setters:At,value:t.value.getPropValue("ref")},{name:"class",label:"class",setters:At,value:t.value.getPropValue("class")},{name:"children",label:"文本",title:"如设置组件文本，将清空子组件",setters:At,value:Array.isArray(t.value.children)?"":t.value.children}]:[]),n=V(()=>{if(!t.value)return[];const u=a.value||e.assets.componentMap.get(t.value.name);return u?(u.props||[]).map(d=>{var c,m;return ae(L({},d),{value:(m=(c=t.value)==null?void 0:c.getPropValue(d.name))!=null?m:d.defaultValue})}):[]}),r=u=>l.value.some(d=>d.name===u)||n.value.some(d=>d.name===u)||u==="style",o=V(()=>t.value?Object.keys(t.value.props).filter(u=>!r(u)).map(u=>{var d;return{name:u,setters:"InputSetter",value:(d=t.value)==null?void 0:d.getPropValue(u)}}):[]);return{commonProps:l,componentProps:n,customProps:o,node:t,change:(u,d)=>{t.value&&(u==="children"?t.value.setChildren(d):t.value.setProp(u,d))},addCustom:u=>{var d;u&&((d=t.value)==null||d.setProp(u,""))},removeCustom:u=>{var d;(d=t.value)==null||d.removeProp(u)},isExist:r}}function de(i,e="提示"){return we.warning({title:e,message:i})}function it(i){return j(this,null,function*(){return yield wa.confirm(i,"提示",{type:"warning"}).catch(()=>!1)})}function Se(i,e="success"){return It({message:i,type:e})}function he(i,e,t=!1){let a=!0;try{i.type==="JSExpression"?ze(i,e,t,!0):va(i,e,t,!0)}catch(l){a=!1,we.error({title:"代码错误",message:l.message})}return a}function mr(i){return Object.keys(i).concat(Object.getOwnPropertyNames(Object.getPrototypeOf(i))).filter(e=>!["constructor"].includes(e))}function un(){const i=ke(),e=V(()=>i.simulator.designer.value),t=V(()=>i.current.value?i.history.value:null),a=V(()=>{var d;return((d=t.value)==null?void 0:d.items.length)||0}),l=()=>{var d,c;(d=e.value)==null||d.cleanHelper(),(c=t.value)==null||c.forward()},n=()=>{var d,c;(d=t.value)==null||d.backward(),(c=e.value)==null||c.cleanHelper()},r=d=>{var c,m;(c=e.value)==null||c.cleanHelper(),(m=t.value)==null||m.load(d),Se("已载入历史记录","success")},o=V(()=>{var d;return a.value<=1?!0:(((d=t.value)==null?void 0:d.index)||-1)<=0}),u=V(()=>{var d;return a.value<=1?!0:(((d=t.value)==null?void 0:d.index)||-1)>=a.value-1});return{engine:i,history:t,total:a,forward:l,backward:n,load:r,forwardDisabled:o,backwardDisabled:u}}function Ze(){const i=ke(),e=V(()=>i.project.value);return{engine:i,project:e}}function pr(i){const e=ke(),t=V(()=>{var u;const o=((u=i.value)==null?void 0:u.model)||null;return!o||ue(o)?null:o}),a=S();X(t,o=>j(this,null,function*(){o!=null&&o.from?a.value=(yield e.assets.getBlockMaterial(o.from))||void 0:a.value=void 0}),{immediate:!0});const l=V(()=>{var u;if(ue(t.value))return[];const o=((u=t.value)==null?void 0:u.events)||{};return er.map(d=>({name:d,event:o[d]}))}),n=V(()=>{var u;if(ue(t.value))return[];const o=((u=t.value)==null?void 0:u.events)||{};return tr.map(d=>({name:d,event:o[d]}))}),r=V(()=>{var u,d;if(!t.value||ue(t.value))return[];const o=t.value.events||{};return(((u=a.value)==null?void 0:u.events)||((d=e.assets.componentMap.get(t.value.name))==null?void 0:d.events)||[]).map(c=>{const m=typeof c=="string"?c:c.name;return{name:m,event:o[m]}})});return{mouseEventList:l,keyboardEventList:n,componentEventList:r}}const vr=(i,e)=>new Ue({name:i,value:void 0,iterator:e}),hr=(i="modelValue")=>new Ue({name:"vModel",value:void 0,arg:i});function gr(i){if(!i)return[];const{props:e=[],events:t=[]}=i;if(e.length&&t.length){const a=t.filter(l=>(typeof l=="string"?l:l.name).startsWith("update:")).map(l=>l=typeof l=="string"?l:l.name);return a.length?e.filter(l=>a.some(n=>n.endsWith(":"+l.name))):[]}return[]}function fr(i){const e=ke(),t=V(()=>{var p;const m=((p=i.value)==null?void 0:p.model)||null;return ue(m)?null:m}),a=m=>V(()=>t.value&&(t.value.directives||[]).find(p=>p.name===m)||vr(m)),l=()=>V(()=>{if(!t.value)return[];const m=e.assets.componentMap.get(t.value.name||"");return(m?gr(m):[]).map(p=>{var g;return(((g=t.value)==null?void 0:g.directives)||[]).find(v=>v.name==="vModel"&&v.arg==p.name)||hr(p.name)})}),n=a("vIf"),r=a("vShow"),o=a("vBind"),u=a("vFor"),d=l(),c={vIf:n,vShow:r,vBind:o,vFor:u};return{engine:e,node:t,vIf:n,vShow:r,vBind:o,vFor:u,vModels:d,onValueChange:(m,p)=>{const g=c[m];t.value&&(p?(g.value.value=p,t.value.setDirective(g.value)):(g.value.value=void 0,t.value.removeDirective(g.value)))},onForChange:(m,p)=>{if(t.value){if(m==="value"){p?(u.value.value=p,t.value.setDirective(u.value)):t.value.removeDirective(u.value);return}(m==="item"||m==="index")&&(u.value.iterator=ae(L({},u.value.iterator),{[m]:p||void 0}),t.value.setDirective(u.value))}},onModelChange:(m,p)=>{if(!t.value)return;const g=parseInt(m),v=d.value[g];v&&(p?(v.value=p,t.value.setDirective(v)):(v.value=void 0,t.value.removeDirective(v)))}}}function br(){const{engine:i,project:e}=Ze(),t=V(()=>{var l;return((l=e.value)==null?void 0:l.apis)||[]}),a=V(()=>{var l;return((l=e.value)==null?void 0:l.meta)||[]});return{engine:i,project:e,apis:t,meta:a}}const yr="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1711803009570'%20class='icon'%20viewBox='0%200%201280%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='1500'%20width='320'%20height='256'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cpath%20d='M557.85%201023l-122-35.4c-12.8-3.6-20-17-16.4-29.8L692.45%2017.4c3.6-12.8%2017-20%2029.8-16.4l122%2035.4c12.8%203.6%2020%2017%2016.4%2029.8L587.65%201006.6c-3.8%2012.8-17%2020.2-29.8%2016.4z%20m-228-224.4l87-92.8c9.2-9.8%208.6-25.4-1.6-34.4L234.05%20512l181.2-159.4c10.2-9%2011-24.6%201.6-34.4l-87-92.8c-9-9.6-24.2-10.2-34-1L7.65%20494.4c-10.2%209.4-10.2%2025.6%200%2035l288.2%20270.2c9.8%209.2%2025%208.8%2034-1z%20m654.4%201.2l288.2-270.2c10.2-9.4%2010.2-25.6%200-35L984.25%20224.2c-9.6-9-24.8-8.6-34%201L863.25%20318c-9.2%209.8-8.6%2025.4%201.6%2034.4L1046.05%20512l-181.2%20159.4c-10.2%209-11%2024.6-1.6%2034.4l87%2092.8c9%209.8%2024.2%2010.2%2034%201.2z'%20fill='%230157fe'%20p-id='1501'%3e%3c/path%3e%3c/svg%3e",wr=["title","src"],kr={key:1},_r=D({name:"LogoWidget",inheritAttrs:!1,__name:"index",props:{icon:{},text:{default:"VTJ"},link:{}},setup(i){const{engine:e}=fe(),t=i,a=V(()=>{var n,r;return t.icon||((r=(n=e.project.value)==null?void 0:n.config)==null?void 0:r.logo)||yr}),l=()=>{t.link&&(location.href=t.link)};return(n,r)=>(h(),B("div",{class:"v-logo-widget",onClick:l},[a.value?(h(),B("img",{key:0,title:t.text,class:"v-logo-widget__icon",src:a.value},null,8,wr)):(h(),B("span",kr,U(t.text),1))]))}}),Sr={class:"v-empty-widget"},xr=D({name:"EmptyWidget",__name:"index",setup(i){return(e,t)=>(h(),B("div",Sr,"EmptyWidget"))}}),Cr={class:"v-switcher-widget"},Vr={key:1},jr=D({name:"SwitcherWidget",inheritAttrs:!1,__name:"index",emits:["click"],setup(i,{emit:e}){const t=e,{engine:a}=fe(),l=V(()=>{var o,u,d;return((u=(o=a.project.value)==null?void 0:o.config)==null?void 0:u.title)||((d=a.project.value)==null?void 0:d.name)}),n=V(()=>{var o,u;return(u=(o=a.project.value)==null?void 0:o.currentFile)==null?void 0:u.title}),r=()=>{t("click",a.project.value)};return(o,u)=>(h(),B("div",Cr,[f(s(me),{size:"small",round:"",onClick:r},{default:y(()=>[f(s(os),{class:"v-switcher-widget__back"}),P("span",null,U(l.value),1),n.value?(h(),k(s(ba),{key:0,direction:"vertical"})):O("",!0),n.value?(h(),B("span",Vr,U(n.value),1)):O("",!0)]),_:1})]))}}),Ar={class:"v-toolbar-widget"},Er=D({name:"ToolbarWidget",inheritAttrs:!1,__name:"index",props:{preview:{type:Boolean}},setup(i,{expose:e}){const t=i,{forward:a,backward:l,forwardDisabled:n,backwardDisabled:r}=un(),o=S("pc");return e({mode:o}),(u,d)=>(h(),B("div",Ar,[f(s(rl),{size:"small",modelValue:o.value,"onUpdate:modelValue":d[0]||(d[0]=c=>o.value=c)},{default:y(()=>[f(s(Et),{label:"pc",value:"pc"},{default:y(()=>[f(s(rs))]),_:1}),f(s(Et),{label:"mobile",value:"mobile"},{default:y(()=>[f(s(us))]),_:1}),f(s(Et),{label:"pad",value:"pad"},{default:y(()=>[f(s(ds))]),_:1})]),_:1},8,["modelValue"]),O("",!0),f(s(kn),null,{default:y(()=>[f(s(me),{type:"default",size:"small",onClick:s(l),disabled:s(r)||!!t.preview},{default:y(()=>[f(s(cs))]),_:1},8,["onClick","disabled"]),f(s(me),{type:"default",size:"small",onClick:s(a),disabled:s(n)||!!t.preview},{default:y(()=>[f(s(ms))]),_:1},8,["onClick","disabled"])]),_:1})]))}}),Pr={class:"v-actions-widget"},Rr=P("span",null,"发布",-1),Dr=D({name:"ActionsWidget",inheritAttrs:!1,__name:"index",props:{coder:{type:Boolean,default:!0}},setup(i){const{engine:e,designer:t}=Ie(),a=S(!1),l=()=>{var d,c,m;e.current.value?(a.value?(c=(d=e.skeleton)==null?void 0:d.getWidget("Previewer"))==null||c.widgetRef.refresh():((m=t.value)==null||m.setSelected(null),e.simulator.refresh()),Se("刷新完成","success")):Se("请先打开文件","warning")},n=()=>j(this,null,function*(){var d,c;e.current.value?(a.value&&((d=e.skeleton)==null||d.closePreview(),a.value=!1,yield gt(1e3)),(c=t.value)==null||c.setSelected(e.current.value)):Se("请先打开文件","warning")}),r=()=>{var d,c;if(e.project.value)if(e.current.value){if(a.value){(d=e.skeleton)==null||d.closePreview(),a.value=!1;return}(c=e.skeleton)==null||c.openPreview(""),a.value=!0}else Se("请先打开文件","warning")},o=()=>{const d=e.project.value;d&&(d.currentFile?d.publish(d.currentFile):Se("请先打开文件","warning"))},u=d=>{const c=e.project.value;c&&(d==="current"?o():c.publish())};return(d,c)=>(h(),B("div",Pr,[O("",!0),O("",!0),f(s(me),{onClick:r,type:a.value?"warning":"default",size:"small",title:"预览"},{default:y(()=>[f(s(ps))]),_:1},8,["type"]),f(s(me),{onClick:l,type:"default",size:"small",title:"刷新"},{default:y(()=>[f(s(vs))]),_:1}),f(s(me),{type:"default",size:"small",title:"页面设置",onClick:n},{default:y(()=>[f(s(gl))]),_:1}),f(s(ba),{direction:"vertical"}),f(s(dl),{"split-button":"",type:"primary",size:"small",onClick:o,onCommand:u},{dropdown:y(()=>[f(s(ul),null,{default:y(()=>[f(s(ta),{command:"current"},{default:y(()=>[ee("发布页面")]),_:1}),f(s(ta),{command:"project"},{default:y(()=>[ee("整站发布")]),_:1})]),_:1})]),default:y(()=>[Rr]),_:1})]))}}),Br={class:"v-icon-setter"},Or={class:"v-icon-setter__content"},Fr={class:"v-icon-setter__list"},dn=D({name:"IconSetter",__name:"icon",props:{modelValue:{default:""},size:{default:"small"}},emits:["change","update:modelValue"],setup(i,{emit:e}){const t=i,a=e,l=S(!1),n=S(t.modelValue),r=S(""),o=V(()=>na[t.modelValue]||t.modelValue),u=V(()=>{const g=Object.entries(na);return r.value?g.filter(v=>v[0].toLowerCase().includes(r.value)):g}),d=g=>{n.value=g},c=()=>{a("change",n.value),a("update:modelValue",n.value),l.value=!1},m=()=>{n.value="",a("change",""),a("update:modelValue",""),l.value=!1},p=()=>{l.value=!0};return(g,v)=>(h(),B("div",Br,[f(s(Oe),{size:t.size,readonly:"",placeholder:"请选择图标","model-value":t.modelValue,"suffix-icon":s(Il),onFocus:p},{prepend:y(()=>[f(s(Je),{icon:o.value},null,8,["icon"])]),_:1},8,["size","model-value","suffix-icon"]),l.value?(h(),k(s(Ye),{key:0,title:"图标选择器",width:"1000px",height:"600px",cancel:"",submit:"",clear:"",modelValue:l.value,"onUpdate:modelValue":v[1]||(v[1]=b=>l.value=b),onSubmit:c},{extra:y(()=>[f(s(me),{size:"default",type:"warning",onClick:m},{default:y(()=>[ee(" 清除绑定 ")]),_:1})]),default:y(()=>[P("div",Or,[f(s(Oe),{size:t.size,"prefix-icon":s(Sa),clearable:"",modelValue:r.value,"onUpdate:modelValue":v[0]||(v[0]=b=>r.value=b),placeholder:"请输入查询关键字"},null,8,["size","prefix-icon","modelValue"]),P("div",Fr,[(h(!0),B(M,null,q(u.value,b=>(h(),k(s(Je),{icon:b[1],onClick:w=>d(b[0]),class:Z({"is-active":n.value===b[0]})},null,8,["icon","onClick","class"]))),256)),u.value.length===0?(h(),k(s(ve),{key:0})):O("",!0)])])]),_:1},8,["modelValue"])):O("",!0)]))}}),Tr=D({name:"PageForm",__name:"form",props:{item:{},parentId:{}},setup(i){const e=i,{project:t}=Ze(),a=V(()=>e.item?"编辑页面":"新增页面"),l=()=>({dir:!1,name:"",title:"",icon:"",mask:!0,hidden:!1,raw:!1}),n=S(e.item||l()),r=[{label:"页面",value:!1},{label:"目录",value:!0}],o=d=>{n.value&&(n.value.name=Tt(d))},u=d=>j(this,null,function*(){var c,m,p;return(c=t.value)!=null&&c.existPageName(d.name,[d.id])?(de("页面名称已存在，请更换"),!1):(e.item?(m=t.value)==null||m.updatePage(d):(p=t.value)==null||p.createPage(d,e.parentId),!0)});return(d,c)=>(h(),k(s(Le),{title:a.value,width:"800px",height:"500px","form-props":{tooltipMessage:!1},model:n.value,"submit-method":u},{default:y(()=>[f(s(N),{name:"dir",label:"类型",editor:"radio",options:r,props:{button:!0,size:"small"},disabled:!!e.item,required:""},null,8,["disabled"]),f(s(N),{name:"name",label:"名称",required:"",onChange:o,rules:{pattern:s(Fe),message:"名称格式不正确"}},null,8,["rules"]),f(s(N),{name:"title",label:"标题",required:""}),f(s(N),{name:"icon",label:"菜单图标",editor:"none"},{editor:y(()=>[f(dn,{modelValue:n.value.icon,"onUpdate:modelValue":c[0]||(c[0]=m=>n.value.icon=m),size:"default"},null,8,["modelValue"])]),_:1}),f(s(N),{visible:{dir:!1},name:"mask",label:"包含母版",editor:"switch"}),f(s(N),{name:"hidden",label:"隐藏菜单",editor:"switch"}),f(s(N),{visible:{dir:!1},disabled:!!e.item,inline:"",name:"raw",label:"源码模式",editor:"switch",tip:"页面是非低代码开发，不能在线编辑"},null,8,["disabled"])]),_:1},8,["title","model"]))}}),ll=D({name:"VIcon",__name:"Icon",props:{icon:{},label:{},active:{type:Boolean,default:!1},open:{type:Boolean,default:!1}},emits:["click"],setup(i,{emit:e}){const t=i,a=e,l=V(()=>({"is-active":t.active,"is-open":t.open})),n=()=>{a("click")};return(r,o)=>(h(),k(s(cl),{effect:"dark",placement:"right",content:r.label,"show-after":600},{default:y(()=>[P("div",{class:Z(["v-apps-region__icon",l.value]),onClick:n},[(h(),k(Bl(r.icon)))],2)]),_:1},8,["content"]))}}),Y=D({name:"VPanel",__name:"panel",props:{title:{},subtitle:{},plus:{type:Boolean},back:{type:Boolean},edit:{type:Boolean},remove:{type:Boolean},save:{type:Boolean},header:{type:Boolean,default:!0},collapsable:{type:Boolean}},emits:["plus","back","remove","save","edit"],setup(i,{emit:e}){const t=i,a=e,l=S(!1),n=V(()=>({"is-collapsed":!!l.value})),r=()=>{a("plus")},o=()=>{a("edit")},u=()=>{a("back")},d=()=>{a("remove")},c=()=>{a("save")},m=V(()=>t.header?{content:t.title,subtitle:t.subtitle,icon:t.back?Ji:void 0,onClickBack:t.back?u:void 0,onClick:t.collapsable?()=>{l.value=!l.value}:void 0}:null),p=g=>{l.value=g};return(g,v)=>(h(),k(s(Jt),{class:Z(["v-panel",n.value]),border:!1,header:m.value,fit:""},Fi({actions:y(()=>[t.plus?(h(),k(s(Re),{key:0,size:g.$attrs.size,mode:"icon",icon:s(wl),background:"hover",title:"新增",onClick:r},null,8,["size","icon"])):O("",!0),t.edit?(h(),k(s(Re),{key:1,size:g.$attrs.size,mode:"icon",icon:s($i),background:"hover",title:"编辑",onClick:o},null,8,["size","icon"])):O("",!0),t.remove?(h(),k(s(Re),{key:2,size:g.$attrs.size,mode:"icon",icon:s(Li),background:"hover",title:"清除",onClick:d},null,8,["size","icon"])):O("",!0),t.save?(h(),k(s(Re),{key:3,size:g.$attrs.size,mode:"icon",icon:s(ys),background:"hover",title:"保存",onClick:c},null,8,["size","icon"])):O("",!0),t.collapsable?He((h(),k(s(Re),{key:4,size:g.$attrs.size,mode:"icon",icon:s(Il),background:"hover",title:"展开",onClick:v[0]||(v[0]=b=>p(!1))},null,8,["size","icon"])),[[Xe,l.value]]):O("",!0),t.collapsable?He((h(),k(s(Re),{key:5,size:g.$attrs.size,mode:"icon",icon:s(Wi),background:"hover",title:"收起",onClick:v[1]||(v[1]=b=>p(!0))},null,8,["size","icon"])),[[Xe,!l.value]]):O("",!0),Ne(g.$slots,"actions")]),default:y(()=>[Ne(g.$slots,"default")]),_:2},[g.$slots.footer?{name:"footer",fn:y(()=>[Ne(g.$slots,"footer")]),key:"0"}:void 0]),1032,["class","header"]))}}),zr={class:"v-tabs__header"},Ir={key:0,class:"v-tabs__actions"},Mt=D({__name:"tabs",props:{items:{default:()=>[]},menus:{},modelValue:{},stretch:{type:Boolean},checkable:{type:Boolean}},emits:["update:modelValue","command","remove","action-click"],setup(i,{emit:e}){var u,d;const t=i,a=e,l=S((d=t.modelValue||((u=t.items[0])==null?void 0:u.name))!=null?d:"");X(l,()=>{a("update:modelValue",l.value)}),X(()=>t.modelValue,c=>{l.value=c});const n=c=>{a("command",c)},r=c=>{a("remove",c)},o=c=>{a("action-click",c)};return(c,m)=>(h(),k(s(Jt),{class:"v-tabs",border:!1,fit:"",radius:!1},{header:y(()=>[P("div",zr,[f(s(ka),{class:"v-tabs__tabs",items:t.items,type:"card",modelValue:l.value,"onUpdate:modelValue":m[0]||(m[0]=p=>l.value=p),onTabRemove:r,onActionClick:o,stretch:t.stretch},null,8,["items","modelValue","stretch"]),t.menus&&t.menus.length?(h(),B("div",Ir,[t.menus&&t.menus.length?(h(),k(s(Re),{key:0,mode:"icon",size:"small",icon:s(xa),background:"hover",dropdown:{size:"small",placement:"bottom-end"},menus:t.menus,onCommand:n},{item:y(({item:p})=>[P("span",null,[t.checkable?(h(),k(s(yl),{key:0,class:Z({"v-tabs__checked":!0,"is-checked":p.checked})},null,8,["class"])):O("",!0),ee(" "+U(p.label),1)])]),_:1},8,["icon","menus"])):O("",!0)])):O("",!0)])]),default:y(()=>[Ne(c.$slots,"default")]),_:3}))}}),Nr={key:2,class:"v-item__index"},Jr={class:"v-item__content"},be=D({name:"VItem",__name:"item",props:{icon:{},index:{},tag:{},tagType:{},title:{},subtitle:{},subtitleCls:{},actions:{default:()=>[]},background:{type:Boolean},border:{type:Boolean},switch:{type:Boolean},modelValue:{},active:{type:Boolean},hover:{type:Boolean},small:{type:Boolean}},emits:["click","action","update:modelValue","switch"],setup(i,{emit:e}){const t={add:{label:"创建",icon:wl},copy:{label:"复制",icon:xl},edit:{label:"编辑",icon:kl},remove:{label:"删除",icon:Nt},lock:{label:"锁定",icon:fl},unlock:{label:"解锁",icon:xi},invisible:{label:"隐藏",icon:bl},visible:{label:"显示",icon:Ci},home:{label:"主页",icon:Vi}},a=i,l=e,n=S(!!a.modelValue),r=V(()=>a.actions.map(c=>{const m=t[c];return L({name:c},m)})),o=V(()=>({"is-background":a.background,"is-border":a.border,"is-active":a.active,"is-hover":a.hover,"is-small":a.small})),u=()=>{l("click",a.modelValue)},d=c=>j(this,null,function*(){c==="remove"?(yield wa.confirm("确定删除吗？","提示",{type:"warning"}).catch(()=>!1))&&l("action",{name:c,modelValue:a.modelValue}):l("action",{name:c,modelValue:a.modelValue})});return X(n,c=>{l("update:modelValue",c),l("switch",c)}),X(()=>a.modelValue,c=>{n.value=!!c}),(c,m)=>(h(),k(s(Q),{class:Z(["v-item",o.value]),justify:"space-between",align:"center",onClick:u},{default:y(()=>[f(s(Q),{class:"v-item__title",align:"center"},{default:y(()=>[Ne(c.$slots,"default",{},()=>[c.icon?(h(),k(s(Je),{key:0,icon:c.icon},null,8,["icon"])):O("",!0),a.tag?(h(),k(s(Rn),{key:1,class:"v-item__tag",size:"small",type:a.tagType},{default:y(()=>[ee(U(a.tag),1)]),_:1},8,["type"])):O("",!0),c.index!==void 0?(h(),B("span",Nr," # "+U(c.index),1)):O("",!0),P("span",Jr,U(c.title),1),c.subtitle?(h(),B("span",{key:3,class:Z(["v-item__subtitle",a.subtitleCls])},U(c.subtitle),3)):O("",!0)])]),_:3}),f(s(Q),{class:"v-item__actions",onClick:m[1]||(m[1]=ct(()=>{},["stop"]))},{default:y(()=>[(h(!0),B(M,null,q(r.value,p=>(h(),k(s(Re),{name:p.name,title:p.label,mode:"icon",size:"small",background:"none",type:"info",icon:p.icon,onClick:g=>d(p.name)},null,8,["name","title","icon","onClick"]))),256)),a.switch?(h(),k(s(pl),{key:0,modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=p=>n.value=p),class:"v-item__switch",size:"small"},null,8,["modelValue"])):O("",!0),Ne(c.$slots,"status")]),_:3})]),_:3},8,["class"]))}}),$r=["draggable"],Lr={class:"v-box__name"},Wr={class:"v-box__label"},fa=D({name:"VBox",__name:"box",props:{name:{},title:{},editable:{type:Boolean},active:{type:Boolean},draggable:{type:Boolean},tag:{},tagType:{}},emits:["edit","remove","dragstart","dragend"],setup(i,{emit:e}){const t=i,a=e,l=()=>{a("edit")},n=()=>j(this,null,function*(){(yield wa.confirm("确认删除？","提示",{type:"warning"}).catch(()=>!1))&&a("remove")}),r=V(()=>({"is-active":t.active,"is-draggable":t.draggable})),o=()=>{a("dragstart",t)},u=()=>{a("dragend",t)};return(d,c)=>(h(),B("div",{class:Z(["v-box",r.value]),draggable:d.draggable,onDragstart:o,onDragend:u},[f(s(Q),{direction:"column",justify:"center",align:"center"},{default:y(()=>[P("span",Lr,U(t.name),1),P("span",Wr,U(t.title),1)]),_:1}),t.editable?(h(),k(s(Q),{key:0,class:"v-box__footer",justify:"flex-end",align:"center"},{default:y(()=>[f(s(Je),{icon:s(kl),onClick:l},null,8,["icon"]),f(s(Je),{icon:s(Nt),onClick:n},null,8,["icon"])]),_:1})):O("",!0),t.tag?(h(),B("span",{key:1,class:Z(["v-box__tag",{[`is-${t.tagType}`]:!!t.tagType}])},U(t.tag),3)):O("",!0)],42,$r))}});function Ra(i){return El()?(Pl(i),!0):!1}function Ut(i){return typeof i=="function"?i():s(i)}const qt=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Mr=Object.prototype.toString,Ur=i=>Mr.call(i)==="[object Object]",Ot=()=>{},qr=Hr();function Hr(){var i,e;return qt&&((i=window==null?void 0:window.navigator)==null?void 0:i.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window==null?void 0:window.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function Gr(i){let e;function t(){return e||(e=i()),e}return t.reset=()=>j(this,null,function*(){const a=e;e=void 0,a&&(yield a)}),t}function Kr(i){return Lt()}function Qr(i,e=!0,t){Kr()?_t(i,t):e?i():Te(i)}function Xr(i,e,t={}){const{immediate:a=!0}=t,l=S(!1);let n=null;function r(){n&&(clearTimeout(n),n=null)}function o(){l.value=!1,r()}function u(...d){r(),l.value=!0,n=setTimeout(()=>{l.value=!1,n=null,i(...d)},Ut(e))}return a&&(l.value=!0,qt&&u()),Ra(o),{isPending:Al(l),start:u,stop:o}}function Be(i){var e;const t=Ut(i);return(e=t==null?void 0:t.$el)!=null?e:t}const Ht=qt?window:void 0,cn=qt?window.navigator:void 0;function vt(...i){let e,t,a,l;if(typeof i[0]=="string"||Array.isArray(i[0])?([t,a,l]=i,e=Ht):[e,t,a,l]=i,!e)return Ot;Array.isArray(t)||(t=[t]),Array.isArray(a)||(a=[a]);const n=[],r=()=>{n.forEach(c=>c()),n.length=0},o=(c,m,p,g)=>(c.addEventListener(m,p,g),()=>c.removeEventListener(m,p,g)),u=X(()=>[Be(e),Ut(l)],([c,m])=>{if(r(),!c)return;const p=Ur(m)?L({},m):m;n.push(...t.flatMap(g=>a.map(v=>o(c,g,v,p))))},{immediate:!0,flush:"post"}),d=()=>{u(),r()};return Ra(d),d}let nl=!1;function Yr(i,e,t={}){const{window:a=Ht,ignore:l=[],capture:n=!0,detectIframe:r=!1}=t;if(!a)return Ot;qr&&!nl&&(nl=!0,Array.from(a.document.body.children).forEach(c=>c.addEventListener("click",Ot)),a.document.documentElement.addEventListener("click",Ot));let o=!0;const u=c=>l.some(m=>{if(typeof m=="string")return Array.from(a.document.querySelectorAll(m)).some(p=>p===c.target||c.composedPath().includes(p));{const p=Be(m);return p&&(c.target===p||c.composedPath().includes(p))}}),d=[vt(a,"click",c=>{const m=Be(i);if(!(!m||m===c.target||c.composedPath().includes(m))){if(c.detail===0&&(o=!u(c)),!o){o=!0;return}e(c)}},{passive:!0,capture:n}),vt(a,"pointerdown",c=>{const m=Be(i);o=!u(c)&&!!(m&&!c.composedPath().includes(m))},{passive:!0}),r&&vt(a,"blur",c=>{setTimeout(()=>{var m;const p=Be(i);((m=a.document.activeElement)==null?void 0:m.tagName)==="IFRAME"&&!(p!=null&&p.contains(a.document.activeElement))&&e(c)},0)})].filter(Boolean);return()=>d.forEach(c=>c())}function Zr(){const i=S(!1),e=Lt();return e&&_t(()=>{i.value=!0},e),i}function Da(i){const e=Zr();return V(()=>(e.value,!!i()))}function sl(i,e={}){const{controls:t=!1,navigator:a=cn}=e,l=Da(()=>a&&"permissions"in a);let n;const r=typeof i=="string"?{name:i}:i,o=S(),u=()=>{n&&(o.value=n.state)},d=Gr(()=>j(this,null,function*(){if(l.value){if(!n)try{n=yield a.permissions.query(r),vt(n,"change",u),u()}catch(c){o.value="prompt"}return n}}));return d(),t?{state:o,isSupported:l,query:d}:o}function eu(i={}){const{navigator:e=cn,read:t=!1,source:a,copiedDuring:l=1500,legacy:n=!1}=i,r=Da(()=>e&&"clipboard"in e),o=sl("clipboard-read"),u=sl("clipboard-write"),d=V(()=>r.value||n),c=S(""),m=S(!1),p=Xr(()=>m.value=!1,l);function g(){r.value&&_(o.value)?e.clipboard.readText().then(C=>{c.value=C}):c.value=w()}d.value&&t&&vt(["copy","cut"],g);function v(){return j(this,arguments,function*(C=Ut(a)){d.value&&C!=null&&(r.value&&_(u.value)?yield e.clipboard.writeText(C):b(C),c.value=C,m.value=!0,p.start())})}function b(C){const F=document.createElement("textarea");F.value=C!=null?C:"",F.style.position="absolute",F.style.opacity="0",document.body.appendChild(F),F.select(),document.execCommand("copy"),F.remove()}function w(){var C,F,I;return(I=(F=(C=document==null?void 0:document.getSelection)==null?void 0:C.call(document))==null?void 0:F.toString())!=null?I:""}function _(C){return C==="granted"||C==="prompt"}return{isSupported:d,text:c,copied:m,copy:v}}function tu(i,e,t={}){const m=t,{window:a=Ht}=m,l=Kt(m,["window"]);let n;const r=Da(()=>a&&"ResizeObserver"in a),o=()=>{n&&(n.disconnect(),n=void 0)},u=V(()=>Array.isArray(i)?i.map(p=>Be(p)):[Be(i)]),d=X(u,p=>{if(o(),r.value&&a){n=new ResizeObserver(e);for(const g of p)g&&n.observe(g,l)}},{immediate:!0,flush:"post"}),c=()=>{o(),d()};return Ra(c),{isSupported:r,stop:c}}function yt(i,e={width:0,height:0},t={}){const{window:a=Ht,box:l="content-box"}=t,n=V(()=>{var m,p;return(p=(m=Be(i))==null?void 0:m.namespaceURI)==null?void 0:p.includes("svg")}),r=S(e.width),o=S(e.height),{stop:u}=tu(i,([m])=>{const p=l==="border-box"?m.borderBoxSize:l==="content-box"?m.contentBoxSize:m.devicePixelContentBoxSize;if(a&&n.value){const g=Be(i);if(g){const v=g.getBoundingClientRect();r.value=v.width,o.value=v.height}}else if(p){const g=Array.isArray(p)?p:[p];r.value=g.reduce((v,{inlineSize:b})=>v+b,0),o.value=g.reduce((v,{blockSize:b})=>v+b,0)}else r.value=m.contentRect.width,o.value=m.contentRect.height},t);Qr(()=>{const m=Be(i);m&&(r.value="offsetWidth"in m?m.offsetWidth:e.width,o.value="offsetHeight"in m?m.offsetHeight:e.height)});const d=X(()=>Be(i),m=>{r.value=m?e.width:0,o.value=m?e.height:0});function c(){u(),d()}return{width:r,height:o,stop:c}}const au={class:"v-context-viewer"},lu=D({__name:"viewer",props:{context:{}},emits:["pick","copy"],setup(i,{emit:e}){const t=i,a=e,l=["$provider","$apis","$components","context"],n=c=>{const m=c.value,p=Qt(m);return p==="Object"||p==="Module"?Object.keys(m||{}).length===0:p==="Array"?m.length===0:!0},r=(c,m="this")=>typeof c=="object"?Array.isArray(c)?c.map((p,g)=>{const v=`[${g}]`;return{label:v,value:p,type:Qt(p),path:`${m}${v}`}}):mr(c).map(p=>{const g=c[p];return{label:p,value:g,type:Qt(g),path:`${m}.${p}`}}).filter(p=>!p.label.startsWith("__")&&!l.includes(p.label)):[],o=(c,m)=>{if(c.level===0)m(r(t.context));else{const p=zi(c.data.value);m(r(p,c.data.path))}},u=c=>{a("copy",c.path)},d=c=>{a("pick",c.path)};return(c,m)=>(h(),B("div",au,[c.context?(h(),k(s(ya),{key:0,lazy:"",load:o,"expand-on-click-node":!1,props:{isLeaf:n}},{default:y(({data:p})=>[f(be,{title:p.label,subtitle:p.type,"subtitle-cls":p.type,clickable:"",onClick:g=>d(p),background:"",actions:["copy"],onAction:g=>u(p),grow:"",small:""},null,8,["title","subtitle","subtitle-cls","onClick","onAction"])]),_:1},8,["props"])):O("",!0)]))}}),Ba=D({__name:"binder",props:{title:{},context:{},block:{},model:{},rules:{},modelValue:{type:Boolean},submitMethod:{type:Function},unbindEnabled:{type:Boolean}},emits:["unbind","submit","cancel","pick","update:modelValue","close"],setup(i,{emit:e}){const t=i,a=e,{searchResult:l,keyword:n}=dr(t.block,t.context),{copy:r}=eu({}),o=[{name:"normal",label:"常用"},{name:"viewer",label:"高级"}],u=S("normal"),d=S(),c=_=>j(this,null,function*(){a("submit",_),t.submitMethod?(yield t.submitMethod(_))&&m():m()}),m=()=>{a("update:modelValue",!1),a("close")},p=()=>{a("unbind")},g=()=>{m()},v=()=>j(this,null,function*(){var _;(_=d.value)==null||_.submit()}),b=_=>{a("pick",_)},w=_=>{r(_),It.success({message:"已经复制到粘贴板"})};return(_,C)=>(h(),k(s(Ye),{"model-value":t.modelValue,class:"v-binder",title:_.title,width:"1000px",height:"600px","body-padding":!1,resizable:!1,maximizable:!0,minimizable:!1,onClose:m},{default:y(()=>[f(s(Q),{fit:"",direction:"row",overflow:"hidden"},{default:y(()=>[f(s(Q),{width:"30%",height:"100%"},{default:y(()=>[f(Mt,{class:"v-binder__tabs",items:o,modelValue:u.value,"onUpdate:modelValue":C[1]||(C[1]=F=>u.value=F)},{default:y(()=>[f(s(Q),{class:"v-binder__tab-content",fit:"",padding:"",flex:!1},{default:y(()=>[He(P("div",null,[f(s(Oe),{modelValue:s(n),"onUpdate:modelValue":C[0]||(C[0]=F=>oa(n)?n.value=F:null),size:"small",clearable:"","prefix-icon":s(Sa),placeholder:"筛选可用项"},null,8,["modelValue","prefix-icon"]),(h(!0),B(M,null,q(s(l),F=>(h(),B("div",null,[f(s(ba),{"border-style":"dotted"},{default:y(()=>[ee(U(F.title),1)]),_:2},1024),(h(!0),B(M,null,q(F.items,I=>(h(),k(be,{title:I,background:"",actions:["copy"],small:"",onClick:H=>b(I),onAction:H=>w(I)},null,8,["title","onClick","onAction"]))),256))]))),256)),s(l).length?O("",!0):(h(),k(s(ve),{key:0}))],512),[[Xe,u.value==="normal"]]),He(f(lu,{context:t.context,onCopy:w,onPick:b},null,8,["context"]),[[Xe,u.value==="viewer"]])]),_:1})]),_:1},8,["modelValue"])]),_:1}),f(s(Jt),{grow:"",header:null,border:!1},{footer:y(()=>[f(s(Q),{justify:"space-between"},{default:y(()=>[f(s(Q),null,{default:y(()=>[_.unbindEnabled?(h(),k(s(me),{key:0,type:"warning",size:"default",onClick:p},{default:y(()=>[ee(" 移除绑定 ")]),_:1})):O("",!0)]),_:1}),f(s(Q),null,{default:y(()=>[f(s(me),{type:"default",size:"default",onClick:g},{default:y(()=>[ee(" 取消 ")]),_:1}),f(s(me),{type:"primary",size:"default",onClick:v},{default:y(()=>[ee(" 确定 ")]),_:1})]),_:1})]),_:1})]),default:y(()=>[f(s(_a),{ref_key:"formRef",ref:d,class:"v-binder__form",footer:!1,"label-position":"top","tooltip-message":!1,model:t.model,rules:t.rules,"submit-method":c},{default:y(()=>[Ne(_.$slots,"default")]),_:3},8,["model","rules"])]),_:3})]),_:3})]),_:3},8,["model-value","title"]))}}),nu={class:"v-slots-picker__sn"},su=D({__name:"slots",props:{slots:{default:()=>[]}},emits:["submit","update:modelValue"],setup(i,{emit:e}){const t=i,a=e,l=S(),n=V(()=>`${50*Math.ceil(t.slots.length/4)+180}px`),r=u=>{l.value=u},o=()=>{l.value?(a("submit",l.value),a("update:modelValue",!1)):de("请选择插槽")};return(u,d)=>(h(),k(s(Ye),ge({class:"v-slots-picker",title:"选择插槽",width:"600px",height:n.value,submit:"",cancel:"",onSubmit:o},u.$attrs),{default:y(()=>[f(s(hl),{title:"该组件支持多个插槽，请选择放置到其中一个",type:"warning",closable:!1}),f(s(Q),{class:"v-slots-picker__content",justify:"space-around",alignContent:"flex-start",gap:"",wrap:"wrap"},{default:y(()=>[(h(!0),B(M,null,q(t.slots,(c,m)=>{var p;return h(),k(s(Q),{class:Z(["v-slots-picker__item",{"is-active":c.name===((p=l.value)==null?void 0:p.name)}]),grow:"",flex:!1,onClick:g=>r(c)},{default:y(()=>[P("span",nu,"#"+U(m+1),1),ee(" "+U(c.name),1)]),_:2},1032,["class","onClick"])}),256))]),_:1})]),_:1},16,["height"]))}}),mn=D({name:"Viewport",__name:"viewport",props:{mode:{default:"pc"},width:{},height:{}},setup(i){const e=i,t=V(()=>[`is-${e.mode}`]),a=V(()=>{if(e.mode==="pc")return 1;const n=e.mode==="mobile"?tl:al,{width:r,height:o}=n,u=r>0?(e.width||0)/r:1,d=o>0?(e.height||0)/o:1;return Math.min(u,d)}),l=V(()=>{if(e.mode==="pc")return{};const n=e.mode==="mobile"?tl:al,{width:r,height:o}=n;return{width:`${r}px`,height:`${o}px`,left:"50%",top:"50%",transform:`translate(-50%, -50%) scale(${a.value})`}});return(n,r)=>(h(),B("div",{class:Z(["v-viewport",t.value]),style:Pt(l.value)},[Ne(n.$slots,"default")],6))}}),iu=D({name:"PagesWidget",__name:"index",setup(i){const{project:e,engine:t}=Ze(),a=V(()=>{var g;return((g=e.value)==null?void 0:g.pages)||[]}),{current:l}=fe(),n=S(!1),r=S(),o=S(),u=()=>{o.value=void 0,r.value=void 0,n.value=!0},d=g=>j(this,null,function*(){var C,F,I,H,E,T;const{name:v,modelValue:b}=g,{data:w,node:_}=b;if(v==="add"&&(r.value=void 0,o.value=w.id,n.value=!0),v==="edit"&&(r.value=kt(w),o.value=void 0,n.value=!0),v==="remove"){if(w.dir){const A=(C=e.value)==null?void 0:C.getPage(w.id);if(A&&((F=A.children)!=null&&F.length)){de("请先删除子页面");return}}(I=e.value)==null||I.removePage(w.id)}if(v==="copy"){const A=(H=_.parent)==null?void 0:H.data.id;(E=e.value)==null||E.clonePage(w,A)}v==="home"&&((T=e.value)==null||T.setHomepage(w.id),Se("设置主页成功","success"))}),c=g=>j(this,null,function*(){var v,b;g.raw&&Se("这是源码模式页面，不能低代码设计","warning"),g.dir||g.raw?(v=t.project.value)==null||v.deactivate():(b=t.project.value)==null||b.active(g)}),m=(g,v,b)=>b==="inner"?!!v.data.dir:!0,p=()=>{var g;(g=e.value)==null||g.update({pages:ra(a)})};return(g,v)=>(h(),k(s(Y),{class:"v-pages-widget",title:"页面管理",plus:"",subtitle:"(共 0 条)",onPlus:u},{default:y(()=>[f(s(ya),{data:a.value,"node-key":"id","default-expand-all":"",draggable:"","allow-drop":m,onNodeDrop:p},{default:y(({data:b,node:w})=>{var _,C;return[f(s(be),{class:"v-pages-widget__item",icon:s(na)[b.icon],title:b.title,subtitle:b.name,"model-value":{data:b,node:w},actions:b.dir?["add","edit","remove"]:b.raw?["home","edit","remove"]:["home","copy","edit","remove"],onAction:d,onClick:F=>c(b),active:((_=s(l))==null?void 0:_.id)===b.id,tag:((C=s(e))==null?void 0:C.homepage)===b.id?"主页":void 0,"tag-type":"success",grow:"",small:"",background:"",hover:""},null,8,["icon","title","subtitle","model-value","actions","onClick","active","tag"])]}),_:1},8,["data"]),n.value?(h(),k(Tr,{key:0,modelValue:n.value,"onUpdate:modelValue":v[0]||(v[0]=b=>n.value=b),item:r.value,"parent-id":o.value},null,8,["modelValue","item","parent-id"])):O("",!0)]),_:1}))}}),ou={class:"v-file-setter"},Oa=D({name:"FileSetter",__name:"file",props:{modelValue:{},attachment:{}},emits:["change","update:modelValue"],setup(i,{emit:e}){const t=i,a=e,{engine:l,project:n}=Ze(),r=S([]),o=S(!1),u=C=>Array.isArray(C)?C.map(F=>({name:F.filename,url:F.filepath})):C?{name:C.filename,url:C.filepath}:null,d=C=>j(this,null,function*(){if(l&&n.value){const F=yield l.service.uploadStaticFile(C,n.value.id);return u(F)}return null}),c=C=>C?(C||"").split(",").map(F=>({url:F})):[],m=S(c(t.modelValue)),p=V(()=>Array.isArray(m.value)?m.value.map(C=>C.url).join(","):m.value?m.value.url:"");X(()=>t.modelValue,C=>{m.value=c(C)}),X(o,C=>j(this,null,function*(){var F;if(C){const I=yield l.service.getStaticFiles((F=n.value)==null?void 0:F.id).catch(()=>null);r.value=u(I)}}));const g=()=>{var F;if(!m.value||Array.isArray(m.value)&&m.value.length===0)return de("请选择文件"),!1;const C=(((F=t.attachment)==null?void 0:F.accept)||"").toLowerCase().split(",");return C.length>0?[].concat(m.value).every(I=>{const H=I.name||I.url.split("?")[0],E=H.substring(H.lastIndexOf(".")).toLowerCase();return C.includes(E)})?!0:(de(`只支持 ${C.join(",")} 文件`),!1):!0},v=()=>{g()&&(a("change",p.value),a("update:modelValue",p.value),o.value=!1)},b=()=>{m.value=[],a("change",void 0),a("update:modelValue",void 0),o.value=!1},w=()=>{o.value=!0},_=C=>{var F,I;C.name&&((F=n.value)!=null&&F.id)&&l.service.removeStaticFile(C.name,(I=n.value)==null?void 0:I.id)};return(C,F)=>(h(),B("div",ou,[f(s(Oe),ge({readonly:"",onFocus:w,"model-value":t.modelValue,"suffix-icon":s(Mi)},C.$attrs),null,16,["model-value","suffix-icon"]),o.value?(h(),k(s(Ye),{key:0,modelValue:o.value,"onUpdate:modelValue":F[1]||(F[1]=I=>o.value=I),title:"文件选择器",width:"600px",height:"400px",cancel:"",submit:"",onSubmit:v},{extra:y(()=>[f(s(me),{type:"warning",size:"default",onClick:b},{default:y(()=>[ee(" 清除 ")]),_:1})]),default:y(()=>[f(s(ws),ge({size:"small","list-type":"list",selectable:!0,uploader:d,"model-value":r.value,"select-value":m.value,"onUpdate:selectValue":F[0]||(F[0]=I=>m.value=I)},t.attachment,{onRemove:_}),null,16,["model-value","select-value"])]),_:1},8,["modelValue"])):O("",!0)]))}}),ru=D({name:"BlocksWidget",__name:"index",setup(i){const{span:e}=rn(),{blocks:t,engine:a}=nr(),l=[{label:"设计",value:"Schema",border:!0},{label:"引用",value:"UrlSchema",border:!0},{label:"插件",value:"Plugin",border:!0}],n={Schema:{label:"设计",type:"primary"},UrlSchema:{label:"引用",type:"warning"},Plugin:{label:"插件",type:"danger"}},r=S(void 0),{current:o}=fe(),u=S(!1),d=V(()=>{var E;return(E=r.value)!=null&&E.id?"编辑区块":"新增区块"}),c=V(()=>`(共 ${t.value.length} 个)`),m=()=>({fromType:"Schema",name:"",title:"",urls:"",library:"",type:"block"}),p=V(()=>{var E,T;if(((E=r.value)==null?void 0:E.fromType)==="UrlSchema")return".json";if(((T=r.value)==null?void 0:T.fromType)==="Plugin")return".js,.css,.json"}),g=V(()=>{var E;return((E=r.value)==null?void 0:E.fromType)==="Plugin"}),v=E=>j(this,null,function*(){const T=E,A=a.project.value;if(!A)return!1;if(E.id)if(!A.existBlockName(T.name,[T.id]))A.updateBlock(T);else return de(`名称【${T.name}】已经存在，请更换名称`),!1;else if(!A.existBlockName(T.name))A.createBlock(T);else return de(`名称【${T.name}】已经存在，请更换名称`),!1;return!0}),b=()=>{r.value=m(),u.value=!0},w=E=>{r.value=kt(E),u.value=!0},_=E=>{var T;(T=a.project.value)==null||T.removeBlock(E.id)},C=E=>{r.value&&(r.value.name=Tt(E))},F=E=>j(this,null,function*(){var T;(!E.fromType||E.fromType==="Schema")&&((T=a.project.value)==null||T.active(E))}),I=E=>j(this,null,function*(){var G,z,$;const T=Xi(E),A=yield a.assets.getBlockMaterial(T,E.name),J=($=(z=(G=a.skeleton)==null?void 0:G.getWidget("Designer"))==null?void 0:z.widgetRef)==null?void 0:$.designer;J&&A&&J.setDragging(A)}),H=()=>{var T,A,J;const E=(J=(A=(T=a.skeleton)==null?void 0:T.getWidget("Designer"))==null?void 0:A.widgetRef)==null?void 0:J.designer;E&&E.setDragging(null)};return(E,T)=>(h(),k(s(Y),{class:"v-blocks-widget",title:"区块管理",subtitle:c.value,plus:"",onPlus:b},{default:y(()=>[f(s(aa),{wrap:"wrap",gutter:5},{default:y(()=>[(h(!0),B(M,null,q(s(t),A=>(h(),k(s(la),{key:A.id,span:s(e)},{default:y(()=>{var J,G,z,$;return[f(s(fa),{name:A.name,title:A.title,active:((J=s(o))==null?void 0:J.id)===A.id,editable:!A.preset,tag:(G=n[A.fromType||"Schema"])==null?void 0:G.label,tagType:(z=n[A.fromType||"Schema"])==null?void 0:z.type,onEdit:W=>w(A),onRemove:W=>_(A),onClick:W=>F(A),draggable:(($=s(o))==null?void 0:$.id)!==A.id,onDragstart:W=>I(A),onDragend:H},null,8,["name","title","active","editable","tag","tagType","onEdit","onRemove","onClick","draggable","onDragstart"])]}),_:2},1032,["span"]))),128))]),_:1}),s(t).length?O("",!0):(h(),k(s(ve),{key:0})),f(s(Le),{modelValue:u.value,"onUpdate:modelValue":T[0]||(T[0]=A=>u.value=A),title:d.value,model:r.value,width:"600px",height:"400px","form-props":{tooltipMessage:!1},"submit-method":v},{default:y(()=>{var A,J,G;return[f(s(N),{name:"fromType",label:"类型",required:"",editor:"radio",disabled:!!((A=r.value)!=null&&A.id),options:l},null,8,["disabled"]),f(s(N),{name:"name",label:"名称",required:"",tip:"名称为英文驼峰格式",rules:{message:"名称格式错误",pattern:s(Fe)},onChange:C},null,8,["rules"]),f(s(N),{name:"title",label:"标题",required:""}),((J=r.value)==null?void 0:J.fromType)==="Plugin"?(h(),k(s(N),{key:0,name:"library",label:"插件名称",required:""})):O("",!0),["Plugin","UrlSchema"].includes(((G=r.value)==null?void 0:G.fromType)||"")?(h(),k(s(N),{key:1,name:"urls",label:"资源文件",required:"",editor:Oa,props:{attachment:{accept:p.value,multiple:g.value}}},null,8,["props"])):O("",!0)]}),_:1},8,["modelValue","title","model"])]),_:1},8,["subtitle"]))}}),uu={class:"v-components-widget__search"},du={key:0,class:"v-components-widget__result"},cu={class:"v-components-widget__list"},mu=D({name:"ComponentsWidget",__name:"index",setup(i){const{span:e,engine:t}=rn(),{tabs:a,currentTab:l,currentGroup:n,model:r,searchKey:o,searchResult:u}=ir(),d=m=>{var g,v,b;const p=(b=(v=(g=t.skeleton)==null?void 0:g.getWidget("Designer"))==null?void 0:v.widgetRef)==null?void 0:b.designer;p&&p.setDragging(m)},c=()=>{var p,g,v;const m=(v=(g=(p=t.skeleton)==null?void 0:p.getWidget("Designer"))==null?void 0:g.widgetRef)==null?void 0:v.designer;m&&m.setDragging(null)};return(m,p)=>(h(),k(s(Y),{class:"v-components-widget",title:"组件库",body:{flex:!0,direction:"column"}},{default:y(()=>[P("div",uu,[f(s(Oe),{modelValue:s(o),"onUpdate:modelValue":p[0]||(p[0]=g=>oa(o)?o.value=g:null),placeholder:"搜索组件",clearable:"",size:"small"},{prefix:y(()=>[f(s(hs))]),_:1},8,["modelValue"])]),s(o)?(h(),B("div",du,[f(s(aa),{wrap:"wrap",gutter:5},{default:y(()=>[(h(!0),B(M,null,q(s(u),g=>(h(),k(s(la),{span:s(e),key:g.name},{default:y(()=>[f(s(fa),{name:g.name,title:g.label||g.name,draggable:"",onDragstart:v=>d(g),onDragend:c},null,8,["name","title","onDragstart"])]),_:2},1032,["span"]))),128))]),_:1}),s(u).length?O("",!0):(h(),k(s(ve),{key:0}))])):(h(),k(s(ka),{key:1,items:s(a),modelValue:s(l),"onUpdate:modelValue":p[2]||(p[2]=g=>oa(l)?l.value=g:null)},{default:y(()=>[P("div",cu,[s(n)?(h(),k(s(_n),{key:0,modelValue:s(r)[s(l)],"onUpdate:modelValue":p[1]||(p[1]=g=>s(r)[s(l)]=g)},{default:y(()=>[(h(!0),B(M,null,q(s(n).children,g=>(h(),k(s(Sn),{key:g.name,name:g.name,title:`${g.label} (${g.count})`},{default:y(()=>[g.components?(h(),k(s(aa),{key:0,wrap:"wrap",gutter:5},{default:y(()=>[(h(!0),B(M,null,q(g.components,v=>(h(),k(s(la),{span:s(e),key:v.name},{default:y(()=>[f(s(fa),{name:v.name,title:v.label||v.name,draggable:"",onDragstart:b=>d(v),onDragend:c},null,8,["name","title","onDragstart"])]),_:2},1032,["span"]))),128))]),_:2},1024)):O("",!0)]),_:2},1032,["name","title"]))),128))]),_:1},8,["modelValue"])):O("",!0)])]),_:1},8,["items","modelValue"]))]),_:1}))}}),pu=D({name:"OutlineWidget",__name:"index",setup(i){const{engine:e,designer:t,selected:a}=Ie(),{current:l}=fe(),n=S([]),r=(E,T)=>{var J;if(T==="slot")return[];if(ue(E))return E.locked?["unlock"]:["lock"];const A=E.parent;return A&&(A.locked||A.invisible)?[]:(J=l.value)!=null&&J.locked?[]:E.locked?["unlock"]:E.invisible?["visible"]:["lock","invisible","copy","remove"]},o=(E,T)=>{var G;const A={};if(!E.some(z=>z.slot))return u(E);for(const z of E){const $=((G=z.slot)==null?void 0:G.name)||"default";A[$]||(A[$]=[]),A[$].push(z)}const J=[];for(const[z,$]of Object.entries(A))J.push({id:`${T.id}-${z}`,label:`#${z}`,type:"slot",model:T,disabled:!0,children:u($)});return J},u=E=>{const T=[];return E.forEach(A=>{const J={id:A.id,label:A.name,type:A.id,model:A};Array.isArray(A.children)&&(J.children=o(A.children,A)),T.push(J)}),T},d=()=>{if(!l.value)return[];const{id:E,name:T,nodes:A}=l.value;return[{id:E,label:T,type:E,model:l.value,children:u(A)}]},c=()=>j(this,null,function*(){var E,T;n.value=d(),(E=a.value)!=null&&E.model&&(yield Te(),(T=t.value)==null||T.setSelected(a.value.model))}),m=V(()=>{var E;return(E=a.value)==null?void 0:E.model.id}),p=E=>{var J;const T=E.data;if(T.type==="slot"||ue(T.model)||T.model.locked||T.model.name==="template")return!1;const A=e.assets.componentMap.get(T.model.name);return A?((J=t.value)==null||J.setDragging(A),!0):!1},g=(E,T,A)=>j(this,null,function*(){var $,W,te;const J=T.data,G={prev:"top",next:"bottom",inner:"inner"}[A];let z=!1;if(ue(J.model))z=A==="inner",($=t.value)==null||$.setDropping(z?J.model:null,"inner");else{const ot=J.model;z=!!(yield(W=t.value)==null?void 0:W.allowDrop(ot,G)),(te=t.value)==null||te.setDropping(z?ot:null,"inner")}return z}),v=E=>{var A,J,G,z;const T=E==null?void 0:E.model;if(!T||T.invisible||E.type==="slot"){(A=t.value)==null||A.setSelected(null),(J=t.value)==null||J.setHover(null);return}(G=t.value)==null||G.setSelected(T),(z=t.value)==null||z.setHover(null)},b=(E,T,A)=>j(this,null,function*(){var te,ot,Fa,Ta,za,Ia,Na,Ja,$a,La;const J=E.data,G=T.data;if(ue(G.model)){const rt=J.model;delete rt.slot,(te=l.value)==null||te.move(rt,void 0,"inner"),(ot=t.value)==null||ot.setDropping(null),(Fa=t.value)==null||Fa.setDragging(null);return}const z=G.model,$={before:"left",after:"right"}[A]||"inner";if(!(yield(Ta=t.value)==null?void 0:Ta.allowDrop(z,$))){(za=t.value)==null||za.setDropping(null),c(),It.warning({message:`${J.model.name}不能放置到该位置`}),(Ia=t.value)==null||Ia.setDragging(null);return}const W=yield(Na=t.value)==null?void 0:Na.getDropSlot(A==="inner"?z:z.parent);if(W!==null){const rt=J.model;rt.slot=W,(Ja=l.value)==null||Ja.move(rt,z,$)}else c();($a=t.value)==null||$a.setDropping(null),(La=t.value)==null||La.setDragging(null),e.simulator.refresh()}),w=E=>{var T,A,J,G,z;if(E.type==="slot"){(T=t.value)==null||T.setHover(null);return}ue(E.model)?(A=t.value)==null||A.setHover(E.model):((J=t.value)==null||J.setHover(E.model),E.model.invisible&&((G=t.value)==null||G.setHover(null)),E.model.name==="slot"&&((z=t.value)==null||z.setHover(null)))},_=()=>{var E;(E=t.value)==null||E.setHover(null)},C=E=>{var J;const T=E.data;T.dragging=!0;const A=e.assets.componentMap.get(T.model.name);A&&((J=t.value)==null||J.setDragging(A))},F=E=>j(this,null,function*(){const T=E.data;T.dragging=!1}),I=(E,T)=>{var A,J;E&&((E.id===T.id||!ue(E)&&T.isChild(E))&&((A=t.value)==null||A.setSelected(null)),(J=t.value)==null||J.setHover(null))},H=E=>{var G,z,$,W;const{name:T,modelValue:A}=E,J=(G=a.value)==null?void 0:G.model;switch(T){case"lock":I(J,A),A.lock();break;case"unlock":I(J,A),A.unlock();break;case"invisible":I(J,A),A.setVisible(!1);break;case"visible":A.setVisible(!0);break;case"copy":const te=(z=l.value)==null?void 0:z.cloneNode(A);te&&(($=t.value)==null||$.setSelected(te));break;case"remove":I(J,A),(W=l.value)==null||W.removeNode(A);break}};return X(e.changed,c,{immediate:!0}),(E,T)=>(h(),k(s(Y),{class:"v-outline-widget",title:"大纲树"},{default:y(()=>[(h(),k(s(ya),{key:s(e).changed.value,data:n.value,"node-key":"id","default-expand-all":"",draggable:"","empty-text":"请新建或打开文件","current-node-key":m.value,"highlight-current":!0,"expand-on-click-node":!1,"allow-drop":g,"allow-drag":p,onCurrentChange:v,onNodeDrop:b,onNodeDragStart:C,onNodeDragEnd:F},{default:y(({data:A,node:J})=>[f(s(be),{class:Z(["v-outline-widget__item",{"is-locked":A.model.locked,"is-invisible":A.model.invisible,"is-dragging":A.dragging,"is-slot":A.type==="slot"}]),active:!A.model.invisible&&J.isCurrent&&A.type!=="slot",grow:"",small:"",background:"",hover:"","model-value":A.model,icon:A.model.locked?s(fl):A.model.invisible?s(bl):void 0,title:A.label,subtitle:A.type,actions:r(A.model,A.type),onAction:H,onMouseenter:G=>w(A),onMouseleave:_},null,8,["class","active","model-value","icon","title","subtitle","actions","onMouseenter"])]),_:1},8,["data","current-node-key"]))]),_:1}))}}),vu=D({name:"HistoryWidget",__name:"index",setup(i){const{history:e,load:t,total:a}=un(),l=V(()=>`(共 ${a.value} 条)`),n=o=>{var u;o.name==="remove"&&((u=e.value)==null||u.remove(o.modelValue.id))},r=()=>j(this,null,function*(){var o;(yield it("确定要清空历史记录吗？"))&&((o=e.value)==null||o.clear())});return(o,u)=>(h(),k(s(Y),{class:"v-history-widget",title:"历史记录",subtitle:l.value,remove:!!s(a),onRemove:r},{default:y(()=>[s(a)===0?(h(),k(s(ve),{key:0,"image-size":50})):O("",!0),s(e)?(h(!0),B(M,{key:1},q(s(e).items,(d,c)=>(h(),k(s(be),{index:c+1,title:d.label,"model-value":d,active:c==s(e).index,small:"",background:"",actions:["remove"],onAction:n,onClick:m=>s(t)(d.id)},null,8,["index","title","model-value","active","onClick"]))),256)):O("",!0)]),_:1},8,["subtitle","remove"]))}}),hu=D({__name:"base-info",setup(i){const e=ar.map(t=>({label:t,value:t.toLowerCase()}));return(t,a)=>(h(),B("div",null,[f(s(N),{name:"method",label:"请求类型",required:"",editor:"radio",options:s(e)},null,8,["options"]),f(s(N),{name:"name",label:"接口名称",required:"",rules:{pattern:s(Fe),message:"名称格式不正确"}},null,8,["rules"]),f(s(N),{name:"label",label:"备注说明",required:""}),f(s(N),{name:"url",label:"接口URL",required:""})]))}}),ce=sa({loader:()=>Pi(()=>import("./Editor-Dtm2GYTx-CPDoLWQj.js"),__vite__mapDeps([0,1,2,3]),import.meta.url),loadingComponent:D({render(){return $e("div","正在拼命加载...")}}),errorComponent:D({render(){return $e("div","组件加载失败！")}})}),gu=D({__name:"request-settings",setup(i){const e=[{label:"表单",value:"form"},{label:"JSON",value:"json"},{label:"文件",value:"data"}],t=$t("currentModel",null);return(a,l)=>(h(),B("div",null,[f(s(Q),{justify:"space-between"},{default:y(()=>[f(s(N),{name:"settings.loading",size:"small",label:"加载提示",editor:"switch"}),f(s(N),{size:"small",name:"settings.failMessage",label:"失败提示",editor:"switch"}),f(s(N),{size:"small",name:"settings.validSuccess",label:"校验成功",editor:"switch"}),f(s(N),{size:"small",name:"settings.originResponse",label:"原始响应",editor:"switch"}),f(s(N),{size:"small",name:"settings.injectHeaders",label:"注入请求头",editor:"switch"})]),_:1}),f(s(N),{size:"small",name:"settings.type",label:"发送数据类型",editor:"radio",options:e,props:{button:!0}}),f(s(N),{size:"small",name:"headers.value",label:"请求头配置",tip:"支持 JSExpression 或 JSFunction"},{editor:y(()=>[f(s(ce),{dark:"",height:"260px",modelValue:s(t).headers.value,"onUpdate:modelValue":l[0]||(l[0]=n=>s(t).headers.value=n)},null,8,["modelValue"])]),_:1})]))}}),fu=D({__name:"jsonp-options",setup(i){return(e,t)=>(h(),B("div",null,[f(s(N),{name:"jsonpOptions.jsonpCallback",size:"small",label:"jsonpCallback"}),f(s(N),{name:"jsonpOptions.jsonpCallbackFunction",size:"small",label:"jsonpCallbackFunction"}),f(s(N),{name:"jsonpOptions.timeout",size:"small",label:"timeout",editor:"number"}),f(s(N),{name:"jsonpOptions.crossorigin",size:"small",label:"crossorigin",editor:"switch"})]))}}),bu=P("span",null,"模拟数据模板",-1),yu=D({__name:"mock-template",setup(i){const e=$t("currentModel",null),{project:t}=Ze(),a=V(()=>{var n;return((n=t.value)==null?void 0:n.config)||{}}),l=()=>{window.open("https://vtj.pro/help/mock.html")};return(n,r)=>(h(),B("div",null,[a.value.mock?O("",!0):(h(),k(s(hl),{key:0,type:"warning",title:"需要在项目配置中开启模拟数据",closable:!1,style:{"margin-bottom":"20px"}})),f(s(N),{size:"small",name:"mock",label:"开启模拟数据",disabled:!a.value.mock,editor:"switch"},null,8,["disabled"]),f(s(Q),{justify:"space-between"},{default:y(()=>[bu,f(s(Re),{icon:s(Sl),mode:"text",label:"帮助",onClick:l},null,8,["icon"])]),_:1}),f(s(N),{size:"small",name:"mockTemplate.value",label:" "},{editor:y(()=>[f(s(ce),{dark:"",height:a.value.mock?"330px":"280px",lang:"typescript",disabled:!a.value.mock,readonly:!a.value.mock,modelValue:s(e).mockTemplate.value,"onUpdate:modelValue":r[0]||(r[0]=o=>s(e).mockTemplate.value=o)},null,8,["height","disabled","readonly","modelValue"])]),_:1})]))}}),wu={key:0},ku=D({__name:"form",props:{model:{},project:{}},setup(i){const e=i,t=V(()=>e.model?"编辑API":"新增API"),a=S("base"),l=S(),n=S(),r=S(e.model||{}),o=S(!1),u=S(""),d=[{label:"基础信息",value:"base"},{label:"请求配置",value:"settings"},{label:"模拟数据",value:"mock"}];Ti("currentModel",r);const c=V(()=>{var b;return((b=r.value)==null?void 0:b.method)==="jsonp"});X(()=>e.model,b=>{r.value=Object.assign({},b||{}),a.value="base"},{immediate:!0}),X(a,()=>j(this,null,function*(){var b;(b=n.value)==null||b.formRef.validate(w=>j(this,null,function*(){w||(yield Te(),a.value="base")}))}));const m=()=>{var b;(b=l.value)==null||b.cancel()},p=()=>{var b;(b=n.value)==null||b.submit()},g=b=>j(this,null,function*(){var w,_,C;return(w=e.project)!=null&&w.existApiName(r.value.name,e.model?[r.value.id]:[])?(de(`API名称 [ ${r.value.name} ] 已存在`),!1):r.value.headers&&!he(r.value.headers,window)||r.value.mockTemplate&&!he(r.value.mockTemplate,window)?!1:((_=e.project)==null||_.setApi(r.value),(C=l.value)==null||C.close(),!0)}),v=()=>{if(r.value.mockTemplate){const b=ze(r.value.mockTemplate,{},!0),{url:w,method:_}=r.value,C=ft.mock(b({url:w,type:_}));u.value=JSON.stringify(C,null,2),o.value=!0}};return(b,w)=>(h(),k(s(Ye),{ref_key:"dialogRef",ref:l,title:t.value,width:"1000px",height:"600px"},{default:y(()=>[f(s(Q),{fit:""},{default:y(()=>[f(s(Q),{width:"100px",shrink:!1},{default:y(()=>[f(s(ka),{modelValue:a.value,"onUpdate:modelValue":w[0]||(w[0]=_=>a.value=_),items:d,"tab-position":"left",border:"",fit:""},null,8,["modelValue"])]),_:1}),f(s(Jt),{header:null,border:!1,overflow:"auto",grow:"",shrink:!0,fit:""},{footer:y(()=>[f(s(Q),{justify:"space-between"},{default:y(()=>{var _,C;return[P("div",null,[a.value==="mock"?(h(),k(s(me),{key:0,disabled:!((C=(_=e.project)==null?void 0:_.config)!=null&&C.mock),type:"warning",onClick:v},{default:y(()=>[ee(" 预览 ")]),_:1},8,["disabled"])):O("",!0)]),P("div",null,[f(s(me),{onClick:m},{default:y(()=>[ee("取消")]),_:1}),f(s(me),{type:"primary",onClick:p},{default:y(()=>[ee("保存")]),_:1})])]}),_:1})]),default:y(()=>[f(s(_a),{ref_key:"formRef",ref:n,footer:!1,labelPosition:"top",tooltipMessage:!1,model:r.value,submitMethod:g},{default:y(()=>[He(f(hu,null,null,512),[[Xe,a.value==="base"]]),a.value==="settings"?(h(),B("div",wu,[c.value?(h(),k(fu,{key:0})):(h(),k(gu,{key:1}))])):O("",!0),a.value==="mock"?(h(),k(yu,{key:1})):O("",!0)]),_:1},8,["model"])]),_:1})]),_:1}),o.value?(h(),k(s(vl),{key:0,class:"v-drawer",modelValue:o.value,"onUpdate:modelValue":w[1]||(w[1]=_=>o.value=_),title:"模拟数据结果",direction:"btt","append-to-body":"",size:"80%"},{default:y(()=>[f(s(ce),{"model-value":u.value,border:"",dark:"",height:"100%",lang:"json"},null,8,["model-value"])]),_:1},8,["modelValue"])):O("",!0)]),_:1},8,["title"]))}}),_u={class:"v-apis__search"},Su=D({name:"ApisWidget",__name:"index",setup(i){const e=S(!1),t=S(null),a=S(""),l=S(!1),n=V(()=>{var g;const p=((g=r.value)==null?void 0:g.apis)||[];return a.value?p.filter(v=>{var b;return v.name.includes(a.value)||((b=v.label)==null?void 0:b.includes(a.value))||v.url.includes(a.value)}):p}),{project:r}=Ze(),o=()=>({id:"",method:"get",name:"",label:"",url:"",settings:{loading:!0,failMessage:!0,validSuccess:!0,originResponse:!1,injectHeaders:!1,type:"form"},headers:{type:"JSExpression",value:"({})"},jsonpOptions:{},mock:!1,mockTemplate:{type:"JSFunction",value:`(req) => {
    return {
      code: 0,
      data: null
    }
  }`}}),u=()=>{e.value=!0,l.value=!1,t.value=o()},d={get:"success",post:"primary",put:"warning",delete:"danger",patch:"warning",jsonp:"info"},c=p=>{var g;p.name==="edit"&&m(p.modelValue),p.name==="remove"&&((g=r.value)==null||g.removeApi(p.modelValue.name))},m=p=>{l.value=!0,t.value=kt(p),e.value=!0};return(p,g)=>(h(),k(s(Y),{class:"v-apis-widget",title:"API管理",plus:"",onPlus:u},{default:y(()=>[P("div",_u,[f(s(Oe),{size:"small",modelValue:a.value,"onUpdate:modelValue":g[0]||(g[0]=v=>a.value=v),"prefix-icon":s(Sa),placeholder:"搜索API",clearable:""},null,8,["modelValue","prefix-icon"])]),(h(!0),B(M,null,q(n.value,v=>{var b;return h(),k(s(be),{key:v.id,small:"",title:v.name,subtitle:v.label,"model-value":v,tag:(b=v.method)==null?void 0:b.toUpperCase(),"tag-type":d[v.method||"get"],background:"",actions:["edit","remove"],onClick:w=>m(v),onAction:c},null,8,["title","subtitle","model-value","tag","tag-type","onClick"])}),128)),n.value.length===0?(h(),k(s(ve),{key:0,"image-size":50})):O("",!0),f(ku,{modelValue:e.value,"onUpdate:modelValue":g[1]||(g[1]=v=>e.value=v),model:t.value,project:s(r)},null,8,["modelValue","model","project"])]),_:1}))}}),xu=D({name:"DepsWidget",__name:"index",setup(i){const{dependencies:e,engine:t}=on(),a=S(!1),l=S(!1),n=S({}),r=V(()=>l.value?"查看依赖":n.value?"编辑依赖":"新增依赖"),o=v=>v.required||v.official?[]:["edit","remove"],u=v=>v.official&&!v.required,d=v=>j(this,null,function*(){var b;return v.urls=v.urls.split(`
`),(b=t.project.value)==null||b.setDeps(v),!0}),c=v=>{var b;(b=t.project.value)==null||b.setDeps(v)},m=()=>{l.value=!1,a.value=!0,n.value=null},p=v=>{l.value=!0,n.value=ae(L({},v),{urls:v.urls.join(`
`)}),a.value=!0},g=(v,b)=>{var w;b.name==="edit"&&(n.value=ae(L({},v),{urls:v.urls.join(`
`)}),l.value=!1,a.value=!0),b.name==="remove"&&((w=t.project.value)==null||w.removeDeps(v))};return(v,b)=>(h(),k(s(Y),{class:"v-deps-widget",title:"依赖管理",plus:"",onPlus:m},{default:y(()=>[(h(!0),B(M,null,q(s(e),w=>(h(),k(s(be),{key:w.package,title:w.package,subtitle:w.version,actions:o(w),background:"",switch:u(w),modelValue:w.enabled,"onUpdate:modelValue":_=>w.enabled=_,onSwitch:_=>c(w),onClick:_=>p(w),onAction:_=>g(w,_)},null,8,["title","subtitle","actions","switch","modelValue","onUpdate:modelValue","onSwitch","onClick","onAction"]))),128)),f(s(Le),{modelValue:a.value,"onUpdate:modelValue":b[0]||(b[0]=w=>a.value=w),width:"600px",height:"500px",title:r.value,model:n.value,submitMethod:d,formProps:{disabled:l.value,tooltipMessage:!1}},{default:y(()=>[f(s(N),{name:"package",label:"包名",required:"",disabled:!!n.value},null,8,["disabled"]),f(s(N),{name:"version",label:"版本",required:""}),f(s(N),{name:"library",label:"导出名称",required:""}),f(s(N),{name:"urls",label:"资源文件",editor:"textarea",props:{rows:3},tip:"多个资源可以换行输入",required:""}),f(s(N),{name:"assetsUrl",label:"物料URL"}),f(s(N),{name:"assetsLibrary",label:"物料名称"})]),_:1},8,["modelValue","title","model","formProps"])]),_:1}))}}),Cu=D({__name:"actions",props:{position:{},model:{},path:{default:()=>[]}},emits:["action","dragstart","dragend"],setup(i,{emit:e}){const t=i,a=e,l=V(()=>t.model.name),n=V(()=>!ue(t.model)&&!t.model.locked),r=V(()=>t.path.map(c=>({command:c,label:c.name,onMouseenter:()=>{a("action",{type:"hover",model:c})}}))),o=[{name:"move",icon:Ui,title:"移动",draggable:!0,onDragstart:()=>{a("dragstart",t.model)},onDragend:()=>{a("dragend",t.model)}},{name:"prev",icon:Ss,title:"向前移动"},{name:"next",icon:xs,title:"向后移动"},{name:"copy",icon:xl,title:"复制"},{name:"remove",icon:Nt,title:"删除"}],u=c=>{a("action",{type:"selected",model:c.command})},d=c=>j(this,null,function*(){c.name==="remove"?(yield it("确定删除?"))&&a("action",{type:c.name,model:t.model}):a("action",{type:c.name,model:t.model})});return(c,m)=>(h(),B("div",{class:Z(["v-actions",[`is-${t.position}`]])},[f(s(Re),{mode:"icon",size:"small",icon:s(_l),label:l.value,menus:r.value,background:"none",onCommand:u},null,8,["icon","label","menus"]),f(s(ks),{disabled:!n.value,mode:"icon",size:"small",items:o,background:"none",onClick:d},null,8,["disabled"])],2))}}),Vu={key:1,class:"v-designer__placeholder"},ju=D({name:"VDesigner",inheritAttrs:!1,__name:"index",setup(i,{expose:e}){const t=S(),a=S(),{width:l,height:n}=yt(t),{dependencies:r,engine:o,apis:u,meta:d}=on(),{current:c,isEmpty:m}=fe(),p=V(()=>{var H,E,T;return(T=(E=(H=o.skeleton)==null?void 0:H.getWidget("Toolbar"))==null?void 0:E.widgetRef.mode)!=null?T:"pc"}),g=V(()=>{var H;return((H=o.project.value)==null?void 0:H.config)||{}}),{designer:v,hover:b,dropping:w,selected:_}=or(a,r,u,d,g),C=H=>{var A,J,G,z,$,W;const E=H.type,T=H.model;if(c.value)switch(E){case"remove":c.value.removeNode(T),(A=v.value)==null||A.setSelected(null);break;case"copy":const te=c.value.cloneNode(T);(J=v.value)==null||J.setSelected(te);break;case"prev":c.value.movePrev(T),(G=v.value)==null||G.setSelected(T);break;case"next":c.value.moveNext(T),(z=v.value)==null||z.setSelected(T);break;case"hover":($=v.value)==null||$.setHover(T);break;case"selected":(W=v.value)==null||W.setSelected(T);break}},F=H=>{if(H&&v.value){const E=o.assets.componentMap.get(H.name);E&&v.value.setDragging(E),v.value.setDraggingNode(H)}},I=()=>{v.value&&(v.value.setDraggingNode(null),v.value.setDragging(null))};return e({designer:v,mode:p}),(H,E)=>(h(),B("div",{ref_key:"container",ref:t,class:"v-designer"},[f(s(mn),{mode:p.value,width:s(l),height:s(n)},{default:y(()=>[P("iframe",{ref_key:"iframe",ref:a,frameborder:"0"},null,512),s(w)?(h(),B("div",{key:0,class:Z(["v-designer__dropping","is-inner"]),style:Pt(s(w).style)},null,4)):O("",!0),s(b)?(h(),B("div",{key:1,class:"v-designer__hover",style:Pt(s(b).style)},[P("span",{class:Z(`is-${s(b).position}`)},[ee(U(s(b).model.name)+": ",1),P("i",null,U(s(b).model.id),1)],2)],4)):O("",!0),s(_)?(h(),B("div",{key:2,class:"v-designer__selected",style:Pt(s(_).style)},[f(Cu,{position:s(_).position,model:s(_).model,path:s(_).path,onAction:C,onDragstart:F,onDragend:I},null,8,["position","model","path"])],4)):O("",!0)]),_:1},8,["mode","width","height"]),s(c)?O("",!0):(h(),k(s(ve),{key:0,description:"请新建或打开文件"})),s(c)&&s(m)?(h(),B("div",Vu," 您可以拖拽组件放置到这里 ")):O("",!0)],512))}}),Ct=D({__name:"group",props:{context:{},current:{},title:{},nameLabel:{},valueLabel:{},createEmpty:{},list:{},remove:{},submit:{},itemTitle:{type:Function,default:i=>i.name}},setup(i){const e=i,t=S(),a=S(),l=S(!1),n=S(e.createEmpty()),r=S(!1),o=V(()=>r.value?`编辑${e.title}`:`新增${e.title}`),u=()=>{r.value=!1,n.value=e.createEmpty(),l.value=!0},d=(v,b)=>{switch(b.name){case"edit":m(v);break;case"remove":e.remove(v);break}},c=v=>{n.value.value=v},m=v=>{r.value=!0,n.value=L({},v),l.value=!0},p=v=>j(this,null,function*(){return e.submit(v,r.value)}),g=()=>{var v;(v=a.value)==null||v.itemRef.validate()};return(v,b)=>(h(),k(s(Y),{title:e.title,class:"v-sub-panel",size:"small",fit:!1,plus:"",onPlus:u},{default:y(()=>[(h(!0),B(M,null,q(v.list,w=>(h(),k(s(be),{title:e.itemTitle(w),border:"",actions:["edit","remove"],onAction:_=>d(w,_),onClick:_=>m(w)},null,8,["title","onAction","onClick"]))),256)),v.list.length?O("",!0):(h(),k(s(ve),{key:0,"image-size":40})),f(s(Ba),{modelValue:l.value,"onUpdate:modelValue":b[1]||(b[1]=w=>l.value=w),title:o.value,"submit-method":p,model:n.value,block:v.current,context:v.context,onPick:c},{default:y(()=>[Ne(v.$slots,"fields",Ol(Fl({model:n.value,isEdit:r.value,nameLabel:v.nameLabel,valueLabel:v.valueLabel})),()=>[f(s(N),{name:"name",label:v.nameLabel,required:"",disabled:r.value},null,8,["label","disabled"]),f(s(N),{class:"v-binder__editor",ref_key:"codeFieldRef",ref:a,name:"value",label:v.valueLabel,required:""},{editor:y(()=>[f(s(ce),{ref_key:"editorRef",ref:t,dark:"",height:"100%",modelValue:n.value.value,"onUpdate:modelValue":b[0]||(b[0]=w=>n.value.value=w),onBlur:g},null,8,["modelValue"])]),_:1},8,["label"])])]),_:3},8,["modelValue","title","model","block","context"])]),_:3},8,["title"]))}}),Au=D({__name:"state",props:{context:{},current:{}},setup(i){const e=i,t=V(()=>{var r;return Object.entries(((r=e.current)==null?void 0:r.state)||{}).map(([o,u])=>({name:o,value:st(u)}))}),a=()=>({name:"",value:""}),l=r=>{var o;return(o=e.current)==null?void 0:o.removeState(r.name)},n=(r,o)=>j(this,null,function*(){var m,p;const{name:u,value:d}=r;if(!o&&((m=e.current)!=null&&m.state[u]))return de(`名称 ${u} 已存在，请更换！`),!1;const c={type:"JSExpression",value:d};return he(c,e.context,!0)?((p=e.current)==null||p.setState(u,c),!0):!1});return(r,o)=>(h(),k(Ct,{title:"状态数据",current:e.current,context:e.context,list:t.value,nameLabel:"状态数据名称",valueLabel:"状态初始值 [ JSExpression ]",createEmpty:a,remove:l,submit:n},null,8,["current","context","list"]))}}),Eu=D({__name:"computed",props:{context:{},current:{}},setup(i){const e=i,t=V(()=>{var r;return Object.entries(((r=e.current)==null?void 0:r.computed)||{}).map(([o,u])=>({name:o,value:st(u)}))}),a=()=>({name:"",value:"() => { }"}),l=r=>{var o;return(o=e.current)==null?void 0:o.removeFunction("computed",r.name)},n=(r,o)=>j(this,null,function*(){var m,p;const{name:u,value:d}=r;if(!o&&((m=e.current)!=null&&m.computed[u]))return de(`名称 ${u} 已存在，请更换！`),!1;const c={type:"JSFunction",value:d};return he(c,e.context,!0)?((p=e.current)==null||p.setFunction("computed",u,c),!0):!1});return(r,o)=>(h(),k(Ct,{title:"计算属性",current:e.current,context:e.context,list:t.value,nameLabel:"计算属性名称",valueLabel:"计算函数 [ JSFunction ]",createEmpty:a,remove:l,submit:n},null,8,["current","context","list"]))}}),Pu=D({__name:"methods",props:{context:{},current:{}},setup(i){const e=i,t=V(()=>{var r;return Object.entries(((r=e.current)==null?void 0:r.methods)||{}).map(([o,u])=>({name:o,value:st(u)}))}),a=()=>({name:"",value:"() => { }"}),l=r=>{var o;return(o=e.current)==null?void 0:o.removeFunction("methods",r.name)},n=(r,o)=>j(this,null,function*(){var m,p;const{name:u,value:d}=r;if(!o&&((m=e.current)!=null&&m.methods[u]))return de(`名称 ${u} 已存在，请更换！`),!1;const c={type:"JSFunction",value:d};return he(c,e.context,!0)?((p=e.current)==null||p.setFunction("methods",u,c),!0):!1});return(r,o)=>(h(),k(Ct,{title:"组件方法",current:e.current,context:e.context,list:t.value,nameLabel:"方法名称",valueLabel:"方法函数 [ JSFunction ]",createEmpty:a,remove:l,submit:n},null,8,["current","context","list"]))}}),Ru=D({__name:"lifeCycles",props:{context:{},current:{}},setup(i){const e=i,t=V(()=>Yi.map(o=>({label:o,value:o}))),a=V(()=>{var o;return Object.entries(((o=e.current)==null?void 0:o.lifeCycles)||{}).map(([u,d])=>({name:u,value:st(d)}))}),l=()=>({name:"",value:"() => { }"}),n=o=>{var u;return(u=e.current)==null?void 0:u.removeFunction("lifeCycles",o.name)},r=(o,u)=>j(this,null,function*(){var p,g;const{name:d,value:c}=o;if(!u&&((p=e.current)!=null&&p.lifeCycles[d]))return de(`名称 ${d} 已存在，请更换！`),!1;const m={type:"JSFunction",value:c};return he(m,e.context,!0)?((g=e.current)==null||g.setFunction("lifeCycles",d,m),!0):!1});return(o,u)=>(h(),k(Ct,{title:"生命周期",current:e.current,context:e.context,list:a.value,nameLabel:"名称",valueLabel:"函数 [ JSFunction ]",createEmpty:l,remove:n,submit:r},{fields:y(({model:d,nameLabel:c,isEdit:m,valueLabel:p})=>[f(s(N),{name:"name",label:c,editor:"select",options:t.value,required:"",disabled:m},null,8,["label","options","disabled"]),f(s(N),{class:"v-binder__editor",name:"value",label:p,required:""},{editor:y(()=>[f(s(ce),{ref:"editorRef",dark:"",height:"100%",modelValue:d.value,"onUpdate:modelValue":g=>d.value=g},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"])]),_:1},8,["current","context","list"]))}}),Du=D({__name:"watch",props:{context:{},current:{}},setup(i){const e=i,t=V(()=>{var o;return(((o=e.current)==null?void 0:o.watch)||[]).map(u=>ae(L({},u),{source:st(u.source),handler:st(u.handler)}))}),a=()=>({source:"() => { }",deep:!1,immediate:!1,handler:"() => { }"}),l=o=>o.source,n=o=>{var u;return(u=e.current)==null?void 0:u.removeWatch(o)},r=(o,u)=>j(this,null,function*(){var p;const d={type:"JSFunction",value:o.source},c={type:"JSFunction",value:o.handler};if(!he(d,e.context,!0)||!he(c,e.context,!0))return!1;const m=ae(L({},o),{source:d,handler:c});return(p=e.current)==null||p.setWatch(m),!0});return(o,u)=>(h(),k(Ct,{title:"侦听器",current:e.current,context:e.context,list:t.value,nameLabel:"侦听源 [ JSFunction ]",valueLabel:"处理函数 [ JSFunction ]",createEmpty:a,remove:n,submit:r,itemTitle:l,grow:""},{fields:y(({model:d,nameLabel:c,valueLabel:m})=>[f(s(N),{class:"v-binder__editor",name:"source",label:c,required:""},{editor:y(()=>[f(s(ce),{dark:"",height:"100%",modelValue:d.source,"onUpdate:modelValue":p=>d.source=p},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"]),f(s(N),{class:"v-binder__editor",name:"handler",label:m,required:""},{editor:y(()=>[f(s(ce),{dark:"",height:"100%",modelValue:d.handler,"onUpdate:modelValue":p=>d.handler=p},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"]),f(s(N),{name:"deep",modelValue:d.deep,"onUpdate:modelValue":p=>d.deep=p,label:"深度监听",editor:"switch"},null,8,["modelValue","onUpdate:modelValue"]),f(s(N),{name:"immediate",modelValue:d.immediate,"onUpdate:modelValue":p=>d.immediate=p,label:"立即执行",editor:"switch"},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["current","context","list"]))}}),Bu=D({__name:"index",setup(i){const{current:e,context:t}=fe();return(a,l)=>(h(),k(s(Q),{class:"v-scripts-widget",direction:"column",fit:""},{default:y(()=>[f(Au,{current:s(e),context:s(t)},null,8,["current","context"]),f(Eu,{current:s(e),context:s(t)},null,8,["current","context"]),f(Pu,{current:s(e),context:s(t)},null,8,["current","context"]),f(Ru,{current:s(e),context:s(t)},null,8,["current","context"]),f(Du,{current:s(e),context:s(t)},null,8,["current","context"])]),_:1}))}}),ea=D({__name:"setters",props:{context:{},current:{},title:{},items:{},node:{},removable:{type:Boolean}},emits:["change","remove"],setup(i,{emit:e}){const t=i,a=e,l=(r,o)=>{a("change",r,o)},n=r=>{a("remove",r)};return(r,o)=>(h(),k(s(Y),{title:t.title,class:"v-sub-panel",size:"small",fit:!1},{default:y(()=>[f(s(Ae),{class:"v-properties-widget__form",size:"small","label-width":"90px",onKeydown:o[0]||(o[0]=Rt(ct(()=>{},["prevent","stop"]),["enter"]))},{default:y(()=>[(h(!0),B(M,null,q(t.items,u=>(h(),k(s(K),ge({ref_for:!0},u,{key:`${u.name}_${t.node.id}`,current:t.current,context:t.context,removable:t.removable,onChange:l,onRemove:n}),null,16,["current","context","removable"]))),128))]),_:1})]),_:1},8,["title"]))}}),Ou=D({name:"PropertiesWidget",__name:"index",setup(i){const{current:e,context:t}=fe(),{selected:a}=Ie(),{node:l,commonProps:n,change:r,componentProps:o,customProps:u,addCustom:d,removeCustom:c,isExist:m}=cr(a),p=S(!1),g=S(),v=()=>{p.value=!0,g.value={name:""}},b=_=>j(this,null,function*(){var F;const C=Object.keys(((F=l.value)==null?void 0:F.props)||{});return!m(_.name)&&!C.includes(_.name)?(d(_.name),!0):(de("已存在该属性名称"),!1)}),w=_=>j(this,null,function*(){(yield it("确定删除？"))&&c(_)});return(_,C)=>s(e)?(h(),k(s(Q),{key:0,class:"v-properties-widget",direction:"column",fit:""},{default:y(()=>[s(l)?(h(),k(ea,{key:0,title:"通用属性",current:s(e),context:s(t),node:s(l),items:s(n),onChange:s(r)},null,8,["current","context","node","items","onChange"])):O("",!0),s(l)&&s(o).length?(h(),k(ea,{key:1,title:"组件属性",current:s(e),context:s(t),node:s(l),items:s(o),onChange:s(r)},null,8,["current","context","node","items","onChange"])):O("",!0),s(l)?(h(),k(ea,{key:2,title:"自定义属性",current:s(e),context:s(t),node:s(l),items:s(u),onChange:s(r),removable:"",plus:"",grow:"",onPlus:v,onRemove:w},null,8,["current","context","node","items","onChange"])):O("",!0),f(s(Le),{modelValue:p.value,"onUpdate:modelValue":C[0]||(C[0]=F=>p.value=F),title:"新增自定义属性",width:"400px",height:"150px","submit-method":b,formProps:{tooltipMessage:!1},model:g.value},{default:y(()=>[f(s(N),{name:"name",label:"属性名称",required:"",rules:{message:"名称格式错误",pattern:s(Fe)}},null,8,["rules"])]),_:1},8,["modelValue","model"])]),_:1})):O("",!0)}}),Fu=D({name:"VariableBinder",__name:"variable",props:{context:{},current:{},value:{}},setup(i){const e=i,t=S(),a=St({type:"JSExpression",value:e.value}),l=n=>{t.value.getEditor().setValue(n),a.value=n};return(n,r)=>(h(),k(s(Ba),{title:"绑定变量","unbind-enabled":"",block:e.current,context:e.context,model:a,onPick:l},{default:y(()=>[f(s(N),{class:"v-binder__editor",name:"value",label:"绑定内容 [ JSExpression ]",required:""},{editor:y(()=>[f(s(ce),{ref_key:"editorRef",ref:t,modelValue:a.value,"onUpdate:modelValue":r[0]||(r[0]=o=>a.value=o),dark:"",height:"100%"},null,8,["modelValue"])]),_:1})]),_:1},8,["block","context","model"]))}}),Tu=D({name:"EventBinder",__name:"event",props:{context:{},current:{},name:{},event:{}},setup(i){var r,o,u;const e=i,t=S(),a=St(ae(L({name:e.name},e.event),{modifiers:Object.keys(((r=e.event)==null?void 0:r.modifiers)||{}),handler:{type:"JSFunction",value:((u=(o=e.event)==null?void 0:o.handler)==null?void 0:u.value)||"() => {}"}})),l=lr.map(d=>({label:d,value:d})),n=d=>{t.value.getEditor().setValue(d),a.handler.value=d};return(d,c)=>(h(),k(s(Ba),{title:"绑定事件","unbind-enabled":"",block:e.current,context:e.context,model:a,onPick:n},{default:y(()=>[f(s(N),{name:"modifiers",label:"事件修饰符",editor:"checkbox",options:s(l)},null,8,["options"]),f(s(N),{class:"v-binder__editor",name:"handler.value",label:"事件处理函数 [ JSFunction ]",required:""},{editor:y(()=>[f(s(ce),{ref_key:"editorRef",ref:t,modelValue:a.handler.value,"onUpdate:modelValue":c[0]||(c[0]=m=>a.handler.value=m),dark:"",height:"100%"},null,8,["modelValue"])]),_:1})]),_:1},8,["block","context","model"]))}}),zu=D({name:"EventsWidget",__name:"index",setup(i){const{current:e,context:t}=fe(),{selected:a}=Ie(),{mouseEventList:l,keyboardEventList:n,componentEventList:r}=pr(a),o=S({name:"",event:void 0}),u=S(!1),d=v=>{o.value=kt(v),u.value=!0},c=v=>j(this,null,function*(){var w;const b=ae(L({},v),{modifiers:v.modifiers.reduce((_,C)=>(_[C]=!0,_),{})});return he(b.handler,t.value,!0)?(((w=a.value)==null?void 0:w.model).setEvent(b),!0):!1}),m=v=>j(this,null,function*(){var w;const b=(w=a.value)==null?void 0:w.model;v.name&&(b.removeEvent(v.name),u.value=!1)}),p=()=>j(this,null,function*(){o.value.name&&(yield it("确定要删除该事件吗？"))&&m(o.value)}),g=v=>{const{name:b,modelValue:w}=v;b==="edit"&&d(w),b==="remove"&&m(w)};return(v,b)=>(h(),k(s(Q),{class:"v-events-widget",direction:"column",fit:""},{default:y(()=>[f(s(Y),{title:"组件事件",class:"v-sub-panel",size:"small",fit:!1},{default:y(()=>[s(r).length?O("",!0):(h(),k(s(ve),{key:0,"image-size":50,description:"该组件无自带事件"})),(h(!0),B(M,null,q(s(r),w=>(h(),k(s(be),{key:`component_${w.name}`,title:w.name,"model-value":w,border:"",small:"",actions:w.event?["edit","remove"]:["edit"],active:!!w.event,onClick:_=>d(w),onAction:g},null,8,["title","model-value","actions","active","onClick"]))),128))]),_:1}),f(s(Y),{title:"鼠标事件",class:"v-sub-panel",size:"small",fit:!1},{default:y(()=>[(h(!0),B(M,null,q(s(l),w=>(h(),k(s(be),{key:`mouse_${w.name}`,title:w.name,"model-value":w,border:"",small:"",actions:w.event?["edit","remove"]:["edit"],active:!!w.event,onClick:_=>d(w),onAction:g},null,8,["title","model-value","actions","active","onClick"]))),128))]),_:1}),f(s(Y),{title:"键盘事件",class:"v-sub-panel",size:"small",grow:"",fit:!1},{default:y(()=>[(h(!0),B(M,null,q(s(n),w=>(h(),k(s(be),{key:`keyboard_${w.name}`,title:w.name,"model-value":w,border:"",small:"",actions:w.event?["edit","remove"]:["edit"],active:!!w.event,onClick:_=>d(w),onAction:g},null,8,["title","model-value","actions","active","onClick"]))),128))]),_:1}),u.value?(h(),k(s(Tu),{key:0,modelValue:u.value,"onUpdate:modelValue":b[0]||(b[0]=w=>u.value=w),context:s(t),current:s(e),name:o.value.name,event:o.value.event,submitMethod:c,onUnbind:p},null,8,["modelValue","context","current","name","event"])):O("",!0)]),_:1}))}}),Iu=D({name:"CssWidget",__name:"index",setup(i){const{current:e}=fe(),t=S(),a=V(()=>{var r;return((r=e.value)==null?void 0:r.css)||""}),l=r=>{var o;(o=e.value)==null||o.setCss(r)},n=()=>{var o;const r=((o=t.value)==null?void 0:o.getEditor()).getValue();l(r),Se("保存成功")};return(r,o)=>(h(),k(s(Y),{class:"v-css-widget v-sub-panel",title:"lang:css scoped",size:"small",fit:"",save:"",onSave:n},{default:y(()=>[f(s(ce),{ref_key:"editorRef",ref:t,"model-value":a.value,height:"100%",lang:"css",dark:"",onBlur:l},null,8,["model-value"])]),_:1}))}}),Nu=D({name:"DirectivesWidget",__name:"index",setup(i){const{current:e,context:t}=fe(),{selected:a}=Ie(),{vIf:l,vShow:n,vBind:r,vFor:o,vModels:u,onValueChange:d,onForChange:c,onModelChange:m}=fr(a),p=g=>g.arg?typeof g.arg=="string"?g.arg:ze(g.arg,{}):"modelValue";return(g,v)=>(h(),k(s(Q),{class:"v-directives-widget",direction:"column",fit:""},{default:y(()=>[f(s(Y),{class:"v-sub-panel",title:"内置指令",size:"small",fit:!1},{default:y(()=>[f(s(Ae),{size:"small","label-width":"80px",onKeydown:v[0]||(v[0]=Rt(ct(()=>{},["prevent","stop"]),["enter"]))},{default:y(()=>[f(s(K),{name:"vIf",label:"v-if",setters:"ExpressionSetter",current:s(e),context:s(t),value:s(l).value,onChange:s(d)},null,8,["current","context","value","onChange"]),f(s(K),{name:"vShow",label:"v-show",setters:"ExpressionSetter",current:s(e),context:s(t),value:s(n).value,onChange:s(d)},null,8,["current","context","value","onChange"]),f(s(K),{name:"vBind",label:"v-bind",setters:"ExpressionSetter",current:s(e),context:s(t),value:s(r).value,onChange:s(d)},null,8,["current","context","value","onChange"])]),_:1})]),_:1}),f(s(Y),{class:"v-sub-panel",title:"循环",size:"small",fit:!1},{default:y(()=>[f(s(Ae),{size:"small","label-width":"80px",onKeydown:v[1]||(v[1]=Rt(ct(()=>{},["prevent","stop"]),["enter"]))},{default:y(()=>{var b,w;return[f(s(K),{name:"value",label:"循环数据",setters:"ExpressionSetter",current:s(e),context:s(t),value:s(o).value,onChange:s(c)},null,8,["current","context","value","onChange"]),f(s(K),{name:"item",label:"迭代变量名",setters:{name:"StringSetter",props:{placeholder:"item"}},current:s(e),context:s(t),value:(b=s(o).iterator)==null?void 0:b.item,onChange:s(c)},null,8,["current","context","value","onChange"]),f(s(K),{name:"index",label:"索引变量名",setters:{name:"StringSetter",props:{placeholder:"index"}},current:s(e),context:s(t),value:(w=s(o).iterator)==null?void 0:w.index,onChange:s(c)},null,8,["current","context","value","onChange"])]}),_:1})]),_:1}),f(s(Y),{class:"v-sub-panel",title:"双向绑定",size:"small",fit:!1,grow:""},{default:y(()=>[(h(!0),B(M,null,q(s(u),(b,w)=>(h(),k(s(Y),{card:"",border:"",class:"v-sub-panel",size:"small",title:`v-model: ${p(b)}`,body:{grow:!1},fit:!1},{default:y(()=>[f(s(Ae),{size:"small","label-width":"60px",onKeydown:v[2]||(v[2]=Rt(ct(()=>{},["prevent","stop"]),["enter"]))},{default:y(()=>[f(s(K),{name:w.toString(),label:"绑定变量",setters:"ExpressionSetter",current:s(e),context:s(t),value:b.value,onChange:s(m)},null,8,["name","current","context","value","onChange"])]),_:2},1024)]),_:2},1032,["title"]))),256)),s(u).length?O("",!0):(h(),k(s(ve),{key:0,description:"当前组件没有双向绑定属性","image-size":50}))]),_:1})]),_:1}))}}),Ju=D({name:"DefinedPropsDialog",__name:"props",props:{item:{},current:{},context:{}},setup(i){const e=i,t=V(()=>e.item?"编辑定义属性":"新增定义属性"),a=S(Object.assign({default:{type:"JSExpression",value:""}},e.item)),l=Object.keys(ql).map(r=>({label:r,value:r})),n=r=>j(this,null,function*(){const o=r.default;return o&&!he(o,e.context,!0)?!1:(e.current.setProp(r),!0)});return(r,o)=>(h(),k(s(Le),{title:t.value,width:"800px",height:"500px",model:a.value,"form-props":{tooltipMessage:!1},"submit-method":n},{default:y(()=>[f(s(N),{name:"name",label:"属性名称",required:"",tip:"名称为英文驼峰格式",disabled:!!e.item,rules:{message:"名称格式错误",pattern:s(Fe)}},null,8,["disabled","rules"]),f(s(N),{name:"type",label:"数据类型",editor:"checkbox",props:{button:!0,size:"small"},options:s(l),required:""},null,8,["options"]),f(s(N),{name:"required",label:"必须",editor:"switch"}),f(s(N),{name:"default.value",label:"默认值",editor:"none"},{default:y(()=>[f(s(ce),{modelValue:a.value.default.value,"onUpdate:modelValue":o[0]||(o[0]=u=>a.value.default.value=u),height:"200px",dark:""},null,8,["modelValue"])]),_:1})]),_:1},8,["title","model"]))}}),$u=D({name:"DefinedEventsDialog",__name:"events",props:{item:{},current:{},context:{}},setup(i){const e=i,t=V(()=>e.item?"编辑定义事件":"新增定义事件"),a=S(e.item),l=(r,o,u)=>{Array.isArray(o)?o.every(d=>Fe.test(d))?u():u(new Error("参数名称格式错误")):u(new Error("参数名称必须是数组形式"))},n=r=>j(this,null,function*(){return e.item&&e.current.removeEmit(e.item.name,!0),e.current.setEmit(r),!0});return(r,o)=>(h(),k(s(Le),{title:t.value,width:"600px",height:"200px",model:a.value,"form-props":{tooltipMessage:!1},"submit-method":n},{default:y(()=>[f(s(N),{name:"name",label:"事件名称",required:"",disabled:!!e.item,rules:{message:"名称格式错误",pattern:s(Fe)}},null,8,["disabled","rules"]),f(s(N),{name:"params",label:"参数",editor:"select",placeholder:"输入参数名称回车确定",options:[{label:"e",value:"e"},{label:"data",value:"data"},{label:"params",value:"params"},{label:"item",value:"item"},{label:"index",value:"index"}],props:{multiple:!0,filterable:!0,allowCreate:!0,defaultFirstOption:!0},rules:{validator:l}},null,8,["rules"])]),_:1},8,["title","model"]))}}),Lu=D({name:"DefinedSlotsDialog",__name:"slots",props:{item:{},current:{},context:{}},setup(i){const e=i,t=V(()=>e.item?"编辑定义插槽":"新增定义插槽"),a=S(e.item),l=(r,o,u)=>{Array.isArray(o)?o.every(d=>Fe.test(d))?u():u(new Error("参数名称格式错误")):u(new Error("参数名称必须是数组形式"))},n=r=>j(this,null,function*(){return e.item&&e.current.removeSlot(e.item.name,!0),e.current.setSlot(r),!0});return(r,o)=>(h(),k(s(Le),{title:t.value,width:"600px",height:"200px",model:a.value,"form-props":{tooltipMessage:!1},"submit-method":n},{default:y(()=>[f(s(N),{name:"name",label:"插槽名称",disabled:!!e.item,required:"",rules:{message:"名称格式错误",pattern:s(Fe)}},null,8,["disabled","rules"]),f(s(N),{name:"params",label:"参数",editor:"select",placeholder:"输入参数名称回车确定",options:[{label:"data",value:"data"},{label:"params",value:"params"},{label:"item",value:"item"},{label:"index",value:"index"}],props:{multiple:!0,filterable:!0,allowCreate:!0,defaultFirstOption:!0},rules:{validator:l}},null,8,["rules"])]),_:1},8,["title","model"]))}}),Wu=D({name:"DefinedInjectsDialog",__name:"injects",props:{item:{},current:{},context:{}},setup(i){const e=i,t=V(()=>e.item?"编辑注入":"新增注入"),a=S(Object.assign({default:{type:"JSExpression",value:""}},e.item)),l=n=>j(this,null,function*(){const r=n.default;return r&&!he(r,e.context,!0)?!1:(e.current.setInject(n),!0)});return(n,r)=>(h(),k(s(Le),{title:t.value,width:"800px",height:"500px",model:a.value,"form-props":{tooltipMessage:!1},"submit-method":l},{default:y(()=>[f(s(N),{name:"name",label:"注入名称",required:"",tip:"名称为英文驼峰格式",disabled:!!e.item,rules:{message:"名称格式错误",pattern:s(Fe)}},null,8,["disabled","rules"]),f(s(N),{name:"from",label:"来源名称",tip:"默认和注入名称一致"}),f(s(N),{name:"default.value",label:"默认值",editor:"none"},{default:y(()=>[f(s(ce),{modelValue:a.value.default.value,"onUpdate:modelValue":r[0]||(r[0]=o=>a.value.default.value=o),height:"200px",dark:""},null,8,["modelValue"])]),_:1})]),_:1},8,["title","model"]))}}),Mu=D({name:"DefinedWidget",__name:"index",setup(i){const{current:e,context:t}=fe(),a=V(()=>{var z;return(((z=e.value)==null?void 0:z.props)||[]).map($=>typeof $=="string"?{name:$}:$)}),l=V(()=>{var z;return(((z=e.value)==null?void 0:z.emits)||[]).map($=>typeof $=="string"?{name:$,params:[]}:$)}),n=V(()=>{var z;return(((z=e.value)==null?void 0:z.slots)||[]).map($=>typeof $=="string"?{name:$,params:[]}:$)}),r=V(()=>{var z;return((z=e.value)==null?void 0:z.inject)||[]}),o=S(!1),u=S(),d=S(!1),c=S(),m=S(!1),p=S(),g=S(!1),v=S(),b=()=>{u.value=void 0,o.value=!0},w=z=>{var te;const{name:$,modelValue:W}=z;$==="edit"&&_(W),$==="remove"&&((te=e.value)==null||te.removeProp(W))},_=z=>{u.value=z,o.value=!0},C=()=>{c.value=void 0,d.value=!0},F=z=>{c.value=L({},z),d.value=!0},I=z=>{var te;const{name:$,modelValue:W}=z;$==="edit"&&F(W),$==="remove"&&((te=e.value)==null||te.removeEmit(W.name))},H=()=>{p.value=void 0,m.value=!0},E=z=>{p.value=L({},z),m.value=!0},T=z=>{var te;const{name:$,modelValue:W}=z;$==="edit"&&E(W),$==="remove"&&((te=e.value)==null||te.removeSlot(W.name))},A=()=>{v.value=void 0,g.value=!0},J=z=>{v.value=z,g.value=!0},G=z=>{var te;const{name:$,modelValue:W}=z;$==="edit"&&J(W),$==="remove"&&((te=e.value)==null||te.removeInject(W))};return(z,$)=>s(e)&&s(t)?(h(),k(s(Q),{key:0,class:"v-defined-widget",direction:"column",fit:""},{default:y(()=>[f(s(Y),{class:"v-sub-panel",title:"定义属性",size:"small",plus:"",fit:!1,onPlus:b},{default:y(()=>[(h(!0),B(M,null,q(a.value,W=>(h(),k(s(be),{"model-value":W,title:W.name,border:"",actions:["edit","remove"],onClick:te=>_(W),onAction:w},null,8,["model-value","title","onClick"]))),256)),a.value.length?O("",!0):(h(),k(s(ve),{key:0,"image-size":50})),o.value?(h(),k(Ju,{key:1,current:s(e),context:s(t),modelValue:o.value,"onUpdate:modelValue":$[0]||($[0]=W=>o.value=W),item:u.value},null,8,["current","context","modelValue","item"])):O("",!0)]),_:1}),f(s(Y),{class:"v-sub-panel",title:"定义事件",size:"small",plus:"",fit:!1,onPlus:C},{default:y(()=>[(h(!0),B(M,null,q(l.value,W=>(h(),k(s(be),{"model-value":W,title:W.name,border:"",actions:["remove"],onClick:te=>F(W),onAction:I},null,8,["model-value","title","onClick"]))),256)),l.value.length?O("",!0):(h(),k(s(ve),{key:0,"image-size":50})),d.value?(h(),k($u,{key:1,modelValue:d.value,"onUpdate:modelValue":$[1]||($[1]=W=>d.value=W),current:s(e),context:s(t),item:c.value},null,8,["modelValue","current","context","item"])):O("",!0)]),_:1}),f(s(Y),{class:"v-sub-panel",title:"定义插槽",size:"small",plus:"",fit:!1,onPlus:H},{default:y(()=>[(h(!0),B(M,null,q(n.value,W=>(h(),k(s(be),{"model-value":W,title:W.name,border:"",actions:["remove"],onClick:te=>E(W),onAction:T},null,8,["model-value","title","onClick"]))),256)),n.value.length?O("",!0):(h(),k(s(ve),{key:0,"image-size":50})),m.value?(h(),k(Lu,{key:1,modelValue:m.value,"onUpdate:modelValue":$[2]||($[2]=W=>m.value=W),current:s(e),context:s(t),item:p.value},null,8,["modelValue","current","context","item"])):O("",!0)]),_:1}),f(s(Y),{class:"v-sub-panel",title:"注入",size:"small",plus:"",fit:!1,grow:"",onPlus:A},{default:y(()=>[(h(!0),B(M,null,q(r.value,W=>(h(),k(s(be),{"model-value":W,title:W.name,border:"",actions:["remove"],onClick:te=>J(W),onAction:G},null,8,["model-value","title","onClick"]))),256)),r.value.length?O("",!0):(h(),k(s(ve),{key:0,"image-size":50})),g.value?(h(),k(Wu,{key:1,modelValue:g.value,"onUpdate:modelValue":$[3]||($[3]=W=>g.value=W),current:s(e),context:s(t),item:v.value},null,8,["modelValue","current","context","item"])):O("",!0)]),_:1})]),_:1})):O("",!0)}}),Uu=D({name:"DataSourceDialogForm",__name:"form",props:{context:{},current:{},item:{}},setup(i){const e=i,t=[{label:"API",value:"api",border:!0},{label:"数据配置",value:"meta",border:!0},{label:"数据魔方",value:"cube",disabled:!0,border:!0}],{apis:a,meta:l}=br(),n=S(Object.assign({type:"api",ref:"",name:"",label:"",transform:{type:"JSFunction",value:`(res) => {
    return res;
}`},test:{type:"JSFunction",value:`() => this.runApi({
    /* 在这里可输入接口参数  */
})`}},e.item)),r=S(!1),o=S(""),u=S(!1),d=V(()=>n.value.type==="api"?a.value.map(b=>({label:b.label||"",value:b.id,data:b})):n.value.type==="meta"?l.value.map(b=>({label:b.title||"",value:b.id,data:b})):[]),c=V(()=>e.item?"编辑数据源":"新增数据源"),m=b=>{n.value.ref="",n.value.name="",n.value.label=""},p=b=>{if(n.value.type==="api"){const w=a.value.find(_=>_.id===b);w&&(n.value.name=w.name,n.value.label=w.label||"")}if(n.value.type==="meta"){const w=l.value.find(_=>_.id===b);w&&(n.value.name=w.code,n.value.label=w.title||"")}},g=b=>j(this,null,function*(){var F;const{transform:w,test:_,name:C}=b;if(!e.current)return!1;if(!e.item&&e.current.dataSources[C])return de(`名称【${C}】已经存在，请更换名称`),!1;if(w!=null&&w.value){if(!he(w,e.context,!0))return!1}else b.transform=void 0;if(_!=null&&_.value){if(!he(_,e.context,!0))return!1}else b.test=void 0;return(F=e.current)==null||F.setDataSource(b),!0}),v=()=>j(this,null,function*(){var C,F;if(!e.context)return;if(!n.value.ref){de("请先选择API");return}if(!((C=n.value.test)!=null&&C.value)){de("请先填写测试用例");return}if(!he(n.value.test,e.context,!0))return;const b=(...I)=>j(this,null,function*(){var E;const H=(E=e.context)==null?void 0:E.$apis[n.value.ref];if(H)return yield H.apply(H,I);xe.warn(`API【${n.value.ref}】不存在`)}),w=ze(n.value.test,{runApi:b}),_=(F=n.value.transform)!=null&&F.value?ze(n.value.transform,{},!0):I=>I;r.value=!0;try{const I=yield w();o.value=JSON.stringify(yield _(I),null,2)}catch(I){xe.error(I)}r.value=!1,u.value=!0});return(b,w)=>(h(),k(s(Le),{width:"1000px",height:"700px",title:c.value,model:n.value,"form-props":{tooltipMessage:!1},"submit-method":g},{extra:y(()=>[f(s(me),{loading:r.value,type:"warning",onClick:v},{default:y(()=>[ee(" 运行测试用例 ")]),_:1},8,["loading"])]),default:y(()=>[f(s(N),{name:"type",label:"数据类型",editor:"radio",options:t,required:"",disabled:!!e.item,onChange:m},null,8,["disabled"]),(h(),k(s(N),{name:"ref",label:"引用",editor:"select",key:n.value.type,required:"",disabled:!!e.item,options:d.value,props:{filterable:!0},onChange:p},{option:y(({option:_})=>[ee(U(_.label)+" ",1),P("i",null,"[ "+U(_.data.name||_.data.code)+" ]",1)]),_:1},8,["disabled","options"])),f(s(N),{name:"name",label:"调用名称",required:"",tip:"名称为英文驼峰格式",disabled:!!e.item,rules:{message:"名称格式错误",pattern:s(Fe)}},null,8,["disabled","rules"]),f(s(N),{name:"label",label:"备注说明",required:""}),f(s(N),{name:"transform.value",label:"转换函数",editor:"none"},{default:y(()=>[f(s(ce),{modelValue:n.value.transform.value,"onUpdate:modelValue":w[0]||(w[0]=_=>n.value.transform.value=_),height:"200px",dark:""},null,8,["modelValue"])]),_:1}),f(s(N),{name:"test.value",label:"测试用例",editor:"none"},{default:y(()=>[f(s(ce),{modelValue:n.value.test.value,"onUpdate:modelValue":w[1]||(w[1]=_=>n.value.test.value=_),height:"100px",dark:""},null,8,["modelValue"])]),_:1}),u.value?(h(),k(s(vl),{key:0,class:"v-drawer",modelValue:u.value,"onUpdate:modelValue":w[2]||(w[2]=_=>u.value=_),title:"测试用例运行结果",direction:"btt","append-to-body":"",size:"80%"},{default:y(()=>[f(s(ce),{"model-value":o.value,border:"",dark:"",height:"100%",lang:"json"},null,8,["model-value"])]),_:1},8,["modelValue"])):O("",!0)]),_:1},8,["title","model"]))}}),qu=D({name:"DataSourcesWidget",__name:"index",setup(i){const{current:e,context:t}=fe(),a=S(!1),l=S(),n=V(()=>{var c;return Object.values(((c=e.value)==null?void 0:c.dataSources)||{}).filter(m=>["meta","api"].includes(m.type))}),r=c=>({api:"primary",meta:"success",cube:"warning"})[c],o=()=>{l.value=void 0,a.value=!0},u=c=>{l.value=c,a.value=!0},d=c=>{var g;const{name:m,modelValue:p}=c;m==="edit"&&u(p),m==="remove"&&((g=e.value)==null||g.removeDataSource(p.name))};return(c,m)=>(h(),k(s(Q),{class:"v-data-sources-widget",direction:"column",fit:""},{default:y(()=>[f(s(Y),{title:"请求方法",class:"v-sub-panel",size:"small",plus:"",onPlus:o},{default:y(()=>[(h(!0),B(M,null,q(n.value,p=>(h(),k(s(be),{border:"",title:p.name,subtitle:p.label,"model-value":p,actions:["edit","remove"],tag:p.type.toUpperCase(),"tag-type":r(p.type),onAction:d,onClick:g=>u(p)},null,8,["title","subtitle","model-value","tag","tag-type","onClick"]))),256)),n.value.length?O("",!0):(h(),k(s(ve),{key:0,"image-size":50}))]),_:1}),a.value?(h(),k(Uu,{key:0,modelValue:a.value,"onUpdate:modelValue":m[0]||(m[0]=p=>a.value=p),current:s(e),context:s(t),item:l.value},null,8,["modelValue","current","context","item"])):O("",!0)]),_:1}))}}),Hu=D({__name:"layout",props:{styleJson:{},setStyle:{type:Function}},setup(i){const e=i,t=S();X(()=>e.styleJson.display,d=>{t.value=d==="flex"},{immediate:!0});const a=[{label:"block-块级布局",value:"block",svg:Cs},{label:"flex-弹性布局",value:"flex",svg:Vs},{label:"inline-block-行内块级布局",value:"inline-block",svg:js},{label:"inline-行内布局",value:"inline",svg:As},{label:"invisible-不可见",value:"none",svg:Es}],l=[{label:"row-水平",value:"row",svg:Ps},{label:"row-reverse-水平",value:"row-reverse",svg:Rs},{label:"column-垂直",value:"column",svg:Ds},{label:"column-reverse-垂直",value:"column-reverse",svg:Bs}],n=[{label:"flex-start",value:"flex-start",svg:Os},{label:"flex-end",value:"flex-end",svg:Fs},{label:"center",value:"center",svg:Ts},{label:"space-between",value:"space-between",svg:zs},{label:"space-around",value:"space-around",svg:Is}],r=[{label:"不换行",value:"nowrap"},{label:"正换行",value:"wrap"},{label:"逆换行",value:"wrap-reverse"}],o=[{label:"flex-start",value:"flex-start",svg:Ns},{label:"flex-end",value:"flex-end",svg:Js},{label:"center",value:"center",svg:$s},{label:"baseline",value:"baseline",svg:Ls},{label:"stretch",value:"stretch",svg:Ws}],u=(d,c)=>{t.value=c==="flex",e.setStyle("display",c),t.value||(e.setStyle("flex-direction",void 0),e.setStyle("justify-content",void 0),e.setStyle("align-items",void 0),e.setStyle("flex-wrap",void 0))};return(d,c)=>(h(),k(s(Y),{title:"布局",class:"v-sub-panel",size:"small",fit:!1,collapsable:""},{default:y(()=>[f(s(Ae),{size:"small","label-width":"80px"},{default:y(()=>[f(s(K),{name:"display",label:"排布",setters:{name:"TagSetter"},options:a,variable:!1,value:e.styleJson.display,onChange:u},null,8,["value"]),t.value?(h(),B(M,{key:0},[f(s(K),{name:"flex-direction",label:"主轴方向",setters:{name:"TagSetter"},options:l,variable:!1,value:e.styleJson["flex-direction"],onChange:e.setStyle},null,8,["value","onChange"]),f(s(K),{name:"justify-content",label:"主轴对齐",setters:{name:"TagSetter"},options:n,variable:!1,value:e.styleJson["justify-content"],onChange:e.setStyle},null,8,["value","onChange"]),f(s(K),{name:"align-items",label:"辅轴对齐",setters:{name:"TagSetter"},options:o,variable:!1,value:e.styleJson["align-items"],onChange:e.setStyle},null,8,["value","onChange"]),f(s(K),{name:"flex-wrap",label:"换行模式",setters:{name:"TagSetter"},options:r,variable:!1,value:e.styleJson["flex-wrap"],onChange:e.setStyle},null,8,["value","onChange"])],64)):O("",!0)]),_:1})]),_:1}))}}),Gu=D({name:"StyleWidget",__name:"JsonMode",setup(i){const{selected:e}=Ie(),t=S(),a=V(()=>{var u;const o=((u=e.value)==null?void 0:u.model)||null;return ue(o)?null:o}),l=V(()=>{var o;return JSON.stringify(((o=a.value)==null?void 0:o.getPropValue("style"))||{},null,2)}),n=o=>{var u;try{const d=JSON.parse(o);(u=a.value)==null||u.setProp("style",d)}catch(d){de("JSON格式错误")}},r=()=>{var u;const o=((u=t.value)==null?void 0:u.getEditor()).getValue();n(o),Se("保存成功")};return(o,u)=>(h(),k(s(Y),{class:"v-css-widget v-sub-panel",title:"JSON",size:"small",fit:"",save:"",onSave:r},{default:y(()=>[f(s(ce),{ref_key:"editorRef",ref:t,"model-value":l.value,height:"100%",lang:"json",dark:"",onBlur:n},null,8,["model-value"])]),_:1}))}}),Ku={class:"v-spacing-input"},Qu=P("div",{class:"v-spacing-input__modal"},null,-1),Xu={class:"v-spacing-input__content"},Yu=["onClick"],pn=D({__name:"spacing-input",props:{name:{},modelValue:{},auto:{type:Boolean}},emits:["close","update:modelValue","submit"],setup(i,{emit:e}){const t=[0,10,20,40,60,100,140,220],a=i,l=e,n=V(()=>a.auto||a.name.includes("margin")),r=S(),o=S(a.modelValue),u=S("px");Yr(r,()=>{l("close")});const d=g=>{o.value=typeof g=="number"?`${g}px`:"auto",c(o.value)},c=g=>{u.value=g==="auto"?void 0:"px"},m=()=>{o.value?(l("update:modelValue",o.value),l("submit",a.name,o.value),l("close")):de("请输入有效值","提示")},p=()=>{o.value=void 0,l("update:modelValue",o.value),l("submit",a.name,void 0),l("close")};return(g,v)=>(h(),B("div",Ku,[Qu,P("div",Xu,[f(s(Q),{class:"v-spacing-input__body",ref_key:"bodyRef",ref:r,direction:"column"},{default:y(()=>[f(s(Q),null,{default:y(()=>[f(s(Cl),{modelValue:o.value,"onUpdate:modelValue":v[0]||(v[0]=b=>o.value=b),size:"small","with-unit":!!u.value,unit:u.value,format:u.value?"0":void 0,onChange:c},null,8,["modelValue","with-unit","unit","format"])]),_:1}),f(s(Q),null,{default:y(()=>[n.value?(h(),k(s(Q),{key:0,class:"v-spacing-input__auto",width:"20%"},{default:y(()=>[P("span",{onClick:v[1]||(v[1]=b=>d("auto"))},"auto")]),_:1})):O("",!0),f(s(Q),{grow:"",class:"v-spacing-input__values",align:"center",wrap:"wrap"},{default:y(()=>[(h(),B(M,null,q(t,b=>P("span",{onClick:w=>d(b)},U(b),9,Yu)),64))]),_:1})]),_:1}),f(s(Q),null,{default:y(()=>[f(s(me),{size:"small",type:"primary",round:"",style:{width:"100%"},onClick:m},{default:y(()=>[ee(" 确定 ")]),_:1}),f(s(me),{size:"small",round:"",style:{width:"100%"},onClick:p},{default:y(()=>[ee(" 重置 ")]),_:1})]),_:1})]),_:1},512)])]))}}),Zu={class:"spacing-wrap"},ed={class:"spacing-max-icon"},td=["width","height"],ad=["d"],ld=["d"],nd=["d"],sd=["d"],id={id:"margin-outer"},od=["width","height"],rd=["width","height"],ud={id:"margin-inner"},dd=["width","height"],cd=["width","height"],md=["width","height"],pd=["d"],vd=["d"],hd=["d"],gd=["d"],fd={id:"padding-outer"},bd=["width","height"],yd=["width","height"],wd={id:"padding-inner"},kd=["width","height"],_d=["width","height"],Sd={xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",style:{"grid-area":"3 / 3 / span 3 / span 3","pointer-events":"none"}},xd=P("text",{x:"6",y:"4",fill:"#a6a6a6","font-style":"italic","font-weight":"bold","font-size":"8","dominant-baseline":"hanging"}," padding ",-1),Cd=[xd],Vd={xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",style:{"grid-area":"1 / 1 / -1 / -1","pointer-events":"none"}},jd=P("text",{x:"6",y:"4",fill:"#a6a6a6","font-style":"italic","font-weight":"bold","font-size":"8","dominant-baseline":"hanging"}," margin ",-1),Ad=[jd],se=36,ie=24,Ed=D({__name:"spacing",props:{styleJson:{},setStyle:{type:Function}},setup(i){const e=i,t=S(),a=S(),{width:l,height:n}=yt(t),{width:r,height:o}=yt(a),u=S(!1),d=S(),c=S(),m=()=>{u.value=!1,d.value=void 0,c.value=void 0},p=g=>{d.value=g,c.value=e.styleJson[g],u.value=!0};return(g,v)=>(h(),k(s(Y),{title:"间距",class:"v-sub-panel",size:"small",fit:!1,collapsable:""},{default:y(()=>[P("div",{class:"v-style-widget__spacing",ref_key:"container",ref:t},[P("div",Zu,[P("div",ed,[s(l)&&s(n)?(h(),B("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",width:s(l),height:s(n),style:{"grid-area":"1 / 1 / -1 / -1"}},[P("g",null,[P("g",null,[P("path",{mode:"delta",fill:"currentColor",d:`
              m1,1
              h${s(l)-1}
              l-${se},${ie}
              h-${s(l)-2*se}
              l-${se},-${ie}z`,"data-automation-id":"margin-top-button","aria-label":"Margin top button",class:"tb-path-color",onClick:v[0]||(v[0]=b=>p("margin-top"))},null,8,ad)])]),P("g",null,[P("g",null,[P("path",{mode:"delta",fill:"currentColor",d:`
              m${s(l)-1},1
              v${s(n)-1}
              l-${se},-${ie}
              v-${s(n)-2*ie}
              l${se},-${ie}z`,"data-automation-id":"margin-right-button","aria-label":"Margin right button",class:"lr-path-color",onClick:v[1]||(v[1]=b=>p("margin-right"))},null,8,ld)])]),P("g",null,[P("g",null,[P("path",{mode:"delta",fill:"currentColor",d:`
              m1,${s(n)-1}
              h${s(l)-1}
              l-${se},-${ie}
              h-${s(l)-2*se}
              l-${se},${ie}z`,"data-automation-id":"margin-bottom-button","aria-label":"Margin bottom button",class:"tb-path-color",onClick:v[2]||(v[2]=b=>p("margin-bottom"))},null,8,nd)])]),P("g",null,[P("g",null,[P("path",{mode:"delta",fill:"currentColor",d:`
              m1,1
              v${s(n)-1}
              l${se},-${ie}
              v-${s(n)-2*ie}
              l-${se},-${ie}z`,"data-automation-id":"margin-left-button","aria-label":"Margin left button",class:"lr-path-color",onClick:v[3]||(v[3]=b=>p("margin-left"))},null,8,sd)])]),P("clipPath",id,[P("rect",{x:"0",y:"0",width:s(l),height:s(n),fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none"}},null,8,od)]),P("rect",{class:"stroke","clip-path":"url(#margin-outer)",x:"0",y:"0",width:s(l),height:s(n),fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none","stroke-width":"2px"}},null,8,rd),P("clipPath",ud,[P("rect",{x:"36",y:"24",width:s(l)-2*se+1,height:s(n)-2*ie+1,fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none"}},null,8,dd)]),P("rect",{class:"stroke","clip-path":"url(#margin-inner)",x:"36",y:"24",width:s(l)-2*se+1,height:s(n)-2*ie+1,fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none","stroke-width":"2px"}},null,8,cd)],8,td)):O("",!0),P("div",{class:Z(["spacing-edit margin-top",{"is-setting":e.styleJson["margin-top"]}]),onClick:v[4]||(v[4]=b=>p("margin-top"))},U(e.styleJson["margin-top"]||"-"),3),P("div",{class:Z(["spacing-edit margin-right",{"is-setting":e.styleJson["margin-right"]}]),onClick:v[5]||(v[5]=b=>p("margin-right"))},U(e.styleJson["margin-right"]||"-"),3),P("div",{class:Z(["spacing-edit margin-bottom",{"is-setting":e.styleJson["margin-bottom"]}]),onClick:v[6]||(v[6]=b=>p("margin-bottom"))},U(e.styleJson["margin-bottom"]||"-"),3),P("div",{class:Z(["spacing-edit margin-left",{"is-setting":e.styleJson["margin-left"]}]),onClick:v[7]||(v[7]=b=>p("margin-left"))},U(e.styleJson["margin-left"]||"-"),3)]),P("div",{ref_key:"inner",ref:a,class:"spacing-min-icon"},[s(l)&&s(n)?(h(),B("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",width:s(r),height:s(o),style:{"grid-area":"1 / 1 / -1 / -1"}},[P("g",null,[P("g",null,[P("path",{mode:"delta",fill:"currentColor",d:`
              m1,1
              h${s(r)-1}
              l-${se},${ie}
              h-${s(r)-2*se}
              l-${se},-${ie}z`,"data-automation-id":"padding-top-button","aria-label":"Padding top button",class:"tb-path-color",onClick:v[8]||(v[8]=b=>p("padding-top"))},null,8,pd)])]),P("g",null,[P("g",null,[P("path",{mode:"delta",fill:"currentColor",d:`
              m${s(r)-1},1
              v${s(o)-1}
              l-${se},-${ie}
              v-${s(o)-2*ie}
              l${se},-${ie}z`,"data-automation-id":"padding-right-button","aria-label":"Padding right button",class:"lr-path-color",onClick:v[9]||(v[9]=b=>p("padding-right"))},null,8,vd)])]),P("g",null,[P("g",null,[P("path",{mode:"delta",fill:"currentColor",d:`
              m1,${s(o)-1}
              h${s(r)-1}
              l-${se},-${ie}
              h-${s(r)-2*se}
              l-${se},${ie}z`,"data-automation-id":"padding-bottom-button","aria-label":"Padding bottom button",class:"tb-path-color",onClick:v[10]||(v[10]=b=>p("padding-bottom"))},null,8,hd)])]),P("g",null,[P("g",null,[P("path",{mode:"delta",fill:"currentColor",d:`
              m1,1
              v${s(o)-1}
              l${se},-${ie}
              v-${s(o)-2*ie}
              l-${se},-${ie}z`,"data-automation-id":"padding-left-button","aria-label":"Padding left button",class:"lr-path-color",onClick:v[11]||(v[11]=b=>p("padding-left"))},null,8,gd)])]),P("clipPath",fd,[P("rect",{x:"0",y:"0",width:s(r),height:s(o),fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none"}},null,8,bd)]),P("rect",{class:"stroke","clip-path":"url(#padding-outer)",x:"0",y:"0",width:s(r),height:s(o),fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none","stroke-width":"2px"}},null,8,yd),P("clipPath",wd,[P("rect",{x:"36",y:"24",width:s(r)-2*se+1,height:s(o)-2*ie+1,fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none"}},null,8,kd)]),P("rect",{class:"stroke","clip-path":"url(#padding-inner)",x:"36",y:"24",width:s(r)-2*se+1,height:s(o)-2*ie+1,fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none","stroke-width":"2px"}},null,8,_d)],8,md)):O("",!0),P("div",{class:Z(["spacing-edit padding-top",{"is-setting":e.styleJson["padding-top"]}]),onClick:v[12]||(v[12]=b=>p("padding-top"))},U(e.styleJson["padding-top"]||"-"),3),P("div",{class:Z(["spacing-edit padding-right",{"is-setting":e.styleJson["padding-right"]}]),onClick:v[13]||(v[13]=b=>p("padding-right"))},U(e.styleJson["padding-right"]||"-"),3),P("div",{class:Z(["spacing-edit padding-bottom",{"is-setting":e.styleJson["padding-bottom"]}]),onClick:v[14]||(v[14]=b=>p("padding-bottom"))},U(e.styleJson["padding-bottom"]||"-"),3),P("div",{class:Z(["spacing-edit padding-left",{"is-setting":e.styleJson["padding-left"]}]),onClick:v[15]||(v[15]=b=>p("padding-left"))},U(e.styleJson["padding-left"]||"-"),3)],512),(h(),B("svg",Sd,Cd)),(h(),B("svg",Vd,Ad))]),u.value?(h(),k(pn,{key:0,name:d.value,modelValue:c.value,"onUpdate:modelValue":v[16]||(v[16]=b=>c.value=b),onClose:m,onSubmit:e.setStyle},null,8,["name","modelValue","onSubmit"])):O("",!0)],512)]),_:1}))}}),Pd=D({__name:"sizing",props:{styleJson:{},setStyle:{type:Function}},setup(i){const e=i,t=[{name:"width",label:"宽(W)",setter:"SizeSetter"},{name:"height",label:"高(H)",setter:"SizeSetter"},{name:"min-width",label:"最小宽",setter:"SizeSetter"},{name:"min-height",label:"最小高",setter:"SizeSetter"},{name:"max-width",label:"最大宽",setter:"SizeSetter"},{name:"max-height",label:"最大高",setter:"SizeSetter"},{name:"overflow",label:"溢出",setter:"SelectSetter",options:[{label:"自动",value:"auto"},{label:"隐藏",value:"hidden"},{label:"滚动",value:"scroll"},{label:"显示",value:"visible"}]},{name:"object-fit",label:"适应",setter:"SelectSetter",options:[{label:"填充",value:"fill"},{label:"适应",value:"contain"},{label:"覆盖",value:"cover"},{label:"拉伸",value:"scale-down"},{label:"原始",value:"none"}]}];return(a,l)=>(h(),k(s(Y),{title:"尺寸",class:"v-sub-panel v-",size:"small",fit:!1,collapsable:""},{default:y(()=>[f(s(Ae),{class:"v-style-widget__sizing",size:"small","label-width":"60px",inline:""},{default:y(()=>[(h(),B(M,null,q(t,n=>f(s(K),{name:n.name,label:n.label,setters:{name:n.setter},options:n.options,variable:!1,value:e.styleJson[n.name],onChange:a.setStyle},null,8,["name","label","setters","options","value","onChange"])),64))]),_:1})]),_:1}))}}),Rd={class:"v-style-widget__positioning"},Dd={class:"spacing-wrap"},Bd=["width","height"],Od=["d"],Fd=["d"],Td=["d"],zd=["d"],Id={id:"margin-outer"},Nd=["width","height"],Jd=["width","height"],$d={id:"margin-inner"},Ld=["width","height"],Wd=["width","height"],Ce=36,Ve=24,Md=D({__name:"positioning",props:{styleJson:{},setStyle:{type:Function}},setup(i){const e=i,t=S(),{width:a,height:l}=yt(t),n=S(!1),r=S(),o=S(),u=[{label:"静态",value:"static"},{label:"相对",value:"relative"},{label:"绝对",value:"absolute"},{label:"固定",value:"fixed"},{label:"粘性",value:"sticky"}],d=[{label:"左上",svg:Ms,value:"0% auto auto 0%"},{label:"右上",svg:Us,value:"0% 0% auto auto"},{label:"左下",svg:qs,value:"auto auto 0% 0%"},{label:"右下",svg:Hs,value:"auto 0% 0% auto"},{label:"左",svg:Gs,value:"0% auto 0% 0%"},{label:"右",svg:Ks,value:"0% 0% 0% auto"},{label:"上",svg:Qs,value:"auto 0% 0% 0%"},{label:"下",svg:Xs,value:"0% 0% auto 0%"},{label:"填充",svg:Ys,value:"0% 0% 0% 0%"}],c=V(()=>(e.styleJson.inset||"").split(" ")),m=g=>{r.value=g,o.value=e.styleJson[g],n.value=!0},p=()=>{n.value=!1,r.value=void 0,o.value=void 0};return(g,v)=>(h(),k(s(Y),{title:"定位",class:"v-sub-panel",size:"small",fit:!1,collapsable:""},{default:y(()=>[P("div",Rd,[f(s(Ae),{"label-width":"60px",size:"small"},{default:y(()=>[f(s(K),{name:"position",label:"定位",setters:{name:"SelectSetter"},options:u,variable:!1,value:e.styleJson.position,onChange:e.setStyle},null,8,["value","onChange"]),f(s(K),{name:"inset",label:" ",setters:{name:"TagSetter"},options:d,variable:!1,value:e.styleJson.inset,onChange:e.setStyle},null,8,["value","onChange"]),f(s(ml),{label:" "},{default:y(()=>[P("div",Dd,[P("div",{ref_key:"inner",ref:t,class:"spacing-min-icon"},[s(a)&&s(a)?(h(),B("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",width:s(a),height:s(l),style:{"grid-area":"1 / 1 / -1 / -1"}},[P("g",null,[P("g",null,[P("path",{mode:"delta",fill:"currentColor",d:`
              m1,1
              h${s(a)-1}
              l-${Ce},${Ve}
              h-${s(a)-2*Ce}
              l-${Ce},-${Ve}z`,"data-automation-id":"padding-top-button","aria-label":"Padding top button",class:"tb-path-color",onClick:v[0]||(v[0]=b=>m("top"))},null,8,Od)])]),P("g",null,[P("g",null,[P("path",{mode:"delta",fill:"currentColor",d:`
              m${s(a)-1},1
              v${s(l)-1}
              l-${Ce},-${Ve}
              v-${s(l)-2*Ve}
              l${Ce},-${Ve}z`,"data-automation-id":"padding-right-button","aria-label":"Padding right button",class:"lr-path-color",onClick:v[1]||(v[1]=b=>m("right"))},null,8,Fd)])]),P("g",null,[P("g",null,[P("path",{mode:"delta",fill:"currentColor",d:`
              m1,${s(l)-1}
              h${s(a)-1}
              l-${Ce},-${Ve}
              h-${s(a)-2*Ce}
              l-${Ce},${Ve}z`,"data-automation-id":"padding-bottom-button","aria-label":"Padding bottom button",class:"tb-path-color",onClick:v[2]||(v[2]=b=>m("bottom"))},null,8,Td)])]),P("g",null,[P("g",null,[P("path",{mode:"delta",fill:"currentColor",d:`
              m1,1
              v${s(l)-1}
              l${Ce},-${Ve}
              v-${s(l)-2*Ve}
              l-${Ce},-${Ve}z`,"data-automation-id":"padding-left-button","aria-label":"Padding left button",class:"lr-path-color",onClick:v[3]||(v[3]=b=>m("left"))},null,8,zd)])]),P("clipPath",Id,[P("rect",{x:"0",y:"0",width:s(a),height:s(l),fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none"}},null,8,Nd)]),P("rect",{class:"stroke","clip-path":"url(#margin-outer)",x:"0",y:"0",width:s(a),height:s(l),fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none","stroke-width":"2px"}},null,8,Jd),P("clipPath",$d,[P("rect",{x:"36",y:"24",width:s(a)-2*Ce+1,height:s(l)-2*Ve+1,fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none"}},null,8,Ld)]),P("rect",{class:"stroke","clip-path":"url(#margin-inner)",x:"36",y:"24",width:s(a)-2*Ce+1,height:s(l)-2*Ve+1,fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none","stroke-width":"2px"}},null,8,Wd)],8,Bd)):O("",!0),P("div",{class:Z(["spacing-edit padding-top",{"is-setting":e.styleJson.top}]),onClick:v[4]||(v[4]=b=>m("top"))},U(e.styleJson.top||c.value[0]||"-"),3),P("div",{class:Z(["spacing-edit padding-right",{"is-setting":e.styleJson.right}]),onClick:v[5]||(v[5]=b=>m("right"))},U(e.styleJson.right||c.value[1]||"-"),3),P("div",{class:Z(["spacing-edit padding-bottom",{"is-setting":e.styleJson.bottom}]),onClick:v[6]||(v[6]=b=>m("bottom"))},U(e.styleJson.bottom||c.value[2]||"-"),3),P("div",{class:Z(["spacing-edit padding-left",{"is-setting":e.styleJson.left}]),onClick:v[7]||(v[7]=b=>m("left"))},U(e.styleJson.left||c.value[3]||"-"),3)],512),n.value?(h(),k(pn,{key:0,auto:"",name:r.value,modelValue:o.value,"onUpdate:modelValue":v[8]||(v[8]=b=>o.value=b),onClose:p,onSubmit:e.setStyle},null,8,["name","modelValue","onSubmit"])):O("",!0)])]),_:1}),f(s(K),{name:"z-index",label:"层级",setters:{name:"NumberSetter"},variable:!1,value:e.styleJson["z-index"],onChange:e.setStyle},null,8,["value","onChange"])]),_:1})])]),_:1}))}}),Ud=D({__name:"texting",props:{styleJson:{},setStyle:{type:Function}},setup(i){const e=i,t=[{name:"font-size",label:"字号",setter:"SizeSetter"},{name:"font-family",label:"字体",setter:"SelectSetter",options:["Arial","Verdana","Georgia",'"Times New Roman"','"Microsoft YaHei"',"SimSun","SimHei","KaiTi","FangSong","STSong","STKaiti","STFangsong","STCaiyun","STHupo","STLiti","STXingkai","STXinwei","STXinwei","STZhongsong"]},{name:"line-height",label:"行高",setter:"SizeSetter"},{name:"font-weight",label:"字重",setter:"SelectSetter",options:[{label:"正常",value:"normal"},{label:"粗体",value:"bold"},{label:"更粗",value:"bolder"},{label:"更细",value:"lighter"}]}],a=[{label:"左",value:"left",svg:Zs},{label:"中",value:"center",svg:ei},{label:"右",value:"right",svg:ti},{label:"两端",value:"justify",svg:ai}],l=[{label:"正常",value:"normal",svg:li},{label:"斜体",value:"italic",svg:ni}],n=[{label:"无",value:"none",svg:Vl},{label:"下划线",value:"underline",svg:si},{label:"删除线",value:"line-through",svg:ii},{label:"上划线",value:"overline",svg:oi}];return(r,o)=>(h(),k(s(Y),{title:"文本",class:"v-sub-panel",size:"small",fit:!1,collapsable:""},{default:y(()=>[f(s(Ae),{class:"v-style-widget__texting",size:"small","label-width":"60px",inline:""},{default:y(()=>[(h(),B(M,null,q(t,u=>f(s(K),{name:u.name,label:u.label,setters:{name:u.setter},options:u.options,variable:!1,value:e.styleJson[u.name],onChange:r.setStyle},null,8,["name","label","setters","options","value","onChange"])),64))]),_:1}),f(s(Ae),{size:"small","label-width":"60px"},{default:y(()=>[f(s(K),{name:"color",label:"颜色",setters:{name:"ColorSetter"},variable:!1,value:e.styleJson.color,onChange:r.setStyle},null,8,["value","onChange"]),f(s(K),{name:"text-align",label:"对齐",setters:{name:"TagSetter"},variable:!1,options:a,value:e.styleJson["text-align"],onChange:r.setStyle},null,8,["value","onChange"]),f(s(K),{name:"font-style",label:"风格",setters:{name:"TagSetter"},variable:!1,options:l,value:e.styleJson["font-style"],onChange:r.setStyle},null,8,["value","onChange"]),f(s(K),{name:"text-decoration",label:"修饰",setters:{name:"TagSetter"},variable:!1,options:n,value:e.styleJson["text-decoration"],onChange:r.setStyle},null,8,["value","onChange"])]),_:1})]),_:1}))}}),qd=D({__name:"backgound",props:{styleJson:{},setStyle:{type:Function}},setup(i){const e=i,t=(u,d)=>{d?e.setStyle("background-image",`url(${d})`):e.setStyle("background-image",void 0)},a=u=>{var c;const d=/^url\(([\w\W]+)\)$/;return(c=u==null?void 0:u.match(d))==null?void 0:c[1]},l=[{label:"重复",value:"repeat",svg:ri},{label:"水平重复",value:"repeat-x",svg:ui},{label:"垂直重复",value:"repeat-y",svg:di},{label:"不重复",value:"no-repeat",svg:ci}],n=[{label:"固定",value:"fixed"},{label:"滚动",value:"scroll"}],r=[{label:"裁剪到填充",value:"padding-box"},{label:"裁剪到内容",value:"content-box"},{label:"裁剪到文字",value:"text"}],o=[{label:"自动",value:"auto"},{label:"长度",value:"length"},{label:"百分比",value:"percentage"},{label:"覆盖",value:"cover"},{label:"填充",value:"contain"}];return(u,d)=>(h(),k(s(Y),{title:"背景",class:"v-sub-panel",size:"small",fit:!1,collapsable:""},{default:y(()=>[f(s(Ae),{"label-width":"60px",size:"small"},{default:y(()=>[f(s(K),{name:"background-image",label:"图片",setters:{name:"ImageSetter"},variable:!1,value:a(e.styleJson["background-image"]),onChange:t},null,8,["value"]),f(s(K),{name:"background-color",label:"颜色",setters:{name:"ColorSetter"},variable:!1,value:e.styleJson["background-color"],onChange:e.setStyle},null,8,["value","onChange"]),f(s(K),{name:"background-repeat",label:"重复",setters:{name:"TagSetter"},variable:!1,value:e.styleJson["background-repeat"],options:l,onChange:e.setStyle},null,8,["value","onChange"]),f(s(K),{name:"background-attachment",label:"固定",setters:{name:"RadioSetter"},variable:!1,value:e.styleJson["background-attachment"],options:n,onChange:e.setStyle},null,8,["value","onChange"]),f(s(K),{name:"background-position",label:"位置",setters:{name:"SectionSetter",props:{sections:2}},variable:!1,value:e.styleJson["background-position"],onChange:e.setStyle},null,8,["value","onChange"]),f(s(K),{name:"background-size",label:"大小",setters:{name:"SelectSetter"},variable:!1,value:e.styleJson["background-size"],options:o,onChange:e.setStyle},null,8,["value","onChange"]),f(s(K),{name:"background-clip",label:"裁剪",setters:{name:"SelectSetter"},variable:!1,value:e.styleJson["background-clip"],options:r,onChange:e.setStyle},null,8,["value","onChange"])]),_:1})]),_:1}))}}),Hd=D({__name:"border",props:{styleJson:{},setStyle:{type:Function}},setup(i){const e=i,t=S("border"),a=[{label:"全边框",svg:mi,value:"border"},{label:"左边框",svg:pi,value:"border-left"},{label:"上边框",svg:vi,value:"border-top"},{label:"下边框",svg:hi,value:"border-bottom"},{label:"右边框",svg:gi,value:"border-right"}],l=[{label:"无",value:"none",svg:Vl},{label:"实线",value:"solid",svg:fi},{label:"虚线",value:"dashed",svg:bi},{label:"点线",value:"dotted",svg:yi}],n=(r,o)=>{t.value=o};return(r,o)=>(h(),k(s(Y),{title:"边框",class:"v-sub-panel",size:"small",fit:!1,collapsable:""},{default:y(()=>[f(s(Ae),{"label-width":"60px",size:"small"},{default:y(()=>[f(s(K),{name:"border-radius",label:"圆角",setters:{name:"SectionSetter",props:{sections:4}},variable:!1,value:e.styleJson["border-radius"],onChange:e.setStyle},null,8,["value","onChange"]),f(s(K),{name:"borders",label:"边框",setters:{name:"TagSetter"},variable:!1,options:a,value:t.value,onChange:n},null,8,["value"]),t.value?(h(),B(M,{key:0},[(h(),k(s(K),{name:`${t.value}-width`,key:`${t.value}-width`,label:"宽度",setters:{name:"SizeSetter"},variable:!1,value:e.styleJson[`${t.value}-width`],onChange:e.setStyle},null,8,["name","value","onChange"])),(h(),k(s(K),{name:`${t.value}-style`,key:`${t.value}-style`,label:"样式",setters:{name:"TagSetter"},options:l,variable:!1,value:e.styleJson[`${t.value}-style`],onChange:e.setStyle},null,8,["name","value","onChange"])),(h(),k(s(K),{name:`${t.value}-color`,key:`${t.value}-color`,label:"颜色",setters:{name:"ColorSetter"},variable:!1,value:e.styleJson[`${t.value}-color`],onChange:e.setStyle},null,8,["name","value","onChange"]))],64)):O("",!0)]),_:1})]),_:1}))}}),Gd=D({__name:"effect",props:{styleJson:{},setStyle:{type:Function}},setup(i){const e=i,t=[{label:"自动",value:"auto",svg:wi},{label:"Pointer",value:"pointer",svg:ki},{label:"NotAllowed",value:"not-allowed",svg:_i},{label:"无",value:"none",svg:Si}],a=[{label:"Basic",value:"var(--el-box-shadow)"},{label:"Light",value:"var(--el-box-shadow-light)"},{label:"Lighter",value:"var(--el-box-shadow-lighter)"},{label:"Dark",value:"var(--el-box-shadow-dark)"}],l=(r,o)=>{e.setStyle("opacity",o!==void 0?(Number(o)||0)/100:void 0)},n=()=>{var r;return Number((r=e.styleJson.opacity)!=null?r:1)*100};return(r,o)=>(h(),k(s(Y),{title:"效果",class:"v-sub-panel",size:"small",fit:!1,collapsable:""},{default:y(()=>[f(s(Ae),{"label-width":"60px",size:"small"},{default:y(()=>[f(s(K),{name:"opacity",label:"透明度",setters:{name:"SliderSetter"},variable:!1,value:n(),onChange:l},null,8,["value"]),f(s(K),{name:"box-shadow",label:"阴影",setters:{name:"SelectSetter"},variable:!1,options:a,value:e.styleJson["box-shadow"],onChange:e.setStyle},null,8,["value","onChange"]),f(s(K),{name:"cursor",label:"光标",setters:{name:"TagSetter"},variable:!1,options:t,value:e.styleJson.cursor,onChange:e.setStyle},null,8,["value","onChange"])]),_:1})]),_:1}))}}),Kd=D({name:"StyleWidget",__name:"index",props:{isStyleCodeMode:{type:Boolean}},setup(i){const e=i,{selected:t}=Ie(),a=V(()=>{var o;const r=((o=t.value)==null?void 0:o.model)||null;return ue(r)?null:r}),l=V(()=>{var r;return((r=a.value)==null?void 0:r.getPropValue("style"))||{}}),n=(r,o)=>{var d,c;const u=((d=a.value)==null?void 0:d.getPropValue("style"))||{};o!==void 0?u[r]=o:delete u[r],(c=a.value)==null||c.setProp("style",u)};return(r,o)=>{var u;return e.isStyleCodeMode?(h(),k(Gu,{key:0})):(h(),k(s(Q),{key:`widget-style-${(u=a.value)==null?void 0:u.id}`,class:"v-style-widget",direction:"column",fit:""},{default:y(()=>{var d,c,m,p,g,v,b,w;return[(h(),k(Hu,{key:`Layout${(d=a.value)==null?void 0:d.id}`,"style-json":l.value,setStyle:n},null,8,["style-json"])),(h(),k(Ed,{key:`Spacing${(c=a.value)==null?void 0:c.id}`,"style-json":l.value,setStyle:n},null,8,["style-json"])),(h(),k(Pd,{key:`Sizing${(m=a.value)==null?void 0:m.id}`,"style-json":l.value,setStyle:n},null,8,["style-json"])),(h(),k(Md,{key:`Positioning${(p=a.value)==null?void 0:p.id}`,"style-json":l.value,setStyle:n},null,8,["style-json"])),(h(),k(Ud,{key:`Texting${(g=a.value)==null?void 0:g.id}`,"style-json":l.value,setStyle:n},null,8,["style-json"])),(h(),k(qd,{key:`Backgound${(v=a.value)==null?void 0:v.id}`,"style-json":l.value,setStyle:n},null,8,["style-json"])),(h(),k(Hd,{key:`Border${(b=a.value)==null?void 0:b.id}`,"style-json":l.value,setStyle:n},null,8,["style-json"])),(h(),k(Gd,{key:`Effect${(w=a.value)==null?void 0:w.id}`,"style-json":l.value,setStyle:n},null,8,["style-json"]))]}),_:1}))}}}),Qd=["src"],Xd=D({name:"PreviewerWidget",__name:"index",props:{path:{type:Function}},setup(i,{expose:e}){const t=i,a=S(),l=S(Symbol()),{current:n,engine:r}=fe(),{width:o,height:u}=yt(a),d=V(()=>n.value&&t.path?t.path(n.value):null),c=V(()=>{var m,p,g;return(g=(p=(m=r.skeleton)==null?void 0:m.getWidget("Toolbar"))==null?void 0:p.widgetRef.mode)!=null?g:"pc"});return e({refresh:()=>{l.value=Symbol()}}),(m,p)=>(h(),B("div",{ref_key:"container",ref:a,class:"v-previewer",key:l.value},[f(s(mn),{mode:c.value,width:s(o),height:s(u)},{default:y(()=>[d.value?(h(),B("iframe",{key:0,ref:"iframe",frameborder:"0",src:d.value},null,8,Qd)):O("",!0)]),_:1},8,["mode","width","height"])]))}}),Yd=D({name:"NodePathWidget",inheritAttrs:!1,__name:"index",setup(i){const{selected:e,designer:t}=Ie(),a=V(()=>{var r;return(((r=e.value)==null?void 0:r.path)||[]).slice(0).reverse()}),l=r=>{var o;(o=t.value)==null||o.setSelected(r)},n=r=>{var o;(o=t.value)==null||o.setHover(r)};return(r,o)=>s(e)?(h(),k(s(Cn),{key:0,class:"v-nodepath-widget","separator-icon":s(Ni)},{default:y(()=>[(h(!0),B(M,null,q(a.value,u=>(h(),k(s(xn),{onClick:d=>l(u),onMouseover:d=>n(u)},{default:y(()=>[ee(U(u.name),1)]),_:2},1032,["onClick","onMouseover"]))),256))]),_:1},8,["separator-icon"])):O("",!0)}}),Zd=D({name:"SchemaWidget",__name:"index",setup(i){const{current:e}=fe(),t=S(),a=V(()=>{var r;return JSON.stringify(((r=e.value)==null?void 0:r.toDsl())||{},null,2)}),l=V(()=>e.value?e.value.name:""),n=()=>j(this,null,function*(){var o,u;const r=((o=t.value)==null?void 0:o.getEditor()).getValue();if(r&&(yield it("手动修改DSL有风险，可能导致页面无法加载，请确认您的操作无误。")))try{const d=JSON.parse(r);(u=e.value)==null||u.update(d),Se("保存成功")}catch(d){de(d==null?void 0:d.message)}});return(r,o)=>(h(),k(s(Y),{class:"v-schema-widget",title:l.value,subtitle:"手动修改DSL有风险，可能导致页面无法加载，请确认您的操作无误。",size:"small",fit:"",save:"",onSave:n},{default:y(()=>[f(s(ce),{ref_key:"editorRef",ref:t,"model-value":a.value,height:"100%",lang:"json",dark:""},null,8,["model-value"])]),_:1},8,["title"]))}}),ec=D({name:"SchemaWidget",__name:"index",setup(i){const{current:e,engine:t}=fe(),a=S(),l=S(""),n=V(()=>e.value?`$vtj/vue/${e.value.id}.vue`:""),r=V(()=>e.value?e.value.name:"");return X(e,o=>j(this,null,function*(){const u=t.project.value;u&&o?l.value=yield t.service.genVueContent(u.toDsl(),o.toDsl()):l.value=""}),{immediate:!0,deep:!0}),(o,u)=>(h(),k(s(Y),{class:"v-raw-widget",title:r.value,subtitle:n.value,size:"small",fit:""},{default:y(()=>[f(s(ce),{ref_key:"editorRef",ref:a,"model-value":l.value,height:"100%",lang:"html",dark:"",readonly:""},null,8,["model-value"])]),_:1},8,["title","subtitle"]))}}),tc=["src"],ac=D({name:"DocsWidget",__name:"index",props:{url:{default:"//vtj.pro/help/index.html"}},setup(i,{expose:e}){const t=i,a=S();let l=null;const n=S(Symbol()),r=()=>{n.value=Symbol()};_t(()=>{var u;l||(l=ol.service({target:(u=a.value)==null?void 0:u.$el}))}),Rl(()=>{o(),l=null});const o=()=>{l==null||l.close()};return e({refresh:r}),(u,d)=>(h(),k(s(Y),{class:"v-docs-widget",size:"small",fit:"",body:{padding:!1},header:!1,ref_key:"panel",ref:a},{default:y(()=>[(h(),B("iframe",{key:n.value,ref:"frame",src:t.url,onLoad:o},null,40,tc))]),_:1},512))}}),vn="data:image/png;base64,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",lc={class:"v-about-widget"},nc={class:"v-about-widget__logo"},sc=["src"],ic=P("div",{class:"v-about-widget__name"},"VTJ.PRO",-1),oc={class:"v-about-widget__version"},rc=D({name:"AboutWidget",__name:"index",setup(i){return(e,t)=>(h(),B("div",lc,[P("div",nc,[P("img",{src:s(vn)},null,8,sc)]),ic,P("div",oc,"版本："+U(s(Zo)),1)]))}}),uc=D({name:"ProjectConfigWidget",__name:"index",setup(i){const{project:e}=Ze(),t=a=>{var l;(l=e.value)==null||l.setConfig(a)};return(a,l)=>(h(),k(s(Y),{class:"v-project-config-widget",title:"项目配置"},{default:y(()=>[s(e)?(h(),k(s(_a),{key:0,footer:!1,size:"small","label-position":"top",model:s(e).config,onChange:t},{default:y(()=>[f(s(N),{label:"站点名称",name:"title"}),f(s(N),{label:"Logo",name:"logo",editor:Oa,props:{attachment:{accept:".png,.jpg,.jpeg"}}}),f(s(N),{label:"主题切换",name:"themeSwitchable",editor:"switch"}),f(s(N),{label:"模拟数据",name:"mock",editor:"switch"})]),_:1},8,["model"])):O("",!0)]),_:1}))}}),ne={Logo:_r,EmptyWidget:xr,Switcher:jr,Toolbar:Er,Actions:Dr,Pages:iu,Blocks:ru,Components:mu,Outline:pu,History:vu,Apis:Su,Deps:xu,Designer:ju,Scripts:Bu,Properties:Ou,Events:zu,Css:Iu,Directives:Nu,Defined:Mu,DataSources:qu,Style:Kd,Previewer:Xd,NodePath:Yd,Schema:Zd,Raw:ec,Docs:ac,About:rc,ProjectConfig:uc},dc=[{name:"Logo",region:"Brand",component:ne.Logo},{name:"Switcher",region:"Brand",component:ne.Switcher},{name:"Toolbar",region:"Toolbar",component:ne.Toolbar},{name:"Actions",region:"Actions",component:ne.Actions},{name:"Pages",region:"Apps",component:ne.Pages,type:"app",openType:"panel",icon:Zn,label:"页面管理"},{name:"Blocks",region:"Apps",component:ne.Blocks,type:"app",openType:"panel",icon:es,label:"区块管理"},{name:"Components",region:"Apps",component:ne.Components,type:"app",openType:"panel",icon:ts,label:"组件库"},{name:"Outline",region:"Apps",component:ne.Outline,type:"app",openType:"panel",icon:as,label:"大纲树"},{name:"History",region:"Apps",component:ne.History,type:"app",openType:"panel",icon:ls,label:"历史记录"},{name:"Apis",region:"Apps",component:ne.Apis,type:"app",openType:"panel",icon:ns,label:"API管理"},{name:"Deps",region:"Apps",component:ne.Deps,type:"app",openType:"panel",icon:ss,label:"依赖管理"},{name:"ProjectConfig",region:"Apps",component:ne.ProjectConfig,type:"app",openType:"panel",icon:gl,label:"项目配置"},{name:"About",region:"Apps",component:ne.About,type:"app",openType:"dialog",icon:is,label:"关于",props:{width:500,height:300}},{name:"Designer",region:"Workspace",component:ne.Designer,type:"tab",closable:!1,label:"设计视图"},{name:"Previewer",region:"Preview",component:ne.Previewer,type:"tab",closable:!1,label:"预览视图"},{name:"Schema",region:"Workspace",component:ne.Schema,type:"tab",closable:!0,label:"DSL视图"},{name:"Raw",region:"Workspace",component:ne.Raw,type:"tab",closable:!0,label:"源码视图"},{name:"Docs",region:"Workspace",component:ne.Docs,type:"tab",closable:!0,label:"帮助中心",actions:[{icon:ia(Ii),type:"info",name:"home"}]},{name:"Scripts",region:"Settings",component:ne.Scripts,type:"tab",group:Ee.Block,label:"设置"},{name:"Css",region:"Settings",component:ne.Css,type:"tab",group:Ee.Block,label:"CSS"},{name:"DataSources",region:"Settings",component:ne.DataSources,type:"tab",group:Ee.Block,label:"数据源"},{name:"Defined",region:"Settings",component:ne.Defined,type:"tab",group:Ee.Block,label:"定义"},{name:"Properties",region:"Settings",component:ne.Properties,type:"tab",group:Ee.Node,label:"属性"},{name:"Style",region:"Settings",component:ne.Style,type:"tab",group:Ee.Node,label:"样式"},{name:"Events",region:"Settings",component:ne.Events,type:"tab",group:Ee.Node,label:"事件"},{name:"Directives",region:"Settings",component:ne.Directives,type:"tab",group:Ee.Node,label:"指令"},{name:"NodePath",region:"Status",component:ne.NodePath}],cc=[{package:"vue",version:"latest",library:"Vue",urls:["@vtj/materials/deps/vue/vue.global.prod.js"],assetsLibrary:Nl,required:!0,official:!0,enabled:!0},{package:"vue-router",version:"latest",library:"VueRouter",urls:["@vtj/materials/deps/vue-router/vue-router.global.prod.js"],assetsLibrary:Jl,required:!0,official:!0,enabled:!0},{package:"@vtj/utils",version:"latest",library:"VtjUtils",urls:["@vtj/materials/deps/@vtj/utils/index.umd.js"],required:!0,official:!0,enabled:!0},{package:"@vtj/icons",version:"latest",library:"VtjIcons",urls:["@vtj/materials/deps/@vtj/icons/style.css","@vtj/materials/deps/@vtj/icons/index.umd.js"],required:!0,official:!0,enabled:!0},{package:"@vueuse/core",version:"latest",library:"VueUse",urls:["@vtj/materials/deps/@vueuse/shared/index.iife.min.js","@vtj/materials/deps/@vueuse/core/index.iife.min.js"],required:!1,official:!0,enabled:!0},{package:"element-plus",version:"latest",library:"ElementPlus",localeLibrary:"ElementPlusLocaleZhCn",urls:["@vtj/materials/deps/element-plus/dark/css-vars.css","@vtj/materials/deps/element-plus/index.css","@vtj/materials/deps/element-plus/zh-cn.js","@vtj/materials/deps/element-plus/index.full.min.js"],assetsUrl:"@vtj/materials/assets/element/index.umd.js",assetsLibrary:"ElementPlusMaterial",required:!1,official:!0,enabled:!0},{package:"@vtj/ui",version:"latest",library:"VtjUI",urls:["@vtj/materials/deps/@vtj/ui/style.css","@vtj/materials/deps/@vtj/ui/index.umd.js"],assetsUrl:"@vtj/materials/assets/ui/index.umd.js",assetsLibrary:"VtjUIMaterial",required:!1,official:!0,enabled:!0},{package:"@vtj/charts",version:"latest",library:"VtjCharts",urls:["@vtj/materials/deps/echarts/echarts.min.js","@vtj/materials/deps/@vtj/charts/index.umd.js"],assetsUrl:"@vtj/materials/assets/charts/index.umd.js",assetsLibrary:"VtjChartsMaterial",required:!1,official:!0,enabled:!0},{package:"ant-design-vue",version:"latest",library:"antd",urls:["@vtj/materials/deps/ant-design-vue/reset.css","@vtj/materials/deps/ant-design-vue/dayjs/dayjs.min.js","@vtj/materials/deps/ant-design-vue/dayjs/plugin/customParseFormat.js","@vtj/materials/deps/ant-design-vue/dayjs/plugin/weekday.js","@vtj/materials/deps/ant-design-vue/dayjs/plugin/localeData.js","@vtj/materials/deps/ant-design-vue/dayjs/plugin/weekOfYear.js","@vtj/materials/deps/ant-design-vue/dayjs/plugin/weekYear.js","@vtj/materials/deps/ant-design-vue/dayjs/plugin/advancedFormat.js","@vtj/materials/deps/ant-design-vue/dayjs/plugin/quarterOfYear.js","@vtj/materials/deps/ant-design-vue/antd.min.js"],assetsUrl:"@vtj/materials/assets/antdv/index.umd.js",assetsLibrary:"AntdvMaterial",required:!1,official:!0,enabled:!1}],mc=[{id:"html",category:"HTML"},{id:"elements",category:"特殊元素"},{id:"components",category:"内置组件"}],pc=[{name:"div",label:"容器",categoryId:"html",snippet:{children:"容器文本内容示例"}},{name:"span",label:"内联",categoryId:"html",snippet:{children:"内联容器文本内容示例"}},{name:"a",label:"链接",categoryId:"html",props:[{name:"href",label:"href",setters:"InputSetter"}],snippet:{children:"链接文本内容示例",props:{href:"#"}}},{name:"img",label:"图片",categoryId:"html",childIncludes:!1,props:[{name:"src",label:"src",setters:"InputSetter"},{name:"width",label:"width",setters:"InputSetter"},{name:"height",label:"height",setters:"InputSetter"}],snippet:{props:{src:vn,width:"200",height:"200"}}},{name:"h1",label:"大标题",categoryId:"html",snippet:{children:"标题"}},{name:"h2",label:"中标题",categoryId:"html",snippet:{children:"标题"}},{name:"h3",label:"小标题",categoryId:"html",snippet:{children:"标题"}},{name:"p",label:"段落",categoryId:"html",snippet:{children:"段落文本"}},{name:"component",label:"动态组件",categoryId:"elements",doc:"https://cn.vuejs.org/api/built-in-special-elements.html#component",props:[{name:"is",label:"组件名",setters:"InputSetter"}],snippet:{children:"组件文本内容示例",props:{is:"div"}}},{name:"slot",label:"插槽",categoryId:"elements",doc:"https://cn.vuejs.org/api/built-in-special-elements.html#slot",props:[{name:"name",label:"名称",defaultValue:"default",setters:"InputSetter"}],snippet:{children:"默认插槽内容"}}],vc=[...pc,{name:"Transition",label:"过渡效果",categoryId:"components",doc:"https://cn.vuejs.org/api/built-in-components.html#transition",package:"vue",props:[{name:"name",label:"名称",defaultValue:"",title:"用于自动生成过渡 CSS class 名",setters:"InputSetter"},{name:"css",label:"应用CSS",defaultValue:!0,title:"是否应用 CSS 过渡 class",setters:"BooleanSetter"},{name:"type",label:"事件类型",defaultValue:void 0,title:"指定要等待的过渡事件类型来确定过渡结束的时间，默认情况下会自动检测持续时间较长的类型",setters:"SelectSetter",options:["transition","animation"]},{name:"duration",label:"持续时间",defaultValue:void 0,title:"显式指定过渡的持续时间",setters:["NumberSetter","JSONSetter"]},{name:"mode",label:"时序",defaultValue:"default",title:"控制离开/进入过渡的时序。",setters:"SelectSetter",options:["in-out","out-in","default"]},{name:"appear",label:"使用过渡",defaultValue:!1,title:"是否对初始渲染使用过渡",setters:"BooleanSetter"},{name:"enterFromClass",label:"enterFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"enterActiveClass",label:"enterActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"enterToClass",label:"enterToClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearFromClass",label:"appearFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearActiveClass",label:"appearActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearToClass",label:"appearToClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveFromClass",label:"leaveFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveActiveClass",label:"leaveActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveToClass",label:"leaveToClass",defaultValue:void 0,setters:"InputSetter"}],events:["before-enter","before-leave","enter","leave","appear","after-enter","after-leave","after-appear","enter-cancelled","leave-cancelled","ppear-cancelled"],snippet:{children:"Transition"}},{name:"TransitionGroup",label:"过渡效果组",categoryId:"components",doc:"https://cn.vuejs.org/api/built-in-components.html#transitiongroup",package:"vue",props:[{name:"name",label:"名称",defaultValue:"",title:"用于自动生成过渡 CSS class 名",setters:"InputSetter"},{name:"tag",label:"标签名",defaultValue:void 0,title:"如果未定义，则渲染为片段 (fragment)",setters:"InputSetter"},{name:"moveClass",label:"moveClass",defaultValue:void 0,title:"用于自定义过渡期间被应用的 CSS class。",setters:"InputSetter"},{name:"css",label:"应用CSS",defaultValue:!0,title:"是否应用 CSS 过渡 class",setters:"BooleanSetter"},{name:"type",label:"事件类型",defaultValue:void 0,title:"指定要等待的过渡事件类型来确定过渡结束的时间，默认情况下会自动检测持续时间较长的类型",setters:"SelectSetter",options:["transition","animation"]},{name:"duration",label:"持续时间",defaultValue:void 0,title:"显式指定过渡的持续时间",setters:["NumberSetter","JSONSetter"]},{name:"appear",label:"使用过渡",defaultValue:!1,title:"是否对初始渲染使用过渡",setters:"BooleanSetter"},{name:"enterFromClass",label:"enterFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"enterActiveClass",label:"enterActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"enterToClass",label:"enterToClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearFromClass",label:"appearFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearActiveClass",label:"appearActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearToClass",label:"appearToClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveFromClass",label:"leaveFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveActiveClass",label:"leaveActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveToClass",label:"leaveToClass",defaultValue:void 0,setters:"InputSetter"}],events:["before-enter","before-leave","enter","leave","appear","after-enter","after-leave","after-appear","enter-cancelled","leave-cancelled","ppear-cancelled"],snippet:{children:"TransitionGroup"}},{name:"KeepAlive",label:"缓存切换组件",categoryId:"components",doc:"https://cn.vuejs.org/api/built-in-components.html#keepalive",package:"vue",props:[{name:"include",label:"匹配包含",title:"如果指定，则只有与 `include` 名称, 匹配的组件才会被缓存。",setters:["InputSetter","JSONSetter"]},{name:"exclude",label:"匹配排除",title:"任何名称与 `exclude` 匹配的组件都不会被缓存。",setters:["InputSetter","JSONSetter"]},{name:"max",label:"最大缓存数",title:"最多可以缓存多少组件实例。",setters:["InputSetter"]}]},{name:"Teleport",label:"传送组件",categoryId:"components",doc:"https://cn.vuejs.org/api/built-in-components.html#teleport",package:"vue",props:[{name:"to",label:"目标容器",title:"指定目标容器,可以是选择器或实际元素",setters:["InputSetter"]},{name:"disabled",label:"禁用",title:"当值为 `true` 时，内容将保留在其原始位置, 而不是移动到目标容器中, 可以动态更改",setters:["BooleanSetter"]}]},{name:"Suspense",label:"异步依赖",categoryId:"components",doc:"https://cn.vuejs.org/api/built-in-components.html#suspense",package:"vue",props:[{name:"timeout",label:"timeout",setters:["InputSetter"]}]},{name:"RouterLink",label:"路由链接",categoryId:"components",doc:"https://router.vuejs.org/zh/api/interfaces/RouterLinkProps.html",package:"vue-router",props:[{name:"to",label:"to",setters:["InputSetter"]},{name:"replace",label:"replace",setters:["BooleanSetter"]}],snippet:{children:"RouterLink",props:{to:"/"}}}],hc=[{name:da,version:"latest",label:"内置",library:da,order:0,categories:mc,components:vc}],gc=D({name:"StringSetter",__name:"string",setup(i){return(e,t)=>(h(),k(s(Oe),ge({clearable:""},e.$attrs),null,16))}}),fc=D({name:"BooleanSetter",__name:"boolean",setup(i){return(e,t)=>(h(),k(s(pl),ge(e.$attrs,{"model-value":!!e.$attrs.modelValue}),null,16,["model-value"]))}}),bc="{{",yc="}}",wc=D({name:"ExpressionSetter",__name:"expression",props:{modelValue:{},context:{}},emits:["change"],setup(i,{emit:e}){const t=(u="")=>({type:"JSExpression",value:ye(u)?u.value:u}),a=i,l=e,n=u=>he(u,a.context,!0),r=S(t(a.modelValue).value);X(()=>a.modelValue,u=>{r.value=t(u).value},{immediate:!0});const o=u=>{const d={type:"JSExpression",value:u};n(d)&&l("change",d)};return(u,d)=>(h(),k(s(Oe),{class:"v-expression-setter",modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=c=>r.value=c),onChange:o},{prefix:y(()=>[ee(U(bc))]),suffix:y(()=>[ee(U(yc))]),_:1},8,["modelValue"]))}}),kc=D({name:"SelectSetter",__name:"select",props:{options:{default:()=>[]}},setup(i){const e=i;return(t,a)=>(h(),k(s(Bn),ge({clearable:""},t.$attrs),{default:y(()=>[(h(!0),B(M,null,q(e.options,l=>(h(),k(s(Dn),ge({key:l.label,ref_for:!0},l),null,16))),128))]),_:1},16))}}),_c=D({name:"NumberSetter",__name:"number",props:{modelValue:{}},emits:["change"],setup(i,{emit:e}){const t=i,a=e,l=V(()=>ye(t.modelValue)?void 0:Number(t.modelValue||0)),n=r=>{a("change",r)};return(r,o)=>(h(),k(s(On),ge({class:"v-number-setter","controls-position":"right","model-value":l.value},r.$attrs,{onChange:n}),null,16,["model-value"]))}}),Sc=D({name:"ColorSetter",__name:"color",setup(i){return(e,t)=>(h(),k(s(Fn),Ol(Fl(e.$attrs)),null,16))}}),xc=D({name:"JsonSetter",__name:"json",props:{modelValue:{default:void 0},type:{default:"JSON"}},emits:["change"],setup(i,{emit:e}){const t=i,a=S(),l=S(typeof t.modelValue=="object"?JSON.stringify(t.modelValue,null,2):void 0),n=V(()=>!!l.value),r=S(!1),o=e,u=p=>{let g=!0;try{const v=JSON.parse(p);if(t.type==="Array"&&!Array.isArray(v))throw new Error(`"${p}" is not a Array`);if(t.type==="Object"&&!Ei(v))throw new Error(`"${p}" is not a PlainObject`);if(typeof v!="object")throw new Error(`"${p}" is not a ${t.type}`)}catch(v){g=!1,we.error({title:"代码错误",message:(v==null?void 0:v.message)||v})}return g},d=()=>{var g;const p=(g=a.value)==null?void 0:g.getEditor();if(p){const v=p.getValue();u(v)&&(l.value=v,o("change",JSON.parse(v)),r.value=!1)}},c=()=>{l.value="",o("change",void 0),r.value=!1},m=()=>{r.value=!0};return(p,g)=>(h(),B("div",{class:Z(["v-json-setter",{"is-active":n.value}])},[f(s(Oe),ge({readonly:"",onFocus:m,"model-value":t.type,"suffix-icon":s(xa)},p.$attrs),null,16,["model-value","suffix-icon"]),r.value?(h(),k(s(Ye),{key:0,modelValue:r.value,"onUpdate:modelValue":g[0]||(g[0]=v=>r.value=v),title:t.type,width:"1000px",height:"600px",cancel:"",submit:"",clear:"",onSubmit:d,onClear:c},{extra:y(()=>[f(s(me),{type:"warning",onClick:c,size:"default"},{default:y(()=>[ee(" 清除 ")]),_:1})]),default:y(()=>[f(s(ce),{ref_key:"codeEditor",ref:a,height:"100%",lang:"json",dark:"","model-value":l.value},null,8,["model-value"])]),_:1},8,["modelValue","title"])):O("",!0)],2))}}),Cc=D({name:"FunctionSetter",__name:"function",props:{modelValue:{default:()=>({type:"JSFunction",value:""})}},emits:["change"],setup(i,{emit:e}){const t=i,a=S(),l=S(t.modelValue.value),n=S(!1),r=V(()=>!!l.value),o=e,u=()=>{var p;const m=(p=a.value)==null?void 0:p.getEditor();if(m){const g=m.getValue(),v={type:"JSFunction",value:g};he(v,{})&&(l.value=g,o("change",v),n.value=!1)}},d=()=>{l.value="",o("change",void 0),n.value=!1},c=()=>{n.value=!0};return(m,p)=>(h(),B("div",{class:Z(["v-function-setter",{"is-active":r.value}])},[f(s(Oe),ge({readonly:"",onFocus:c,"model-value":"JSFunction","suffix-icon":s(xa)},m.$attrs),null,16,["suffix-icon"]),n.value?(h(),k(s(Ye),{key:0,modelValue:n.value,"onUpdate:modelValue":p[0]||(p[0]=g=>n.value=g),title:"JSFunction",width:"1000px",height:"600px",cancel:"",submit:"",clear:"",onSubmit:u,onClear:d},{extra:y(()=>[f(s(me),{type:"warning",onClick:d,size:"default"},{default:y(()=>[ee(" 清除 ")]),_:1})]),default:y(()=>[f(s(ce),{ref_key:"codeEditor",ref:a,height:"100%","model-value":l.value,dark:""},null,8,["model-value"])]),_:1},8,["modelValue"])):O("",!0)],2))}}),Vc=D({name:"RadioSetter",__name:"radio",props:{options:{default:()=>[]}},setup(i){const e=i;return(t,a)=>(h(),k(s(rl),ge({class:"v-radio-setter",size:"small"},t.$attrs),{default:y(()=>[(h(!0),B(M,null,q(e.options,l=>(h(),k(s(Et),{label:l.label,value:l.value,title:l.label},{default:y(()=>[l.svg?(h(),k(s(Je),{key:0,src:l.svg},null,8,["src"])):(h(),B(M,{key:1},[ee(U(l.label),1)],64))]),_:2},1032,["label","value","title"]))),256))]),_:1},16))}}),jc=["label","title","onClick"],Ac=D({name:"TagSetter",__name:"tag",props:{options:{default:()=>[]},modelValue:{}},emits:["update:modelValue","change"],setup(i,{emit:e}){const t=i,a=e,l=n=>{n.value===t.modelValue?(a("update:modelValue",void 0),a("change",void 0)):(a("update:modelValue",n.value),a("change",n.value))};return(n,r)=>(h(),B("div",ge({class:"v-tag-setter",size:"small"},n.$attrs),[(h(!0),B(M,null,q(t.options,o=>(h(),B("span",{label:o.value,title:o.label,class:Z({"is-active":t.modelValue===o.value}),onClick:u=>l(o)},[o.svg?(h(),k(s(Je),{key:0,src:o.svg,size:16},null,8,["src"])):(h(),B(M,{key:1},[ee(U(o.label),1)],64))],10,jc))),256))],16))}}),hn=D({name:"SizeSetter",__name:"size",props:{modelValue:{}},emits:["change"],setup(i,{emit:e}){const t=i,a=e,l=S(!0),n=V(()=>l.value?"px":void 0),r=S(t.modelValue),o=u=>{l.value=!!Number(u)};return X(r,u=>{a("change",u)}),X(()=>t.modelValue,u=>{u&&(l.value=u.endsWith("px"),r.value=u)},{immediate:!0}),(u,d)=>(h(),k(s(Cl),ge({clearable:"",unit:n.value,"with-unit":!!n.value,modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=c=>r.value=c),onChange:o},u.$attrs),null,16,["unit","with-unit","modelValue"]))}}),Ec={class:"v-image-setter__plus"},Pc=D({name:"ImageSetter",__name:"image",props:{modelValue:{},limit:{default:1}},emits:["change","update:modelValue"],setup(i,{emit:e}){const t=i,a=e,l=S([]),n=V(()=>l.value.length<t.limit),r=u=>u.type.includes("image")?(ji(u).then(d=>{l.value=[{name:u.name,url:d}]}),!1):(It.error("只能上传图片"),!1),o=()=>{l.value=[]};return X(()=>t.modelValue,u=>{l.value=u?[{name:"",url:u}]:[]},{immediate:!0}),X(l,()=>{var d;const u=(d=l.value[0])==null?void 0:d.url;a("change",u),a("update:modelValue",u)}),(u,d)=>(h(),k(s(Tn),ge({class:["v-image-setter",{"v-image-setter--addable":n.value}],"list-type":"picture-card",limit:1,action:"#","file-list":l.value,"onUpdate:fileList":d[0]||(d[0]=c=>l.value=c),"before-upload":r,"auto-upload":!0,"on-remove":o},u.$attrs),{default:y(()=>[P("span",Ec,[f(s(Je),{icon:s(qi)},null,8,["icon"])])]),_:1},16,["class","file-list"]))}}),Rc={class:"v-section-setter"},Dc=D({name:"SectionSetter",__name:"section",props:{modelValue:{},sections:{default:4}},emits:["change"],setup(i,{emit:e}){const t=i,a=e,l=S(new Array(t.sections).fill(""));X(()=>t.modelValue,r=>{l.value=r?r.split(" "):new Array(t.sections).fill("")},{immediate:!0});const n=()=>{a("change",l.value.join(" ").trim())};return(r,o)=>(h(),B("div",Rc,[(h(!0),B(M,null,q(t.sections,u=>(h(),k(hn,{name:u-1,modelValue:l.value[u-1],"onUpdate:modelValue":d=>l.value[u-1]=d,onChange:n,class:"v-section-setter__item"},null,8,["name","modelValue","onUpdate:modelValue"]))),256))]))}}),Bc={class:"v-slider-setter"},Oc=D({name:"SliderSetter",__name:"slider",props:{modelValue:{default:void 0}},emits:["change","update:modelValue"],setup(i,{emit:e}){const t=i,a=e,l=S();X(()=>t.modelValue,r=>{l.value=r},{immediate:!0}),X(l,r=>{a("change",r),a("update:modelValue",r)});const n=()=>{l.value=void 0,a("change",void 0),a("update:modelValue",void 0)};return(r,o)=>(h(),B("div",Bc,[f(s(zn),ge({size:"small"},r.$attrs,{modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=u=>l.value=u)}),null,16,["modelValue"]),f(s(Je),{onClick:n,class:"v-slider-setter__close",size:16,icon:s(Hi)},null,8,["icon"])]))}}),re={StringSetter:gc,BooleanSetter:fc,ExpressionSetter:wc,SelectSetter:kc,NumberSetter:_c,ColorSetter:Sc,IconSetter:dn,JsonSetter:xc,FunctionSetter:Cc,RadioSetter:Vc,TagSetter:Ac,SizeSetter:hn,ImageSetter:Pc,SectionSetter:Dc,SliderSetter:Oc,FileSetter:Oa},Fc={name:"StringSetter",component:re.StringSetter,type:"String"},Tc=[{name:"InputSetter",component:re.StringSetter,type:"String"},{name:"StringSetter",component:re.StringSetter,type:"String"},{name:"BooleanSetter",component:re.BooleanSetter,type:"Boolean"},{name:"ExpressionSetter",component:re.ExpressionSetter,type:"Object"},{name:"SelectSetter",component:re.SelectSetter,type:"String"},{name:"NumberSetter",component:re.NumberSetter,type:"Number"},{name:"ColorSetter",component:re.ColorSetter,type:"String"},{name:"IconSetter",component:re.IconSetter,type:"String"},{name:"ObjectSetter",component:re.JsonSetter,type:"Object",props:{type:"Object"}},{name:"ArraySetter",component:re.JsonSetter,type:"Array",props:{type:"Array"}},{name:"JsonSetter",component:re.JsonSetter,type:"Object",props:{type:"JSON"}},{name:"JSONSetter",component:re.JsonSetter,type:"Object",props:{type:"JSON"}},{name:"FunctionSetter",component:re.FunctionSetter,type:"Function"},{name:"RadioSetter",component:re.RadioSetter,type:"String"},{name:"TagSetter",component:re.TagSetter,type:"String"},{name:"SizeSetter",component:re.SizeSetter,type:"String"},{name:"ImageSetter",component:re.ImageSetter,type:"String"},{name:"SectionSetter",component:re.SectionSetter,type:"String"},{name:"SliderSetter",component:re.SliderSetter,type:"Number"},{name:"RangeSetter",component:re.SliderSetter,type:"Array",props:{range:!0}},{name:"FileSetter",component:re.FileSetter,type:"String",props:{multiple:!1}},{name:"FilesSetter",component:re.FileSetter,type:"String",props:{multiple:!0}}];class zc{constructor(){x(this,"widgets",{});this.widgets=this.createWidgets()}createWidgets(){const e={};for(const t of dc)e[t.name]=t;return e}register(e){this.widgets[e.name]=e}get(e){return this.widgets[e]}set(e,t){const a=this.widgets[e];if(!a){xe.warn(`widget '${e}' is not found`);return}wt(a,t),t.component&&(a.component=t.component)}getWidgets(e,t){const a=Object.values(this.widgets);return e?a.filter(l=>l.region===e&&(!t||t&&t===l.group)).map((l,n)=>{var r;return l.order=(r=l.order)!=null?r:n,l}).sort((l,n)=>{var r,o;return((r=l.order)!=null?r:0)-((o=n.order)!=null?o:0)}):a}}const gn=new zc;class Ic{constructor(e=cc){this.deps=e}get(){return this.deps}set(e){this.deps=e}add(e){const t=this.deps.find(a=>a.package===e.package);t?Object.assign(t,e):this.deps.push(e)}merge(e){const t=[];for(const a of this.deps){const l=e.find(n=>n.package===a.package);t.push(l?ae(L(L({},l),a),{enabled:l.enabled}):a)}for(const a of e)this.deps.find(l=>l.package===a.package)||t.push(a);return t}remove(e){const t=this.deps.findIndex(a=>a.package===e);t>-1&&this.deps.splice(t,1)}}const Nc=new Ic;class Jc{constructor(){x(this,"setters",{});x(this,"defaultSetter",Fc);this.setters=this.createSetters()}createSetters(){const e={};for(const t of Tc)e[t.name]=t;return e}register(e){this.setters[e.name]=e}get(e){return this.setters[e]}set(e,t){const a=this.setters[e];if(!a){xe.warn(`setter '${e}' is not found`);return}wt(a,t),t.component&&(a.component=t.component)}getByType(e){return Object.values(this.setters).filter(t=>t.type===e).map(t=>t.name)}}const Ft=new Jc;function $c(i){return new Promise((e,t)=>{const a=Dl(su,{slots:i,onClose:()=>{a.unmount(),t(null)},onSubmit:l=>{a.unmount(),e(l)}});a.mount(document.createElement("div"))})}class Lc{constructor(e,t,a){x(this,"proxied",{});x(this,"document",null);x(this,"hover",ua(null));x(this,"dropping",ua(null));x(this,"selected",S(null));x(this,"dragging",null);x(this,"draggingNode",null);this.engine=e,this.contentWindow=t,this.dependencies=a,this.document=this.contentWindow.document,this.bindEvents(t,this.document)}bind(e,t){let a=this.proxied[t];return a||(a=e.bind(this),this.proxied[t]=a),a}bindEvents(e,t){t.addEventListener("mouseover",this.bind(this.onMouseOver,"onMouseOver")),t.addEventListener("scroll",this.bind(this.onViewChange,"onViewChange")),e.addEventListener("resize",this.bind(this.onViewChange,"onViewChange")),t.addEventListener("mouseleave",this.bind(this.onLeave,"onLeave")),t.addEventListener("dragleave",this.bind(this.onLeave,"onLeave")),t.addEventListener("dragover",this.bind(this.onDragOver,"onDragOver")),t.addEventListener("drop",this.bind(this.onDrop,"onDrop")),t.addEventListener("click",this.bind(this.onSelected,"onSelected"),!0),R.on(bt,this.bind(this.onActiveChange,"onActiveChange")),R.on(oe,this.bind(this.onViewChange,"onViewChange"))}unbindEvents(e,t){t.removeEventListener("mouseover",this.bind(this.onMouseOver,"onMouseOver")),t.removeEventListener("scroll",this.bind(this.onViewChange,"onViewChange")),e.removeEventListener("resize",this.bind(this.onViewChange,"onViewChange")),t.removeEventListener("mouseleave",this.bind(this.onLeave,"onLeave")),t.removeEventListener("dragleave",this.bind(this.onLeave,"onLeave")),t.removeEventListener("dragover",this.bind(this.onDragOver,"onDragOver")),t.removeEventListener("drop",this.bind(this.onDrop,"onDrop")),t.removeEventListener("click",this.bind(this.onSelected,"onSelected")),R.off(bt,this.bind(this.onActiveChange,"onActiveChange")),R.off(oe,this.bind(this.onViewChange,"onViewChange"))}onMouseOver(e){var a;const t=this.getHelper(e);(t==null?void 0:t.model.id)!==((a=this.selected.value)==null?void 0:a.model.id)&&(this.hover.value=t)}onViewChange(){this.updateRect()}onLeave(e){this.hover.value=null,this.dropping.value=null}onActiveChange(){this.hover.value=null,this.dropping.value=null,this.selected.value=null}getDropSlot(e){return j(this,null,function*(){var c,m;if(!e)return;const{engine:t,dropping:a}=this,l=a.value?this.getVueInstance(a.value,e.id):null,n=l!=null&&l.$vtjDynamicSlots?l.$vtjDynamicSlots():[],r=t.assets,o=r.componentMap,u=(((c=(yield r.getBlockMaterial(e.from))||o.get(e.name))==null?void 0:c.slots)||["default"]).concat(n).map(p=>typeof p=="string"?{name:p,params:[]}:{name:p.name,params:p.params||[]});if(u.length===0)return;if(u.length===1)return u[0];const d=yield $c(u).catch(()=>null);if(!(d&&d.name==="default"&&(!d.params||((m=d.params)==null?void 0:m.length)===0)))return d})}getVueInstance(e,t){var o,u;const{el:a,model:l}=e,n=(o=a.__context__)==null?void 0:o.__refs;if(!n)return null;const r=n[t||l.id];return((u=r==null?void 0:r._)==null?void 0:u.exposed)||r}onDrop(e){return j(this,null,function*(){e.preventDefault();const{engine:t,dragging:a,dropping:l,draggingNode:n}=this,r=t.current.value,o=this.getHelper(e);if(!r||!a||!l.value||!o)return;const u=o.model,d=l.value.type;if(!(yield this.allowDrop(u,d)))return;let c;if(n)c=n;else{const m=this.createNodeDsl(a);c=new nt(m)}if(ue(u))n?(delete c.slot,r.move(c,void 0,"inner")):r.addNode(c,void 0,d);else{const m=yield this.getDropSlot(d==="inner"?u:u.parent);if(m===null){this.dropping.value=null;return}c.slot=m,n?r.move(c,u,d):r.addNode(c,u,d)}this.dropping.value=null,t.simulator.refresh(),t.assets.clearCaches()})}onSelected(e){e.stopPropagation(),this.setHover(null),this.selected.value=this.getHelper(e)}onDragOver(e){return j(this,null,function*(){const t=this.getHelper(e);if(!t)return;const{model:a,type:l}=t;a&&(yield this.allowDrop(a,l))?(e.preventDefault(),this.dropping.value=t):this.dropping.value=null})}isVtjElement(e){return!!e.__vtj__&&!!e.__context__}findVtjElement(e){return e.find(t=>this.isVtjElement(t))}getNodeByElement(e){var a;const t=(a=e.__vtj__)!=null?a:"";return nt.nodes[t]||null}getDropType(e,t,a){const{left:l,top:n,width:r,height:o}=e;return t>=l&&t<=l+r*.2?"left":t>=l+r*.8&&t<=l+r?"right":a>=n&&a<=n+o*.2?"top":a>=n+o*.8&&a<=n+o?"bottom":"inner"}getNodePath(e=[]){const t=e.filter(l=>this.isVtjElement(l)),a=this.engine.current.value;return[...t.map(l=>this.getNodeByElement(l)).filter(l=>!!l),a]}setDslFrom(e){const t=this.engine.assets.componentMap.get(e.name);if(e.from=e.from||(t==null?void 0:t.package),Array.isArray(e.children))for(const a of e.children)this.setDslFrom(a)}createNodeDsl(e){const{name:t,snippet:a={},from:l}=e,n=ae(L({},a),{name:t,from:l||e.package});return this.setDslFrom(n),n}getElmenetByModel(e){return!this.document||!e?null:ue(e)?this.document.body:Array.from(this.document.querySelectorAll("*")).find(t=>t.__vtj__===e.id)}findPathByNode(e){const t=[e];let a=e;for(;a.parent&&a.parent!==a;)a=a.parent,a!==e&&t.unshift(a);const l=this.engine.current.value;return t.unshift(l),t.reverse()}getHelper(e){var u;const t=e.composedPath()||[],a=this.findVtjElement(t)||((u=this.document)==null?void 0:u.body);if(!a)return null;const l=this.getNodeByElement(a)||this.engine.current.value;if(!l)return null;const n=a.getBoundingClientRect(),r=this.getDropType(n,e.clientX,e.clientY),o=this.getNodePath(t);return{el:a,model:l,rect:n,type:r,path:o}}cleanHelper(){this.setSelected(null),this.setHover(null),this.setDragging(null),this.setDropping(null)}updateRect(){return j(this,null,function*(){yield gt(100);const e=s(this.selected),t=s(this.hover);if(e){const a=e.el.getBoundingClientRect();this.selected.value=ae(L({},e),{rect:a})}if(t){const a=t.el.getBoundingClientRect();this.hover.value=ae(L({},t),{rect:a})}})}setDragging(e){this.dragging=e}setDraggingNode(e){this.draggingNode=e}setHover(e){return j(this,null,function*(){if(yield Te(),e){const t=this.getElmenetByModel(e);if(!t)return;const a=t.getBoundingClientRect(),l=ue(e)?[]:this.findPathByNode(e);this.hover.value={el:t,model:e,rect:a,type:"inner",path:l}}else this.hover.value=null})}setSelected(e){return j(this,null,function*(){var t;if(yield Te(),e){const a=this.getElmenetByModel(e)||((t=this.document)==null?void 0:t.createElement("span"));if(!a)return;const l=a.getBoundingClientRect(),n=ue(e)?[]:this.findPathByNode(e);this.selected.value={el:a,model:e,rect:l,type:"inner",path:n}}else this.selected.value=null})}setDropping(e,t="inner"){return j(this,null,function*(){if(yield Te(),e){const a=this.getElmenetByModel(e);if(!a)return;const l=a.getBoundingClientRect(),n=ue(e)?[]:this.findPathByNode(e);this.dropping.value={el:a,model:e,rect:l,type:t,path:n}}else this.dropping.value=null})}allowDrop(e,t="inner"){return j(this,null,function*(){const{dragging:a,engine:l,draggingNode:n}=this,r=l.current.value;if(!a||!r)return!1;if(ue(e))return!0;if(n&&e.id===n.id||n&&n.isChild(e))return!1;const o=l.assets.componentMap,u=t!=="inner"&&e.parent||e,d=(yield l.assets.getBlockMaterial(u.from))||o.get(u.name);if(!d)return!1;const{parentIncludes:c=!0,name:m}=a,{childIncludes:p=!0}=d,g=c===!0||Array.isArray(c)&&c.includes(u.name),v=p===!0||Array.isArray(p)&&p.includes(m);return g&&v})}dispose(){const{contentWindow:e,document:t}=this;this.setSelected(null),this.setHover(null),this.setDragging(null),e&&t&&this.unbindEvents(e,t),this.document=null}}class Wc{constructor(e,t,a,l=null){x(this,"app",null);x(this,"dsl",null);x(this,"nodeChange");x(this,"blockChange");x(this,"context",null);this.env=e,this.service=t,this.provider=a,this.designer=l,this.nodeChange=this.__onNodeChange.bind(this),this.blockChange=this.__onBlockChange.bind(this)}install(e){e.__vtj_env__=this.env;const{library:t,globals:a,VueRouter:l,locales:n}=this.env;if(l){const o=l.createRouter({history:l.createWebHashHistory(),routes:[]});e.use(o)}e.use(this.provider);const r=Object.entries(t);Object.assign(e.config.globalProperties,a),r.forEach(([o,u])=>{if(typeof u=="function"||typeof u.install=="function"){let d={};const c=n[o];c&&(d.locale=c),e==null||e.use(u,d)}})}render(e){const{window:t,container:a,library:l,Vue:n,components:r,apis:o}=this.env,u=t.document.createElement("div");u.id="app",a.appendChild(u),this.dsl=n.reactive(e.toDsl());const{renderer:d,context:c}=this.provider.createDslRenderer(this.dsl,{window:t,mode:je.Design,Vue:n,components:r,apis:o,libs:l}),m=n.defineComponent({render(){return n.h(n.Suspense,[n.h(d)])}});this.app=n.createApp(m),this.install(this.app);try{this.app.mount(u)}catch(p){de(p.message||"未知错误","运行时错误"),console.error(p)}this.context=c,R.on(oe,this.nodeChange),R.on(le,this.blockChange)}dispose(){if(this.app){this.app.unmount();const e=this.app._container;e&&e.parentNode&&(e.parentNode.removeChild(e),this.app._container=null),this.app=null}this.dsl=null,this.context=null,R.off(oe,this.nodeChange),R.off(le,this.blockChange)}updateChild(e,t){const a=t.children||t.nodes||[];if(Array.isArray(a))for(let l=0;l<a.length;l++){const n=a[l];if(n.id===e.id){a.splice(l,1,e);return}else this.updateChild(e,n)}}__onNodeChange(e){this.dsl&&this.updateChild(e.toDsl(),this.dsl)}__onBlockChange(e){var t;this.dispose(),this.render(e),(t=this.designer)!=null&&t.selected.value&&this.designer.setSelected(e)}}class Mc extends Ca{constructor(t){super();x(this,"contentWindow",null);x(this,"renderer",null);x(this,"designer",ua(null));x(this,"engine");x(this,"materialPath");const{engine:a,materialPath:l}=t;this.engine=a,this.materialPath=l,X(this.engine.current,()=>{this.refresh()})}init(t,a,l,n,r){X([t,a,l,n,r],()=>{var o,u;t.value&&a.value.length&&(this.resetReady(),(o=this.renderer)==null||o.dispose(),this.renderer=null,this.setup(t.value,a.value),this.contentWindow&&((u=this.designer.value)==null||u.dispose(),this.designer.value=new Lc(this.engine,this.contentWindow,a)))},{immediate:!0,deep:!0})}setup(t,a){const l=t.contentWindow;if(!l){xe.warn("Simulator contentWindow is null");return}l.__simulator__=this;const n=l.document;this.contentWindow=l;const{scripts:r,css:o,materials:u,libraryExports:d,materialExports:c,materialMapLibrary:m,libraryLocaleMap:p}=Hl(a,this.materialPath);n.open(),n.write(`
     <!DOCTYPE html>
     <html lang="zh-CN">
       <head>
       <meta charset="utf-8">
       <meta name="viewport"
             content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0,viewport-fit=cover"/>
         <style>
            html, body, #app {
              padding: 0;
              margin: 0;
              min-height: 100vh;
              width: 100%;
              height: 100%;
              background: #fff;
            }
         </style>
         ${to(o)}
         ${Za(r)}
         ${Za(u)}
       </head>
       <body> 
       </body>
       <script>
       __simulator__.emitReady(${JSON.stringify(d)},
        ${JSON.stringify(c)}, 
    ${JSON.stringify(m)},
    ${JSON.stringify(p)}
    );
     <\/script> 
     </html>
    `),n.close()}emitReady(){return j(this,arguments,function*(t=[],a=[],l={},n={}){var v;(v=this.renderer)==null||v.dispose(),this.renderer=null;const r=this.contentWindow,{assets:o,service:u,current:d,provider:c}=this.engine,m=c.materials||{},p=[];for(const b of a){const w=m[b]?(yield m[b]()).default:r[b];p.push(w)}o.load(p);const g=this.createEnv(t,l,p,n);this.renderer=new Wc(g,u,c,this.designer.value),d.value&&this.renderer.render(d.value),this.triggerReady()})}createEnv(t=[],a={},l=[],n={}){var F,I,H,E,T;const r=this.contentWindow,{engine:o}=this,{project:u,assets:d,provider:c}=o,m=t.reduce((A,J)=>(A[J]=r[J],A),{}),p={};Object.entries(n).forEach(([A,J])=>{p[A]=r[J]});const g={},{groups:v,componentMap:b}=d;for(const A of v.value){const J=A.names||[];if(A.name===da)J.forEach(G=>{const z=b.get(G),$=(z==null?void 0:z.package)||"",W=Ki[$],te=m[W];te&&z&&(g[G]=pa(z,te))});else{const G=m[a[A.library||""]];G&&J.forEach(z=>{const $=b.get(z);$?g[z]=pa($,G):g[z]=G[z]})}}const{adapter:w,globals:_}=c,C=Xl((F=u.value)==null?void 0:F.apis,(I=u.value)==null?void 0:I.meta,w);return Aa(),(E=(H=u.value)==null?void 0:H.config)!=null&&E.mock&&Yl((T=u.value)==null?void 0:T.apis),{window:r,Vue:r.Vue,VueRouter:r.VueRouter,library:m,materials:l,components:g,container:r.document.body,apis:C,globals:_,libraryLocaleMap:n,locales:p}}refresh(){var a,l;(a=this.renderer)==null||a.dispose();const t=this.engine.current.value;t&&((l=this.renderer)==null||l.render(t))}dispose(){var t,a;(t=this.renderer)==null||t.dispose(),(a=this.designer.value)==null||a.dispose(),this.contentWindow=null,this.renderer=null,this.designer.value=null,this.resetReady()}}class Uc{constructor(e,t){x(this,"components",[]);x(this,"componentMap",new Map);x(this,"groups",S([]));x(this,"caches",{});this.service=e,this.provider=t}getCateoryComponents(e,t){const a=t.filter(l=>l.categoryId===e.id&&l.hidden!==!0);return{name:e.id,label:e.category,count:a.length,components:a}}parseGroups(e){const t=[];for(let a of e){const{categories:l,components:n,label:r,name:o,library:u}=a;if(!l||!n)continue;const d=n.filter(g=>!!g.package).map(g=>g.name),c=l.map(g=>this.getCateoryComponents(g,n)),m=c.reduce((g,v)=>v.count+g,0),p={name:a.name,label:r||o,count:m,names:d,library:u,children:c};t.push(p)}return t}load(e){const t=[...hc,...e].filter(a=>!!a);t.sort((a,l)=>a.order-l.order);for(let a of t)a.components&&(this.components=this.components.concat(a.components));this.groups.value=this.parseGroups(t),this.componentMap=_s(this.components,"name")}getBlockMaterial(e,t){return j(this,null,function*(){if(!e||typeof e=="string")return null;let a;if(e.type==="Schema"&&e.id&&(a=this.caches[e.id]||(yield this.service.getFile(e.id)),this.caches[e.id]=a),e.type==="UrlSchema"&&e.url&&(a=this.caches[e.url]||(yield this.provider.getDslByUrl(e.url)),this.caches[e.url]=a),e.type==="Plugin"){const m=yield this.service.getPluginMaterial(e);return m?(m.name=t||m.name,m.from=e,this.componentMap.set(m.name,m),m):null}if(!a)return null;a.name=t||a.name;const{id:l,name:n,slots:r,props:o,emits:u}=a,d=m=>{const p=Array.isArray(m)?m:[m];let g=[];for(const v of p)g=g.concat(Ft.getByType(v));return g},c={id:l,name:n,childIncludes:r!=null&&r.length?void 0:!1,props:(o||[]).map(m=>typeof m=="string"?{name:m}:{name:m.name,type:m.type,setters:d(m.type)}),events:u,slots:r,from:e};return this.componentMap.set(n,c),c})}clearCaches(){this.caches={}}}const fn=Symbol("VtjEngine");class zm extends Ca{constructor(t){super();x(this,"app");x(this,"skeleton");x(this,"container");x(this,"service");x(this,"assets");x(this,"simulator");x(this,"emitter",R);x(this,"project",S(null));x(this,"current",S(null));x(this,"context",S(null));x(this,"isEmptyCurrent",S(!1));x(this,"history",S(null));x(this,"provider");x(this,"changed",S(Symbol()));this.options=t;const{container:a,service:l,project:n={},globals:r={},dependencies:o,materials:u,materialPath:d="./",adapter:c,install:m}=this.options;this.container=a,this.service=l,this.provider=new ln({mode:je.Design,globals:r,project:n,service:l,dependencies:o,materials:u,materialPath:d,adapter:c,install:m}),this.assets=new Uc(this.service,this.provider),this.simulator=new Mc({engine:this,materialPath:d}),this.bindEvents(),this.init(n),_t(this.render.bind(this)),Rl(this.dispose.bind(this))}init(t){return j(this,null,function*(){const a=yield this.service.init(t).catch(l=>(xe.warn("VTJEngine service init fail.",l),null));a&&(a.dependencies=Nc.merge(a.dependencies||[]),this.project.value=new ma(a),this.saveMaterials(),this.triggerReady())})}render(){const t=s(this.container);if(t){const a=Dl(qc);this.options.install&&a.use(this.options.install,this),a.provide(fn,Oi(this)),a.mount(t),this.app=a}else xe.warn("VTJEngine constructor param [ container ] is undefined")}bindEvents(){R.on(pe,t=>this.saveProject(t)),R.on(Dt,t=>this.saveBlockFile(t)),R.on(ut,t=>this.saveBlockFile(t)),R.on(ca,()=>this.saveMaterials()),R.on(bt,t=>this.activeFile(t)),R.on(Ll,()=>this.publish()),R.on(Wl,()=>this.publishCurrent()),R.on(le,t=>this.changeFile(t)),R.on(oe,()=>this.changeCurrentFile()),R.on(dt,t=>this.saveHistory(t)),R.on(Bt,t=>this.loadHistory(t))}activeFile(t){return j(this,null,function*(){yield Te();const a=t.model,l=t.model.currentFile;if(l){if(a.isPageFile(l)&&l.raw)return;const n=yield this.service.getFile(l.id);n&&(l.dsl=n)}if(l!=null&&l.dsl){const n=new Ge(l.dsl);this.updateCurrent(n),this.initHistory(n)}else this.updateCurrent(null);We(this.project)})}changeFile(t){return j(this,null,function*(){var l;yield Te();const a=t.toDsl();this.service.saveFile(a),this.updateCurrent(t),(l=this.history.value)==null||l.add(a),We(this.history)})}changeCurrentFile(){var t;this.saveCurrentFile(),this.current.value&&((t=this.history.value)==null||t.add(this.current.value.toDsl()),We(this.history))}updateCurrent(t,a=!0){return j(this,null,function*(){var l,n;this.current.value=t,yield Te(),this.context.value=((l=this.simulator.renderer)==null?void 0:l.context)||null,this.isEmptyCurrent.value=((n=this.current.value)==null?void 0:n.nodes.length)===0,this.changed.value=Symbol(),a&&We(this.context)})}saveProject(t){return j(this,null,function*(){const a=t.model.toDsl();yield this.service.saveProject(a),We(this.project)})}saveBlockFile(t){return j(this,null,function*(){const a=t.type,l=t.model;if(a==="create"){const n=t.data;l.isPageFile(n)&&n.raw?(yield this.service.createRawPage(n),Se(`源码文件已经生成：/.vtj/vue/${n.id}.vue`,"success")):n.dsl&&(yield this.service.saveFile(n.dsl))}if(a==="update"){const n=t.data;if(l.isPageFile(n)&&(n.dir||n.raw))return;const r=yield this.service.getFile(n.id);r&&(r.name=n.name,yield this.service.saveFile(r))}if(a==="delete"){const n=t.data;n&&l.isPageFile(n)&&n.raw?yield this.service.removeRawPage(n.id):n.dir||(yield this.service.removeFile(n.id),yield this.service.removeHistory(n.id))}if(a==="clone"){const{page:n,newPage:r}=t.data,o=yield this.service.getFile(n.id);o&&(o.id=r.id,o.name=r.name,yield this.service.saveFile(o))}We(this.project)})}saveMaterials(){return j(this,null,function*(){yield Te(),this.simulator.ready(()=>{const t=this.project.value;if(t){const a=this.assets.componentMap;this.service.saveMaterials(t.toDsl(),a)}})})}saveCurrentFile(){const t=this.current.value;t&&(this.updateCurrent(t),this.service.saveFile(t.toDsl()))}initHistory(t){return j(this,null,function*(){if(t){const a=yield this.service.getHistory(t.id).catch(()=>null);this.history.value=new Ml(Object.assign(a||{},{id:t.id}))}else this.history.value=null})}saveHistory(t){return j(this,null,function*(){const a=t.type,l=t.model;a==="create"&&(yield this.service.saveHistoryItem(l.id,t.data)),a==="delete"&&(yield this.service.removeHistoryItem(l.id,t.data)),a==="clear"&&(yield this.service.removeHistoryItem(l.id,t.data));const n=l.toDsl();yield this.service.saveHistory(n),We(this.history)})}loadHistory(t){return j(this,null,function*(){const a=t.model,l=t.data,n=yield this.service.getHistoryItem(a.id,l.id);if(n&&n.dsl){const r=new Ge(n.dsl);yield this.updateCurrent(r),this.service.saveFile(n.dsl),We(this.history)}})}publish(){return j(this,null,function*(){const t=this.project.value;if(t){const a=ae(L({},t.toDsl()),{pages:t.getPages()});(yield this.service.publish(a))&&Se("整站发布成功","success")}})}publishCurrent(){return j(this,null,function*(){const t=this.project.value,a=t==null?void 0:t.currentFile;if(t&&a){const l=ae(L({},t.toDsl()),{pages:t.getPages()});(yield this.service.publishFile(l,a))&&Se("发布成功","success")}})}dispose(){this.emitter.all.clear(),this.simulator.dispose(),this.app&&(this.app.unmount(),this.container=void 0)}openFile(t){return j(this,null,function*(){var u,d,c,m;const a=this.project.value,l=(u=this.skeleton)==null?void 0:u.getRegion("Apps"),n=t||(a==null?void 0:a.homepage);if(!a||!l||!n)return;const r=a.getPage(n);r&&!r.raw&&((d=l.regionRef)==null||d.setActive("Pages"),this.simulator.ready(()=>{a.active(r)}));const o=a.getBlock(n);o&&((c=l.regionRef)==null||c.setActive("Blocks"),(m=this.simulator)==null||m.ready(()=>{a.active(o)}))})}}function ke(){const i=$t(fn,null);return i||xe.error("VTJEngine is not exist"),i}const Me=D({name:"RegionWrapper",props:{region:{type:String,required:!0}},setup(){return{regionRef:S()}},render(){const i=il[this.region]||il.EmptyRegion;return $e(i,ae(L(L({},this.$props),this.$attrs),{ref:"regionRef"}))}}),Qe=D({name:"WidgetWrapper",props:{region:{type:String,required:!0},widget:{type:Object,required:!0}},setup(){return{widgetRef:S()}},render(){return $e(this.widget.component,ae(L(L(L({},this.widget.props),this.$props),this.$attrs),{ref:"widgetRef"}))}}),qc=D({name:"SkeletonWrapper",setup(){const i=S(),e=ke(),t=S({});return{skeletonRef:i,engine:e,widgets:t}},mounted(){this.engine.skeleton=this},render(){return $e(Hc,ae(L(L({},this.$props),this.$attrs),{ref:"skeletonRef"}))},methods:{getRegion(i){return this.skeletonRef[i.toLowerCase()]},toggleCollapse(i){if(this.skeletonRef){const e=this.skeletonRef.collapsed;this.skeletonRef.collapsed=i!=null?i:!e}},settable(i){this.skeletonRef&&(this.skeletonRef.settable=i)},getWidgets(i){var t;const e=this.getRegion(i);return e?gs(((t=e.regionRef)==null?void 0:t.widgetsRef)||[]):[]},getWidget(i){const e=gn.get(i);if(!e){xe.warn(`widget [ ${i} ] is not exsit`);return}return this.getWidgets(e.region).find(t=>t.widget.name===i)},openPreview(i){this.skeletonRef&&(this.skeletonRef.isPreview=!0)},closePreview(){this.skeletonRef&&(this.skeletonRef.isPreview=!1)}}}),K=D({name:"SetterWrapper",props:{context:{type:Object,default:null},current:{type:Object,default:null},name:String,label:String,title:String,value:{type:[String,Object,Array,Number,Boolean],default:void 0},setters:{type:[String,Object,Array],required:!0,default(){return[]}},options:{type:Array,default(){return[]}},variable:{type:Boolean,default:!0},removable:{type:Boolean,default:!1}},computed:{computedSetters(){return(Array.isArray(this.setters)?this.setters:[this.setters]).map(i=>{let e;if(typeof i=="string")return e=this.getSetter(i),{component:ia(e.component),name:e.name,label:i,props:e.props||{}};{const t=i;return e=this.getSetter(t.name),{component:ia(t.component||e.component),name:t.name,label:t.label||t.name,props:Object.assign(e.props||{},t.props)}}})},computedOptions(){return(this.options||[]).map(i=>typeof i=="string"?{label:i,value:i}:i)},defaultSetter(){var l,n;const{value:i,computedSetters:e}=this;let t=typeof i;t==="Object"&&(Array.isArray(i)?t="Array":ye(i)?t="Object":xt(i)&&(t="Function"));const a=Ft.getByType(t)||[];return a.length?(l=e.find(r=>a.includes(r.name))||e[0])==null?void 0:l.name:(n=e[0])==null?void 0:n.name}},render(){const{context:i,current:e,name:t,label:a,title:l,value:n,computedSetters:r,computedOptions:o,variable:u,changeValue:d,defaultSetter:c,removable:m,onRemove:p}=this;return $e(em,{context:i,current:e,name:t,label:a,title:l,setters:r,defaultSetter:c,variable:u,value:n,removable:m,options:o,onChange:d,onRemove:p})},emits:["change","remove"],methods:{getSetter(i){return typeof i=="string"?Ft.get(i)||Ft.defaultSetter:i},changeValue(i){this.$emit("change",this.name,i)},onRemove(i){this.$emit("remove",i)}}}),Hc=D({name:"Skeletion",__name:"skeleton",props:{headerHeight:{default:"36px"},leftWidth:{default:"400px"},rightWidth:{default:"350px"},footerHeight:{default:"20px"}},setup(i,{expose:e}){const t=i,a=S(!1),l=S(parseInt(t.leftWidth)),n=S(parseInt(t.rightWidth)),r={dirs:["e"],maxWidth:600,minWidth:49,onResizing(C,F){l.value=F.elementWidth.value},onEnd(C,F){l.value=F.elementWidth.value}},o={dirs:["w"],maxWidth:600,minWidth:2,onResizing(C,F){n.value=F.elementWidth.value},onEnd(C,F){n.value=F.elementWidth.value}},u=S(),d=S(),c=S(),m=S(),p=S(),g=S(),v=S(),b=S(),w=S(!1),_=S(!1);return e({brand:u,toolbar:d,actions:c,apps:m,workspace:p,settings:g,status:v,collapsed:w,settable:_,leftWidth:l,rightWidth:n,preview:b,isPreview:a}),(C,F)=>(h(),k(s(Pn),{locale:s(En)},{default:y(()=>[f(s(Ua),{class:"v-skeleton"},{default:y(()=>[f(s(Vn),{class:"v-skeleton__header",height:C.headerHeight},{default:y(()=>[f(s(Me),{ref_key:"brand",ref:u,region:"Brand"},null,512),f(s(Me),{ref_key:"toolbar",ref:d,region:"Toolbar",preview:a.value},null,8,["preview"]),f(s(Me),{ref_key:"actions",ref:c,region:"Actions"},null,512)]),_:1},8,["height"]),f(s(Ua),{class:"v-skeleton__wrapper"},{default:y(()=>[a.value?O("",!0):He((h(),k(s(qa),{key:0,width:t.leftWidth,class:Z(["v-skeleton__left",{"is-collapsed":w.value}])},{default:y(()=>[f(s(Me),{ref_key:"apps",ref:m,region:"Apps"},null,512)]),_:1},8,["width","class"])),[[s(Ka),r]]),f(s(jn),{class:"v-skeleton__main"},{default:y(()=>[a.value?(h(),k(s(Me),{key:0,ref_key:"preview",ref:b,region:"Preview",preview:a.value},null,8,["preview"])):O("",!0),He(f(s(Me),{ref_key:"workspace",ref:p,region:"Workspace"},null,512),[[Xe,!a.value]])]),_:1}),a.value?O("",!0):He((h(),k(s(qa),{key:1,width:t.rightWidth,class:"v-skeleton__right"},{default:y(()=>[f(s(Me),{ref_key:"settings",ref:g,region:"Settings"},null,512)]),_:1},8,["width"])),[[Xe,_.value],[s(Ka),o]])]),_:1}),a.value?O("",!0):(h(),k(s(An),{key:0,class:"v-skeleton__footer",height:C.footerHeight},{default:y(()=>[f(s(Me),{ref_key:"status",ref:v,region:"Status"},null,512)]),_:1},8,["height"]))]),_:1})]),_:1},8,["locale"]))}}),Gc=["title"],Kc={class:"v-setter__content"},Qc={key:0,class:"v-setter__input"},Xc={class:"v-setter__action"},Yc="{{",Zc="}}",em=D({__name:"setter",props:{context:{},current:{},name:{},label:{default:""},title:{},setters:{},variable:{type:Boolean,default:!0},value:{},options:{default:()=>[]},defaultSetter:{},removable:{type:Boolean}},emits:["change","remove"],setup(i,{emit:e}){const t=i,a=e,l=S(!1),n=S(""),r=S(t.setters.find(_=>_.name===t.defaultSetter)||t.setters[0]),o=S(t.value),u=V(()=>!!ye(o.value)),d={[r.value.name]:o.value},c=_=>{var C;d[r.value.name]=o.value,r.value=_,o.value=(C=d[_.name])!=null?C:void 0,m(o.value)};X(()=>t.value,()=>{o.value=t.value}),X(()=>t.defaultSetter,()=>{r.value=t.setters.find(_=>_.name===t.defaultSetter)||t.setters[0]});const m=_=>{a("change",_)},p=()=>{a("remove",t.name)},g=()=>{l.value=!0,n.value=ye(o.value)?o.value.value:""},v=()=>{l.value=!1,n.value=""},b=_=>j(this,null,function*(){return he(_,t.context,!0)?(d[r.value.name]=o.value,o.value=_,a("change",_),!0):!1}),w=()=>j(this,null,function*(){(yield it("确定要解除绑定吗？"))&&(v(),o.value=void 0,a("change",void 0))});return(_,C)=>(h(),k(s(ml),{class:"v-setter",size:"small","label-positon":"left"},{label:y(()=>[t.title?(h(),k(s(cl),{key:0,placement:"top-start",content:t.title},{default:y(()=>[ee(U(t.label||t.name),1)]),_:1},8,["content"])):(h(),B("span",{key:1,title:t.name},U(t.label||t.name),9,Gc))]),default:y(()=>[P("div",Kc,[r.value?(h(),B("div",Qc,[u.value?O("",!0):(h(),k(Bl(r.value.component),ge({key:0,current:t.current,context:t.context},r.value.props,{options:t.options,modelValue:o.value,"onUpdate:modelValue":C[0]||(C[0]=F=>o.value=F),onChange:m,disabled:u.value}),null,16,["current","context","options","modelValue","disabled"])),u.value?(h(),k(s(Oe),{key:1,class:"v-expression-setter",disabled:"","model-value":"JSExpression"},{prefix:y(()=>[ee(U(Yc))]),suffix:y(()=>[ee(U(Zc))]),_:1})):O("",!0)])):O("",!0),P("div",Xc,[t.variable?(h(),k(s(fs),{key:0,onClick:g,class:Z(["v-icon-vars",{"is-active":u.value}]),title:"绑定变量"},null,8,["class"])):O("",!0),t.setters.length>1?(h(),k(s(dl),{key:1,disabled:u.value,size:"small","popper-class":"v-setter-switch",onCommand:c},{dropdown:y(()=>[f(s(ul),null,{default:y(()=>[(h(!0),B(M,null,q(t.setters,F=>(h(),k(s(ta),{command:F,key:F.name},{default:y(()=>[f(s(yl),{class:Z({"is-placeholder":F.name!==r.value.name})},null,8,["class"]),ee(" "+U(F.label),1)]),_:2},1032,["command"]))),128))]),_:1})]),default:y(()=>[f(s(bs),{title:"切换设置器"})]),_:1},8,["disabled"])):O("",!0),t.removable?(h(),k(s(Nt),{key:2,onClick:p,title:"删除"})):O("",!0)])]),l.value?(h(),k(s(Fu),{key:0,current:t.current,context:t.context,value:n.value,modelValue:l.value,"onUpdate:modelValue":C[1]||(C[1]=F=>l.value=F),submitMethod:b,onUnbind:w},null,8,["current","context","value","modelValue"])):O("",!0)]),_:1}))}}),tm={class:"v-empty-region"},am=D({name:"EmptyRegion",__name:"empty",props:{region:{}},setup(i){return(e,t)=>(h(),B("div",tm,"找不到符合【"+U(e.region)+"】名称的区域组件",1))}}),lm={class:"v-brand-region"},nm=D({name:"BrandRegion",inheritAttrs:!1,__name:"brand",props:{region:{}},setup(i,{expose:e}){const t=i,{widgets:a,widgetsRef:l}=Ke(t.region);return e({widgets:a,widgetsRef:l}),(n,r)=>(h(),B("div",lm,[(h(!0),B(M,null,q(s(a),o=>(h(),k(s(Qe),{ref_for:!0,ref_key:"widgetsRef",ref:l,region:n.region,widget:o},null,8,["region","widget"]))),256))]))}}),sm={class:"v-toolbar-region"},im=D({name:"ToolbarRegion",__name:"toolbar",props:{region:{},preview:{type:Boolean}},setup(i,{expose:e}){const t=i,{widgets:a,widgetsRef:l}=Ke(t.region);return e({widgets:a,widgetsRef:l}),(n,r)=>(h(),B("div",sm,[(h(!0),B(M,null,q(s(a),o=>(h(),k(s(Qe),{ref_for:!0,ref_key:"widgetsRef",ref:l,region:n.region,widget:o,preview:n.preview},null,8,["region","widget","preview"]))),256))]))}}),om={class:"v-actions-region"},rm=D({name:"ActionsRegion",inheritAttrs:!1,__name:"actions",props:{region:{}},setup(i,{expose:e}){const t=i,{widgets:a,widgetsRef:l}=Ke(t.region);return e({widgets:a,widgetsRef:l}),(n,r)=>(h(),B("div",om,[(h(!0),B(M,null,q(s(a),o=>(h(),k(s(Qe),{ref_for:!0,ref_key:"widgetsRef",ref:l,region:n.region,widget:o},null,8,["region","widget"]))),256))]))}}),um={class:"v-apps-region"},dm={class:"v-apps-region__header"},cm={class:"v-apps-region__top"},mm={class:"v-apps-region__bottom"},pm={class:"v-apps-region__panels"},vm=D({name:"AppsRegion",inheritAttrs:!1,__name:"apps",props:{region:{},index:{default:0}},setup(i,{expose:e}){const t=i,a=ke(),{widgets:l,widgetsRef:n}=Ke(t.region),r=V(()=>l.value.filter(g=>g.openType==="panel")),o=V(()=>l.value.filter(g=>g.openType!=="panel")),u=r.value[t.index],d=S(u),c=S(u),m=g=>{var v;d.value=g,c.value=((v=c.value)==null?void 0:v.name)===g.name?null:g},p=g=>{g.openType==="link"&&g.url&&window.open(g.url),g.openType==="dialog"&&Ai(ae(L({title:g.label,icon:g.icon},g.props),{content:g.component}))};return X(c,g=>{var v;(v=a.skeleton)==null||v.toggleCollapse(!g)}),e({widgets:l,widgetsRef:n,setActive:g=>{const v=r.value.find(b=>b.name===g);d.value=v,c.value=v}}),(g,v)=>(h(),B("div",um,[P("div",dm,[P("div",cm,[(h(!0),B(M,null,q(r.value,b=>{var w,_;return h(),k(s(ll),{key:`icon-${b.name}`,icon:b.icon,label:b.label,active:((w=d.value)==null?void 0:w.name)===b.name,open:((_=c.value)==null?void 0:_.name)===b.name,onClick:C=>m(b)},null,8,["icon","label","active","open","onClick"])}),128))]),P("div",mm,[(h(!0),B(M,null,q(o.value,b=>(h(),k(s(ll),{key:`icon-${b.name}`,icon:b.icon,label:b.label,onClick:w=>p(b)},null,8,["icon","label","onClick"]))),128))])]),P("div",pm,[(h(!0),B(M,null,q(r.value,b=>{var w;return h(),k(Tl,{key:b.name},[((w=d.value)==null?void 0:w.name)===b.name?(h(),k(s(Qe),{key:0,ref_for:!0,ref_key:"widgetsRef",ref:n,region:g.region,widget:b},null,8,["region","widget"])):O("",!0)],1024)}),128))])]))}}),hm=D({name:"WorkspaceRegion",__name:"workspace",props:{region:{}},setup(i,{expose:e}){var v;const t=i,{widgets:a,widgetsRef:l}=Ke(t.region),n=St(a.value.map(b=>({name:b.name,command:b.name,label:b.label,closable:!!b.closable,props:b.props||{},checked:!b.closable,actions:b.actions}))),r=V(()=>n==null?void 0:n.filter(b=>!b.closable||b.checked)),o=V(()=>n.map(b=>ae(L({},b),{disabled:!b.closable}))),u=S((v=r.value[0])==null?void 0:v.name),d=V(()=>{var b;return((b=n.find(w=>w.name===u.value))==null?void 0:b.props)||{}}),c=b=>{var _;const w=n.find(C=>C.name===b);w&&(w.checked=!1),u.value===b&&(u.value=(_=r.value[0])==null?void 0:_.name)},m=b=>{var _;const w=n.find(C=>C.name===b.name);w&&w.closable&&(w.checked=!w.checked,w.checked&&(u.value=w.name),!w.checked&&u.value===w.name&&(u.value=(_=r.value[0])==null?void 0:_.name))},p=(b,w={})=>{const _=n.find(C=>C.name===b);_&&(_.props=Object.assign({},_.props,w),_.checked=!0,u.value=_.name)},g=b=>{var w;if(l.value){const _=(w=l.value[0])==null?void 0:w.widgetRef;if(!_)return;switch(b.name){case"home":_.refresh();break}}};return e({currentTab:u,widgets:a,widgetsRef:l,openTab:p}),(b,w)=>(h(),k(s(Mt),{class:"v-workspace-region",items:r.value,menus:o.value,modelValue:u.value,"onUpdate:modelValue":w[0]||(w[0]=_=>u.value=_),checkable:"",onRemove:c,onCommand:m,onActionClick:g},{default:y(()=>[(h(!0),B(M,null,q(s(a),_=>(h(),B(M,{key:_.name},[u.value===_.name?(h(),k(s(Qe),{key:0,ref_for:!0,ref_key:"widgetsRef",ref:l,region:b.region,widget:ae(L({},_),{props:d.value})},null,8,["region","widget"])):O("",!0)],64))),128))]),_:1},8,["items","menus","modelValue"]))}}),gm=D({name:"SettingsRegion",__name:"settings",props:{region:{}},setup(i,{expose:e}){const t=i,a=ke(),{current:l}=fe(),{selected:n,isSelectBlock:r}=Ie(),o=V(()=>r.value?Ee.Block:Ee.Node),{widgets:u,widgetsRef:d}=Ke(t.region,o),c=S(),m=S(!1),p=V(()=>u.value.map(w=>({name:w.name,label:w.label,actions:w.name==="Style"?[{name:"switch",icon:Gi,background:"hover"}]:void 0}))),g=V(()=>{var _,C;const w=(_=n.value)==null?void 0:_.model;return w?(C=a.assets.componentMap.get(w.name))==null?void 0:C.doc:null});X(l,w=>{var _;(_=a.skeleton)==null||_.settable(!!w)}),X(o,()=>{var w;c.value=(w=p.value[0])==null?void 0:w.name},{immediate:!0}),X(c,()=>{m.value=!1});const v=()=>{var w;if(g.value){const _=(w=a.skeleton)==null?void 0:w.getRegion("Workspace");_&&_.regionRef.openTab("Docs",{url:g.value})}},b=w=>{w.name==="switch"&&(m.value=!m.value)};return e({widgets:u,widgetsRef:d}),(w,_)=>s(l)?(h(),k(s(Q),{key:0,class:"v-settings-region",fit:"",direction:"column"},{default:y(()=>[s(n)?(h(),k(s(Q),{key:0,flex:"",justify:"space-between",align:"center",class:"v-settings-region__header"},{default:y(()=>[f(s(Q),{class:"v-settings-region__title"},{default:y(()=>{var C,F;return[f(s(_l)),P("span",null,[ee(U((C=s(n))==null?void 0:C.model.name)+": ",1),P("i",null,U((F=s(n))==null?void 0:F.model.id),1)])]}),_:1}),g.value?(h(),k(s(Q),{key:0},{default:y(()=>[f(s(Re),{onClick:v,icon:s(Sl),mode:"text",label:"帮助"},null,8,["icon"])]),_:1})):O("",!0)]),_:1})):O("",!0),s(n)&&!s(n).model.locked?(h(),k(s(Q),{key:1,grow:"",padding:!1},{default:y(()=>[f(s(Mt),{items:p.value,modelValue:c.value,"onUpdate:modelValue":_[0]||(_[0]=C=>c.value=C),stretch:"",body:{padding:!1},onActionClick:b},{default:y(()=>[(h(!0),B(M,null,q(s(u),C=>(h(),B(M,{key:C.name},[c.value===C.name?(h(),k(s(Qe),{key:0,ref_for:!0,ref_key:"widgetsRef",ref:d,region:w.region,widget:s(wt)({props:{isStyleCodeMode:m.value}},C)},null,8,["region","widget"])):O("",!0)],64))),128))]),_:1},8,["items","modelValue"])]),_:1})):O("",!0),s(n)?O("",!0):(h(),k(s(ve),{key:2,description:"请在左侧画布选中节点"})),s(n)&&s(n).model.locked?(h(),k(s(ve),{key:3,"image-size":1,description:"节点已被锁定, 禁止编辑"})):O("",!0)]),_:1})):O("",!0)}}),fm={class:"v-status-region"},bm=D({name:"StatusRegion",inheritAttrs:!1,__name:"status",props:{region:{}},setup(i,{expose:e}){const t=i,{widgets:a,widgetsRef:l}=Ke(t.region);return e({widgets:a,widgetsRef:l}),(n,r)=>(h(),B("div",fm,[(h(!0),B(M,null,q(s(a),o=>(h(),k(s(Qe),{ref_for:!0,ref_key:"widgetsRef",ref:l,region:n.region,widget:o},null,8,["region","widget"]))),256))]))}}),ym=D({name:"PreviewRegion",__name:"preview",props:{region:{}},setup(i,{expose:e}){var u;const t=i,{widgets:a,widgetsRef:l}=Ke(t.region),n=St(a.value.map(d=>({name:d.name,command:d.name,label:d.label,closable:!!d.closable,checked:!1}))),r=V(()=>n.filter(d=>!d.closable||d.checked)),o=S((u=r.value[0])==null?void 0:u.name);return e({currentTab:o,widgets:a,widgetsRef:l}),(d,c)=>(h(),k(s(Mt),{class:"v-workspace-region",items:r.value,modelValue:o.value,"onUpdate:modelValue":c[0]||(c[0]=m=>o.value=m)},{default:y(()=>[(h(!0),B(M,null,q(s(a),m=>(h(),k(Tl,{key:m.name},[o.value===m.name?(h(),k(s(Qe),{key:0,ref_for:!0,ref_key:"widgetsRef",ref:l,region:d.region,widget:m},null,8,["region","widget"])):O("",!0)],1024))),128))]),_:1},8,["items","modelValue"]))}}),il={EmptyRegion:am,Brand:nm,Toolbar:im,Actions:rm,Apps:vm,Workspace:hm,Settings:gm,Status:bm,Preview:ym};class Im extends Yo{publish(e){return we.warning({title:"提示",message:"在线演示版本不支持发布功能，如需体验请下载本地版本。"}),Promise.resolve(!1)}publishFile(e,t){return we.warning({title:"提示",message:"在线演示版本不支持发布功能，如需体验请下载本地版本。"}),Promise.resolve(!1)}genVueContent(e,t){return we.warning({title:"提示",message:"在线演示版本不支持源码生成功能，如需体验请下载本地版本。"}),Promise.resolve("")}createRawPage(e){return j(this,null,function*(){return we.warning({title:"提示",message:"在线演示版本不支持源码模式页面，如需体验请下载本地版本。"}),Promise.resolve(!1)})}removeRawPage(e){return j(this,null,function*(){return we.warning({title:"提示",message:"在线演示版本不支持源码模式页面，如需体验请下载本地版本。"}),Promise.resolve(!1)})}uploadStaticFile(e,t){return j(this,null,function*(){return we.warning({title:"提示",message:"在线演示版本不支持文件上传，如需体验请下载本地版本。"}),Promise.resolve(null)})}getStaticFiles(e){return j(this,null,function*(){return we.warning({title:"提示",message:"在线演示版本不支持文件上传，如需体验请下载本地版本。"}),Promise.resolve([])})}getPluginMaterial(e){return j(this,null,function*(){return we.warning({title:"提示",message:"在线演示版本不支持引用和插件，如需体验请下载本地版本。"}),Promise.resolve(null)})}}export{Im as L,Om as M,gn as N,Fm as P,je as _,Tm as a,Bm as c,Dm as r,zm as s};
