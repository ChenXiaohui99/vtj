const __vite__fileDeps=["./Editor-BKlikwSl-CCI34AuT.js","./monaco-editor-CTrvQq0V.js","./monaco-editor-BoaUnmrp.css","./@vue-BS4o5x1j.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{n as ht,h as ne,o as Qe,p as Wt,q as jl,r as Ot,s as st,t as Lt,u as bt,v as ot,w as it,m as oe,x as ye,y as Al,A as Pl,e as he,B as Dl,C as El,D as zl,F as Vt,G as Bl,H as jt,I as Rl,J as Fl,z as Jl,E as Tl,K as Nt,b as Mt,a as $e,L as Wl,M as Ut,N as It,O as ge,P as ft,g as qt,k as Ol,j as Ll,f as Nl,Q as Ml,R as Ul,S as Il}from"./element-plus-GqJsSxs2.js";import{i as ql,w as Hl,p as Ql,s as Gl,r as Xl,a as Kl,b as $l,R as Ht,$ as Yl,U as xe,Q as yt,o as Zl,c as ea,L as ta,d as la,e as aa,k as na,y as sa,V as oa,f as rt,P as Ce,g as z,v as ia,h as wt,j as Qt,n as Gt,O as M,l as Z,C as kt,q as Xt,m as te,t as ra,_ as Kt,u as ua,x as da,z as ca,A as ma,B as pa,D as ut,J as va,F as ga,E as dt,G as Le,N as ha,K as ba,S as At,T as fa,W as ya,X as Ne,Y as wa,Z as Pt,a0 as ka,a1 as $t,a2 as Sa,a3 as Ye,a4 as Yt,a5 as fe,a6 as Zt,a7 as xa,a8 as Ze,a9 as _e,aa as el,ab as et,ac as _a,ad as Be,ae as tl,af as Ca,ag as ll,ah as Va,ai as Je,aj as ja,ak as Me,al as Aa,am as Pa,an as Da,ao as Dt,ap as ct,aq as Et,ar as Ea,as as za,at as Ba,au as Ra,av as Fa,aw as al,ax as Ja,ay as Ta,az as nl,aA as Wa,aB as Oa,aC as La,aD as Na,aE as Ma,aF as Ua,aG as Ia,aH as qa,aI as Ha,aJ as Qa,aK as Ga,aL as Xa,aM as Ka,aN as $a,aO as Ya,aP as Za,aQ as en,aR as tn,aS as ln,aT as sl,aU as an,aV as nn,aW as sn,aX as on,aY as rn,aZ as un,a_ as dn,a$ as cn,b0 as mn,b1 as pn,b2 as vn,b3 as gn,b4 as hn,b5 as bn,b6 as fn,b7 as ol,b8 as yn,b9 as wn,ba as kn,bb as Sn,bc as xn,bd as _n,be as Cn,bf as Vn,bg as jn,bh as An,bi as Pn,bj as Dn,bk as En,bl as zn,bm as Bn,bn as Rn,bo as Fn,bp as Jn,bq as Tn,br as zt,bs as Wn,bt as il,bu as On,bv as Ln,bw as Nn,bx as Mn,by as Un,bz as In,bA as qn,bB as lt,bC as Hn,bD as Qn}from"./index-D46P2FKf.js";import{_ as Gn}from"./monaco-editor-CTrvQq0V.js";import{d as j,k as x,o as u,c as V,Z as T,_ as c,U as f,u as t,a as _,S as y,X as C,r as k,Y as q,F as J,a9 as W,m as mt,f as H,O as I,P as Ge,aa as Xe,a5 as Oe,j as rl,I as ul,at as dl,av as Xn,n as ke,bD as je,J as Te,an as Bt,V as Pe,$ as ze,W as cl,Q as re,a1 as Ie,w as Kn,ab as $n,M as Se,bB as pt,aU as Yn,L as Zn,s as vt,G as St,ad as ml,ae as pl,aC as vl,af as es}from"./@vue-BS4o5x1j.js";import{p as Ue,q as ts,s as ls}from"./@vueuse-tFK-tFUF.js";import{p as as}from"./mockjs-CfUV2g9n.js";import{n as ns,D as ss,T as os,P as is,k as gl,j as rs,U as us,M as hl,E as xt,B as ds,d as cs,V as ms}from"./@element-plus-BSDNBkvb.js";const Pu="/vtj/",Du="LCDP",Eu="低代码开发平台";/**!
 * Copyright (c) 2024, VTJ.PRO All rights reserved.
 * @name @vtj/designer 
 * @author CHC chenhuachun1549@dingtalk.com 
 * @version 0.8.0
 * @license <a href="https://vtj.pro/license.html">MIT License</a>
 */const ps="0.8.0",Rt={width:390,height:844},Ft={width:1180,height:820},Ve=/^[A-Za-z_$][\w_-]*$/,vs=["click","dblclick","mouseenter","mouseleave","mousedown","mouseup","mouseover","contextmenu"],gs=["keydown","keyup","keypress"],hs=["GET","POST","PUT","PATCH","DELETE","JSONP"],bs=["stop","prevent","capture","self","once","passive"];var be=(d=>(d.Block="block",d.Node="node",d))(be||{});function bl(){const d=ce(),e=x(()=>d.project.value?.dependencies??[]),l=x(()=>d.project.value?.apis??[]);return{engine:d,dependencies:e,apis:l}}function De(d,e){const l=x(()=>Cl.getWidgets(t(d),t(e)).filter(n=>!n.invisible)),a=k();return{widgets:l,widgetsRef:a}}function fl(){const d=ce();return{span:x(()=>{const e=d.skeleton?.skeletonRef.leftWidth||400,l=Math.min(Math.floor((e-50)/120),24);return Math.floor(24/l)}),engine:d}}function fs(){const d=ce(),e=x(()=>d.project.value?.blocks??[]);return{engine:d,blocks:e}}const ys=(d=[])=>d.map(e=>e.name);function ws(){const d=ce(),{components:e,groups:l,componentMap:a}=d.assets,n=Ie({}),o=x(()=>{const h={};return l.value&&l.value.forEach(b=>{h[b.name]=b}),h}),i=x(()=>l.value?l.value.map(h=>({label:`${h.label} (${h.count})`,name:h.name,disabled:!h.children?.length})):[]),s=k(i.value[0]?.name),r=k(""),v=x(()=>o.value[s.value]);Kn(()=>{const h=i.value.reduce((b,g)=>(b[g.name]=ys(o.value[g.name].children),b),{});Object.assign(n,h)}),H(i,h=>{h.length&&!s.value&&(s.value=h[0].name)},{immediate:!0});const m=x(()=>{const h=r.value.toLowerCase();return!h||!e?[]:e.filter(b=>b.name.toLowerCase().includes(h)||b.label?.toLowerCase().includes(h))});return{components:e,groups:l,componentMap:a,groupMap:o,tabs:i,model:n,currentTab:s,currentGroup:v,searchKey:r,searchResult:m}}function ue(){const d=ce(),e=x(()=>d.current.value),l=x(()=>d.simulator.renderer?.context??null),a=x(()=>d.isEmptyCurrent.value);return{engine:d,current:e,isEmpty:a,context:l}}function ks(d,e,l,a){const n=ce();n.simulator.init(d,e,l,a);const o=x(()=>n.simulator.designer.value),i=x(()=>at("hover",o.value?.hover.value)),s=x(()=>at("dropping",o.value?.dropping.value)),r=x(()=>at("selected",o.value?.selected.value));return H(n.changed,()=>{o.value?.updateRect()}),{designer:o,dropping:s,hover:i,selected:r}}function Ss(d,e=!0){const{top:l,height:a,width:n,left:o}=d||{};if(a>100&&n>200)return"inner";let i,s;return s=l>30?"top":"bottom",i=e||o<300&&n<300?"left":"right",[i,s].join("-")}function xs(d){const{rect:e,type:l}=d,{left:a,width:n,top:o,height:i}=e,s={left:a,width:n,top:o,height:i};switch(l){case"left":s.left=0,s.width=0;break;case"right":s.left=s.left+s.width-4,s.width=0;break;case"bottom":s.top=s.top+s.height-4,s.height=0;break;case"top":s.height=0;break}return s}function at(d,e){if(!e)return null;const{left:l,top:a,width:n,height:o}=d==="dropping"?xs(e):e.rect,i={left:`${l}px`,top:`${a}px`,width:`${n}px`,height:`${o}px`,visibility:n||o?"visible":"hidden"};return{...e,style:i,position:Ss(e.rect,d!=="selected")}}function we(){const d=ce(),e=x(()=>d.simulator.designer.value),l=x(()=>e.value?.selected.value),a=x(()=>Z(l.value?.model));return{engine:d,designer:e,selected:l,isSelectBlock:a}}function _s(d,e){const l=k(""),{selected:a,isSelectBlock:n}=we(),o=x(()=>a.value?.model.id),i=x(()=>{const r=pt(d),v=pt(e),m=[];if(!r)return m;const h=v?.__contextRefs[o.value||""],b=v===h||n.value?[]:Object.keys(h?.context||{}).filter(R=>!["context","ref"].includes(R)).map(R=>`this.context.${R}`);b.length&&m.push({title:"上下文",items:b});const g=r.inject.map(R=>`this.${R.name}`);g.length&&m.push({title:"注入",items:g});const p=r.props.map(R=>typeof R=="string"?`this.$props.${R}`:`this.$props.${R.name}`);p.length&&m.push({title:"属性",items:p});const w=Object.keys(r.state).map(R=>`this.state.${R}`);w.length&&m.push({title:"状态",items:w});const S=Object.keys(r.computed).map(R=>`this.${R}.value`);S.length&&m.push({title:"计算属性",items:S});const D=Object.keys(r.methods).map(R=>`this.${R}`);D.length&&m.push({title:"方法",items:D});const P=Object.keys(r.dataSources).map(R=>`this.${R}`);P.length&&m.push({title:"数据源",items:P});const B=Object.keys(v?.$refs||{}).map(R=>`this.$refs.${R}`);return B.length&&m.push({title:"refs",items:B}),m}),s=x(()=>{if(!l.value)return i.value;const r=l.value.toLowerCase(),v=[];return i.value.forEach(m=>{const h=m.items.filter(b=>b.toLowerCase().includes(r));h.length&&v.push({title:m.title,items:h})}),v});return{keyword:l,options:i,searchResult:s}}const He=[{name:"StringSetter",label:"文本"},{name:"ExpressionSetter",label:"表达式"}];function Cs(d){const e=ce(),l=x(()=>{const r=d.value?.model||null;return Z(r)?null:r}),a=k();H(l,async r=>{r?.from?a.value=await e.assets.getBlockMaterial(r.from)||void 0:a.value=void 0},{immediate:!0});const n=x(()=>l.value?[{name:"key",setters:He,value:l.value.getPropValue("key")},{name:"ref",setters:He,value:l.value.getPropValue("ref")},{name:"class",label:"class",setters:He,value:l.value.getPropValue("class")},{name:"children",label:"文本",title:"如设置组件文本，将清空子组件",setters:He,value:Array.isArray(l.value.children)?"":l.value.children}]:[]),o=x(()=>{if(!l.value)return[];const r=a.value||e.assets.componentMap.get(l.value.name);return r?(r.props||[]).map(v=>({...v,value:l.value?.getPropValue(v.name)??v.defaultValue})):[]}),i=r=>n.value.some(v=>v.name===r)||o.value.some(v=>v.name===r)||r==="style",s=x(()=>l.value?Object.keys(l.value.props).filter(r=>!i(r)).map(r=>({name:r,setters:"InputSetter",value:l.value?.getPropValue(r)})):[]);return{commonProps:n,componentProps:o,customProps:s,node:l,change:(r,v)=>{l.value&&(r==="children"?l.value.setChildren(v):l.value.setProp(r,v))},addCustom:r=>{r&&l.value?.setProp(r,"")},removeCustom:r=>{l.value?.removeProp(r)},isExist:i}}function le(d,e="提示"){return ge.warning({title:e,message:d})}async function We(d){return await ft.confirm(d,"提示",{type:"warning"}).catch(()=>!1)}function me(d,e="success"){return $e({message:d,type:e})}function ie(d,e,l=!1){let a=!0;try{d.type==="JSExpression"?Me(d,e,l,!0):Fa(d,e,l,!0)}catch(n){a=!1,ge.error({title:"代码错误",message:n.message})}return a}function yl(){const d=ce(),e=x(()=>d.simulator.designer.value),l=x(()=>d.current.value?d.history.value:null),a=x(()=>l.value?.items.length||0),n=()=>{e.value?.cleanHelper(),l.value?.forward()},o=()=>{l.value?.backward(),e.value?.cleanHelper()},i=v=>{e.value?.cleanHelper(),l.value?.load(v),me("已载入历史记录","success")},s=x(()=>a.value<=1?!0:(l.value?.index||-1)<=0),r=x(()=>a.value<=1?!0:(l.value?.index||-1)>=a.value-1);return{engine:d,history:l,total:a,forward:n,backward:o,load:i,forwardDisabled:s,backwardDisabled:r}}function Re(){const d=ce(),e=x(()=>d.project.value);return{engine:d,project:e}}function Vs(d){const e=ce(),l=x(()=>{const s=d.value?.model||null;return!s||Z(s)?null:s}),a=k();H(l,async s=>{s?.from?a.value=await e.assets.getBlockMaterial(s.from)||void 0:a.value=void 0},{immediate:!0});const n=x(()=>{if(Z(l.value))return[];const s=l.value?.events||{};return vs.map(r=>({name:r,event:s[r]}))}),o=x(()=>{if(Z(l.value))return[];const s=l.value?.events||{};return gs.map(r=>({name:r,event:s[r]}))}),i=x(()=>{if(!l.value||Z(l.value))return[];const s=l.value.events||{};return(a.value?.events||e.assets.componentMap.get(l.value.name)?.events||[]).map(r=>{const v=typeof r=="string"?r:r.name;return{name:v,event:s[v]}})});return{mouseEventList:n,keyboardEventList:o,componentEventList:i}}const js=(d,e)=>new il({name:d,value:void 0,iterator:e}),As=(d="modelValue")=>new il({name:"vModel",value:void 0,arg:d});function Ps(d){if(!d)return[];const{props:e=[],events:l=[]}=d;if(e.length&&l.length){const a=l.filter(n=>(typeof n=="string"?n:n.name).startsWith("update:")).map(n=>n=typeof n=="string"?n:n.name);return a.length?e.filter(n=>a.some(o=>o.includes(n.name))):[]}return[]}function Ds(d){const e=ce(),l=x(()=>{const h=d.value?.model||null;return Z(h)?null:h}),a=h=>x(()=>l.value&&(l.value.directives||[]).find(b=>b.name===h)||js(h)),n=()=>x(()=>{if(!l.value)return[];const h=e.assets.componentMap.get(l.value.name||"");return(h?Ps(h):[]).map(b=>(l.value?.directives||[]).find(g=>g.name==="vModel"&&g.arg==b.name)||As(b.name))}),o=a("vIf"),i=a("vShow"),s=a("vBind"),r=a("vFor"),v=n(),m={vIf:o,vShow:i,vBind:s,vFor:r};return{engine:e,node:l,vIf:o,vShow:i,vBind:s,vFor:r,vModels:v,onValueChange:(h,b)=>{const g=m[h];l.value&&(b?(g.value.value=b,l.value.setDirective(g.value)):(g.value.value=void 0,l.value.removeDirective(g.value)))},onForChange:(h,b)=>{if(l.value){if(h==="value"){b?(r.value.value=b,l.value.setDirective(r.value)):l.value.removeDirective(r.value);return}(h==="item"||h==="index")&&(r.value.iterator={...r.value.iterator,[h]:b||void 0},l.value.setDirective(r.value))}},onModelChange:(h,b)=>{if(!l.value)return;const g=parseInt(h),p=v.value[g];p&&(b?(p.value=b,l.value.setDirective(p)):(p.value=void 0,l.value.removeDirective(p)))}}}function Es(){const{engine:d,project:e}=Re(),l=x(()=>e.value?.apis||[]);return{engine:d,project:e,apis:l}}const zs="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1711803009570'%20class='icon'%20viewBox='0%200%201280%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='1500'%20width='320'%20height='256'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cpath%20d='M557.85%201023l-122-35.4c-12.8-3.6-20-17-16.4-29.8L692.45%2017.4c3.6-12.8%2017-20%2029.8-16.4l122%2035.4c12.8%203.6%2020%2017%2016.4%2029.8L587.65%201006.6c-3.8%2012.8-17%2020.2-29.8%2016.4z%20m-228-224.4l87-92.8c9.2-9.8%208.6-25.4-1.6-34.4L234.05%20512l181.2-159.4c10.2-9%2011-24.6%201.6-34.4l-87-92.8c-9-9.6-24.2-10.2-34-1L7.65%20494.4c-10.2%209.4-10.2%2025.6%200%2035l288.2%20270.2c9.8%209.2%2025%208.8%2034-1z%20m654.4%201.2l288.2-270.2c10.2-9.4%2010.2-25.6%200-35L984.25%20224.2c-9.6-9-24.8-8.6-34%201L863.25%20318c-9.2%209.8-8.6%2025.4%201.6%2034.4L1046.05%20512l-181.2%20159.4c-10.2%209-11%2024.6-1.6%2034.4l87%2092.8c9%209.8%2024.2%2010.2%2034%201.2z'%20fill='%230157fe'%20p-id='1501'%3e%3c/path%3e%3c/svg%3e",Bs=["title","src"],Rs={key:1},Fs=j({name:"LogoWidget",inheritAttrs:!1,__name:"index",props:{icon:{},text:{default:"VTJ"},link:{}},setup(d){const{engine:e}=ue(),l=d,a=x(()=>l.icon||e.project.value?.config?.logo||zs),n=()=>{l.link&&(location.href=l.link)};return(o,i)=>(u(),V("div",{class:"v-logo-widget",onClick:n},[a.value?(u(),V("img",{key:0,title:l.text,class:"v-logo-widget__icon",src:a.value},null,8,Bs)):(u(),V("span",Rs,T(l.text),1))]))}}),Js={class:"v-empty-widget"},Ts=j({name:"EmptyWidget",__name:"index",setup(d){return(e,l)=>(u(),V("div",Js,"EmptyWidget"))}}),Ws={class:"v-switcher-widget"},Os={key:1},Ls=j({name:"SwitcherWidget",inheritAttrs:!1,__name:"index",emits:["click"],setup(d,{emit:e}){const l=e,{engine:a}=ue(),n=x(()=>a.project.value?.config?.title||a.project.value?.name),o=x(()=>a.project.value?.currentFile?.title),i=()=>{l("click",a.project.value)};return(s,r)=>(u(),V("div",Ws,[c(t(ne),{size:"small",round:"",onClick:i},{default:f(()=>[c(t(Zl),{class:"v-switcher-widget__back"}),_("span",null,T(n.value),1),o.value?(u(),y(t(ht),{key:0,direction:"vertical"})):C("",!0),o.value?(u(),V("span",Os,T(o.value),1)):C("",!0)]),_:1})]))}}),Ns={class:"v-toolbar-widget"},Ms=j({name:"ToolbarWidget",inheritAttrs:!1,__name:"index",props:{preview:{type:Boolean}},setup(d,{expose:e}){const l=d,{forward:a,backward:n,forwardDisabled:o,backwardDisabled:i}=yl(),s=k("pc");return e({mode:s}),(r,v)=>(u(),V("div",Ns,[c(t(Wt),{size:"small",modelValue:s.value,"onUpdate:modelValue":v[0]||(v[0]=m=>s.value=m)},{default:f(()=>[c(t(Qe),{label:"pc",value:"pc"},{default:f(()=>[c(t(ea))]),_:1}),c(t(Qe),{label:"mobile",value:"mobile"},{default:f(()=>[c(t(ta))]),_:1}),c(t(Qe),{label:"pad",value:"pad"},{default:f(()=>[c(t(la))]),_:1})]),_:1},8,["modelValue"]),C("",!0),c(t(jl),null,{default:f(()=>[c(t(ne),{type:"default",size:"small",onClick:t(n),disabled:t(i)||!!l.preview},{default:f(()=>[c(t(aa))]),_:1},8,["onClick","disabled"]),c(t(ne),{type:"default",size:"small",onClick:t(a),disabled:t(o)||!!l.preview},{default:f(()=>[c(t(na))]),_:1},8,["onClick","disabled"])]),_:1})]))}}),Us={class:"v-actions-widget"},Is=_("span",null,"发布",-1),qs=j({name:"ActionsWidget",inheritAttrs:!1,__name:"index",props:{coder:{type:Boolean,default:!0}},setup(d){const{engine:e,designer:l}=we(),a=k(!1),n=()=>{e.current.value?(a.value?e.skeleton?.getWidget("Previewer")?.widgetRef.refresh():(l.value?.setSelected(null),e.simulator.refresh()),me("刷新完成","success")):me("请先打开文件","warning")},o=async()=>{e.current.value?(a.value&&(e.skeleton?.closePreview(),a.value=!1,await Yt(1e3)),l.value?.setSelected(e.current.value)):me("请先打开文件","warning")},i=()=>{if(e.project.value)if(e.current.value){if(a.value){e.skeleton?.closePreview(),a.value=!1;return}e.skeleton?.openPreview(""),a.value=!0}else me("请先打开文件","warning")},s=()=>{const v=e.project.value;v&&(v.currentFile?v.publish(v.currentFile):me("请先打开文件","warning"))},r=v=>{const m=e.project.value;m&&(v==="current"?s():m.publish())};return(v,m)=>(u(),V("div",Us,[C("",!0),C("",!0),c(t(ne),{onClick:i,type:a.value?"warning":"default",size:"small",title:"预览"},{default:f(()=>[c(t(sa))]),_:1},8,["type"]),c(t(ne),{onClick:n,type:"default",size:"small",title:"刷新"},{default:f(()=>[c(t(oa))]),_:1}),c(t(ne),{type:"default",size:"small",title:"页面设置",onClick:o},{default:f(()=>[c(t(Ht))]),_:1}),c(t(ht),{direction:"vertical"}),c(t(Lt),{"split-button":"",type:"primary",size:"small",onClick:s,onCommand:r},{dropdown:f(()=>[c(t(Ot),null,{default:f(()=>[c(t(st),{command:"current"},{default:f(()=>[q("发布页面")]),_:1}),c(t(st),{command:"project"},{default:f(()=>[q("整站发布")]),_:1})]),_:1})]),default:f(()=>[Is]),_:1})]))}}),Hs={class:"v-icon-setter"},Qs={class:"v-icon-setter__content"},Gs={class:"v-icon-setter__list"},wl=j({name:"IconSetter",__name:"icon",props:{modelValue:{default:""},size:{default:"small"}},emits:["change","update:modelValue"],setup(d,{emit:e}){const l=d,a=e,n=k(!1),o=k(l.modelValue),i=k(""),s=x(()=>rt[l.modelValue]||l.modelValue),r=x(()=>{const g=Object.entries(rt);return i.value?g.filter(p=>p[0].toLowerCase().includes(i.value)):g}),v=g=>{o.value=g},m=()=>{a("change",o.value),a("update:modelValue",o.value),n.value=!1},h=()=>{o.value="",a("change",""),a("update:modelValue",""),n.value=!1},b=()=>{n.value=!0};return(g,p)=>(u(),V("div",Hs,[c(t(ye),{size:l.size,readonly:"",placeholder:"请选择图标","model-value":l.modelValue,"suffix-icon":t(gl),onFocus:b},{prepend:f(()=>[c(t(_e),{icon:s.value},null,8,["icon"])]),_:1},8,["size","model-value","suffix-icon"]),n.value?(u(),y(t(Be),{key:0,title:"图标选择器",width:"1000px",height:"600px",cancel:"",submit:"",clear:"",modelValue:n.value,"onUpdate:modelValue":p[1]||(p[1]=w=>n.value=w),onSubmit:m},{extra:f(()=>[c(t(ne),{size:"default",type:"warning",onClick:h},{default:f(()=>[q(" 清除绑定 ")]),_:1})]),default:f(()=>[_("div",Qs,[c(t(ye),{size:l.size,"prefix-icon":t(hl),clearable:"",modelValue:i.value,"onUpdate:modelValue":p[0]||(p[0]=w=>i.value=w),placeholder:"请输入查询关键字"},null,8,["size","prefix-icon","modelValue"]),_("div",Gs,[(u(!0),V(J,null,W(r.value,w=>(u(),y(t(_e),{icon:w[1],onClick:S=>v(w[0]),class:I({"is-active":o.value===w[0]})},null,8,["icon","onClick","class"]))),256)),r.value.length===0?(u(),y(t(oe),{key:0})):C("",!0)])])]),_:1},8,["modelValue"])):C("",!0)]))}}),Xs=j({name:"PageForm",__name:"form",props:{item:{},parentId:{}},setup(d){const e=d,{project:l}=Re(),a=x(()=>e.item?"编辑页面":"新增页面"),n=()=>({dir:!1,name:"",title:"",icon:"",mask:!0,hidden:!1,raw:!1}),o=k(e.item||n()),i=[{label:"页面",value:!1},{label:"目录",value:!0}],s=v=>{o.value&&(o.value.name=tl(v))},r=async v=>l.value?.existPageName(v.name,[v.id])?(le("页面名称已存在，请更换"),!1):(e.item?l.value?.updatePage(v):l.value?.createPage(v,e.parentId),!0);return(v,m)=>(u(),y(t(Ce),{title:a.value,width:"800px",height:"500px","form-props":{tooltipMessage:!1},model:o.value,"submit-method":r},{default:f(()=>[c(t(z),{name:"dir",label:"类型",editor:"radio",options:i,props:{button:!0,size:"small"},disabled:!!e.item,required:""},null,8,["disabled"]),c(t(z),{name:"name",label:"名称",required:"",onChange:s,rules:{pattern:t(Ve),message:"名称格式不正确"}},null,8,["rules"]),c(t(z),{name:"title",label:"标题",required:""}),c(t(z),{name:"icon",label:"菜单图标",editor:"none"},{editor:f(()=>[c(wl,{modelValue:o.value.icon,"onUpdate:modelValue":m[0]||(m[0]=h=>o.value.icon=h),size:"default"},null,8,["modelValue"])]),_:1}),c(t(z),{visible:{dir:!1},name:"mask",label:"包含母版",editor:"switch"}),c(t(z),{name:"hidden",label:"隐藏菜单",editor:"switch"}),c(t(z),{visible:{dir:!1},disabled:!!e.item,inline:"",name:"raw",label:"源码模式",editor:"switch",tip:"页面是非低代码开发，不能在线编辑"},null,8,["disabled"])]),_:1},8,["title","model"]))}}),Jt=j({name:"VIcon",__name:"Icon",props:{icon:{},label:{},active:{type:Boolean,default:!1},open:{type:Boolean,default:!1}},emits:["click"],setup(d,{emit:e}){const l=d,a=e,n=x(()=>({"is-active":l.active,"is-open":l.open})),o=()=>{a("click")};return(i,s)=>(u(),y(t(Nt),{effect:"dark",placement:"right",content:i.label,"show-after":600},{default:f(()=>[_("div",{class:I(["v-apps-region__icon",n.value]),onClick:o},[(u(),y(cl(i.icon)))],2)]),_:1},8,["content"]))}}),U=j({name:"VPanel",__name:"panel",props:{title:{},subtitle:{},plus:{type:Boolean},back:{type:Boolean},edit:{type:Boolean},remove:{type:Boolean},save:{type:Boolean},header:{type:Boolean,default:!0},collapsable:{type:Boolean}},emits:["plus","back","remove","save","edit"],setup(d,{emit:e}){const l=d,a=e,n=k(!1),o=x(()=>({"is-collapsed":!!n.value})),i=()=>{a("plus")},s=()=>{a("edit")},r=()=>{a("back")},v=()=>{a("remove")},m=()=>{a("save")},h=x(()=>l.header?{content:l.title,subtitle:l.subtitle,icon:l.back?ss:void 0,onClickBack:l.back?r:void 0,onClick:l.collapsable?()=>{n.value=!n.value}:void 0}:null),b=g=>{n.value=g};return(g,p)=>(u(),y(t(Ze),{class:I(["v-panel",o.value]),border:!1,header:h.value,fit:""},$n({actions:f(()=>[l.plus?(u(),y(t(fe),{key:0,size:g.$attrs.size,mode:"icon",icon:t(Zt),background:"hover",title:"新增",onClick:i},null,8,["size","icon"])):C("",!0),l.edit?(u(),y(t(fe),{key:1,size:g.$attrs.size,mode:"icon",icon:t(os),background:"hover",title:"编辑",onClick:s},null,8,["size","icon"])):C("",!0),l.remove?(u(),y(t(fe),{key:2,size:g.$attrs.size,mode:"icon",icon:t(is),background:"hover",title:"清除",onClick:v},null,8,["size","icon"])):C("",!0),l.save?(u(),y(t(fe),{key:3,size:g.$attrs.size,mode:"icon",icon:t(xa),background:"hover",title:"保存",onClick:m},null,8,["size","icon"])):C("",!0),l.collapsable?Pe((u(),y(t(fe),{key:4,size:g.$attrs.size,mode:"icon",icon:t(gl),background:"hover",title:"展开",onClick:p[0]||(p[0]=w=>b(!1))},null,8,["size","icon"])),[[ze,n.value]]):C("",!0),l.collapsable?Pe((u(),y(t(fe),{key:5,size:g.$attrs.size,mode:"icon",icon:t(rs),background:"hover",title:"收起",onClick:p[1]||(p[1]=w=>b(!0))},null,8,["size","icon"])),[[ze,!n.value]]):C("",!0),Se(g.$slots,"actions")]),default:f(()=>[Se(g.$slots,"default")]),_:2},[g.$slots.footer?{name:"footer",fn:f(()=>[Se(g.$slots,"footer")]),key:"0"}:void 0]),1032,["class","header"]))}}),Ks={class:"v-tabs__header"},$s={key:0,class:"v-tabs__actions"},tt=j({__name:"tabs",props:{items:{default:()=>[]},menus:{},modelValue:{},stretch:{type:Boolean},checkable:{type:Boolean}},emits:["update:modelValue","command","remove","action-click"],setup(d,{emit:e}){const l=d,a=e,n=k((l.modelValue||l.items[0]?.name)??"");H(n,()=>{a("update:modelValue",n.value)}),H(()=>l.modelValue,r=>{n.value=r});const o=r=>{a("command",r)},i=r=>{a("remove",r)},s=r=>{a("action-click",r)};return(r,v)=>(u(),y(t(Ze),{class:"v-tabs",border:!1,fit:"",radius:!1},{header:f(()=>[_("div",Ks,[c(t(wt),{class:"v-tabs__tabs",items:l.items,type:"card",modelValue:n.value,"onUpdate:modelValue":v[0]||(v[0]=m=>n.value=m),onTabRemove:i,onActionClick:s,stretch:l.stretch},null,8,["items","modelValue","stretch"]),l.menus&&l.menus.length?(u(),V("div",$s,[l.menus&&l.menus.length?(u(),y(t(fe),{key:0,mode:"icon",size:"small",icon:t(xt),background:"hover",dropdown:{size:"small",placement:"bottom-end"},menus:l.menus,onCommand:o},{item:f(({item:m})=>[_("span",null,[l.checkable?(u(),y(t($t),{key:0,class:I({"v-tabs__checked":!0,"is-checked":m.checked})},null,8,["class"])):C("",!0),q(" "+T(m.label),1)])]),_:1},8,["icon","menus"])):C("",!0)])):C("",!0)])]),default:f(()=>[Se(r.$slots,"default")]),_:3}))}}),Ys={key:2,class:"v-item__index"},Zs={class:"v-item__content"},eo={key:3,class:"v-item__subtitle"},de=j({name:"VItem",__name:"item",props:{icon:{},index:{},tag:{},tagType:{},title:{},subtitle:{},actions:{default:()=>[]},background:{type:Boolean},border:{type:Boolean},switch:{type:Boolean},modelValue:{},active:{type:Boolean},hover:{type:Boolean},small:{type:Boolean}},emits:["click","action","update:modelValue","switch"],setup(d,{emit:e}){const l={add:{label:"创建",icon:Zt},copy:{label:"复制",icon:nl},edit:{label:"编辑",icon:el},remove:{label:"删除",icon:Ye},lock:{label:"锁定",icon:Qt},unlock:{label:"解锁",icon:On},invisible:{label:"隐藏",icon:Gt},visible:{label:"显示",icon:Ln},home:{label:"主页",icon:Nn}},a=d,n=e,o=k(!!a.modelValue),i=x(()=>a.actions.map(m=>{const h=l[m];return{name:m,...h}})),s=x(()=>({"is-background":a.background,"is-border":a.border,"is-active":a.active,"is-hover":a.hover,"is-small":a.small})),r=()=>{n("click",a.modelValue)},v=async m=>{m==="remove"?await ft.confirm("确定删除吗？","提示",{type:"warning"}).catch(()=>!1)&&n("action",{name:m,modelValue:a.modelValue}):n("action",{name:m,modelValue:a.modelValue})};return H(o,m=>{n("update:modelValue",m),n("switch",m)}),H(()=>a.modelValue,m=>{o.value=!!m}),(m,h)=>(u(),y(t(M),{class:I(["v-item",s.value]),justify:"space-between",align:"center",onClick:r},{default:f(()=>[c(t(M),{class:"v-item__title",align:"center"},{default:f(()=>[Se(m.$slots,"default",{},()=>[m.icon?(u(),y(t(_e),{key:0,icon:m.icon},null,8,["icon"])):C("",!0),a.tag?(u(),y(t(Wl),{key:1,class:"v-item__tag",size:"small",type:a.tagType},{default:f(()=>[q(T(a.tag),1)]),_:1},8,["type"])):C("",!0),m.index!==void 0?(u(),V("span",Ys," # "+T(m.index),1)):C("",!0),_("span",Zs,T(m.title),1),m.subtitle?(u(),V("span",eo,T(m.subtitle),1)):C("",!0)])]),_:3}),c(t(M),{class:"v-item__actions",onClick:h[1]||(h[1]=Oe(()=>{},["stop"]))},{default:f(()=>[(u(!0),V(J,null,W(i.value,b=>(u(),y(t(fe),{name:b.name,title:b.label,mode:"icon",size:"small",background:"none",type:"info",icon:b.icon,onClick:g=>v(b.name)},null,8,["name","title","icon","onClick"]))),256)),a.switch?(u(),y(t(Ut),{key:0,modelValue:o.value,"onUpdate:modelValue":h[0]||(h[0]=b=>o.value=b),class:"v-item__switch",size:"small"},null,8,["modelValue"])):C("",!0),Se(m.$slots,"status")]),_:3})]),_:3},8,["class"]))}}),to=["draggable"],lo={class:"v-box__name"},ao={class:"v-box__label"},gt=j({name:"VBox",__name:"box",props:{name:{},title:{},editable:{type:Boolean},active:{type:Boolean},draggable:{type:Boolean},tag:{},tagType:{}},emits:["edit","remove","dragstart","dragend"],setup(d,{emit:e}){const l=d,a=e,n=()=>{a("edit")},o=async()=>{await ft.confirm("确认删除？","提示",{type:"warning"}).catch(()=>!1)&&a("remove")},i=x(()=>({"is-active":l.active,"is-draggable":l.draggable})),s=()=>{a("dragstart",l)},r=()=>{a("dragend",l)};return(v,m)=>(u(),V("div",{class:I(["v-box",i.value]),draggable:v.draggable,onDragstart:s,onDragend:r},[c(t(M),{direction:"column",justify:"center",align:"center"},{default:f(()=>[_("span",lo,T(l.name),1),_("span",ao,T(l.title),1)]),_:1}),l.editable?(u(),y(t(M),{key:0,class:"v-box__footer",justify:"flex-end",align:"center"},{default:f(()=>[c(t(_e),{icon:t(el),onClick:n},null,8,["icon"]),c(t(_e),{icon:t(Ye),onClick:o},null,8,["icon"])]),_:1})):C("",!0),l.tag?(u(),V("span",{key:1,class:I(["v-box__tag",{[`is-${l.tagType}`]:!!l.tagType}])},T(l.tag),3)):C("",!0)],42,to))}}),no={class:"v-context-viewer"},so=j({__name:"viewer",props:{context:{}},emits:["pick","copy"],setup(d,{emit:e}){const l=d,a=e,n=["$provider","$apis","$components","context"],o=m=>{const h=m.value,b=lt(h);return b==="Object"||b==="Module"?Object.keys(h||{}).length===0:b==="Array"?h.length===0:!0},i=(m,h="this")=>typeof m=="object"?Array.isArray(m)?m.map((b,g)=>{const p=`[${g}]`;return{label:p,value:b,type:lt(b),path:`${h}${p}`}}):Object.entries(m).map(([b,g])=>({label:b,value:g,type:lt(g),path:`${h}.${b}`})).filter(b=>!b.label.startsWith("__")&&!n.includes(b.label)):[],s=(m,h)=>{if(m.level===0)h(i(l.context));else{const b=es(m.data.value);h(i(b,m.data.path))}},r=m=>{a("copy",m.path)},v=m=>{a("pick",m.path)};return(m,h)=>(u(),V("div",no,[m.context?(u(),y(t(bt),{key:0,lazy:"",load:s,"expand-on-click-node":!1,props:{isLeaf:o}},{default:f(({data:b})=>[c(de,{title:b.label,clickable:"",onClick:g=>v(b),background:"",actions:["copy"],onAction:g=>r(b),grow:"",small:""},null,8,["title","onClick","onAction"])]),_:1},8,["props"])):C("",!0)]))}}),_t=j({__name:"binder",props:{title:{},context:{},block:{},model:{},rules:{},modelValue:{type:Boolean},submitMethod:{type:Function},unbindEnabled:{type:Boolean}},emits:["unbind","submit","cancel","pick","update:modelValue","close"],setup(d,{emit:e}){const l=d,a=e,{searchResult:n,keyword:o}=_s(l.block,l.context),{copy:i}=ts({}),s=[{name:"normal",label:"常用"},{name:"viewer",label:"高级"}],r=k("normal"),v=k(),m=async D=>{a("submit",D),l.submitMethod?await l.submitMethod(D)&&h():h()},h=()=>{a("update:modelValue",!1),a("close")},b=()=>{a("unbind")},g=()=>{h()},p=async()=>{v.value?.submit()},w=D=>{a("pick",D)},S=D=>{i(D),$e.success({message:"已经复制到粘贴板"})};return(D,P)=>(u(),y(t(Be),{"model-value":l.modelValue,class:"v-binder",title:D.title,width:"1000px",height:"600px","body-padding":!1,maximizable:!1,minimizable:!1,onClose:h},{default:f(()=>[c(t(M),{fit:"",direction:"row",overflow:"hidden"},{default:f(()=>[c(t(M),{width:"30%",height:"100%"},{default:f(()=>[c(tt,{class:"v-binder__tabs",items:s,modelValue:r.value,"onUpdate:modelValue":P[1]||(P[1]=B=>r.value=B)},{default:f(()=>[c(t(M),{class:"v-binder__tab-content",fit:"",padding:"",flex:!1},{default:f(()=>[Pe(_("div",null,[c(t(ye),{modelValue:t(o),"onUpdate:modelValue":P[0]||(P[0]=B=>mt(o)?o.value=B:null),size:"small",clearable:"","prefix-icon":t(hl),placeholder:"筛选可用项"},null,8,["modelValue","prefix-icon"]),(u(!0),V(J,null,W(t(n),B=>(u(),V("div",null,[c(t(ht),{"border-style":"dotted"},{default:f(()=>[q(T(B.title),1)]),_:2},1024),(u(!0),V(J,null,W(B.items,R=>(u(),y(de,{title:R,background:"",actions:["copy"],small:"",onClick:ee=>w(R),onAction:ee=>S(R)},null,8,["title","onClick","onAction"]))),256))]))),256)),t(n).length?C("",!0):(u(),y(t(oe),{key:0}))],512),[[ze,r.value==="normal"]]),Pe(c(so,{context:l.context,onCopy:S,onPick:w},null,8,["context"]),[[ze,r.value==="viewer"]])]),_:1})]),_:1},8,["modelValue"])]),_:1}),c(t(Ze),{grow:"",header:null,border:!1},{footer:f(()=>[c(t(M),{justify:"space-between"},{default:f(()=>[c(t(M),null,{default:f(()=>[D.unbindEnabled?(u(),y(t(ne),{key:0,type:"warning",size:"default",onClick:b},{default:f(()=>[q(" 移除绑定 ")]),_:1})):C("",!0)]),_:1}),c(t(M),null,{default:f(()=>[c(t(ne),{type:"default",size:"default",onClick:g},{default:f(()=>[q(" 取消 ")]),_:1}),c(t(ne),{type:"primary",size:"default",onClick:p},{default:f(()=>[q(" 确定 ")]),_:1})]),_:1})]),_:1})]),default:f(()=>[c(t(kt),{ref_key:"formRef",ref:v,class:"v-binder__form",footer:!1,"label-position":"top","tooltip-message":!1,model:l.model,rules:l.rules,"submit-method":m},{default:f(()=>[Se(D.$slots,"default")]),_:3},8,["model","rules"])]),_:3})]),_:3})]),_:3},8,["model-value","title"]))}}),oo={class:"v-slots-picker__sn"},io=j({__name:"slots",props:{slots:{default:()=>[]}},emits:["submit","update:modelValue"],setup(d,{emit:e}){const l=d,a=e,n=k(),o=x(()=>`${50*Math.ceil(l.slots.length/4)+180}px`),i=r=>{n.value=r},s=()=>{n.value?(a("submit",n.value),a("update:modelValue",!1)):le("请选择插槽")};return(r,v)=>(u(),y(t(Be),re({class:"v-slots-picker",title:"选择插槽",width:"600px",height:o.value,submit:"",cancel:"",onSubmit:s},r.$attrs),{default:f(()=>[c(t(qt),{title:"该组件支持多个插槽，请选择放置到其中一个",type:"warning",closable:!1}),c(t(M),{class:"v-slots-picker__content",justify:"space-around",alignContent:"flex-start",gap:"",wrap:"wrap"},{default:f(()=>[(u(!0),V(J,null,W(l.slots,(m,h)=>(u(),y(t(M),{class:I(["v-slots-picker__item",{"is-active":m.name===n.value?.name}]),grow:"",flex:!1,onClick:b=>i(m)},{default:f(()=>[_("span",oo,"#"+T(h+1),1),q(" "+T(m.name),1)]),_:2},1032,["class","onClick"]))),256))]),_:1})]),_:1},16,["height"]))}}),kl=j({name:"Viewport",__name:"viewport",props:{mode:{default:"pc"},width:{},height:{}},setup(d){const e=d,l=x(()=>[`is-${e.mode}`]),a=x(()=>{if(e.mode==="pc")return 1;const o=e.mode==="mobile"?Rt:Ft,{width:i,height:s}=o,r=i>0?(e.width||0)/i:1,v=s>0?(e.height||0)/s:1;return Math.min(r,v)}),n=x(()=>{if(e.mode==="pc")return{};const o=e.mode==="mobile"?Rt:Ft,{width:i,height:s}=o;return{width:`${i}px`,height:`${s}px`,left:"50%",top:"50%",transform:`translate(-50%, -50%) scale(${a.value})`}});return(o,i)=>(u(),V("div",{class:I(["v-viewport",l.value]),style:Ge(n.value)},[Se(o.$slots,"default")],6))}}),ro=j({name:"PagesWidget",__name:"index",setup(d){const{project:e,engine:l}=Re(),a=x(()=>e.value?.pages||[]),{current:n}=ue(),o=k(!1),i=k(),s=k(),r=()=>{s.value=void 0,i.value=void 0,o.value=!0},v=async g=>{const{name:p,modelValue:w}=g,{data:S,node:D}=w;if(p==="add"&&(i.value=void 0,s.value=S.id,o.value=!0),p==="edit"&&(i.value=et(S),s.value=void 0,o.value=!0),p==="remove"){if(S.dir){const P=e.value?.getPage(S.id);if(P&&P.children?.length){le("请先删除子页面");return}}e.value?.removePage(S.id)}if(p==="copy"){const P=D.parent?.data.id;e.value?.clonePage(S,P)}p==="home"&&(e.value?.setHomepage(S.id),me("设置主页成功","success"))},m=async g=>{g.raw&&me("这是源码模式页面，不能低代码设计","warning"),g.dir||g.raw?l.project.value?.deactivate():l.project.value?.active(g)},h=(g,p,w)=>w==="inner"?!!p.data.dir:!0,b=()=>{e.value?.update({pages:pt(a)})};return(g,p)=>(u(),y(t(U),{class:"v-pages-widget",title:"页面管理",plus:"",subtitle:"(共 0 条)",onPlus:r},{default:f(()=>[c(t(bt),{data:a.value,"node-key":"id","default-expand-all":"",draggable:"","allow-drop":h,onNodeDrop:b},{default:f(({data:w,node:S})=>[c(t(de),{class:"v-pages-widget__item",icon:t(rt)[w.icon],title:w.title,subtitle:w.name,"model-value":{data:w,node:S},actions:w.dir?["add","edit","remove"]:w.raw?["home","edit","remove"]:["home","copy","edit","remove"],onAction:v,onClick:D=>m(w),active:t(n)?.id===w.id,tag:t(e)?.homepage===w.id?"主页":void 0,"tag-type":"success",grow:"",small:"",background:"",hover:""},null,8,["icon","title","subtitle","model-value","actions","onClick","active","tag"])]),_:1},8,["data"]),o.value?(u(),y(Xs,{key:0,modelValue:o.value,"onUpdate:modelValue":p[0]||(p[0]=w=>o.value=w),item:i.value,"parent-id":s.value},null,8,["modelValue","item","parent-id"])):C("",!0)]),_:1}))}}),uo={class:"v-file-setter"},Ct=j({name:"FileSetter",__name:"file",props:{modelValue:{},attachment:{}},emits:["change","update:modelValue"],setup(d,{emit:e}){const l=d,a=e,{engine:n,project:o}=Re(),i=k([]),s=k(!1),r=P=>Array.isArray(P)?P.map(B=>({name:B.filename,url:B.filepath})):P?{name:P.filename,url:P.filepath}:null,v=async P=>{if(n&&o.value){const B=await n.service.uploadStaticFile(P,o.value.id);return r(B)}return null},m=P=>P?(P||"").split(",").map(B=>({url:B})):[],h=k(m(l.modelValue)),b=x(()=>Array.isArray(h.value)?h.value.map(P=>P.url).join(","):h.value?h.value.url:"");H(()=>l.modelValue,P=>{h.value=m(P)}),H(s,async P=>{if(P){const B=await n.service.getStaticFiles(o.value?.id).catch(()=>null);i.value=r(B)}});const g=()=>{if(!h.value||Array.isArray(h.value)&&h.value.length===0)return le("请选择文件"),!1;const P=(l.attachment?.accept||"").toLowerCase().split(",");return P.length>0?[].concat(h.value).every(B=>{const R=B.name||B.url.split("?")[0],ee=R.substring(R.lastIndexOf(".")).toLowerCase();return P.includes(ee)})?!0:(le(`只支持 ${P.join(",")} 文件`),!1):!0},p=()=>{g()&&(a("change",b.value),a("update:modelValue",b.value),s.value=!1)},w=()=>{h.value=[],a("change",void 0),a("update:modelValue",void 0),s.value=!1},S=()=>{s.value=!0},D=P=>{P.name&&o.value?.id&&n.service.removeStaticFile(P.name,o.value?.id)};return(P,B)=>(u(),V("div",uo,[c(t(ye),re({readonly:"",onFocus:S,"model-value":l.modelValue,"suffix-icon":t(us)},P.$attrs),null,16,["model-value","suffix-icon"]),s.value?(u(),y(t(Be),{key:0,modelValue:s.value,"onUpdate:modelValue":B[1]||(B[1]=R=>s.value=R),title:"文件选择器",width:"600px",height:"400px",cancel:"",submit:"",onSubmit:p},{extra:f(()=>[c(t(ne),{type:"warning",size:"default",onClick:w},{default:f(()=>[q(" 清除 ")]),_:1})]),default:f(()=>[c(t(_a),re({size:"small","list-type":"list",selectable:!0,uploader:v,"model-value":i.value,"select-value":h.value,"onUpdate:selectValue":B[0]||(B[0]=R=>h.value=R)},l.attachment,{onRemove:D}),null,16,["model-value","select-value"])]),_:1},8,["modelValue"])):C("",!0)]))}}),co=j({name:"BlocksWidget",__name:"index",setup(d){const{span:e}=fl(),{blocks:l,engine:a}=fs(),n=[{label:"设计",value:"Schema",border:!0},{label:"引用",value:"UrlSchema",border:!0},{label:"插件",value:"Plugin",border:!0}],o={Schema:{label:"设计",type:"primary"},UrlSchema:{label:"引用",type:"warning"},Plugin:{label:"插件",type:"danger"}},i=k(void 0),{current:s}=ue(),r=k(!1),v=x(()=>i.value?.id?"编辑区块":"新增区块"),m=x(()=>`(共 ${l.value.length} 个)`),h=()=>({fromType:"Schema",name:"",title:"",urls:"",library:"",type:"block"}),b=x(()=>{if(i.value?.fromType==="UrlSchema")return".json";if(i.value?.fromType==="Plugin")return".js,.css,.json"}),g=x(()=>i.value?.fromType==="Plugin"),p=async E=>{const F=E,A=a.project.value;if(!A)return!1;if(E.id)if(!A.existBlockName(F.name,[F.id]))A.updateBlock(F);else return le(`名称【${F.name}】已经存在，请更换名称`),!1;else if(!A.existBlockName(F.name))A.createBlock(F);else return le(`名称【${F.name}】已经存在，请更换名称`),!1;return!0},w=()=>{i.value=h(),r.value=!0},S=E=>{i.value=et(E),r.value=!0},D=E=>{a.project.value?.removeBlock(E.id)},P=E=>{i.value&&(i.value.name=tl(E))},B=async E=>{(!E.fromType||E.fromType==="Schema")&&a.project.value?.active(E)},R=async E=>{const F=Ca(E),A=await a.assets.getBlockMaterial(F,E.name),Q=a.skeleton?.getWidget("Designer")?.widgetRef?.designer;Q&&A&&Q.setDragging(A)},ee=()=>{const E=a.skeleton?.getWidget("Designer")?.widgetRef?.designer;E&&E.setDragging(null)};return(E,F)=>(u(),y(t(U),{class:"v-blocks-widget",title:"区块管理",subtitle:m.value,plus:"",onPlus:w},{default:f(()=>[c(t(ot),{wrap:"wrap",gutter:5},{default:f(()=>[(u(!0),V(J,null,W(t(l),A=>(u(),y(t(it),{key:A.id,span:t(e)},{default:f(()=>[c(t(gt),{name:A.name,title:A.title,active:t(s)?.id===A.id,editable:"",tag:o[A.fromType||"Schema"]?.label,tagType:o[A.fromType||"Schema"]?.type,onEdit:Q=>S(A),onRemove:Q=>D(A),onClick:Q=>B(A),draggable:t(s)?.id!==A.id,onDragstart:Q=>R(A),onDragend:ee},null,8,["name","title","active","tag","tagType","onEdit","onRemove","onClick","draggable","onDragstart"])]),_:2},1032,["span"]))),128))]),_:1}),t(l).length?C("",!0):(u(),y(t(oe),{key:0})),c(t(Ce),{modelValue:r.value,"onUpdate:modelValue":F[0]||(F[0]=A=>r.value=A),title:v.value,model:i.value,width:"600px",height:"400px","form-props":{tooltipMessage:!1},"submit-method":p},{default:f(()=>[c(t(z),{name:"fromType",label:"类型",required:"",editor:"radio",disabled:!!i.value?.id,options:n},null,8,["disabled"]),c(t(z),{name:"name",label:"名称",required:"",tip:"名称为英文驼峰格式",rules:{message:"名称格式错误",pattern:t(Ve)},onChange:P},null,8,["rules"]),c(t(z),{name:"title",label:"标题",required:""}),i.value?.fromType==="Plugin"?(u(),y(t(z),{key:0,name:"library",label:"插件名称",required:""})):C("",!0),["Plugin","UrlSchema"].includes(i.value?.fromType||"")?(u(),y(t(z),{key:1,name:"urls",label:"资源文件",required:"",editor:Ct,props:{attachment:{accept:b.value,multiple:g.value}}},null,8,["props"])):C("",!0)]),_:1},8,["modelValue","title","model"])]),_:1},8,["subtitle"]))}}),mo={class:"v-components-widget__search"},po={key:0,class:"v-components-widget__result"},vo={class:"v-components-widget__list"},go=j({name:"ComponentsWidget",__name:"index",setup(d){const{span:e,engine:l}=fl(),{tabs:a,currentTab:n,currentGroup:o,model:i,searchKey:s,searchResult:r}=ws(),v=h=>{const b=l.skeleton?.getWidget("Designer")?.widgetRef?.designer;b&&b.setDragging(h)},m=()=>{const h=l.skeleton?.getWidget("Designer")?.widgetRef?.designer;h&&h.setDragging(null)};return(h,b)=>(u(),y(t(U),{class:"v-components-widget",title:"组件库",body:{flex:!0,direction:"column"}},{default:f(()=>[_("div",mo,[c(t(ye),{modelValue:t(s),"onUpdate:modelValue":b[0]||(b[0]=g=>mt(s)?s.value=g:null),placeholder:"搜索组件",clearable:"",size:"small"},{prefix:f(()=>[c(t(ia))]),_:1},8,["modelValue"])]),t(s)?(u(),V("div",po,[c(t(ot),{wrap:"wrap",gutter:5},{default:f(()=>[(u(!0),V(J,null,W(t(r),g=>(u(),y(t(it),{span:t(e),key:g.name},{default:f(()=>[c(t(gt),{name:g.name,title:g.label||g.name,draggable:"",onDragstart:p=>v(g),onDragend:m},null,8,["name","title","onDragstart"])]),_:2},1032,["span"]))),128))]),_:1}),t(r).length?C("",!0):(u(),y(t(oe),{key:0}))])):(u(),y(t(wt),{key:1,items:t(a),modelValue:t(n),"onUpdate:modelValue":b[2]||(b[2]=g=>mt(n)?n.value=g:null)},{default:f(()=>[_("div",vo,[t(o)?(u(),y(t(Al),{key:0,modelValue:t(i)[t(n)],"onUpdate:modelValue":b[1]||(b[1]=g=>t(i)[t(n)]=g)},{default:f(()=>[(u(!0),V(J,null,W(t(o).children,g=>(u(),y(t(Pl),{key:g.name,name:g.name,title:`${g.label} (${g.count})`},{default:f(()=>[g.components?(u(),y(t(ot),{key:0,wrap:"wrap",gutter:5},{default:f(()=>[(u(!0),V(J,null,W(g.components,p=>(u(),y(t(it),{span:t(e),key:p.name},{default:f(()=>[c(t(gt),{name:p.name,title:p.label||p.name,draggable:"",onDragstart:w=>v(p),onDragend:m},null,8,["name","title","onDragstart"])]),_:2},1032,["span"]))),128))]),_:2},1024)):C("",!0)]),_:2},1032,["name","title"]))),128))]),_:1},8,["modelValue"])):C("",!0)])]),_:1},8,["items","modelValue"]))]),_:1}))}}),ho=j({name:"OutlineWidget",__name:"index",setup(d){const{engine:e,designer:l,selected:a}=we(),{current:n}=ue(),o=k([]),i=(E,F)=>{if(F==="slot")return[];if(Z(E))return E.locked?["unlock"]:["lock"];const A=E.parent;return A&&(A.locked||A.invisible)?[]:n.value?.locked?[]:E.locked?["unlock"]:E.invisible?["visible"]:["lock","invisible","copy","remove"]},s=(E,F)=>{const A={};if(!E.some(se=>se.slot))return r(E);for(const se of E){const L=se.slot?.name||"default";A[L]||(A[L]=[]),A[L].push(se)}const Q=[];for(const[se,L]of Object.entries(A))Q.push({id:`${F.id}-${se}`,label:`#${se}`,type:"slot",model:F,disabled:!0,children:r(L)});return Q},r=E=>{const F=[];return E.forEach(A=>{const Q={id:A.id,label:A.name,type:A.id,model:A};Array.isArray(A.children)&&(Q.children=s(A.children,A)),F.push(Q)}),F},v=()=>{if(!n.value)return[];const{id:E,name:F,nodes:A}=n.value;return[{id:E,label:F,type:E,model:n.value,children:r(A)}]},m=async()=>{o.value=v(),a.value?.model&&(await ke(),l.value?.setSelected(a.value.model))},h=x(()=>a.value?.model.id),b=E=>{const F=E.data;if(F.type==="slot"||Z(F.model)||F.model.locked||F.model.name==="template")return!1;const A=e.assets.componentMap.get(F.model.name);return A?(l.value?.setDragging(A),!0):!1},g=async(E,F,A)=>{const Q=F.data,se={prev:"top",next:"bottom",inner:"inner"}[A];let L=!1;if(Z(Q.model))L=A==="inner",l.value?.setDropping(L?Q.model:null,"inner");else{const X=Q.model;L=!!await l.value?.allowDrop(X,se),l.value?.setDropping(L?X:null,"inner")}return L},p=E=>{const F=E?.model;if(!F||F.invisible||E.type==="slot"){l.value?.setSelected(null),l.value?.setHover(null);return}l.value?.setSelected(F),l.value?.setHover(null)},w=async(E,F,A)=>{const Q=E.data,se=F.data;if(Z(se.model)){l.value?.setDropping(null),l.value?.setDragging(null);return}const L=se.model,X={before:"left",after:"right"}[A]||"inner";if(!await l.value?.allowDrop(L,X)){l.value?.setDropping(null),m(),$e.warning({message:`${Q.model.name}不能放置到该位置`}),l.value?.setDragging(null);return}const O=await l.value?.getDropSlot(A==="inner"?L:L.parent);if(O!==null){const Fe=Q.model;Fe.slot=O,n.value?.move(Fe,L,X)}else m();l.value?.setDropping(null),l.value?.setDragging(null),e.simulator.refresh()},S=E=>{if(E.type==="slot"){l.value?.setHover(null);return}Z(E.model)?l.value?.setHover(E.model):(l.value?.setHover(E.model),E.model.invisible&&l.value?.setHover(null),E.model.name==="slot"&&l.value?.setHover(null))},D=()=>{l.value?.setHover(null)},P=E=>{const F=E.data;F.dragging=!0;const A=e.assets.componentMap.get(F.model.name);A&&l.value?.setDragging(A)},B=async E=>{const F=E.data;F.dragging=!1},R=(E,F)=>{E&&((E.id===F.id||!Z(E)&&F.isChild(E))&&l.value?.setSelected(null),l.value?.setHover(null))},ee=E=>{const{name:F,modelValue:A}=E,Q=a.value?.model;switch(F){case"lock":R(Q,A),A.lock();break;case"unlock":R(Q,A),A.unlock();break;case"invisible":R(Q,A),A.setVisible(!1);break;case"visible":A.setVisible(!0);break;case"copy":const se=n.value?.cloneNode(A);se&&l.value?.setSelected(se);break;case"remove":R(Q,A),n.value?.removeNode(A);break}};return H(e.changed,m,{immediate:!0}),(E,F)=>(u(),y(t(U),{class:"v-outline-widget",title:"大纲树"},{default:f(()=>[(u(),y(t(bt),{key:t(e).changed.value,data:o.value,"node-key":"id","default-expand-all":"",draggable:"","empty-text":"请新建或打开文件","current-node-key":h.value,"highlight-current":!0,"expand-on-click-node":!1,"allow-drop":g,"allow-drag":b,onCurrentChange:p,onNodeDrop:w,onNodeDragStart:P,onNodeDragEnd:B},{default:f(({data:A,node:Q})=>[c(t(de),{class:I(["v-outline-widget__item",{"is-locked":A.model.locked,"is-invisible":A.model.invisible,"is-dragging":A.dragging,"is-slot":A.type==="slot"}]),active:!A.model.invisible&&Q.isCurrent&&A.type!=="slot",grow:"",small:"",background:"",hover:"","model-value":A.model,icon:A.model.locked?t(Qt):A.model.invisible?t(Gt):void 0,title:A.label,subtitle:A.type,actions:i(A.model,A.type),onAction:ee,onMouseenter:se=>S(A),onMouseleave:D},null,8,["class","active","model-value","icon","title","subtitle","actions","onMouseenter"])]),_:1},8,["data","current-node-key"]))]),_:1}))}}),bo=j({name:"HistoryWidget",__name:"index",setup(d){const{history:e,load:l,total:a}=yl(),n=x(()=>`(共 ${a.value} 条)`),o=s=>{s.name==="remove"&&e.value?.remove(s.modelValue.id)},i=async()=>{await We("确定要清空历史记录吗？")&&e.value?.clear()};return(s,r)=>(u(),y(t(U),{class:"v-history-widget",title:"历史记录",subtitle:n.value,remove:!!t(a),onRemove:i},{default:f(()=>[t(a)===0?(u(),y(t(oe),{key:0,"image-size":50})):C("",!0),t(e)?(u(!0),V(J,{key:1},W(t(e).items,(v,m)=>(u(),y(t(de),{index:m+1,title:v.label,"model-value":v,active:m==t(e).index,small:"",background:"",actions:["remove"],onAction:o,onClick:h=>t(l)(v.id)},null,8,["index","title","model-value","active","onClick"]))),256)):C("",!0)]),_:1},8,["subtitle","remove"]))}}),fo=j({__name:"base-info",setup(d){const e=hs.map(l=>({label:l,value:l.toLowerCase()}));return(l,a)=>(u(),V("div",null,[c(t(z),{name:"method",label:"请求类型",required:"",editor:"radio",options:t(e)},null,8,["options"]),c(t(z),{name:"name",label:"接口名称",required:"",rules:{pattern:t(Ve),message:"名称格式不正确"}},null,8,["rules"]),c(t(z),{name:"label",label:"备注说明",required:""}),c(t(z),{name:"url",label:"接口URL",required:""})]))}}),ae=Yn({loader:()=>Gn(()=>import("./Editor-BKlikwSl-CCI34AuT.js"),__vite__mapDeps([0,1,2,3]),import.meta.url),loadingComponent:j({render(){return Te("div","正在拼命加载...")}}),errorComponent:j({render(){return Te("div","组件加载失败！")}})}),yo=j({__name:"request-settings",setup(d){const e=[{label:"表单",value:"form"},{label:"JSON",value:"json"},{label:"文件",value:"data"}],l=St("currentModel",null);return(a,n)=>(u(),V("div",null,[c(t(M),{justify:"space-between"},{default:f(()=>[c(t(z),{name:"settings.loading",size:"small",label:"加载提示",editor:"switch"}),c(t(z),{size:"small",name:"settings.failMessage",label:"失败提示",editor:"switch"}),c(t(z),{size:"small",name:"settings.validSuccess",label:"校验成功",editor:"switch"}),c(t(z),{size:"small",name:"settings.originResponse",label:"原始响应",editor:"switch"}),c(t(z),{size:"small",name:"settings.injectHeaders",label:"注入请求头",editor:"switch"})]),_:1}),c(t(z),{size:"small",name:"settings.type",label:"发送数据类型",editor:"radio",options:e,props:{button:!0}}),c(t(z),{size:"small",name:"headers.value",label:"请求头配置",tip:"支持 JSExpression 或 JSFunction"},{editor:f(()=>[c(t(ae),{dark:"",height:"260px",modelValue:t(l).headers.value,"onUpdate:modelValue":n[0]||(n[0]=o=>t(l).headers.value=o)},null,8,["modelValue"])]),_:1})]))}}),wo=j({__name:"jsonp-options",setup(d){return(e,l)=>(u(),V("div",null,[c(t(z),{name:"jsonpOptions.jsonpCallback",size:"small",label:"jsonpCallback"}),c(t(z),{name:"jsonpOptions.jsonpCallbackFunction",size:"small",label:"jsonpCallbackFunction"}),c(t(z),{name:"jsonpOptions.timeout",size:"small",label:"timeout",editor:"number"}),c(t(z),{name:"jsonpOptions.crossorigin",size:"small",label:"crossorigin",editor:"switch"})]))}}),ko=_("span",null,"模拟数据模板",-1),So=j({__name:"mock-template",setup(d){const e=St("currentModel",null),{project:l}=Re(),a=x(()=>l.value?.config||{}),n=()=>{window.open("https://vtj.pro/help/mock.html")};return(o,i)=>(u(),V("div",null,[a.value.mock?C("",!0):(u(),y(t(qt),{key:0,type:"warning",title:"需要在项目配置中开启模拟数据",closable:!1,style:{"margin-bottom":"20px"}})),c(t(z),{size:"small",name:"mock",label:"开启模拟数据",disabled:!a.value.mock,editor:"switch"},null,8,["disabled"]),c(t(M),{justify:"space-between"},{default:f(()=>[ko,c(t(fe),{icon:t(al),mode:"text",label:"帮助",onClick:n},null,8,["icon"])]),_:1}),c(t(z),{size:"small",name:"mockTemplate.value",label:" "},{editor:f(()=>[c(t(ae),{dark:"",height:a.value.mock?"330px":"280px",lang:"typescript",disabled:!a.value.mock,readonly:!a.value.mock,modelValue:t(e).mockTemplate.value,"onUpdate:modelValue":i[0]||(i[0]=s=>t(e).mockTemplate.value=s)},null,8,["height","disabled","readonly","modelValue"])]),_:1})]))}}),xo={key:0},_o=j({__name:"form",props:{model:{},project:{}},setup(d){const e=d,l=x(()=>e.model?"编辑API":"新增API"),a=k("base"),n=k(),o=k(),i=k(e.model||{}),s=k(!1),r=k(""),v=[{label:"基础信息",value:"base"},{label:"请求配置",value:"settings"},{label:"模拟数据",value:"mock"}];Zn("currentModel",i);const m=x(()=>i.value?.method==="jsonp");H(()=>e.model,w=>{i.value=Object.assign({},w||{}),a.value="base"},{immediate:!0}),H(a,async()=>{o.value?.formRef.validate(async w=>{w||(await ke(),a.value="base")})});const h=()=>{n.value?.cancel()},b=()=>{o.value?.submit()},g=async w=>e.project?.existApiName(i.value.name,e.model?[i.value.id]:[])?(le(`API名称 [ ${i.value.name} ] 已存在`),!1):i.value.headers&&!ie(i.value.headers,window)||i.value.mockTemplate&&!ie(i.value.mockTemplate,window)?!1:(e.project?.setApi(i.value),n.value?.close(),!0),p=()=>{if(i.value.mockTemplate){const w=Me(i.value.mockTemplate,{},!0),{url:S,method:D}=i.value,P=as.mock(w({url:S,type:D}));r.value=JSON.stringify(P,null,2),s.value=!0}};return(w,S)=>(u(),y(t(Be),{ref_key:"dialogRef",ref:n,title:l.value,width:"1000px",height:"600px"},{default:f(()=>[c(t(M),{fit:""},{default:f(()=>[c(t(M),{width:"100px",shrink:!1},{default:f(()=>[c(t(wt),{modelValue:a.value,"onUpdate:modelValue":S[0]||(S[0]=D=>a.value=D),items:v,"tab-position":"left",border:"",fit:""},null,8,["modelValue"])]),_:1}),c(t(Ze),{header:null,border:!1,overflow:"auto",grow:"",shrink:!0,fit:""},{footer:f(()=>[c(t(M),{justify:"space-between"},{default:f(()=>[_("div",null,[a.value==="mock"?(u(),y(t(ne),{key:0,disabled:!e.project?.config?.mock,type:"warning",onClick:p},{default:f(()=>[q(" 预览 ")]),_:1},8,["disabled"])):C("",!0)]),_("div",null,[c(t(ne),{onClick:h},{default:f(()=>[q("取消")]),_:1}),c(t(ne),{type:"primary",onClick:b},{default:f(()=>[q("保存")]),_:1})])]),_:1})]),default:f(()=>[c(t(kt),{ref_key:"formRef",ref:o,footer:!1,labelPosition:"top",tooltipMessage:!1,model:i.value,submitMethod:g},{default:f(()=>[Pe(c(fo,null,null,512),[[ze,a.value==="base"]]),a.value==="settings"?(u(),V("div",xo,[m.value?(u(),y(wo,{key:0})):(u(),y(yo,{key:1}))])):C("",!0),a.value==="mock"?(u(),y(So,{key:1})):C("",!0)]),_:1},8,["model"])]),_:1})]),_:1}),s.value?(u(),y(t(It),{key:0,class:"v-drawer",modelValue:s.value,"onUpdate:modelValue":S[1]||(S[1]=D=>s.value=D),title:"模拟数据结果",direction:"btt","append-to-body":"",size:"80%"},{default:f(()=>[c(t(ae),{"model-value":r.value,border:"",dark:"",height:"100%",lang:"json"},null,8,["model-value"])]),_:1},8,["modelValue"])):C("",!0)]),_:1},8,["title"]))}}),Co=j({name:"ApisWidget",__name:"index",setup(d){const e=k(!1),l=k(null),a=k(!1),n=x(()=>o.value?.apis||[]),{project:o}=Re(),i=()=>({id:"",method:"get",name:"",label:"",url:"",settings:{loading:!0,failMessage:!0,validSuccess:!0,originResponse:!1,injectHeaders:!1,type:"form"},headers:{type:"JSExpression",value:"({})"},jsonpOptions:{},mock:!1,mockTemplate:{type:"JSFunction",value:`(req) => {
  return {
    code: 0,
    data: null
  }
}`}}),s=()=>{e.value=!0,a.value=!1,l.value=i()},r={get:"success",post:"primary",put:"warning",delete:"danger",patch:"warning",jsonp:"info"},v=h=>{h.name==="edit"&&m(h.modelValue),h.name==="remove"&&o.value?.removeApi(h.modelValue.name)},m=h=>{a.value=!0,l.value=et(h),e.value=!0};return(h,b)=>(u(),y(t(U),{class:"v-apis-widget",title:"API管理",plus:"",onPlus:s},{default:f(()=>[(u(!0),V(J,null,W(n.value,g=>(u(),y(t(de),{key:g.id,small:"",title:g.name,subtitle:g.label,"model-value":g,tag:g.method?.toUpperCase(),"tag-type":r[g.method||"get"],background:"",actions:["edit","remove"],onClick:p=>m(g),onAction:v},null,8,["title","subtitle","model-value","tag","tag-type","onClick"]))),128)),n.value.length===0?(u(),y(t(oe),{key:0,"image-size":50})):C("",!0),c(_o,{modelValue:e.value,"onUpdate:modelValue":b[0]||(b[0]=g=>e.value=g),model:l.value,project:t(o)},null,8,["modelValue","model","project"])]),_:1}))}}),Vo=j({name:"DepsWidget",__name:"index",setup(d){const{dependencies:e,engine:l}=bl(),a=k(!1),n=k(!1),o=k({}),i=x(()=>n.value?"查看依赖":o.value?"编辑依赖":"新增依赖"),s=p=>p.required||p.official?[]:["edit","remove"],r=p=>p.official&&!p.required,v=async p=>(p.urls=p.urls.split(`
`),l.project.value?.setDeps(p),!0),m=p=>{l.project.value?.setDeps(p)},h=()=>{n.value=!1,a.value=!0,o.value=null},b=p=>{n.value=!0,o.value={...p,urls:p.urls.join(`
`)},a.value=!0},g=(p,w)=>{w.name==="edit"&&(o.value={...p,urls:p.urls.join(`
`)},n.value=!1,a.value=!0),w.name==="remove"&&l.project.value?.removeDeps(p)};return(p,w)=>(u(),y(t(U),{class:"v-deps-widget",title:"依赖管理",plus:"",onPlus:h},{default:f(()=>[(u(!0),V(J,null,W(t(e),S=>(u(),y(t(de),{key:S.package,title:S.package,subtitle:S.version,actions:s(S),background:"",switch:r(S),modelValue:S.enabled,"onUpdate:modelValue":D=>S.enabled=D,onSwitch:D=>m(S),onClick:D=>b(S),onAction:D=>g(S,D)},null,8,["title","subtitle","actions","switch","modelValue","onUpdate:modelValue","onSwitch","onClick","onAction"]))),128)),c(t(Ce),{modelValue:a.value,"onUpdate:modelValue":w[0]||(w[0]=S=>a.value=S),width:"600px",height:"500px",title:i.value,model:o.value,submitMethod:v,formProps:{disabled:n.value,tooltipMessage:!1}},{default:f(()=>[c(t(z),{name:"package",label:"包名",required:"",disabled:!!o.value},null,8,["disabled"]),c(t(z),{name:"version",label:"版本",required:""}),c(t(z),{name:"library",label:"导出名称",required:""}),c(t(z),{name:"urls",label:"资源文件",editor:"textarea",props:{rows:3},tip:"多个资源可以换行输入",required:""}),c(t(z),{name:"assetsUrl",label:"物料URL"}),c(t(z),{name:"assetsLibrary",label:"物料名称"})]),_:1},8,["modelValue","title","model","formProps"])]),_:1}))}}),jo=j({__name:"actions",props:{position:{},model:{},path:{default:()=>[]}},emits:["action"],setup(d,{emit:e}){const l=d,a=e,n=x(()=>l.model.name),o=x(()=>!Z(l.model)&&!l.model.locked),i=x(()=>l.path.map(m=>({command:m,label:m.name,onMouseenter:()=>{a("action",{type:"hover",model:m})}}))),s=[{name:"prev",icon:Ja,title:"向前移动"},{name:"next",icon:Ta,title:"向后移动"},{name:"copy",icon:nl,title:"复制"},{name:"remove",icon:Ye,title:"删除"}],r=m=>{a("action",{type:"selected",model:m.command})},v=async m=>{m.name==="remove"?await We("确定删除?")&&a("action",{type:m.name,model:l.model}):a("action",{type:m.name,model:l.model})};return(m,h)=>(u(),V("div",{class:I(["v-actions",[`is-${l.position}`]])},[c(t(fe),{mode:"icon",size:"small",icon:t(ll),label:n.value,menus:i.value,background:"none",onCommand:r},null,8,["icon","label","menus"]),c(t(Va),{disabled:!o.value,mode:"icon",size:"small",items:s,background:"none",onClick:v},null,8,["disabled"])],2))}}),Ao={key:1,class:"v-designer__placeholder"},Po=j({name:"VDesigner",inheritAttrs:!1,__name:"index",setup(d,{expose:e}){const l=k(),a=k(),{width:n,height:o}=Ue(l),{dependencies:i,engine:s,apis:r}=bl(),{current:v,isEmpty:m}=ue(),h=x(()=>s.skeleton?.getWidget("Toolbar")?.widgetRef.mode??"pc"),b=x(()=>s.project.value?.config||{}),{designer:g,hover:p,dropping:w,selected:S}=ks(a,i,r,b),D=P=>{const B=P.type,R=P.model;if(v.value)switch(B){case"remove":v.value.removeNode(R),g.value?.setSelected(null);break;case"copy":const ee=v.value.cloneNode(R);g.value?.setSelected(ee);break;case"prev":v.value.movePrev(R),g.value?.setSelected(R);break;case"next":v.value.moveNext(R),g.value?.setSelected(R);break;case"hover":g.value?.setHover(R);break;case"selected":g.value?.setSelected(R);break}};return e({designer:g,mode:h}),(P,B)=>(u(),V("div",{ref_key:"container",ref:l,class:"v-designer"},[c(t(kl),{mode:h.value,width:t(n),height:t(o)},{default:f(()=>[_("iframe",{ref_key:"iframe",ref:a,frameborder:"0"},null,512),t(w)?(u(),V("div",{key:0,class:I(["v-designer__dropping","is-inner"]),style:Ge(t(w).style)},null,4)):C("",!0),t(p)?(u(),V("div",{key:1,class:"v-designer__hover",style:Ge(t(p).style)},[_("span",{class:I(`is-${t(p).position}`)},[q(T(t(p).model.name)+": ",1),_("i",null,T(t(p).model.id),1)],2)],4)):C("",!0),t(S)?(u(),V("div",{key:2,class:"v-designer__selected",style:Ge(t(S).style)},[c(jo,{position:t(S).position,model:t(S).model,path:t(S).path,onAction:D},null,8,["position","model","path"])],4)):C("",!0)]),_:1},8,["mode","width","height"]),t(v)?C("",!0):(u(),y(t(oe),{key:0,description:"请新建或打开文件"})),t(v)&&t(m)?(u(),V("div",Ao," 您可以拖拽组件放置到这里 ")):C("",!0)],512))}}),qe=j({__name:"group",props:{context:{},current:{},title:{},nameLabel:{},valueLabel:{},createEmpty:{},list:{},remove:{},submit:{},itemTitle:{type:Function,default:d=>d.name}},setup(d){const e=d,l=k(),a=k(),n=k(!1),o=k(e.createEmpty()),i=k(!1),s=x(()=>i.value?`编辑${e.title}`:`新增${e.title}`),r=()=>{i.value=!1,o.value=e.createEmpty(),n.value=!0},v=(p,w)=>{switch(w.name){case"edit":h(p);break;case"remove":e.remove(p);break}},m=p=>{o.value.value=p},h=p=>{i.value=!0,o.value={...p},n.value=!0},b=async p=>e.submit(p,i.value),g=()=>{a.value?.itemRef.validate()};return(p,w)=>(u(),y(t(U),{title:e.title,class:"v-sub-panel",size:"small",fit:!1,plus:"",onPlus:r},{default:f(()=>[(u(!0),V(J,null,W(p.list,S=>(u(),y(t(de),{title:e.itemTitle(S),border:"",actions:["edit","remove"],onAction:D=>v(S,D),onClick:D=>h(S)},null,8,["title","onAction","onClick"]))),256)),p.list.length?C("",!0):(u(),y(t(oe),{key:0,"image-size":40})),c(t(_t),{modelValue:n.value,"onUpdate:modelValue":w[1]||(w[1]=S=>n.value=S),title:s.value,"submit-method":b,model:o.value,block:p.current,context:p.context,onPick:m},{default:f(()=>[Se(p.$slots,"fields",ml(pl({model:o.value,isEdit:i.value,nameLabel:p.nameLabel,valueLabel:p.valueLabel})),()=>[c(t(z),{name:"name",label:p.nameLabel,required:"",disabled:i.value},null,8,["label","disabled"]),c(t(z),{ref_key:"codeFieldRef",ref:a,name:"value",label:p.valueLabel,required:""},{editor:f(()=>[c(t(ae),{ref_key:"editorRef",ref:l,dark:"",height:"350px",modelValue:o.value.value,"onUpdate:modelValue":w[0]||(w[0]=S=>o.value.value=S),onBlur:g},null,8,["modelValue"])]),_:1},8,["label"])])]),_:3},8,["modelValue","title","model","block","context"])]),_:3},8,["title"]))}}),Do=j({__name:"state",props:{context:{},current:{}},setup(d){const e=d,l=x(()=>Object.entries(e.current?.state||{}).map(([i,s])=>({name:i,value:Je(s)}))),a=()=>({name:"",value:""}),n=i=>e.current?.removeState(i.name),o=async(i,s)=>{const{name:r,value:v}=i;if(!s&&e.current?.state[r])return le(`名称 ${r} 已存在，请更换！`),!1;const m={type:"JSExpression",value:v};return ie(m,e.context,!0)?(e.current?.setState(r,m),!0):!1};return(i,s)=>(u(),y(qe,{title:"状态数据",current:e.current,context:e.context,list:l.value,nameLabel:"状态数据名称",valueLabel:"状态初始值 [ JSExpression ]",createEmpty:a,remove:n,submit:o},null,8,["current","context","list"]))}}),Eo=j({__name:"computed",props:{context:{},current:{}},setup(d){const e=d,l=x(()=>Object.entries(e.current?.computed||{}).map(([i,s])=>({name:i,value:Je(s)}))),a=()=>({name:"",value:"() => { }"}),n=i=>e.current?.removeFunction("computed",i.name),o=async(i,s)=>{const{name:r,value:v}=i;if(!s&&e.current?.computed[r])return le(`名称 ${r} 已存在，请更换！`),!1;const m={type:"JSFunction",value:v};return ie(m,e.context,!0)?(e.current?.setFunction("computed",r,m),!0):!1};return(i,s)=>(u(),y(qe,{title:"计算属性",current:e.current,context:e.context,list:l.value,nameLabel:"计算属性名称",valueLabel:"计算函数 [ JSFunction ]",createEmpty:a,remove:n,submit:o},null,8,["current","context","list"]))}}),zo=j({__name:"methods",props:{context:{},current:{}},setup(d){const e=d,l=x(()=>Object.entries(e.current?.methods||{}).map(([i,s])=>({name:i,value:Je(s)}))),a=()=>({name:"",value:"() => { }"}),n=i=>e.current?.removeFunction("methods",i.name),o=async(i,s)=>{const{name:r,value:v}=i;if(!s&&e.current?.methods[r])return le(`名称 ${r} 已存在，请更换！`),!1;const m={type:"JSFunction",value:v};return ie(m,e.context,!0)?(e.current?.setFunction("methods",r,m),!0):!1};return(i,s)=>(u(),y(qe,{title:"组件方法",current:e.current,context:e.context,list:l.value,nameLabel:"方法名称",valueLabel:"方法函数 [ JSFunction ]",createEmpty:a,remove:n,submit:o},null,8,["current","context","list"]))}}),Bo=j({__name:"lifeCycles",props:{context:{},current:{}},setup(d){const e=d,l=x(()=>ja.map(s=>({label:s,value:s}))),a=x(()=>Object.entries(e.current?.lifeCycles||{}).map(([s,r])=>({name:s,value:Je(r)}))),n=()=>({name:"",value:"() => { }"}),o=s=>e.current?.removeFunction("lifeCycles",s.name),i=async(s,r)=>{const{name:v,value:m}=s;if(!r&&e.current?.lifeCycles[v])return le(`名称 ${v} 已存在，请更换！`),!1;const h={type:"JSFunction",value:m};return ie(h,e.context,!0)?(e.current?.setFunction("lifeCycles",v,h),!0):!1};return(s,r)=>(u(),y(qe,{title:"生命周期",current:e.current,context:e.context,list:a.value,nameLabel:"名称",valueLabel:"函数 [ JSFunction ]",createEmpty:n,remove:o,submit:i},{fields:f(({model:v,nameLabel:m,isEdit:h,valueLabel:b})=>[c(t(z),{name:"name",label:m,editor:"select",options:l.value,required:"",disabled:h},null,8,["label","options","disabled"]),c(t(z),{name:"value",label:b,required:""},{editor:f(()=>[c(t(ae),{ref:"editorRef",dark:"",height:"350px",modelValue:v.value,"onUpdate:modelValue":g=>v.value=g},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"])]),_:1},8,["current","context","list"]))}}),Ro=j({__name:"watch",props:{context:{},current:{}},setup(d){const e=d,l=x(()=>(e.current?.watch||[]).map(s=>({...s,source:Je(s.source),handler:Je(s.handler)}))),a=()=>({source:"() => { }",deep:!1,immediate:!1,handler:"() => { }"}),n=s=>s.source,o=s=>e.current?.removeWatch(s),i=async(s,r)=>{const v={type:"JSFunction",value:s.source},m={type:"JSFunction",value:s.handler};if(!ie(v,e.context,!0)||!ie(m,e.context,!0))return!1;const h={...s,source:v,handler:m};return e.current?.setWatch(h),!0};return(s,r)=>(u(),y(qe,{title:"侦听器",current:e.current,context:e.context,list:l.value,nameLabel:"侦听源 [ JSFunction ]",valueLabel:"处理函数 [ JSFunction ]",createEmpty:a,remove:o,submit:i,itemTitle:n,grow:""},{fields:f(({model:v,nameLabel:m,valueLabel:h})=>[c(t(z),{name:"source",label:m,required:""},{editor:f(()=>[c(t(ae),{dark:"",height:"100px",modelValue:v.source,"onUpdate:modelValue":b=>v.source=b},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"]),c(t(z),{name:"deep",modelValue:v.deep,"onUpdate:modelValue":b=>v.deep=b,label:"深度监听",editor:"switch"},null,8,["modelValue","onUpdate:modelValue"]),c(t(z),{name:"immediate",modelValue:v.immediate,"onUpdate:modelValue":b=>v.immediate=b,label:"立即执行",editor:"switch"},null,8,["modelValue","onUpdate:modelValue"]),c(t(z),{name:"handler",label:h,required:""},{editor:f(()=>[c(t(ae),{dark:"",height:"130px",modelValue:v.handler,"onUpdate:modelValue":b=>v.handler=b},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"])]),_:1},8,["current","context","list"]))}}),Fo=j({__name:"index",setup(d){const{current:e,context:l}=ue();return(a,n)=>(u(),y(t(M),{class:"v-scripts-widget",direction:"column",fit:""},{default:f(()=>[c(Do,{current:t(e),context:t(l)},null,8,["current","context"]),c(Eo,{current:t(e),context:t(l)},null,8,["current","context"]),c(zo,{current:t(e),context:t(l)},null,8,["current","context"]),c(Bo,{current:t(e),context:t(l)},null,8,["current","context"]),c(Ro,{current:t(e),context:t(l)},null,8,["current","context"])]),_:1}))}}),nt=j({__name:"setters",props:{context:{},current:{},title:{},items:{},node:{},removable:{type:Boolean}},emits:["change","remove"],setup(d,{emit:e}){const l=d,a=e,n=(i,s)=>{a("change",i,s)},o=i=>{a("remove",i)};return(i,s)=>(u(),y(t(U),{title:l.title,class:"v-sub-panel",size:"small",fit:!1},{default:f(()=>[c(t(he),{class:"v-properties-widget__form",size:"small","label-width":"90px",onKeydown:s[0]||(s[0]=Xe(Oe(()=>{},["prevent","stop"]),["enter"]))},{default:f(()=>[(u(!0),V(J,null,W(l.items,r=>(u(),y(t(N),re(r,{key:`${r.name}_${l.node.id}`,current:l.current,context:l.context,removable:l.removable,onChange:n,onRemove:o}),null,16,["current","context","removable"]))),128))]),_:1})]),_:1},8,["title"]))}}),Jo=j({name:"PropertiesWidget",__name:"index",setup(d){const{current:e,context:l}=ue(),{selected:a}=we(),{node:n,commonProps:o,change:i,componentProps:s,customProps:r,addCustom:v,removeCustom:m,isExist:h}=Cs(a),b=k(!1),g=k(),p=()=>{b.value=!0,g.value={name:""}},w=async D=>{const P=Object.keys(n.value?.props||{});return!h(D.name)&&!P.includes(D.name)?(v(D.name),!0):(le("已存在该属性名称"),!1)},S=async D=>{await We("确定删除？")&&m(D)};return(D,P)=>t(e)?(u(),y(t(M),{key:0,class:"v-properties-widget",direction:"column",fit:""},{default:f(()=>[t(n)?(u(),y(nt,{key:0,title:"通用属性",current:t(e),context:t(l),node:t(n),items:t(o),onChange:t(i)},null,8,["current","context","node","items","onChange"])):C("",!0),t(n)&&t(s).length?(u(),y(nt,{key:1,title:"组件属性",current:t(e),context:t(l),node:t(n),items:t(s),onChange:t(i)},null,8,["current","context","node","items","onChange"])):C("",!0),t(n)?(u(),y(nt,{key:2,title:"自定义属性",current:t(e),context:t(l),node:t(n),items:t(r),onChange:t(i),removable:"",plus:"",grow:"",onPlus:p,onRemove:S},null,8,["current","context","node","items","onChange"])):C("",!0),c(t(Ce),{modelValue:b.value,"onUpdate:modelValue":P[0]||(P[0]=B=>b.value=B),title:"新增自定义属性",width:"400px",height:"150px","submit-method":w,formProps:{tooltipMessage:!1},model:g.value},{default:f(()=>[c(t(z),{name:"name",label:"属性名称",required:"",rules:{message:"名称格式错误",pattern:t(Ve)}},null,8,["rules"])]),_:1},8,["modelValue","model"])]),_:1})):C("",!0)}}),To=j({name:"VariableBinder",__name:"variable",props:{context:{},current:{},value:{}},setup(d){const e=d,l=k(),a=Ie({type:"JSExpression",value:e.value}),n=o=>{l.value.getEditor().setValue(o),a.value=o};return(o,i)=>(u(),y(t(_t),{title:"绑定变量","unbind-enabled":"",block:e.current,context:e.context,model:a,onPick:n},{default:f(()=>[c(t(z),{name:"value",label:"绑定内容 [ JSExpression ]",required:""},{editor:f(()=>[c(t(ae),{ref_key:"editorRef",ref:l,modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=s=>a.value=s),dark:"",height:"450px"},null,8,["modelValue"])]),_:1})]),_:1},8,["block","context","model"]))}}),Wo=j({name:"EventBinder",__name:"event",props:{context:{},current:{},name:{},event:{}},setup(d){const e=d,l=k(),a=Ie({name:e.name,...e.event,modifiers:Object.keys(e.event?.modifiers||{}),handler:{type:"JSFunction",value:e.event?.handler?.value||"() => {}"}}),n=bs.map(i=>({label:i,value:i})),o=i=>{l.value.getEditor().setValue(i),a.handler.value=i};return(i,s)=>(u(),y(t(_t),{title:"绑定事件","unbind-enabled":"",block:e.current,context:e.context,model:a,onPick:o},{default:f(()=>[c(t(z),{name:"modifiers",label:"事件修饰符",editor:"checkbox",options:t(n)},null,8,["options"]),c(t(z),{name:"handler.value",label:"事件处理函数 [ JSFunction ]",required:""},{editor:f(()=>[c(t(ae),{ref_key:"editorRef",ref:l,modelValue:a.handler.value,"onUpdate:modelValue":s[0]||(s[0]=r=>a.handler.value=r),dark:"",height:"350px"},null,8,["modelValue"])]),_:1})]),_:1},8,["block","context","model"]))}}),Oo=j({name:"EventsWidget",__name:"index",setup(d){const{current:e,context:l}=ue(),{selected:a}=we(),{mouseEventList:n,keyboardEventList:o,componentEventList:i}=Vs(a),s=k({name:"",event:void 0}),r=k(!1),v=p=>{s.value=et(p),r.value=!0},m=async p=>{const w={...p,modifiers:p.modifiers.reduce((S,D)=>(S[D]=!0,S),{})};return ie(w.handler,l.value,!0)?((a.value?.model).setEvent(w),!0):!1},h=async p=>{const w=a.value?.model;p.name&&(w.removeEvent(p.name),r.value=!1)},b=async()=>{s.value.name&&await We("确定要删除该事件吗？")&&h(s.value)},g=p=>{const{name:w,modelValue:S}=p;w==="edit"&&v(S),w==="remove"&&h(S)};return(p,w)=>(u(),y(t(M),{class:"v-events-widget",direction:"column",fit:""},{default:f(()=>[c(t(U),{title:"组件事件",class:"v-sub-panel",size:"small",fit:!1},{default:f(()=>[t(i).length?C("",!0):(u(),y(t(oe),{key:0,"image-size":50,description:"该组件无自带事件"})),(u(!0),V(J,null,W(t(i),S=>(u(),y(t(de),{key:`component_${S.name}`,title:S.name,"model-value":S,border:"",small:"",actions:S.event?["edit","remove"]:["edit"],active:!!S.event,onClick:D=>v(S),onAction:g},null,8,["title","model-value","actions","active","onClick"]))),128))]),_:1}),c(t(U),{title:"鼠标事件",class:"v-sub-panel",size:"small",fit:!1},{default:f(()=>[(u(!0),V(J,null,W(t(n),S=>(u(),y(t(de),{key:`mouse_${S.name}`,title:S.name,"model-value":S,border:"",small:"",actions:S.event?["edit","remove"]:["edit"],active:!!S.event,onClick:D=>v(S),onAction:g},null,8,["title","model-value","actions","active","onClick"]))),128))]),_:1}),c(t(U),{title:"键盘事件",class:"v-sub-panel",size:"small",grow:"",fit:!1},{default:f(()=>[(u(!0),V(J,null,W(t(o),S=>(u(),y(t(de),{key:`keyboard_${S.name}`,title:S.name,"model-value":S,border:"",small:"",actions:S.event?["edit","remove"]:["edit"],active:!!S.event,onClick:D=>v(S),onAction:g},null,8,["title","model-value","actions","active","onClick"]))),128))]),_:1}),r.value?(u(),y(t(Wo),{key:0,modelValue:r.value,"onUpdate:modelValue":w[0]||(w[0]=S=>r.value=S),context:t(l),current:t(e),name:s.value.name,event:s.value.event,submitMethod:m,onUnbind:b},null,8,["modelValue","context","current","name","event"])):C("",!0)]),_:1}))}}),Lo=j({name:"CssWidget",__name:"index",setup(d){const{current:e}=ue(),l=k(),a=x(()=>e.value?.css||""),n=i=>{e.value?.setCss(i)},o=()=>{const i=(l.value?.getEditor()).getValue();n(i),me("保存成功")};return(i,s)=>(u(),y(t(U),{class:"v-css-widget v-sub-panel",title:"lang:css scoped",size:"small",fit:"",save:"",onSave:o},{default:f(()=>[c(t(ae),{ref_key:"editorRef",ref:l,"model-value":a.value,height:"100%",lang:"css",dark:"",onBlur:n},null,8,["model-value"])]),_:1}))}}),No=j({name:"DirectivesWidget",__name:"index",setup(d){const{current:e,context:l}=ue(),{selected:a}=we(),{vIf:n,vShow:o,vBind:i,vFor:s,vModels:r,onValueChange:v,onForChange:m,onModelChange:h}=Ds(a),b=g=>g.arg?typeof g.arg=="string"?g.arg:Me(g.arg,{}):"modelValue";return(g,p)=>(u(),y(t(M),{class:"v-directives-widget",direction:"column",fit:""},{default:f(()=>[c(t(U),{class:"v-sub-panel",title:"内置指令",size:"small",fit:!1},{default:f(()=>[c(t(he),{size:"small","label-width":"80px",onKeydown:p[0]||(p[0]=Xe(Oe(()=>{},["prevent","stop"]),["enter"]))},{default:f(()=>[c(t(N),{name:"vIf",label:"v-if",setters:"ExpressionSetter",current:t(e),context:t(l),value:t(n).value,onChange:t(v)},null,8,["current","context","value","onChange"]),c(t(N),{name:"vShow",label:"v-show",setters:"ExpressionSetter",current:t(e),context:t(l),value:t(o).value,onChange:t(v)},null,8,["current","context","value","onChange"]),c(t(N),{name:"vBind",label:"v-bind",setters:"ExpressionSetter",current:t(e),context:t(l),value:t(i).value,onChange:t(v)},null,8,["current","context","value","onChange"])]),_:1})]),_:1}),c(t(U),{class:"v-sub-panel",title:"循环",size:"small",fit:!1},{default:f(()=>[c(t(he),{size:"small","label-width":"80px",onKeydown:p[1]||(p[1]=Xe(Oe(()=>{},["prevent","stop"]),["enter"]))},{default:f(()=>[c(t(N),{name:"value",label:"循环数据",setters:"ExpressionSetter",current:t(e),context:t(l),value:t(s).value,onChange:t(m)},null,8,["current","context","value","onChange"]),c(t(N),{name:"item",label:"迭代变量名",setters:{name:"StringSetter",props:{placeholder:"item"}},current:t(e),context:t(l),value:t(s).iterator?.item,onChange:t(m)},null,8,["current","context","value","onChange"]),c(t(N),{name:"index",label:"索引变量名",setters:{name:"StringSetter",props:{placeholder:"index"}},current:t(e),context:t(l),value:t(s).iterator?.index,onChange:t(m)},null,8,["current","context","value","onChange"])]),_:1})]),_:1}),c(t(U),{class:"v-sub-panel",title:"双向绑定",size:"small",fit:!1,grow:""},{default:f(()=>[(u(!0),V(J,null,W(t(r),(w,S)=>(u(),y(t(U),{card:"",border:"",class:"v-sub-panel",size:"small",title:`v-model: ${b(w)}`,body:{grow:!1},fit:!1},{default:f(()=>[c(t(he),{size:"small","label-width":"60px",onKeydown:p[2]||(p[2]=Xe(Oe(()=>{},["prevent","stop"]),["enter"]))},{default:f(()=>[c(t(N),{name:S.toString(),label:"绑定变量",setters:"ExpressionSetter",current:t(e),context:t(l),value:w.value,onChange:t(h)},null,8,["name","current","context","value","onChange"])]),_:2},1024)]),_:2},1032,["title"]))),256)),t(r).length?C("",!0):(u(),y(t(oe),{key:0,description:"当前组件没有双向绑定属性","image-size":50}))]),_:1})]),_:1}))}}),Mo=j({name:"DefinedPropsDialog",__name:"props",props:{item:{},current:{},context:{}},setup(d){const e=d,l=x(()=>e.item?"编辑定义属性":"新增定义属性"),a=k(Object.assign({default:{type:"JSExpression",value:""}},e.item)),n=Object.keys(Aa).map(i=>({label:i,value:i})),o=async i=>{const s=i.default;return s&&!ie(s,e.context,!0)?!1:(e.current.setProp(i),!0)};return(i,s)=>(u(),y(t(Ce),{title:l.value,width:"800px",height:"500px",model:a.value,"form-props":{tooltipMessage:!1},"submit-method":o},{default:f(()=>[c(t(z),{name:"name",label:"属性名称",required:"",tip:"名称为英文驼峰格式",disabled:!!e.item,rules:{message:"名称格式错误",pattern:t(Ve)}},null,8,["disabled","rules"]),c(t(z),{name:"type",label:"数据类型",editor:"checkbox",props:{button:!0,size:"small"},options:t(n),required:""},null,8,["options"]),c(t(z),{name:"required",label:"必须",editor:"switch"}),c(t(z),{name:"default.value",label:"默认值",editor:"none"},{default:f(()=>[c(t(ae),{modelValue:a.value.default.value,"onUpdate:modelValue":s[0]||(s[0]=r=>a.value.default.value=r),height:"200px",dark:""},null,8,["modelValue"])]),_:1})]),_:1},8,["title","model"]))}}),Uo=j({name:"DefinedEventsDialog",__name:"events",props:{item:{},current:{},context:{}},setup(d){const e=d,l=x(()=>e.item?"编辑定义事件":"新增定义事件"),a=k({name:e.item}),n=async o=>(e.item&&e.current.removeEmit(e.item,!0),e.current.setEmit(o.name),!0);return(o,i)=>(u(),y(t(Ce),{title:l.value,width:"600px",height:"200px",model:a.value,"form-props":{tooltipMessage:!1},"submit-method":n},{default:f(()=>[c(t(z),{name:"name",label:"事件名称",required:"",disabled:!!e.item,rules:{message:"名称格式错误",pattern:t(Ve)}},null,8,["disabled","rules"])]),_:1},8,["title","model"]))}}),Io=j({name:"DefinedSlotsDialog",__name:"slots",props:{item:{},current:{},context:{}},setup(d){const e=d,l=x(()=>e.item?"编辑定义插槽":"新增定义插槽"),a=k({name:e.item}),n=async o=>(e.item&&e.current.removeSlot(e.item,!0),e.current.setSlot(o.name),!0);return(o,i)=>(u(),y(t(Ce),{title:l.value,width:"600px",height:"200px",model:a.value,"form-props":{tooltipMessage:!1},"submit-method":n},{default:f(()=>[c(t(z),{name:"name",label:"插槽名称",disabled:!!e.item,required:"",rules:{message:"名称格式错误",pattern:t(Ve)}},null,8,["disabled","rules"])]),_:1},8,["title","model"]))}}),qo=j({name:"DefinedInjectsDialog",__name:"injects",props:{item:{},current:{},context:{}},setup(d){const e=d,l=x(()=>e.item?"编辑注入":"新增注入"),a=k(Object.assign({default:{type:"JSExpression",value:""}},e.item)),n=async o=>{const i=o.default;return i&&!ie(i,e.context,!0)?!1:(e.current.setInject(o),!0)};return(o,i)=>(u(),y(t(Ce),{title:l.value,width:"800px",height:"500px",model:a.value,"form-props":{tooltipMessage:!1},"submit-method":n},{default:f(()=>[c(t(z),{name:"name",label:"注入名称",required:"",tip:"名称为英文驼峰格式",disabled:!!e.item,rules:{message:"名称格式错误",pattern:t(Ve)}},null,8,["disabled","rules"]),c(t(z),{name:"from",label:"来源名称",tip:"默认和注入名称一致"}),c(t(z),{name:"default.value",label:"默认值",editor:"none"},{default:f(()=>[c(t(ae),{modelValue:a.value.default.value,"onUpdate:modelValue":i[0]||(i[0]=s=>a.value.default.value=s),height:"200px",dark:""},null,8,["modelValue"])]),_:1})]),_:1},8,["title","model"]))}}),Ho=j({name:"DefinedWidget",__name:"index",setup(d){const{current:e,context:l}=ue(),a=x(()=>(e.value?.props||[]).map(L=>typeof L=="string"?{name:L}:L)),n=x(()=>e.value?.emits||[]),o=x(()=>e.value?.slots||[]),i=x(()=>e.value?.inject||[]),s=k(!1),r=k(),v=k(!1),m=k(),h=k(!1),b=k(),g=k(!1),p=k(),w=()=>{r.value=void 0,s.value=!0},S=L=>{const{name:X,modelValue:O}=L;X==="edit"&&D(O),X==="remove"&&e.value?.removeProp(O)},D=L=>{r.value=L,s.value=!0},P=()=>{m.value=void 0,v.value=!0},B=L=>{m.value=L,v.value=!0},R=L=>{const{name:X,modelValue:O}=L;X==="edit"&&B(O),X==="remove"&&e.value?.removeEmit(O)},ee=()=>{b.value=void 0,h.value=!0},E=L=>{b.value=L,h.value=!0},F=L=>{const{name:X,modelValue:O}=L;X==="edit"&&E(O),X==="remove"&&e.value?.removeSlot(O)},A=()=>{p.value=void 0,g.value=!0},Q=L=>{p.value=L,g.value=!0},se=L=>{const{name:X,modelValue:O}=L;X==="edit"&&Q(O),X==="remove"&&e.value?.removeInject(O)};return(L,X)=>t(e)&&t(l)?(u(),y(t(M),{key:0,class:"v-defined-widget",direction:"column",fit:""},{default:f(()=>[c(t(U),{class:"v-sub-panel",title:"定义属性",size:"small",plus:"",fit:!1,onPlus:w},{default:f(()=>[(u(!0),V(J,null,W(a.value,O=>(u(),y(t(de),{"model-value":O,title:O.name,border:"",actions:["edit","remove"],onClick:Fe=>D(O),onAction:S},null,8,["model-value","title","onClick"]))),256)),a.value.length?C("",!0):(u(),y(t(oe),{key:0,"image-size":50})),s.value?(u(),y(Mo,{key:1,current:t(e),context:t(l),modelValue:s.value,"onUpdate:modelValue":X[0]||(X[0]=O=>s.value=O),item:r.value},null,8,["current","context","modelValue","item"])):C("",!0)]),_:1}),c(t(U),{class:"v-sub-panel",title:"定义事件",size:"small",plus:"",fit:!1,onPlus:P},{default:f(()=>[(u(!0),V(J,null,W(n.value,O=>(u(),y(t(de),{"model-value":O,title:O,border:"",actions:["remove"],onClick:Fe=>B(O),onAction:R},null,8,["model-value","title","onClick"]))),256)),n.value.length?C("",!0):(u(),y(t(oe),{key:0,"image-size":50})),v.value?(u(),y(Uo,{key:1,modelValue:v.value,"onUpdate:modelValue":X[1]||(X[1]=O=>v.value=O),current:t(e),context:t(l),item:m.value},null,8,["modelValue","current","context","item"])):C("",!0)]),_:1}),c(t(U),{class:"v-sub-panel",title:"定义插槽",size:"small",plus:"",fit:!1,onPlus:ee},{default:f(()=>[(u(!0),V(J,null,W(o.value,O=>(u(),y(t(de),{"model-value":O,title:O,border:"",actions:["remove"],onClick:Fe=>E(O),onAction:F},null,8,["model-value","title","onClick"]))),256)),o.value.length?C("",!0):(u(),y(t(oe),{key:0,"image-size":50})),h.value?(u(),y(Io,{key:1,modelValue:h.value,"onUpdate:modelValue":X[2]||(X[2]=O=>h.value=O),current:t(e),context:t(l),item:b.value},null,8,["modelValue","current","context","item"])):C("",!0)]),_:1}),c(t(U),{class:"v-sub-panel",title:"注入",size:"small",plus:"",fit:!1,grow:"",onPlus:A},{default:f(()=>[(u(!0),V(J,null,W(i.value,O=>(u(),y(t(de),{"model-value":O,title:O.name,border:"",actions:["remove"],onClick:Fe=>Q(O),onAction:se},null,8,["model-value","title","onClick"]))),256)),i.value.length?C("",!0):(u(),y(t(oe),{key:0,"image-size":50})),g.value?(u(),y(qo,{key:1,modelValue:g.value,"onUpdate:modelValue":X[3]||(X[3]=O=>g.value=O),current:t(e),context:t(l),item:p.value},null,8,["modelValue","current","context","item"])):C("",!0)]),_:1})]),_:1})):C("",!0)}}),Qo=j({name:"DataSourceDialogForm",__name:"form",props:{context:{},current:{},item:{}},setup(d){const e=d,{apis:l}=Es(),a=k(Object.assign({type:"api",ref:"",name:"",label:"",transform:{type:"JSFunction",value:`(res) => {
    /* 在这里可对接口返回数据进行转换  */
    return res;
}`},test:{type:"JSFunction",value:`() => this.runApi({
    /* 在这里可输入接口参数  */
})`}},e.item)),n=k(!1),o=k(""),i=k(!1),s=x(()=>l.value.map(b=>({label:b.label||"",value:b.id,data:b}))),r=x(()=>e.item?"编辑数据源":"新增数据源"),v=b=>{const g=l.value.find(p=>p.id===b);g&&(a.value.name=g.name,a.value.label=g.label||"")},m=async b=>{const{transform:g,test:p,name:w}=b;if(!e.current)return!1;if(!e.item&&e.current.dataSources[w])return le(`名称【${w}】已经存在，请更换名称`),!1;if(g?.value){if(!ie(g,e.context,!0))return!1}else b.transform=void 0;if(p?.value){if(!ie(p,e.context,!0))return!1}else b.test=void 0;return e.current?.setDataSource(b),!0},h=async()=>{if(!e.context)return;if(!a.value.ref){le("请先选择API");return}if(!a.value.test?.value){le("请先填写测试用例");return}if(!ie(a.value.test,e.context,!0))return;const b=async(...w)=>{const S=e.context?.$apis[a.value.ref];if(S)return await S.apply(S,w);xe.warn(`API【${a.value.ref}】不存在`)},g=Me(a.value.test,{runApi:b}),p=a.value.transform?.value?Me(a.value.transform,{},!0):w=>w;n.value=!0;try{const w=await g();o.value=JSON.stringify(await p(w),null,2)}catch(w){xe.error(w)}n.value=!1,i.value=!0};return(b,g)=>(u(),y(t(Ce),{width:"1000px",height:"600px",title:r.value,model:a.value,"form-props":{tooltipMessage:!1},"submit-method":m},{extra:f(()=>[c(t(ne),{loading:n.value,type:"warning",onClick:h},{default:f(()=>[q(" 运行测试用例 ")]),_:1},8,["loading"])]),default:f(()=>[c(t(z),{name:"ref",label:"引用API",editor:"select",required:"",disabled:!!e.item,options:s.value,props:{filterable:!0},onChange:v},{option:f(({option:p})=>[q(T(p.data.label)+" ",1),_("i",null,"[ "+T(p.data.name)+" ]",1)]),_:1},8,["disabled","options"]),c(t(z),{name:"name",label:"调用名称",required:"",tip:"名称为英文驼峰格式",disabled:!!e.item,rules:{message:"名称格式错误",pattern:t(Ve)}},null,8,["disabled","rules"]),c(t(z),{name:"label",label:"备注说明",required:""}),c(t(z),{name:"transform.value",label:"转换函数",editor:"none"},{default:f(()=>[c(t(ae),{modelValue:a.value.transform.value,"onUpdate:modelValue":g[0]||(g[0]=p=>a.value.transform.value=p),height:"200px",dark:""},null,8,["modelValue"])]),_:1}),c(t(z),{name:"test.value",label:"测试用例",editor:"none"},{default:f(()=>[c(t(ae),{modelValue:a.value.test.value,"onUpdate:modelValue":g[1]||(g[1]=p=>a.value.test.value=p),height:"100px",dark:""},null,8,["modelValue"])]),_:1}),i.value?(u(),y(t(It),{key:0,class:"v-drawer",modelValue:i.value,"onUpdate:modelValue":g[2]||(g[2]=p=>i.value=p),title:"测试用例运行结果",direction:"btt","append-to-body":"",size:"80%"},{default:f(()=>[c(t(ae),{"model-value":o.value,border:"",dark:"",height:"100%",lang:"json"},null,8,["model-value"])]),_:1},8,["modelValue"])):C("",!0)]),_:1},8,["title","model"]))}}),Go=j({name:"DataSourcesWidget",__name:"index",setup(d){const{current:e,context:l}=ue(),a=k(!1),n=k(),o=x(()=>Object.values(e.value?.dataSources||{}).filter(v=>v.type==="api")),i=()=>{n.value=void 0,a.value=!0},s=v=>{n.value=v,a.value=!0},r=v=>{const{name:m,modelValue:h}=v;m==="edit"&&s(h),m==="remove"&&e.value?.removeDataSource(h.name)};return(v,m)=>(u(),y(t(M),{class:"v-data-sources-widget",direction:"column",fit:""},{default:f(()=>[c(t(U),{title:"API",class:"v-sub-panel",size:"small",plus:"",onPlus:i},{default:f(()=>[(u(!0),V(J,null,W(o.value,h=>(u(),y(t(de),{border:"",title:h.name,subtitle:h.label,"model-value":h,actions:["edit","remove"],onAction:r,onClick:b=>s(h)},null,8,["title","subtitle","model-value","onClick"]))),256)),o.value.length?C("",!0):(u(),y(t(oe),{key:0,"image-size":50}))]),_:1}),a.value?(u(),y(Qo,{key:0,modelValue:a.value,"onUpdate:modelValue":m[0]||(m[0]=h=>a.value=h),current:t(e),context:t(l),item:n.value},null,8,["modelValue","current","context","item"])):C("",!0)]),_:1}))}}),Xo=j({__name:"layout",props:{styleJson:{},setStyle:{type:Function}},setup(d){const e=d,l=k();H(()=>e.styleJson.display,v=>{l.value=v==="flex"},{immediate:!0});const a=[{label:"block-块级布局",value:"block",svg:Wa},{label:"flex-弹性布局",value:"flex",svg:Oa},{label:"inline-block-行内块级布局",value:"inline-block",svg:La},{label:"inline-行内布局",value:"inline",svg:Na},{label:"invisible-不可见",value:"none",svg:Ma}],n=[{label:"row-水平",value:"row",svg:Ua},{label:"row-reverse-水平",value:"row-reverse",svg:Ia},{label:"column-垂直",value:"column",svg:qa},{label:"column-reverse-垂直",value:"column-reverse",svg:Ha}],o=[{label:"flex-start",value:"flex-start",svg:Qa},{label:"flex-end",value:"flex-end",svg:Ga},{label:"center",value:"center",svg:Xa},{label:"space-between",value:"space-between",svg:Ka},{label:"space-around",value:"space-around",svg:$a}],i=[{label:"不换行",value:"nowrap"},{label:"正换行",value:"wrap"},{label:"逆换行",value:"wrap-reverse"}],s=[{label:"flex-start",value:"flex-start",svg:Ya},{label:"flex-end",value:"flex-end",svg:Za},{label:"center",value:"center",svg:en},{label:"baseline",value:"baseline",svg:tn},{label:"stretch",value:"stretch",svg:ln}],r=(v,m)=>{l.value=m==="flex",e.setStyle("display",m),l.value||(e.setStyle("flex-direction",void 0),e.setStyle("justify-content",void 0),e.setStyle("align-items",void 0),e.setStyle("flex-wrap",void 0))};return(v,m)=>(u(),y(t(U),{title:"布局",class:"v-sub-panel",size:"small",fit:!1,collapsable:""},{default:f(()=>[c(t(he),{size:"small","label-width":"80px"},{default:f(()=>[c(t(N),{name:"display",label:"排布",setters:{name:"TagSetter"},options:a,variable:!1,value:e.styleJson.display,onChange:r},null,8,["value"]),l.value?(u(),V(J,{key:0},[c(t(N),{name:"flex-direction",label:"主轴方向",setters:{name:"TagSetter"},options:n,variable:!1,value:e.styleJson["flex-direction"],onChange:e.setStyle},null,8,["value","onChange"]),c(t(N),{name:"justify-content",label:"主轴对齐",setters:{name:"TagSetter"},options:o,variable:!1,value:e.styleJson["justify-content"],onChange:e.setStyle},null,8,["value","onChange"]),c(t(N),{name:"align-items",label:"辅轴对齐",setters:{name:"TagSetter"},options:s,variable:!1,value:e.styleJson["align-items"],onChange:e.setStyle},null,8,["value","onChange"]),c(t(N),{name:"flex-wrap",label:"换行模式",setters:{name:"TagSetter"},options:i,variable:!1,value:e.styleJson["flex-wrap"],onChange:e.setStyle},null,8,["value","onChange"])],64)):C("",!0)]),_:1})]),_:1}))}}),Ko=j({name:"StyleWidget",__name:"JsonMode",setup(d){const{selected:e}=we(),l=k(),a=x(()=>{const s=e.value?.model||null;return Z(s)?null:s}),n=x(()=>JSON.stringify(a.value?.getPropValue("style")||{},null,2)),o=s=>{try{const r=JSON.parse(s);a.value?.setProp("style",r)}catch{le("JSON格式错误")}},i=()=>{const s=(l.value?.getEditor()).getValue();o(s),me("保存成功")};return(s,r)=>(u(),y(t(U),{class:"v-css-widget v-sub-panel",title:"JSON",size:"small",fit:"",save:"",onSave:i},{default:f(()=>[c(t(ae),{ref_key:"editorRef",ref:l,"model-value":n.value,height:"100%",lang:"json",dark:"",onBlur:o},null,8,["model-value"])]),_:1}))}}),$o={class:"v-spacing-input"},Yo=_("div",{class:"v-spacing-input__modal"},null,-1),Zo={class:"v-spacing-input__content"},ei=["onClick"],Sl=j({__name:"spacing-input",props:{name:{},modelValue:{},auto:{type:Boolean}},emits:["close","update:modelValue","submit"],setup(d,{emit:e}){const l=[0,10,20,40,60,100,140,220],a=d,n=e,o=x(()=>a.auto||a.name.includes("margin")),i=k(),s=k(a.modelValue),r=k("px");ls(i,()=>{n("close")});const v=g=>{s.value=typeof g=="number"?`${g}px`:"auto",m(s.value)},m=g=>{r.value=g==="auto"?void 0:"px"},h=()=>{s.value?(n("update:modelValue",s.value),n("submit",a.name,s.value),n("close")):le("请输入有效值","提示")},b=()=>{s.value=void 0,n("update:modelValue",s.value),n("submit",a.name,void 0),n("close")};return(g,p)=>(u(),V("div",$o,[Yo,_("div",Zo,[c(t(M),{class:"v-spacing-input__body",ref_key:"bodyRef",ref:i,direction:"column"},{default:f(()=>[c(t(M),null,{default:f(()=>[c(t(sl),{modelValue:s.value,"onUpdate:modelValue":p[0]||(p[0]=w=>s.value=w),size:"small","with-unit":!!r.value,unit:r.value,format:r.value?"0":void 0,onChange:m},null,8,["modelValue","with-unit","unit","format"])]),_:1}),c(t(M),null,{default:f(()=>[o.value?(u(),y(t(M),{key:0,class:"v-spacing-input__auto",width:"20%"},{default:f(()=>[_("span",{onClick:p[1]||(p[1]=w=>v("auto"))},"auto")]),_:1})):C("",!0),c(t(M),{grow:"",class:"v-spacing-input__values",align:"center",wrap:"wrap"},{default:f(()=>[(u(),V(J,null,W(l,w=>_("span",{onClick:S=>v(w)},T(w),9,ei)),64))]),_:1})]),_:1}),c(t(M),null,{default:f(()=>[c(t(ne),{size:"small",type:"primary",round:"",style:{width:"100%"},onClick:h},{default:f(()=>[q(" 确定 ")]),_:1}),c(t(ne),{size:"small",round:"",style:{width:"100%"},onClick:b},{default:f(()=>[q(" 重置 ")]),_:1})]),_:1})]),_:1},512)])]))}}),ti={class:"spacing-wrap"},li={class:"spacing-max-icon"},ai=["width","height"],ni=["d"],si=["d"],oi=["d"],ii=["d"],ri={id:"margin-outer"},ui=["width","height"],di=["width","height"],ci={id:"margin-inner"},mi=["width","height"],pi=["width","height"],vi=["width","height"],gi=["d"],hi=["d"],bi=["d"],fi=["d"],yi={id:"padding-outer"},wi=["width","height"],ki=["width","height"],Si={id:"padding-inner"},xi=["width","height"],_i=["width","height"],Ci={xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",style:{"grid-area":"3 / 3 / span 3 / span 3","pointer-events":"none"}},Vi=_("text",{x:"6",y:"4",fill:"#a6a6a6","font-style":"italic","font-weight":"bold","font-size":"8","dominant-baseline":"hanging"}," padding ",-1),ji=[Vi],Ai={xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",style:{"grid-area":"1 / 1 / -1 / -1","pointer-events":"none"}},Pi=_("text",{x:"6",y:"4",fill:"#a6a6a6","font-style":"italic","font-weight":"bold","font-size":"8","dominant-baseline":"hanging"}," margin ",-1),Di=[Pi],K=36,$=24,Ei=j({__name:"spacing",props:{styleJson:{},setStyle:{type:Function}},setup(d){const e=d,l=k(),a=k(),{width:n,height:o}=Ue(l),{width:i,height:s}=Ue(a),r=k(!1),v=k(),m=k(),h=()=>{r.value=!1,v.value=void 0,m.value=void 0},b=g=>{v.value=g,m.value=e.styleJson[g],r.value=!0};return(g,p)=>(u(),y(t(U),{title:"间距",class:"v-sub-panel",size:"small",fit:!1,collapsable:""},{default:f(()=>[_("div",{class:"v-style-widget__spacing",ref_key:"container",ref:l},[_("div",ti,[_("div",li,[t(n)&&t(o)?(u(),V("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",width:t(n),height:t(o),style:{"grid-area":"1 / 1 / -1 / -1"}},[_("g",null,[_("g",null,[_("path",{mode:"delta",fill:"currentColor",d:`
              m1,1
              h${t(n)-1}
              l-${K},${$}
              h-${t(n)-2*K}
              l-${K},-${$}z`,"data-automation-id":"margin-top-button","aria-label":"Margin top button",class:"tb-path-color",onClick:p[0]||(p[0]=w=>b("margin-top"))},null,8,ni)])]),_("g",null,[_("g",null,[_("path",{mode:"delta",fill:"currentColor",d:`
              m${t(n)-1},1
              v${t(o)-1}
              l-${K},-${$}
              v-${t(o)-2*$}
              l${K},-${$}z`,"data-automation-id":"margin-right-button","aria-label":"Margin right button",class:"lr-path-color",onClick:p[1]||(p[1]=w=>b("margin-right"))},null,8,si)])]),_("g",null,[_("g",null,[_("path",{mode:"delta",fill:"currentColor",d:`
              m1,${t(o)-1}
              h${t(n)-1}
              l-${K},-${$}
              h-${t(n)-2*K}
              l-${K},${$}z`,"data-automation-id":"margin-bottom-button","aria-label":"Margin bottom button",class:"tb-path-color",onClick:p[2]||(p[2]=w=>b("margin-bottom"))},null,8,oi)])]),_("g",null,[_("g",null,[_("path",{mode:"delta",fill:"currentColor",d:`
              m1,1
              v${t(o)-1}
              l${K},-${$}
              v-${t(o)-2*$}
              l-${K},-${$}z`,"data-automation-id":"margin-left-button","aria-label":"Margin left button",class:"lr-path-color",onClick:p[3]||(p[3]=w=>b("margin-left"))},null,8,ii)])]),_("clipPath",ri,[_("rect",{x:"0",y:"0",width:t(n),height:t(o),fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none"}},null,8,ui)]),_("rect",{class:"stroke","clip-path":"url(#margin-outer)",x:"0",y:"0",width:t(n),height:t(o),fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none","stroke-width":"2px"}},null,8,di),_("clipPath",ci,[_("rect",{x:"36",y:"24",width:t(n)-2*K+1,height:t(o)-2*$+1,fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none"}},null,8,mi)]),_("rect",{class:"stroke","clip-path":"url(#margin-inner)",x:"36",y:"24",width:t(n)-2*K+1,height:t(o)-2*$+1,fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none","stroke-width":"2px"}},null,8,pi)],8,ai)):C("",!0),_("div",{class:I(["spacing-edit margin-top",{"is-setting":e.styleJson["margin-top"]}]),onClick:p[4]||(p[4]=w=>b("margin-top"))},T(e.styleJson["margin-top"]||"-"),3),_("div",{class:I(["spacing-edit margin-right",{"is-setting":e.styleJson["margin-right"]}]),onClick:p[5]||(p[5]=w=>b("margin-right"))},T(e.styleJson["margin-right"]||"-"),3),_("div",{class:I(["spacing-edit margin-bottom",{"is-setting":e.styleJson["margin-bottom"]}]),onClick:p[6]||(p[6]=w=>b("margin-bottom"))},T(e.styleJson["margin-bottom"]||"-"),3),_("div",{class:I(["spacing-edit margin-left",{"is-setting":e.styleJson["margin-left"]}]),onClick:p[7]||(p[7]=w=>b("margin-left"))},T(e.styleJson["margin-left"]||"-"),3)]),_("div",{ref_key:"inner",ref:a,class:"spacing-min-icon"},[t(n)&&t(o)?(u(),V("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",width:t(i),height:t(s),style:{"grid-area":"1 / 1 / -1 / -1"}},[_("g",null,[_("g",null,[_("path",{mode:"delta",fill:"currentColor",d:`
              m1,1
              h${t(i)-1}
              l-${K},${$}
              h-${t(i)-2*K}
              l-${K},-${$}z`,"data-automation-id":"padding-top-button","aria-label":"Padding top button",class:"tb-path-color",onClick:p[8]||(p[8]=w=>b("padding-top"))},null,8,gi)])]),_("g",null,[_("g",null,[_("path",{mode:"delta",fill:"currentColor",d:`
              m${t(i)-1},1
              v${t(s)-1}
              l-${K},-${$}
              v-${t(s)-2*$}
              l${K},-${$}z`,"data-automation-id":"padding-right-button","aria-label":"Padding right button",class:"lr-path-color",onClick:p[9]||(p[9]=w=>b("padding-right"))},null,8,hi)])]),_("g",null,[_("g",null,[_("path",{mode:"delta",fill:"currentColor",d:`
              m1,${t(s)-1}
              h${t(i)-1}
              l-${K},-${$}
              h-${t(i)-2*K}
              l-${K},${$}z`,"data-automation-id":"padding-bottom-button","aria-label":"Padding bottom button",class:"tb-path-color",onClick:p[10]||(p[10]=w=>b("padding-bottom"))},null,8,bi)])]),_("g",null,[_("g",null,[_("path",{mode:"delta",fill:"currentColor",d:`
              m1,1
              v${t(s)-1}
              l${K},-${$}
              v-${t(s)-2*$}
              l-${K},-${$}z`,"data-automation-id":"padding-left-button","aria-label":"Padding left button",class:"lr-path-color",onClick:p[11]||(p[11]=w=>b("padding-left"))},null,8,fi)])]),_("clipPath",yi,[_("rect",{x:"0",y:"0",width:t(i),height:t(s),fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none"}},null,8,wi)]),_("rect",{class:"stroke","clip-path":"url(#padding-outer)",x:"0",y:"0",width:t(i),height:t(s),fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none","stroke-width":"2px"}},null,8,ki),_("clipPath",Si,[_("rect",{x:"36",y:"24",width:t(i)-2*K+1,height:t(s)-2*$+1,fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none"}},null,8,xi)]),_("rect",{class:"stroke","clip-path":"url(#padding-inner)",x:"36",y:"24",width:t(i)-2*K+1,height:t(s)-2*$+1,fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none","stroke-width":"2px"}},null,8,_i)],8,vi)):C("",!0),_("div",{class:I(["spacing-edit padding-top",{"is-setting":e.styleJson["padding-top"]}]),onClick:p[12]||(p[12]=w=>b("padding-top"))},T(e.styleJson["padding-top"]||"-"),3),_("div",{class:I(["spacing-edit padding-right",{"is-setting":e.styleJson["padding-right"]}]),onClick:p[13]||(p[13]=w=>b("padding-right"))},T(e.styleJson["padding-right"]||"-"),3),_("div",{class:I(["spacing-edit padding-bottom",{"is-setting":e.styleJson["padding-bottom"]}]),onClick:p[14]||(p[14]=w=>b("padding-bottom"))},T(e.styleJson["padding-bottom"]||"-"),3),_("div",{class:I(["spacing-edit padding-left",{"is-setting":e.styleJson["padding-left"]}]),onClick:p[15]||(p[15]=w=>b("padding-left"))},T(e.styleJson["padding-left"]||"-"),3)],512),(u(),V("svg",Ci,ji)),(u(),V("svg",Ai,Di))]),r.value?(u(),y(Sl,{key:0,name:v.value,modelValue:m.value,"onUpdate:modelValue":p[16]||(p[16]=w=>m.value=w),onClose:h,onSubmit:e.setStyle},null,8,["name","modelValue","onSubmit"])):C("",!0)],512)]),_:1}))}}),zi=j({__name:"sizing",props:{styleJson:{},setStyle:{type:Function}},setup(d){const e=d,l=[{name:"width",label:"宽(W)",setter:"SizeSetter"},{name:"height",label:"高(H)",setter:"SizeSetter"},{name:"min-width",label:"最小宽",setter:"SizeSetter"},{name:"min-height",label:"最小高",setter:"SizeSetter"},{name:"max-width",label:"最大宽",setter:"SizeSetter"},{name:"max-height",label:"最大高",setter:"SizeSetter"},{name:"overflow",label:"溢出",setter:"SelectSetter",options:[{label:"自动",value:"auto"},{label:"隐藏",value:"hidden"},{label:"滚动",value:"scroll"},{label:"显示",value:"visible"}]},{name:"object-fit",label:"适应",setter:"SelectSetter",options:[{label:"填充",value:"fill"},{label:"适应",value:"contain"},{label:"覆盖",value:"cover"},{label:"拉伸",value:"scale-down"},{label:"原始",value:"none"}]}];return(a,n)=>(u(),y(t(U),{title:"尺寸",class:"v-sub-panel v-",size:"small",fit:!1,collapsable:""},{default:f(()=>[c(t(he),{class:"v-style-widget__sizing",size:"small","label-width":"60px",inline:""},{default:f(()=>[(u(),V(J,null,W(l,o=>c(t(N),{name:o.name,label:o.label,setters:{name:o.setter},options:o.options,variable:!1,value:e.styleJson[o.name],onChange:a.setStyle},null,8,["name","label","setters","options","value","onChange"])),64))]),_:1})]),_:1}))}}),Bi={class:"v-style-widget__positioning"},Ri={class:"spacing-wrap"},Fi=["width","height"],Ji=["d"],Ti=["d"],Wi=["d"],Oi=["d"],Li={id:"margin-outer"},Ni=["width","height"],Mi=["width","height"],Ui={id:"margin-inner"},Ii=["width","height"],qi=["width","height"],pe=36,ve=24,Hi=j({__name:"positioning",props:{styleJson:{},setStyle:{type:Function}},setup(d){const e=d,l=k(),{width:a,height:n}=Ue(l),o=k(!1),i=k(),s=k(),r=[{label:"静态",value:"static"},{label:"相对",value:"relative"},{label:"绝对",value:"absolute"},{label:"固定",value:"fixed"},{label:"粘性",value:"sticky"}],v=[{label:"左上",svg:an,value:"0% auto auto 0%"},{label:"右上",svg:nn,value:"0% 0% auto auto"},{label:"左下",svg:sn,value:"auto auto 0% 0%"},{label:"右下",svg:on,value:"auto 0% 0% auto"},{label:"左",svg:rn,value:"0% auto 0% 0%"},{label:"右",svg:un,value:"0% 0% 0% auto"},{label:"上",svg:dn,value:"auto 0% 0% 0%"},{label:"下",svg:cn,value:"0% 0% auto 0%"},{label:"填充",svg:mn,value:"0% 0% 0% 0%"}],m=x(()=>(e.styleJson.inset||"").split(" ")),h=g=>{i.value=g,s.value=e.styleJson[g],o.value=!0},b=()=>{o.value=!1,i.value=void 0,s.value=void 0};return(g,p)=>(u(),y(t(U),{title:"定位",class:"v-sub-panel",size:"small",fit:!1,collapsable:""},{default:f(()=>[_("div",Bi,[c(t(he),{"label-width":"60px",size:"small"},{default:f(()=>[c(t(N),{name:"position",label:"定位",setters:{name:"SelectSetter"},options:r,variable:!1,value:e.styleJson.position,onChange:e.setStyle},null,8,["value","onChange"]),c(t(N),{name:"inset",label:" ",setters:{name:"TagSetter"},options:v,variable:!1,value:e.styleJson.inset,onChange:e.setStyle},null,8,["value","onChange"]),c(t(Mt),{label:" "},{default:f(()=>[_("div",Ri,[_("div",{ref_key:"inner",ref:l,class:"spacing-min-icon"},[t(a)&&t(a)?(u(),V("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",width:t(a),height:t(n),style:{"grid-area":"1 / 1 / -1 / -1"}},[_("g",null,[_("g",null,[_("path",{mode:"delta",fill:"currentColor",d:`
              m1,1
              h${t(a)-1}
              l-${pe},${ve}
              h-${t(a)-2*pe}
              l-${pe},-${ve}z`,"data-automation-id":"padding-top-button","aria-label":"Padding top button",class:"tb-path-color",onClick:p[0]||(p[0]=w=>h("top"))},null,8,Ji)])]),_("g",null,[_("g",null,[_("path",{mode:"delta",fill:"currentColor",d:`
              m${t(a)-1},1
              v${t(n)-1}
              l-${pe},-${ve}
              v-${t(n)-2*ve}
              l${pe},-${ve}z`,"data-automation-id":"padding-right-button","aria-label":"Padding right button",class:"lr-path-color",onClick:p[1]||(p[1]=w=>h("right"))},null,8,Ti)])]),_("g",null,[_("g",null,[_("path",{mode:"delta",fill:"currentColor",d:`
              m1,${t(n)-1}
              h${t(a)-1}
              l-${pe},-${ve}
              h-${t(a)-2*pe}
              l-${pe},${ve}z`,"data-automation-id":"padding-bottom-button","aria-label":"Padding bottom button",class:"tb-path-color",onClick:p[2]||(p[2]=w=>h("bottom"))},null,8,Wi)])]),_("g",null,[_("g",null,[_("path",{mode:"delta",fill:"currentColor",d:`
              m1,1
              v${t(n)-1}
              l${pe},-${ve}
              v-${t(n)-2*ve}
              l-${pe},-${ve}z`,"data-automation-id":"padding-left-button","aria-label":"Padding left button",class:"lr-path-color",onClick:p[3]||(p[3]=w=>h("left"))},null,8,Oi)])]),_("clipPath",Li,[_("rect",{x:"0",y:"0",width:t(a),height:t(n),fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none"}},null,8,Ni)]),_("rect",{class:"stroke","clip-path":"url(#margin-outer)",x:"0",y:"0",width:t(a),height:t(n),fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none","stroke-width":"2px"}},null,8,Mi),_("clipPath",Ui,[_("rect",{x:"36",y:"24",width:t(a)-2*pe+1,height:t(n)-2*ve+1,fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none"}},null,8,Ii)]),_("rect",{class:"stroke","clip-path":"url(#margin-inner)",x:"36",y:"24",width:t(a)-2*pe+1,height:t(n)-2*ve+1,fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none","stroke-width":"2px"}},null,8,qi)],8,Fi)):C("",!0),_("div",{class:I(["spacing-edit padding-top",{"is-setting":e.styleJson.top}]),onClick:p[4]||(p[4]=w=>h("top"))},T(e.styleJson.top||m.value[0]||"-"),3),_("div",{class:I(["spacing-edit padding-right",{"is-setting":e.styleJson.right}]),onClick:p[5]||(p[5]=w=>h("right"))},T(e.styleJson.right||m.value[1]||"-"),3),_("div",{class:I(["spacing-edit padding-bottom",{"is-setting":e.styleJson.bottom}]),onClick:p[6]||(p[6]=w=>h("bottom"))},T(e.styleJson.bottom||m.value[2]||"-"),3),_("div",{class:I(["spacing-edit padding-left",{"is-setting":e.styleJson.left}]),onClick:p[7]||(p[7]=w=>h("left"))},T(e.styleJson.left||m.value[3]||"-"),3)],512),o.value?(u(),y(Sl,{key:0,auto:"",name:i.value,modelValue:s.value,"onUpdate:modelValue":p[8]||(p[8]=w=>s.value=w),onClose:b,onSubmit:e.setStyle},null,8,["name","modelValue","onSubmit"])):C("",!0)])]),_:1}),c(t(N),{name:"z-index",label:"层级",setters:{name:"NumberSetter"},variable:!1,value:e.styleJson["z-index"],onChange:e.setStyle},null,8,["value","onChange"])]),_:1})])]),_:1}))}}),Qi=j({__name:"texting",props:{styleJson:{},setStyle:{type:Function}},setup(d){const e=d,l=[{name:"font-size",label:"字号",setter:"SizeSetter"},{name:"font-family",label:"字体",setter:"SelectSetter",options:["Arial","Verdana","Georgia",'"Times New Roman"','"Microsoft YaHei"',"SimSun","SimHei","KaiTi","FangSong","STSong","STKaiti","STFangsong","STCaiyun","STHupo","STLiti","STXingkai","STXinwei","STXinwei","STZhongsong"]},{name:"line-height",label:"行高",setter:"SizeSetter"},{name:"font-weight",label:"字重",setter:"SelectSetter",options:[{label:"正常",value:"normal"},{label:"粗体",value:"bold"},{label:"更粗",value:"bolder"},{label:"更细",value:"lighter"}]}],a=[{label:"左",value:"left",svg:pn},{label:"中",value:"center",svg:vn},{label:"右",value:"right",svg:gn},{label:"两端",value:"justify",svg:hn}],n=[{label:"正常",value:"normal",svg:bn},{label:"斜体",value:"italic",svg:fn}],o=[{label:"无",value:"none",svg:ol},{label:"下划线",value:"underline",svg:yn},{label:"删除线",value:"line-through",svg:wn},{label:"上划线",value:"overline",svg:kn}];return(i,s)=>(u(),y(t(U),{title:"文本",class:"v-sub-panel",size:"small",fit:!1,collapsable:""},{default:f(()=>[c(t(he),{class:"v-style-widget__texting",size:"small","label-width":"60px",inline:""},{default:f(()=>[(u(),V(J,null,W(l,r=>c(t(N),{name:r.name,label:r.label,setters:{name:r.setter},options:r.options,variable:!1,value:e.styleJson[r.name],onChange:i.setStyle},null,8,["name","label","setters","options","value","onChange"])),64))]),_:1}),c(t(he),{size:"small","label-width":"60px"},{default:f(()=>[c(t(N),{name:"color",label:"颜色",setters:{name:"ColorSetter"},variable:!1,value:e.styleJson.color,onChange:i.setStyle},null,8,["value","onChange"]),c(t(N),{name:"text-align",label:"对齐",setters:{name:"TagSetter"},variable:!1,options:a,value:e.styleJson["text-align"],onChange:i.setStyle},null,8,["value","onChange"]),c(t(N),{name:"font-style",label:"风格",setters:{name:"TagSetter"},variable:!1,options:n,value:e.styleJson["font-style"],onChange:i.setStyle},null,8,["value","onChange"]),c(t(N),{name:"text-decoration",label:"修饰",setters:{name:"TagSetter"},variable:!1,options:o,value:e.styleJson["text-decoration"],onChange:i.setStyle},null,8,["value","onChange"])]),_:1})]),_:1}))}}),Gi=j({__name:"backgound",props:{styleJson:{},setStyle:{type:Function}},setup(d){const e=d,l=(r,v)=>{v?e.setStyle("background-image",`url(${v})`):e.setStyle("background-image",void 0)},a=r=>{const v=/^url\(([\w\W]+)\)$/;return r?.match(v)?.[1]},n=[{label:"重复",value:"repeat",svg:Sn},{label:"水平重复",value:"repeat-x",svg:xn},{label:"垂直重复",value:"repeat-y",svg:_n},{label:"不重复",value:"no-repeat",svg:Cn}],o=[{label:"固定",value:"fixed"},{label:"滚动",value:"scroll"}],i=[{label:"裁剪到填充",value:"padding-box"},{label:"裁剪到内容",value:"content-box"},{label:"裁剪到文字",value:"text"}],s=[{label:"自动",value:"auto"},{label:"长度",value:"length"},{label:"百分比",value:"percentage"},{label:"覆盖",value:"cover"},{label:"填充",value:"contain"}];return(r,v)=>(u(),y(t(U),{title:"背景",class:"v-sub-panel",size:"small",fit:!1,collapsable:""},{default:f(()=>[c(t(he),{"label-width":"60px",size:"small"},{default:f(()=>[c(t(N),{name:"background-image",label:"图片",setters:{name:"ImageSetter"},variable:!1,value:a(e.styleJson["background-image"]),onChange:l},null,8,["value"]),c(t(N),{name:"background-color",label:"颜色",setters:{name:"ColorSetter"},variable:!1,value:e.styleJson["background-color"],onChange:e.setStyle},null,8,["value","onChange"]),c(t(N),{name:"background-repeat",label:"重复",setters:{name:"TagSetter"},variable:!1,value:e.styleJson["background-repeat"],options:n,onChange:e.setStyle},null,8,["value","onChange"]),c(t(N),{name:"background-attachment",label:"固定",setters:{name:"RadioSetter"},variable:!1,value:e.styleJson["background-attachment"],options:o,onChange:e.setStyle},null,8,["value","onChange"]),c(t(N),{name:"background-position",label:"位置",setters:{name:"SectionSetter",props:{sections:2}},variable:!1,value:e.styleJson["background-position"],onChange:e.setStyle},null,8,["value","onChange"]),c(t(N),{name:"background-size",label:"大小",setters:{name:"SelectSetter"},variable:!1,value:e.styleJson["background-size"],options:s,onChange:e.setStyle},null,8,["value","onChange"]),c(t(N),{name:"background-clip",label:"裁剪",setters:{name:"SelectSetter"},variable:!1,value:e.styleJson["background-clip"],options:i,onChange:e.setStyle},null,8,["value","onChange"])]),_:1})]),_:1}))}}),Xi=j({__name:"border",props:{styleJson:{},setStyle:{type:Function}},setup(d){const e=d,l=k("border"),a=[{label:"全边框",svg:Vn,value:"border"},{label:"左边框",svg:jn,value:"border-left"},{label:"上边框",svg:An,value:"border-top"},{label:"下边框",svg:Pn,value:"border-bottom"},{label:"右边框",svg:Dn,value:"border-right"}],n=[{label:"无",value:"none",svg:ol},{label:"实线",value:"solid",svg:En},{label:"虚线",value:"dashed",svg:zn},{label:"点线",value:"dotted",svg:Bn}],o=(i,s)=>{l.value=s};return(i,s)=>(u(),y(t(U),{title:"边框",class:"v-sub-panel",size:"small",fit:!1,collapsable:""},{default:f(()=>[c(t(he),{"label-width":"60px",size:"small"},{default:f(()=>[c(t(N),{name:"border-radius",label:"圆角",setters:{name:"SectionSetter",props:{sections:4}},variable:!1,value:e.styleJson["border-radius"],onChange:e.setStyle},null,8,["value","onChange"]),c(t(N),{name:"borders",label:"边框",setters:{name:"TagSetter"},variable:!1,options:a,value:l.value,onChange:o},null,8,["value"]),l.value?(u(),V(J,{key:0},[(u(),y(t(N),{name:`${l.value}-width`,key:`${l.value}-width`,label:"宽度",setters:{name:"SizeSetter"},variable:!1,value:e.styleJson[`${l.value}-width`],onChange:e.setStyle},null,8,["name","value","onChange"])),(u(),y(t(N),{name:`${l.value}-style`,key:`${l.value}-style`,label:"样式",setters:{name:"TagSetter"},options:n,variable:!1,value:e.styleJson[`${l.value}-style`],onChange:e.setStyle},null,8,["name","value","onChange"])),(u(),y(t(N),{name:`${l.value}-color`,key:`${l.value}-color`,label:"颜色",setters:{name:"ColorSetter"},variable:!1,value:e.styleJson[`${l.value}-color`],onChange:e.setStyle},null,8,["name","value","onChange"]))],64)):C("",!0)]),_:1})]),_:1}))}}),Ki=j({__name:"effect",props:{styleJson:{},setStyle:{type:Function}},setup(d){const e=d,l=[{label:"自动",value:"auto",svg:Rn},{label:"Pointer",value:"pointer",svg:Fn},{label:"NotAllowed",value:"not-allowed",svg:Jn},{label:"无",value:"none",svg:Tn}],a=[{label:"Basic",value:"var(--el-box-shadow)"},{label:"Light",value:"var(--el-box-shadow-light)"},{label:"Lighter",value:"var(--el-box-shadow-lighter)"},{label:"Dark",value:"var(--el-box-shadow-dark)"}],n=(i,s)=>{e.setStyle("opacity",s!==void 0?(Number(s)||0)/100:void 0)},o=()=>Number(e.styleJson.opactiy||0)*100;return(i,s)=>(u(),y(t(U),{title:"效果",class:"v-sub-panel",size:"small",fit:!1,collapsable:""},{default:f(()=>[c(t(he),{"label-width":"60px",size:"small"},{default:f(()=>[c(t(N),{name:"opacity",label:"透明度",setters:{name:"SliderSetter"},variable:!1,value:o(),onChange:n},null,8,["value"]),c(t(N),{name:"box-shadow",label:"阴影",setters:{name:"SelectSetter"},variable:!1,options:a,value:e.styleJson["box-shadow"],onChange:e.setStyle},null,8,["value","onChange"]),c(t(N),{name:"cursor",label:"光标",setters:{name:"TagSetter"},variable:!1,options:l,value:e.styleJson.cursor,onChange:e.setStyle},null,8,["value","onChange"])]),_:1})]),_:1}))}}),$i=j({name:"StyleWidget",__name:"index",props:{isStyleCodeMode:{type:Boolean}},setup(d){const e=d,{selected:l}=we(),a=x(()=>{const i=l.value?.model||null;return Z(i)?null:i}),n=x(()=>a.value?.getPropValue("style")||{}),o=(i,s)=>{const r=a.value?.getPropValue("style")||{};s!==void 0?r[i]=s:delete r[i],a.value?.setProp("style",r)};return(i,s)=>e.isStyleCodeMode?(u(),y(Ko,{key:0})):(u(),y(t(M),{key:`widget-style-${a.value?.id}`,class:"v-style-widget",direction:"column",fit:""},{default:f(()=>[(u(),y(Xo,{key:`Layout${a.value?.id}`,"style-json":n.value,setStyle:o},null,8,["style-json"])),(u(),y(Ei,{key:`Spacing${a.value?.id}`,"style-json":n.value,setStyle:o},null,8,["style-json"])),(u(),y(zi,{key:`Sizing${a.value?.id}`,"style-json":n.value,setStyle:o},null,8,["style-json"])),(u(),y(Hi,{key:`Positioning${a.value?.id}`,"style-json":n.value,setStyle:o},null,8,["style-json"])),(u(),y(Qi,{key:`Texting${a.value?.id}`,"style-json":n.value,setStyle:o},null,8,["style-json"])),(u(),y(Gi,{key:`Backgound${a.value?.id}`,"style-json":n.value,setStyle:o},null,8,["style-json"])),(u(),y(Xi,{key:`Border${a.value?.id}`,"style-json":n.value,setStyle:o},null,8,["style-json"])),(u(),y(Ki,{key:`Effect${a.value?.id}`,"style-json":n.value,setStyle:o},null,8,["style-json"]))]),_:1}))}}),Yi=["src"],Zi=j({name:"PreviewerWidget",__name:"index",props:{path:{type:Function}},setup(d,{expose:e}){const l=d,a=k(),n=k(Symbol()),{current:o,engine:i}=ue(),{width:s,height:r}=Ue(a),v=x(()=>o.value&&l.path?l.path(o.value):null),m=x(()=>i.skeleton?.getWidget("Toolbar")?.widgetRef.mode??"pc");return e({refresh:()=>{n.value=Symbol()}}),(h,b)=>(u(),V("div",{ref_key:"container",ref:a,class:"v-previewer",key:n.value},[c(t(kl),{mode:m.value,width:t(s),height:t(r)},{default:f(()=>[v.value?(u(),V("iframe",{key:0,ref:"iframe",frameborder:"0",src:v.value},null,8,Yi)):C("",!0)]),_:1},8,["mode","width","height"])]))}}),er=j({name:"NodePathWidget",inheritAttrs:!1,__name:"index",setup(d){const{selected:e,designer:l}=we(),a=x(()=>(e.value?.path||[]).slice(0).reverse()),n=i=>{l.value?.setSelected(i)},o=i=>{l.value?.setHover(i)};return(i,s)=>t(e)?(u(),y(t(El),{key:0,class:"v-nodepath-widget","separator-icon":t(ns)},{default:f(()=>[(u(!0),V(J,null,W(a.value,r=>(u(),y(t(Dl),{onClick:v=>n(r),onMouseover:v=>o(r)},{default:f(()=>[q(T(r.name),1)]),_:2},1032,["onClick","onMouseover"]))),256))]),_:1},8,["separator-icon"])):C("",!0)}}),tr=j({name:"SchemaWidget",__name:"index",setup(d){const{current:e}=ue(),l=k(),a=x(()=>JSON.stringify(e.value?.toDsl()||{},null,2)),n=x(()=>e.value?e.value.name:""),o=async()=>{const i=(l.value?.getEditor()).getValue();if(i&&await We("手动修改DSL有风险，可能导致页面无法加载，请确认您的操作无误。"))try{const s=JSON.parse(i);e.value?.update(s),me("保存成功")}catch(s){le(s?.message)}};return(i,s)=>(u(),y(t(U),{class:"v-schema-widget",title:n.value,subtitle:"手动修改DSL有风险，可能导致页面无法加载，请确认您的操作无误。",size:"small",fit:"",save:"",onSave:o},{default:f(()=>[c(t(ae),{ref_key:"editorRef",ref:l,"model-value":a.value,height:"100%",lang:"json",dark:""},null,8,["model-value"])]),_:1},8,["title"]))}}),lr=j({name:"SchemaWidget",__name:"index",setup(d){const{current:e,engine:l}=ue(),a=k(),n=k(""),o=x(()=>e.value?`$vtj/vue/${e.value.id}.vue`:""),i=x(()=>e.value?e.value.name:"");return H(e,async s=>{const r=l.project.value;r&&s?n.value=await l.service.genVueContent(r.toDsl(),s.toDsl()):n.value=""},{immediate:!0,deep:!0}),(s,r)=>(u(),y(t(U),{class:"v-raw-widget",title:i.value,subtitle:o.value,size:"small",fit:""},{default:f(()=>[c(t(ae),{ref_key:"editorRef",ref:a,"model-value":n.value,height:"100%",lang:"html",dark:"",readonly:""},null,8,["model-value"])]),_:1},8,["title","subtitle"]))}}),ar=["src"],nr=j({name:"DocsWidget",__name:"index",props:{url:{default:"https://newgateway.gitee.io/vtj/help/index.html"}},setup(d){const e=d,l=k();let a=null;rl(()=>{a||(a=zl.service({target:l.value?.$el}))}),ul(()=>{n(),a=null});const n=()=>{a?.close()};return(o,i)=>(u(),y(t(U),{class:"v-docs-widget",size:"small",fit:"",body:{padding:!1},header:!1,ref_key:"panel",ref:l},{default:f(()=>[_("iframe",{ref:"frame",src:e.url,onLoad:n},null,40,ar)]),_:1},512))}}),xl="data:image/png;base64,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",sr={class:"v-about-widget"},or={class:"v-about-widget__logo"},ir=["src"],rr=_("div",{class:"v-about-widget__name"},"VTJ.PRO",-1),ur={class:"v-about-widget__version"},dr=j({name:"AboutWidget",__name:"index",setup(d){return(e,l)=>(u(),V("div",sr,[_("div",or,[_("img",{src:t(xl)},null,8,ir)]),rr,_("div",ur,"版本："+T(t(ps)),1)]))}}),cr=j({name:"ProjectConfigWidget",__name:"index",setup(d){const{project:e}=Re(),l=a=>{e.value?.setConfig(a)};return(a,n)=>(u(),y(t(U),{class:"v-project-config-widget",title:"项目配置"},{default:f(()=>[t(e)?(u(),y(t(kt),{key:0,footer:!1,size:"small","label-position":"top",model:t(e).config,onChange:l},{default:f(()=>[c(t(z),{label:"站点名称",name:"title"}),c(t(z),{label:"Logo",name:"logo",editor:Ct,props:{attachment:{accept:".png,.jpg,.jpeg"}}},null,8,["props"]),c(t(z),{label:"主题切换",name:"themeSwitchable",editor:"switch"}),c(t(z),{label:"模拟数据",name:"mock",editor:"switch"})]),_:1},8,["model"])):C("",!0)]),_:1}))}}),G={Logo:Fs,EmptyWidget:Ts,Switcher:Ls,Toolbar:Ms,Actions:qs,Pages:ro,Blocks:co,Components:go,Outline:ho,History:bo,Apis:Co,Deps:Vo,Designer:Po,Scripts:Fo,Properties:Jo,Events:Oo,Css:Lo,Directives:No,Defined:Ho,DataSources:Go,Style:$i,Previewer:Zi,NodePath:er,Schema:tr,Raw:lr,Docs:nr,About:dr,ProjectConfig:cr},mr=[{name:"Logo",region:"Brand",component:G.Logo},{name:"Switcher",region:"Brand",component:G.Switcher},{name:"Toolbar",region:"Toolbar",component:G.Toolbar},{name:"Actions",region:"Actions",component:G.Actions},{name:"Pages",region:"Apps",component:G.Pages,type:"app",openType:"panel",icon:ql,label:"页面管理"},{name:"Blocks",region:"Apps",component:G.Blocks,type:"app",openType:"panel",icon:Hl,label:"区块管理"},{name:"Components",region:"Apps",component:G.Components,type:"app",openType:"panel",icon:Ql,label:"组件库"},{name:"Outline",region:"Apps",component:G.Outline,type:"app",openType:"panel",icon:Gl,label:"大纲树"},{name:"History",region:"Apps",component:G.History,type:"app",openType:"panel",icon:Xl,label:"历史记录"},{name:"Apis",region:"Apps",component:G.Apis,type:"app",openType:"panel",icon:Kl,label:"API管理"},{name:"Deps",region:"Apps",component:G.Deps,type:"app",openType:"panel",icon:$l,label:"依赖管理"},{name:"ProjectConfig",region:"Apps",component:G.ProjectConfig,type:"app",openType:"panel",icon:Ht,label:"项目配置"},{name:"About",region:"Apps",component:G.About,type:"app",openType:"dialog",icon:Yl,label:"关于",props:{width:500,height:300}},{name:"Designer",region:"Workspace",component:G.Designer,type:"tab",closable:!1,label:"设计视图"},{name:"Previewer",region:"Preview",component:G.Previewer,type:"tab",closable:!1,label:"预览视图"},{name:"Schema",region:"Workspace",component:G.Schema,type:"tab",closable:!0,label:"DSL视图"},{name:"Raw",region:"Workspace",component:G.Raw,type:"tab",closable:!0,label:"源码视图"},{name:"Docs",region:"Workspace",component:G.Docs,type:"tab",closable:!0,label:"帮助中心"},{name:"Scripts",region:"Settings",component:G.Scripts,type:"tab",group:be.Block,label:"设置"},{name:"Css",region:"Settings",component:G.Css,type:"tab",group:be.Block,label:"CSS"},{name:"DataSources",region:"Settings",component:G.DataSources,type:"tab",group:be.Block,label:"数据源"},{name:"Defined",region:"Settings",component:G.Defined,type:"tab",group:be.Block,label:"定义"},{name:"Properties",region:"Settings",component:G.Properties,type:"tab",group:be.Node,label:"属性"},{name:"Style",region:"Settings",component:G.Style,type:"tab",group:be.Node,label:"样式"},{name:"Events",region:"Settings",component:G.Events,type:"tab",group:be.Node,label:"事件"},{name:"Directives",region:"Settings",component:G.Directives,type:"tab",group:be.Node,label:"指令"},{name:"NodePath",region:"Status",component:G.NodePath}],pr=[{package:"vue",version:"latest",library:"Vue",urls:["@vtj/materials/deps/vue/vue.global.prod.js"],assetsLibrary:Mn,required:!0,official:!0,enabled:!0},{package:"vue-router",version:"latest",library:"VueRouter",urls:["@vtj/materials/deps/vue-router/vue-router.global.prod.js"],assetsLibrary:Un,required:!0,official:!0,enabled:!0},{package:"@vtj/utils",version:"latest",library:"VtjUtils",urls:["@vtj/materials/deps/@vtj/utils/index.umd.js"],required:!0,official:!0,enabled:!0},{package:"@vtj/icons",version:"latest",library:"VtjIcons",urls:["@vtj/materials/deps/@vtj/icons/style.css","@vtj/materials/deps/@vtj/icons/index.umd.js"],required:!0,official:!0,enabled:!0},{package:"element-plus",version:"latest",library:"ElementPlus",localeLibrary:"ElementPlusLocaleZhCn",urls:["@vtj/materials/deps/element-plus/dark/css-vars.css","@vtj/materials/deps/element-plus/index.css","@vtj/materials/deps/element-plus/zh-cn.js","@vtj/materials/deps/element-plus/index.full.min.js"],assetsUrl:"@vtj/materials/assets/element/index.umd.js",assetsLibrary:"ElementPlusMaterial",required:!1,official:!0,enabled:!0},{package:"@vtj/ui",version:"latest",library:"VtjUI",urls:["@vtj/materials/deps/echarts/echarts.min.js","@vtj/materials/deps/@ckeditor/ckeditor5-build-classic/ckeditor.js","@vtj/materials/deps/@ckeditor/ckeditor5-build-classic/zh-cn.js","@vtj/materials/deps/@ckeditor/ckeditor5-vue/ckeditor.js","@vtj/materials/deps/@vtj/ui/style.css","@vtj/materials/deps/@vtj/ui/index.umd.js"],assetsUrl:"@vtj/materials/assets/ui/index.umd.js",assetsLibrary:"VtjUIMaterial",required:!1,official:!0,enabled:!0},{package:"ant-design-vue",version:"latest",library:"antd",urls:["@vtj/materials/deps/ant-design-vue/reset.css","@vtj/materials/deps/ant-design-vue/dayjs/dayjs.min.js","@vtj/materials/deps/ant-design-vue/dayjs/plugin/customParseFormat.js","@vtj/materials/deps/ant-design-vue/dayjs/plugin/weekday.js","@vtj/materials/deps/ant-design-vue/dayjs/plugin/localeData.js","@vtj/materials/deps/ant-design-vue/dayjs/plugin/weekOfYear.js","@vtj/materials/deps/ant-design-vue/dayjs/plugin/weekYear.js","@vtj/materials/deps/ant-design-vue/dayjs/plugin/advancedFormat.js","@vtj/materials/deps/ant-design-vue/dayjs/plugin/quarterOfYear.js","@vtj/materials/deps/ant-design-vue/antd.min.js"],assetsUrl:"@vtj/materials/assets/antdv/index.umd.js",assetsLibrary:"AntdvMaterial",required:!1,official:!0,enabled:!1}],vr=[{id:"html",category:"HTML"},{id:"elements",category:"特殊元素"},{id:"components",category:"内置组件"}],gr=[{name:"div",label:"容器",categoryId:"html",snippet:{children:"容器文本内容示例"}},{name:"span",label:"内联",categoryId:"html",snippet:{children:"内联容器文本内容示例"}},{name:"a",label:"链接",categoryId:"html",props:[{name:"href",label:"href",setters:"InputSetter"}],snippet:{children:"链接文本内容示例",props:{href:"#"}}},{name:"img",label:"图片",categoryId:"html",childIncludes:!1,props:[{name:"src",label:"src",setters:"InputSetter"},{name:"width",label:"width",setters:"InputSetter"},{name:"height",label:"height",setters:"InputSetter"}],snippet:{props:{src:xl,width:"200",height:"200"}}},{name:"h1",label:"大标题",categoryId:"html",snippet:{children:"标题"}},{name:"h2",label:"中标题",categoryId:"html",snippet:{children:"标题"}},{name:"h3",label:"小标题",categoryId:"html",snippet:{children:"标题"}},{name:"p",label:"段落",categoryId:"html",snippet:{children:"段落文本"}},{name:"component",label:"动态组件",categoryId:"elements",doc:"https://cn.vuejs.org/api/built-in-special-elements.html#component",props:[{name:"is",label:"组件名",setters:"InputSetter"}],snippet:{children:"组件文本内容示例",props:{is:"div"}}},{name:"slot",label:"插槽",categoryId:"elements",doc:"https://cn.vuejs.org/api/built-in-special-elements.html#slot",props:[{name:"name",label:"名称",defaultValue:"default",setters:"InputSetter"}],snippet:{children:"默认插槽内容"}}],hr=[...gr,{name:"Transition",label:"过渡效果",categoryId:"components",doc:"https://cn.vuejs.org/api/built-in-components.html#transition",package:"vue",props:[{name:"name",label:"名称",defaultValue:"",title:"用于自动生成过渡 CSS class 名",setters:"InputSetter"},{name:"css",label:"应用CSS",defaultValue:!0,title:"是否应用 CSS 过渡 class",setters:"BooleanSetter"},{name:"type",label:"事件类型",defaultValue:void 0,title:"指定要等待的过渡事件类型来确定过渡结束的时间，默认情况下会自动检测持续时间较长的类型",setters:"SelectSetter",options:["transition","animation"]},{name:"duration",label:"持续时间",defaultValue:void 0,title:"显式指定过渡的持续时间",setters:["NumberSetter","JSONSetter"]},{name:"mode",label:"时序",defaultValue:"default",title:"控制离开/进入过渡的时序。",setters:"SelectSetter",options:["in-out","out-in","default"]},{name:"appear",label:"使用过渡",defaultValue:!1,title:"是否对初始渲染使用过渡",setters:"BooleanSetter"},{name:"enterFromClass",label:"enterFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"enterActiveClass",label:"enterActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"enterToClass",label:"enterToClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearFromClass",label:"appearFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearActiveClass",label:"appearActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearToClass",label:"appearToClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveFromClass",label:"leaveFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveActiveClass",label:"leaveActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveToClass",label:"leaveToClass",defaultValue:void 0,setters:"InputSetter"}],events:["before-enter","before-leave","enter","leave","appear","after-enter","after-leave","after-appear","enter-cancelled","leave-cancelled","ppear-cancelled"],snippet:{children:"Transition"}},{name:"TransitionGroup",label:"过渡效果组",categoryId:"components",doc:"https://cn.vuejs.org/api/built-in-components.html#transitiongroup",package:"vue",props:[{name:"name",label:"名称",defaultValue:"",title:"用于自动生成过渡 CSS class 名",setters:"InputSetter"},{name:"tag",label:"标签名",defaultValue:void 0,title:"如果未定义，则渲染为片段 (fragment)",setters:"InputSetter"},{name:"moveClass",label:"moveClass",defaultValue:void 0,title:"用于自定义过渡期间被应用的 CSS class。",setters:"InputSetter"},{name:"css",label:"应用CSS",defaultValue:!0,title:"是否应用 CSS 过渡 class",setters:"BooleanSetter"},{name:"type",label:"事件类型",defaultValue:void 0,title:"指定要等待的过渡事件类型来确定过渡结束的时间，默认情况下会自动检测持续时间较长的类型",setters:"SelectSetter",options:["transition","animation"]},{name:"duration",label:"持续时间",defaultValue:void 0,title:"显式指定过渡的持续时间",setters:["NumberSetter","JSONSetter"]},{name:"appear",label:"使用过渡",defaultValue:!1,title:"是否对初始渲染使用过渡",setters:"BooleanSetter"},{name:"enterFromClass",label:"enterFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"enterActiveClass",label:"enterActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"enterToClass",label:"enterToClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearFromClass",label:"appearFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearActiveClass",label:"appearActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearToClass",label:"appearToClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveFromClass",label:"leaveFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveActiveClass",label:"leaveActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveToClass",label:"leaveToClass",defaultValue:void 0,setters:"InputSetter"}],events:["before-enter","before-leave","enter","leave","appear","after-enter","after-leave","after-appear","enter-cancelled","leave-cancelled","ppear-cancelled"],snippet:{children:"TransitionGroup"}},{name:"KeepAlive",label:"缓存切换组件",categoryId:"components",doc:"https://cn.vuejs.org/api/built-in-components.html#keepalive",package:"vue",props:[{name:"include",label:"匹配包含",title:"如果指定，则只有与 `include` 名称, 匹配的组件才会被缓存。",setters:["InputSetter","JSONSetter"]},{name:"exclude",label:"匹配排除",title:"任何名称与 `exclude` 匹配的组件都不会被缓存。",setters:["InputSetter","JSONSetter"]},{name:"max",label:"最大缓存数",title:"最多可以缓存多少组件实例。",setters:["InputSetter"]}]},{name:"Teleport",label:"传送组件",categoryId:"components",doc:"https://cn.vuejs.org/api/built-in-components.html#teleport",package:"vue",props:[{name:"to",label:"目标容器",title:"指定目标容器,可以是选择器或实际元素",setters:["InputSetter"]},{name:"disabled",label:"禁用",title:"当值为 `true` 时，内容将保留在其原始位置, 而不是移动到目标容器中, 可以动态更改",setters:["BooleanSetter"]}]},{name:"Suspense",label:"异步依赖",categoryId:"components",doc:"https://cn.vuejs.org/api/built-in-components.html#suspense",package:"vue",props:[{name:"timeout",label:"timeout",setters:["InputSetter"]}]},{name:"RouterLink",label:"路由链接",categoryId:"components",doc:"https://router.vuejs.org/zh/api/interfaces/RouterLinkProps.html",package:"vue-router",props:[{name:"to",label:"to",setters:["InputSetter"]},{name:"replace",label:"replace",setters:["BooleanSetter"]}],snippet:{children:"RouterLink",props:{to:"/"}}}],br=[{name:ct,version:"latest",label:"内置",library:ct,order:0,categories:vr,components:hr}],fr=j({name:"StringSetter",__name:"string",setup(d){return(e,l)=>(u(),y(t(ye),re({clearable:""},e.$attrs),null,16))}}),yr=j({name:"BooleanSetter",__name:"boolean",setup(d){return(e,l)=>(u(),y(t(Ut),re(e.$attrs,{"model-value":!!e.$attrs.modelValue}),null,16,["model-value"]))}}),wr="{{",kr="}}",Sr=j({name:"ExpressionSetter",__name:"expression",props:{modelValue:{},context:{}},emits:["change"],setup(d,{emit:e}){const l=(r="")=>({type:"JSExpression",value:Ne(r)?r.value:r}),a=d,n=e,o=r=>ie(r,a.context,!0),i=k(l(a.modelValue).value);H(()=>a.modelValue,r=>{i.value=l(r).value},{immediate:!0});const s=r=>{const v={type:"JSExpression",value:r};o(v)&&n("change",v)};return(r,v)=>(u(),y(t(ye),{class:"v-expression-setter",modelValue:i.value,"onUpdate:modelValue":v[0]||(v[0]=m=>i.value=m),onChange:s},{prefix:f(()=>[q(T(wr))]),suffix:f(()=>[q(T(kr))]),_:1},8,["modelValue"]))}}),xr=j({name:"SelectSetter",__name:"select",props:{options:{default:()=>[]}},setup(d){const e=d;return(l,a)=>(u(),y(t(Ll),re({clearable:""},l.$attrs),{default:f(()=>[(u(!0),V(J,null,W(e.options,n=>(u(),y(t(Ol),re({key:n.label},n),null,16))),128))]),_:1},16))}}),_r=j({name:"NumberSetter",__name:"number",props:{modelValue:{}},emits:["change"],setup(d,{emit:e}){const l=d,a=e,n=x(()=>Ne(l.modelValue)?void 0:Number(l.modelValue||0)),o=i=>{a("change",i)};return(i,s)=>(u(),y(t(Nl),re({class:"v-number-setter","controls-position":"right","model-value":n.value},i.$attrs,{onChange:o}),null,16,["model-value"]))}}),Cr=j({name:"ColorSetter",__name:"color",setup(d){return(e,l)=>(u(),y(t(Ml),ml(pl(e.$attrs)),null,16))}}),Vr=j({name:"JsonSetter",__name:"json",props:{modelValue:{default:void 0},type:{default:"JSON"}},emits:["change"],setup(d,{emit:e}){const l=d,a=k(),n=k(typeof l.modelValue=="object"?JSON.stringify(l.modelValue,null,2):void 0),o=x(()=>!!n.value),i=k(!1),s=e,r=b=>{let g=!0;try{const p=JSON.parse(b);if(l.type==="Array"&&!Array.isArray(p))throw new Error(`"${b}" is not a Array`);if(l.type==="Object"&&!Hn(p))throw new Error(`"${b}" is not a PlainObject`);if(typeof p!="object")throw new Error(`"${b}" is not a ${l.type}`)}catch(p){g=!1,ge.error({title:"代码错误",message:p?.message||p})}return g},v=()=>{const b=a.value?.getEditor();if(b){const g=b.getValue();r(g)&&(n.value=g,s("change",JSON.parse(g)),i.value=!1)}},m=()=>{n.value="",s("change",void 0),i.value=!1},h=()=>{i.value=!0};return(b,g)=>(u(),V("div",{class:I(["v-json-setter",{"is-active":o.value}])},[c(t(ye),re({readonly:"",onFocus:h,"model-value":l.type,"suffix-icon":t(xt)},b.$attrs),null,16,["model-value","suffix-icon"]),i.value?(u(),y(t(Be),{key:0,modelValue:i.value,"onUpdate:modelValue":g[0]||(g[0]=p=>i.value=p),title:l.type,width:"1000px",height:"600px",cancel:"",submit:"",clear:"",onSubmit:v,onClear:m},{extra:f(()=>[c(t(ne),{type:"warning",onClick:m,size:"default"},{default:f(()=>[q(" 清除 ")]),_:1})]),default:f(()=>[c(t(ae),{ref_key:"codeEditor",ref:a,height:"100%",lang:"json",dark:"","model-value":n.value},null,8,["model-value"])]),_:1},8,["modelValue","title"])):C("",!0)],2))}}),jr=j({name:"FunctionSetter",__name:"function",props:{modelValue:{default:()=>({type:"JSFunction",value:""})}},emits:["change"],setup(d,{emit:e}){const l=d,a=k(),n=k(l.modelValue.value),o=k(!1),i=x(()=>!!n.value),s=e,r=()=>{const h=a.value?.getEditor();if(h){const b=h.getValue(),g={type:"JSFunction",value:b};ie(g,{})&&(n.value=b,s("change",g),o.value=!1)}},v=()=>{n.value="",s("change",void 0),o.value=!1},m=()=>{o.value=!0};return(h,b)=>(u(),V("div",{class:I(["v-function-setter",{"is-active":i.value}])},[c(t(ye),re({readonly:"",onFocus:m,"model-value":"JSFunction","suffix-icon":t(xt)},h.$attrs),null,16,["suffix-icon"]),o.value?(u(),y(t(Be),{key:0,modelValue:o.value,"onUpdate:modelValue":b[0]||(b[0]=g=>o.value=g),title:"JSFunction",width:"1000px",height:"600px",cancel:"",submit:"",clear:"",onSubmit:r,onClear:v},{extra:f(()=>[c(t(ne),{type:"warning",onClick:v,size:"default"},{default:f(()=>[q(" 清除 ")]),_:1})]),default:f(()=>[c(t(ae),{ref_key:"codeEditor",ref:a,height:"100%","model-value":n.value,dark:""},null,8,["model-value"])]),_:1},8,["modelValue"])):C("",!0)],2))}}),Ar=j({name:"RadioSetter",__name:"radio",props:{options:{default:()=>[]}},setup(d){const e=d;return(l,a)=>(u(),y(t(Wt),re({class:"v-radio-setter",size:"small"},l.$attrs),{default:f(()=>[(u(!0),V(J,null,W(e.options,n=>(u(),y(t(Qe),{label:n.label,value:n.value,title:n.label},{default:f(()=>[n.svg?(u(),y(t(_e),{key:0,src:n.svg},null,8,["src"])):(u(),V(J,{key:1},[q(T(n.label),1)],64))]),_:2},1032,["label","value","title"]))),256))]),_:1},16))}}),Pr=["label","title","onClick"],Dr=j({name:"TagSetter",__name:"tag",props:{options:{default:()=>[]},modelValue:{}},emits:["update:modelValue","change"],setup(d,{emit:e}){const l=d,a=e,n=o=>{o.value===l.modelValue?(a("update:modelValue",void 0),a("change",void 0)):(a("update:modelValue",o.value),a("change",o.value))};return(o,i)=>(u(),V("div",re({class:"v-tag-setter",size:"small"},o.$attrs),[(u(!0),V(J,null,W(l.options,s=>(u(),V("span",{label:s.value,title:s.label,class:I({"is-active":l.modelValue===s.value}),onClick:r=>n(s)},[s.svg?(u(),y(t(_e),{key:0,src:s.svg,size:16},null,8,["src"])):(u(),V(J,{key:1},[q(T(s.label),1)],64))],10,Pr))),256))],16))}}),_l=j({name:"SizeSetter",__name:"size",props:{modelValue:{}},emits:["change"],setup(d,{emit:e}){const l=d,a=e,n=k(!0),o=x(()=>n.value?"px":void 0),i=k(l.modelValue),s=r=>{n.value=!!Number(r)};return H(i,r=>{a("change",r)}),H(()=>l.modelValue,r=>{r&&(n.value=r.endsWith("px"),i.value=r)},{immediate:!0}),(r,v)=>(u(),y(t(sl),re({clearable:"",unit:o.value,"with-unit":!!o.value,modelValue:i.value,"onUpdate:modelValue":v[0]||(v[0]=m=>i.value=m),onChange:s},r.$attrs),null,16,["unit","with-unit","modelValue"]))}}),Er={class:"v-image-setter__plus"},zr=j({name:"ImageSetter",__name:"image",props:{modelValue:{},limit:{default:1}},emits:["change","update:modelValue"],setup(d,{emit:e}){const l=d,a=e,n=k([]),o=x(()=>n.value.length<l.limit),i=r=>r.type.includes("image")?(In(r).then(v=>{n.value=[{name:r.name,url:v}]}),!1):($e.error("只能上传图片"),!1),s=()=>{n.value=[]};return H(()=>l.modelValue,r=>{n.value=r?[{name:"",url:r}]:[]},{immediate:!0}),H(n,()=>{const r=n.value[0]?.url;a("change",r),a("update:modelValue",r)}),(r,v)=>(u(),y(t(Ul),re({class:["v-image-setter",{"v-image-setter--addable":o.value}],"list-type":"picture-card",limit:1,action:"#","file-list":n.value,"onUpdate:fileList":v[0]||(v[0]=m=>n.value=m),"before-upload":i,"auto-upload":!0,"on-remove":s},r.$attrs),{default:f(()=>[_("span",Er,[c(t(_e),{icon:t(ds)},null,8,["icon"])])]),_:1},16,["class","file-list"]))}}),Br={class:"v-section-setter"},Rr=j({name:"SectionSetter",__name:"section",props:{modelValue:{},sections:{default:4}},emits:["change"],setup(d,{emit:e}){const l=d,a=e,n=k(new Array(l.sections).fill(""));H(()=>l.modelValue,i=>{n.value=i?i.split(" "):new Array(l.sections).fill("")},{immediate:!0});const o=()=>{a("change",n.value.join(" ").trim())};return(i,s)=>(u(),V("div",Br,[(u(!0),V(J,null,W(l.sections,r=>(u(),y(_l,{name:r-1,modelValue:n.value[r-1],"onUpdate:modelValue":v=>n.value[r-1]=v,onChange:o,class:"v-section-setter__item"},null,8,["name","modelValue","onUpdate:modelValue"]))),256))]))}}),Fr={class:"v-slider-setter"},Jr=j({name:"SliderSetter",__name:"slider",props:{modelValue:{default:void 0}},emits:["change","update:modelValue"],setup(d,{emit:e}){const l=d,a=e,n=k();H(()=>l.modelValue,i=>{n.value=i},{immediate:!0}),H(n,i=>{a("change",i),a("update:modelValue",i)});const o=()=>{n.value=void 0,a("change",void 0),a("update:modelValue",void 0)};return(i,s)=>(u(),V("div",Fr,[c(t(Il),re({size:"small"},i.$attrs,{modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=r=>n.value=r)}),null,16,["modelValue"]),c(t(_e),{onClick:o,class:"v-slider-setter__close",size:16,icon:t(cs)},null,8,["icon"])]))}}),Y={StringSetter:fr,BooleanSetter:yr,ExpressionSetter:Sr,SelectSetter:xr,NumberSetter:_r,ColorSetter:Cr,IconSetter:wl,JsonSetter:Vr,FunctionSetter:jr,RadioSetter:Ar,TagSetter:Dr,SizeSetter:_l,ImageSetter:zr,SectionSetter:Rr,SliderSetter:Jr,FileSetter:Ct},Tr={name:"StringSetter",component:Y.StringSetter,type:"String"},Wr=[{name:"InputSetter",component:Y.StringSetter,type:"String"},{name:"StringSetter",component:Y.StringSetter,type:"String"},{name:"BooleanSetter",component:Y.BooleanSetter,type:"Boolean"},{name:"ExpressionSetter",component:Y.ExpressionSetter,type:"Object"},{name:"SelectSetter",component:Y.SelectSetter,type:"String"},{name:"NumberSetter",component:Y.NumberSetter,type:"Number"},{name:"ColorSetter",component:Y.ColorSetter,type:"String"},{name:"IconSetter",component:Y.IconSetter,type:"String"},{name:"ObjectSetter",component:Y.JsonSetter,type:"Object",props:{type:"Object"}},{name:"ArraySetter",component:Y.JsonSetter,type:"Array",props:{type:"Array"}},{name:"JsonSetter",component:Y.JsonSetter,type:"Object",props:{type:"JSON"}},{name:"JSONSetter",component:Y.JsonSetter,type:"Object",props:{type:"JSON"}},{name:"FunctionSetter",component:Y.FunctionSetter,type:"Function"},{name:"RadioSetter",component:Y.RadioSetter,type:"String"},{name:"TagSetter",component:Y.TagSetter,type:"String"},{name:"SizeSetter",component:Y.SizeSetter,type:"String"},{name:"ImageSetter",component:Y.ImageSetter,type:"String"},{name:"SectionSetter",component:Y.SectionSetter,type:"String"},{name:"SliderSetter",component:Y.SliderSetter,type:"Number"},{name:"RangeSetter",component:Y.SliderSetter,type:"Array",props:{range:!0}},{name:"FileSetter",component:Y.FileSetter,type:"String",props:{multiple:!1}},{name:"FilesSetter",component:Y.FileSetter,type:"String",props:{multiple:!0}}];class Or{widgets={};constructor(){this.widgets=this.createWidgets()}createWidgets(){const e={};for(const l of mr)e[l.name]=l;return e}register(e){this.widgets[e.name]=e}get(e){return this.widgets[e]}set(e,l){const a=this.widgets[e];if(!a){xe.warn(`widget '${e}' is not found`);return}yt(a,l),l.component&&(a.component=l.component)}getWidgets(e,l){const a=Object.values(this.widgets);return e?a.filter(n=>n.region===e&&(!l||l&&l===n.group)):a}}const Cl=new Or;class Lr{constructor(e=pr){this.deps=e}get(){return this.deps}set(e){this.deps=e}add(e){const l=this.deps.find(a=>a.package===e.package);l?Object.assign(l,e):this.deps.push(e)}merge(e){const l=[];for(const a of this.deps){const n=e.find(o=>o.package===a.package);l.push(n?{...n,...a,enabled:n.enabled}:a)}for(const a of e)this.deps.find(n=>n.package===a.package)||l.push(a);return l}remove(e){const l=this.deps.findIndex(a=>a.package===e);l>-1&&this.deps.splice(l,1)}}const Nr=new Lr;class Mr{setters={};defaultSetter=Tr;constructor(){this.setters=this.createSetters()}createSetters(){const e={};for(const l of Wr)e[l.name]=l;return e}register(e){this.setters[e.name]=e}get(e){return this.setters[e]}set(e,l){const a=this.setters[e];if(!a){xe.warn(`setter '${e}' is not found`);return}yt(a,l),l.component&&(a.component=l.component)}getByType(e){return Object.values(this.setters).filter(l=>l.type===e).map(l=>l.name)}}const Ke=new Mr;function Ur(d){return new Promise((e,l)=>{const a=dl(io,{slots:d,onClose:()=>{a.unmount(),l(null)},onSubmit:n=>{a.unmount(),e(n)}});a.mount(document.createElement("div"))})}class Ir{constructor(e,l,a){this.engine=e,this.contentWindow=l,this.dependencies=a,this.document=this.contentWindow.document,this.bindEvents(l,this.document)}proxied={};document=null;hover=vt(null);dropping=vt(null);selected=k(null);dragging=null;bind(e,l){let a=this.proxied[l];return a||(a=e.bind(this),this.proxied[l]=a),a}bindEvents(e,l){l.addEventListener("mouseover",this.bind(this.onMouseOver,"onMouseOver")),l.addEventListener("scroll",this.bind(this.onViewChange,"onViewChange")),e.addEventListener("resize",this.bind(this.onViewChange,"onViewChange")),l.addEventListener("mouseleave",this.bind(this.onLeave,"onLeave")),l.addEventListener("dragleave",this.bind(this.onLeave,"onLeave")),l.addEventListener("dragover",this.bind(this.onDragOver,"onDragOver")),l.addEventListener("drop",this.bind(this.onDrop,"onDrop")),l.addEventListener("click",this.bind(this.onSelected,"onSelected")),te.on(ut,this.bind(this.onActiveChange,"onActiveChange")),te.on(Le,this.bind(this.onViewChange,"onViewChange"))}unbindEvents(e,l){l.removeEventListener("mouseover",this.bind(this.onMouseOver,"onMouseOver")),l.removeEventListener("scroll",this.bind(this.onViewChange,"onViewChange")),e.removeEventListener("resize",this.bind(this.onViewChange,"onViewChange")),l.removeEventListener("mouseleave",this.bind(this.onLeave,"onLeave")),l.removeEventListener("dragleave",this.bind(this.onLeave,"onLeave")),l.removeEventListener("dragover",this.bind(this.onDragOver,"onDragOver")),l.removeEventListener("drop",this.bind(this.onDrop,"onDrop")),l.removeEventListener("click",this.bind(this.onSelected,"onSelected")),te.off(ut,this.bind(this.onActiveChange,"onActiveChange")),te.off(Le,this.bind(this.onViewChange,"onViewChange"))}onMouseOver(e){const l=this.getHelper(e);l?.model.id!==this.selected.value?.model.id&&(this.hover.value=l)}onViewChange(){this.updateRect()}onLeave(e){this.hover.value=null,this.dropping.value=null}onActiveChange(){this.hover.value=null,this.dropping.value=null,this.selected.value=null}async getDropSlot(e){if(!e)return;const{engine:l}=this,a=l.assets,n=a.componentMap,o=await a.getBlockMaterial(e.from)||n.get(e.name);if(!o?.slots)return;const i=(o?.slots||["default"]).map(r=>typeof r=="string"?{name:r,params:[]}:{name:r.name,params:r.params||[]});if(i.length===0)return;if(i.length===1)return i[0];const s=await Ur(i).catch(()=>null);if(!(s&&s.name==="default"&&(!s.params||s.params?.length===0)))return s}async onDrop(e){e.preventDefault();const{engine:l,dragging:a,dropping:n}=this,o=l.current.value,i=this.getHelper(e);if(!o||!a||!n.value||!i)return;const s=i.model,r=n.value.type;if(!await this.allowDrop(s,r))return;const v=this.createNodeDsl(a),m=new zt(v);if(Z(s))o.addNode(m,void 0,r);else{const h=await this.getDropSlot(r==="inner"?s:s.parent);if(h===null){this.dropping.value=null;return}m.slot=h,o.addNode(m,s,r)}this.dropping.value=null,l.assets.clearCaches()}onSelected(e){this.setHover(null),this.selected.value=this.getHelper(e)}async onDragOver(e){const l=this.getHelper(e);if(!l)return;const{model:a,type:n}=l;a&&await this.allowDrop(a,n)?(e.preventDefault(),this.dropping.value=l):this.dropping.value=null}isVtjElement(e){return!!e.__vtj__&&!!e.__context__}findVtjElement(e){return e.find(l=>this.isVtjElement(l))}getNodeByElement(e){const l=e.__vtj__??"";return zt.nodes[l]||null}getDropType(e,l,a){const{left:n,top:o,width:i,height:s}=e;return l>=n&&l<=n+i*.2?"left":l>=n+i*.8&&l<=n+i?"right":a>=o&&a<=o+s*.2?"top":a>=o+s*.8&&a<=o+s?"bottom":"inner"}getNodePath(e=[]){const l=e.filter(n=>this.isVtjElement(n)),a=this.engine.current.value;return[...l.map(n=>this.getNodeByElement(n)).filter(n=>!!n),a]}setDslFrom(e){const l=this.engine.assets.componentMap.get(e.name);if(e.from=e.from||l?.package,Array.isArray(e.children))for(const a of e.children)this.setDslFrom(a)}createNodeDsl(e){const{name:l,snippet:a={},from:n}=e,o={...a,name:l,from:n||e.package};return this.setDslFrom(o),o}getElmenetByModel(e){return!this.document||!e?null:Z(e)?this.document.body:Array.from(this.document.querySelectorAll("*")).find(l=>l.__vtj__===e.id)}findPathByNode(e){const l=[e];let a=e;for(;a.parent&&a.parent!==a;)a=a.parent,a!==e&&l.unshift(a);const n=this.engine.current.value;return l.unshift(n),l.reverse()}getHelper(e){const l=e.composedPath()||[],a=this.findVtjElement(l)||this.document?.body;if(!a)return null;const n=this.getNodeByElement(a)||this.engine.current.value;if(!n)return null;const o=a.getBoundingClientRect(),i=this.getDropType(o,e.clientX,e.clientY),s=this.getNodePath(l);return{el:a,model:n,rect:o,type:i,path:s}}cleanHelper(){this.setSelected(null),this.setHover(null),this.setDragging(null),this.setDropping(null)}async updateRect(){await Yt(100);const e=t(this.selected),l=t(this.hover);if(e){const a=e.el.getBoundingClientRect();this.selected.value={...e,rect:a}}if(l){const a=l.el.getBoundingClientRect();this.hover.value={...l,rect:a}}}setDragging(e){this.dragging=e}async setHover(e){if(await ke(),e){const l=this.getElmenetByModel(e);if(!l)return;const a=l.getBoundingClientRect(),n=Z(e)?[]:this.findPathByNode(e);this.hover.value={el:l,model:e,rect:a,type:"inner",path:n}}else this.hover.value=null}async setSelected(e){if(await ke(),e){const l=this.getElmenetByModel(e)||this.document?.createElement("span");if(!l)return;const a=l.getBoundingClientRect(),n=Z(e)?[]:this.findPathByNode(e);this.selected.value={el:l,model:e,rect:a,type:"inner",path:n}}else this.selected.value=null}async setDropping(e,l="inner"){if(await ke(),e){const a=this.getElmenetByModel(e);if(!a)return;const n=a.getBoundingClientRect(),o=Z(e)?[]:this.findPathByNode(e);this.dropping.value={el:a,model:e,rect:n,type:l,path:o}}else this.dropping.value=null}async allowDrop(e,l="inner"){const{dragging:a,engine:n}=this,o=n.current.value;if(!a||!o)return!1;if(Z(e))return!0;const i=n.assets.componentMap,s=l!=="inner"&&e.parent||e,r=await n.assets.getBlockMaterial(s.from)||i.get(s.name);if(!r)return!1;const{parentIncludes:v=!0,name:m}=a,{childIncludes:h=!0}=r,b=v===!0||Array.isArray(v)&&v.includes(s.name),g=h===!0||Array.isArray(h)&&h.includes(m);return b&&g}dispose(){const{contentWindow:e,document:l}=this;this.setSelected(null),this.setHover(null),this.setDragging(null),e&&l&&this.unbindEvents(e,l),this.document=null}}class qr{constructor(e,l,a,n=null){this.env=e,this.service=l,this.provider=a,this.designer=n,this.nodeChange=this.__onNodeChange.bind(this),this.blockChange=this.__onBlockChange.bind(this)}app=null;dsl=null;nodeChange;blockChange;context=null;install(e){const{library:l,globals:a,VueRouter:n,locales:o}=this.env;if(n){const s=n.createRouter({history:n.createWebHashHistory(),routes:[]});e.use(s)}const i=Object.entries(l);Object.assign(e.config.globalProperties,a),e.config.errorHandler=(s,r,v)=>{const m=r?.$options.name,h=s?.message||s?.msg||"未知错误",b=`[ ${m} ] ${h}`;console.error({err:s,instance:r,info:v}),ge.error({title:"运行错误",message:b})},i.forEach(([s,r])=>{if(typeof r=="function"||typeof r.install=="function"){let v={};const m=o[s];m&&(v.locale=m),e?.use(r,v)}})}render(e){const{window:l,container:a,library:n,Vue:o,components:i,apis:s}=this.env,r=l.document.createElement("div");r.id="app",a.appendChild(r),this.dsl=o.reactive(e.toDsl());const{renderer:v,context:m}=this.provider.createDslRenderer(this.dsl,{window:l,mode:Kt.Design,Vue:o,components:i,apis:s,libs:n});this.app=o.createApp(v),this.install(this.app);try{this.app.mount(r)}catch(h){le(h.message||"未知错误","运行时错误"),console.error(h)}this.context=m,te.on(Le,this.nodeChange),te.on(dt,this.blockChange)}dispose(){if(this.app){this.app.unmount();const e=this.app._container;e&&e.parentNode&&(e.parentNode.removeChild(e),this.app._container=null),this.app=null}this.dsl=null,this.context=null,te.off(Le,this.nodeChange),te.off(dt,this.blockChange)}updateChild(e,l){const a=l.children||l.nodes||[];if(Array.isArray(a))for(let n=0;n<a.length;n++){const o=a[n];if(o.id===e.id){a.splice(n,1,e);return}else this.updateChild(e,o)}}__onNodeChange(e){this.dsl&&this.updateChild(e.toDsl(),this.dsl)}__onBlockChange(e){this.dispose(),this.render(e),this.designer?.selected.value&&this.designer.setSelected(e)}}class Hr extends Xt{contentWindow=null;renderer=null;designer=vt(null);engine;materialPath;constructor(e){super();const{engine:l,materialPath:a}=e;this.engine=l,this.materialPath=a,H(this.engine.current,()=>{this.refresh()})}init(e,l,a,n){H([e,l,a,n],()=>{e.value&&l.value.length&&(this.resetReady(),this.renderer?.dispose(),this.renderer=null,this.setup(e.value,l.value),this.contentWindow&&(this.designer.value?.dispose(),this.designer.value=new Ir(this.engine,this.contentWindow,l)))},{immediate:!0,deep:!0})}setup(e,l){const a=e.contentWindow;if(!a){xe.warn("Simulator contentWindow is null");return}a.__simulator__=this;const n=a.document;a.CKEDITOR_VERSION=void 0,this.contentWindow=a;const{scripts:o,css:i,materials:s,libraryExports:r,materialExports:v,materialMapLibrary:m,libraryLocaleMap:h}=Pa(l,this.materialPath);n.open(),n.write(`
     <!DOCTYPE html>
     <html lang="zh-CN">
       <head>
       <meta charset="utf-8">
       <meta name="viewport"
             content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0,viewport-fit=cover"/>
         <style>
            html, body, #app {
              padding: 0;
              margin: 0;
              min-height: 100vh;
              width: 100%;
              height: 100%;
              background: #fff;
            }
         </style>
         ${Da(i)}
         ${Dt(o)}
         ${Dt(s)}
       </head>
       <body> 
       </body>
       <script>
       __simulator__.emitReady(${JSON.stringify(r)},
        ${JSON.stringify(v)}, 
    ${JSON.stringify(m)},
    ${JSON.stringify(h)}
    );
     <\/script> 
     </html>
    `),n.close()}async emitReady(e=[],l=[],a={},n={}){this.renderer?.dispose(),this.renderer=null;const o=this.contentWindow,{assets:i,service:s,current:r,provider:v}=this.engine,m=v.materials||{},h=[];for(const g of l){const p=m[g]?(await m[g]()).default:o[g];h.push(p)}i.load(h);const b=this.createEnv(e,a,h,n);this.renderer=new qr(b,s,v,this.designer.value),r.value&&this.renderer.render(r.value),this.triggerReady()}createEnv(e=[],l={},a=[],n={}){const o=this.contentWindow,{engine:i}=this,{project:s,assets:r,provider:v}=i,m=e.reduce((P,B)=>(P[B]=o[B],P),{}),h={};Object.entries(n).forEach(([P,B])=>{h[P]=o[B]});const b={},{groups:g,componentMap:p}=r;for(const P of g.value){const B=P.names||[];if(P.name===ct)B.forEach(R=>{const ee=p.get(R),E=ee?.package||"",F=Wn[E],A=m[F];A&&ee&&(b[R]=Et(ee,A))});else{const R=m[l[P.library||""]];R&&B.forEach(ee=>{const E=p.get(ee);E?b[ee]=Et(E,R):b[ee]=R[ee]})}}const{adapter:w,globals:S}=v,D=Ea(s.value?.apis,w);return za(),s.value?.config?.mock&&Ba(s.value?.apis),{window:o,Vue:o.Vue,VueRouter:o.VueRouter,library:m,materials:a,components:b,container:o.document.body,apis:D,globals:S,libraryLocaleMap:n,locales:h}}refresh(){this.renderer?.dispose();const e=this.engine.current.value;e&&this.renderer?.render(e)}dispose(){this.renderer?.dispose(),this.designer.value?.dispose(),this.contentWindow=null,this.renderer=null,this.designer.value=null,this.resetReady()}}class Qr{constructor(e,l){this.service=e,this.provider=l}components=[];componentMap=new Map;groups=k([]);caches={};getCateoryComponents(e,l){const a=l.filter(n=>n.categoryId===e.id&&n.hidden!==!0);return{name:e.id,label:e.category,count:a.length,components:a}}parseGroups(e){const l=[];for(let a of e){const{categories:n,components:o,label:i,name:s,library:r}=a;if(!n||!o)continue;const v=o.filter(g=>!!g.package).map(g=>g.name),m=n.map(g=>this.getCateoryComponents(g,o)),h=m.reduce((g,p)=>p.count+g,0),b={name:a.name,label:i||s,count:h,names:v,library:r,children:m};l.push(b)}return l}load(e){const l=[...br,...e].filter(a=>!!a);l.sort((a,n)=>a.order-n.order);for(let a of l)a.components&&(this.components=this.components.concat(a.components));this.groups.value=this.parseGroups(l),this.componentMap=Ra(this.components,"name")}async getBlockMaterial(e,l){if(!e||typeof e=="string")return null;let a;if(e.type==="Schema"&&e.id&&(a=this.caches[e.id]||await this.service.getFile(e.id),this.caches[e.id]=a),e.type==="UrlSchema"&&e.url&&(a=this.caches[e.url]||await this.provider.getDslByUrl(e.url),this.caches[e.url]=a),e.type==="Plugin"){const h=await this.service.getPluginMaterial(e);return h?(h.name=l||h.name,h.from=e,this.componentMap.set(h.name,h),h):null}if(!a)return null;a.name=l||a.name;const{id:n,name:o,slots:i,props:s,emits:r}=a,v=h=>{const b=Array.isArray(h)?h:[h];let g=[];for(const p of b)g=g.concat(Ke.getByType(p));return g},m={id:n,name:o,childIncludes:i?.length?void 0:!1,props:(s||[]).map(h=>typeof h=="string"?{name:h}:{name:h.name,type:h.type,setters:v(h.type)}),events:r,slots:i,from:e};return this.componentMap.set(o,m),m}clearCaches(){this.caches={}}}const Vl=Symbol("VtjEngine");class zu extends Xt{app;skeleton;container;service;assets;simulator;emitter=te;project=k(null);current=k(null);context=k(null);isEmptyCurrent=k(!1);history=k(null);provider;changed=k(Symbol());constructor(e){super();const{container:l,service:a,project:n={},globals:o={},dependencies:i,materials:s,materialPath:r="./"}=e;this.container=l,this.service=a,this.provider=new ra({mode:Kt.Design,globals:o,project:n,service:a,dependencies:i,materials:s,materialPath:r}),this.assets=new Qr(this.service,this.provider),this.simulator=new Hr({engine:this,materialPath:r}),this.bindEvents(),this.init(n),rl(this.render.bind(this)),ul(this.dispose.bind(this))}async init(e){const l=await this.service.init(e).catch(a=>(xe.warn("VTJEngine service init fail.",a),null));l&&(l.dependencies=Nr.merge(l.dependencies||[]),this.project.value=new ua(l),this.saveMaterials(),this.triggerReady())}render(){const e=t(this.container);if(e){const l=dl(Gr);l.provide(Vl,Xn(this)),l.mount(e),this.app=l}else xe.warn("VTJEngine constructor param [ container ] is undefined")}bindEvents(){te.on(da,e=>this.saveProject(e)),te.on(ca,e=>this.saveBlockFile(e)),te.on(ma,e=>this.saveBlockFile(e)),te.on(pa,()=>this.saveMaterials()),te.on(ut,e=>this.activeFile(e)),te.on(va,()=>this.publish()),te.on(ga,()=>this.publishCurrent()),te.on(dt,e=>this.changeFile(e)),te.on(Le,()=>this.changeCurrentFile()),te.on(ha,e=>this.saveHistory(e)),te.on(ba,e=>this.loadHistory(e))}async activeFile(e){await ke();const l=e.model,a=e.model.currentFile;if(a){if(l.isPageFile(a)&&a.raw)return;const n=await this.service.getFile(a.id);n&&(a.dsl=n)}if(a?.dsl){const n=new At(a.dsl);this.updateCurrent(n),this.initHistory(n)}else this.updateCurrent(null);je(this.project)}async changeFile(e){await ke();const l=e.toDsl();this.service.saveFile(l),this.updateCurrent(e),this.history.value?.add(l),je(this.history)}changeCurrentFile(){this.saveCurrentFile(),this.current.value&&(this.history.value?.add(this.current.value.toDsl()),je(this.history))}async updateCurrent(e,l=!0){this.current.value=e,await ke(),this.context.value=this.simulator.renderer?.context||null,this.isEmptyCurrent.value=this.current.value?.nodes.length===0,this.changed.value=Symbol(),l&&je(this.context)}async saveProject(e){const l=e.model.toDsl();await this.service.saveProject(l),je(this.project)}async saveBlockFile(e){const l=e.type,a=e.model;if(l==="create"){const n=e.data;a.isPageFile(n)&&n.raw?(await this.service.createRawPage(n),me(`源码文件已经生成：/.vtj/vue/${n.id}.vue`,"success")):n.dsl&&await this.service.saveFile(n.dsl)}if(l==="update"){const n=e.data;if(a.isPageFile(n)&&(n.dir||n.raw))return;const o=await this.service.getFile(n.id);o&&(o.name=n.name,await this.service.saveFile(o))}if(l==="delete"){const n=e.data;n&&a.isPageFile(n)&&n.raw?await this.service.removeRawPage(n.id):n.dir||(await this.service.removeFile(n.id),await this.service.removeHistory(n.id))}if(l==="clone"){const{page:n,newPage:o}=e.data,i=await this.service.getFile(n.id);i&&(i.id=o.id,i.name=o.name,await this.service.saveFile(i))}je(this.project)}async saveMaterials(){await ke(),this.simulator.ready(()=>{const e=this.project.value;if(e){const l=this.assets.componentMap;this.service.saveMaterials(e.toDsl(),l)}})}saveCurrentFile(){const e=this.current.value;e&&(this.updateCurrent(e),this.service.saveFile(e.toDsl()))}async initHistory(e){if(e){const l=await this.service.getHistory(e.id).catch(()=>null);this.history.value=new fa(Object.assign(l||{},{id:e.id}))}else this.history.value=null}async saveHistory(e){const l=e.type,a=e.model;l==="create"&&await this.service.saveHistoryItem(a.id,e.data),l==="delete"&&await this.service.removeHistoryItem(a.id,e.data),l==="clear"&&await this.service.removeHistoryItem(a.id,e.data);const n=a.toDsl();await this.service.saveHistory(n),je(this.history)}async loadHistory(e){const l=e.model,a=e.data,n=await this.service.getHistoryItem(l.id,a.id);if(n&&n.dsl){const o=new At(n.dsl);await this.updateCurrent(o),je(this.history)}}async publish(){const e=this.project.value;if(e){const l={...e.toDsl(),pages:e.getPages()};await this.service.publish(l)&&me("整站发布成功","success")}}async publishCurrent(){const e=this.project.value,l=e?.currentFile;if(e&&l){const a={...e.toDsl(),pages:e.getPages()};await this.service.publishFile(a,l)&&me("发布成功","success")}}dispose(){this.emitter.all.clear(),this.simulator.dispose(),this.app&&(this.app.unmount(),this.container=void 0)}async openFile(e){const l=this.project.value,a=this.skeleton?.getRegion("Apps"),n=e||l?.homepage;if(!l||!a||!n)return;const o=l.getPage(n);o&&!o.raw&&(a.regionRef?.setActive("Pages"),this.simulator.ready(()=>{l.active(o)}));const i=l.getBlock(n);i&&(a.regionRef?.setActive("Blocks"),this.simulator?.ready(()=>{l.active(i)}))}}function ce(){const d=St(Vl,null);return d||xe.error("VTJEngine is not exist"),d}const Ae=j({name:"RegionWrapper",props:{region:{type:String,required:!0}},setup(){return{regionRef:k()}},render(){const d=Tt[this.region]||Tt.EmptyRegion;return Te(d,{...this.$props,...this.$attrs,ref:"regionRef"})}}),Ee=j({name:"WidgetWrapper",props:{region:{type:String,required:!0},widget:{type:Object,required:!0}},setup(){return{widgetRef:k()}},render(){return Te(this.widget.component,{...this.widget.props,...this.$props,...this.$attrs,ref:"widgetRef"})}}),Gr=j({name:"SkeletonWrapper",setup(){const d=k(),e=ce(),l=k({});return{skeletonRef:d,engine:e,widgets:l}},mounted(){this.engine.skeleton=this},render(){return Te(Xr,{...this.$props,...this.$attrs,ref:"skeletonRef"})},methods:{getRegion(d){return this.skeletonRef[d.toLowerCase()]},toggleCollapse(d){if(this.skeletonRef){const e=this.skeletonRef.collapsed;this.skeletonRef.collapsed=d??!e}},settable(d){this.skeletonRef&&(this.skeletonRef.settable=d)},getWidgets(d){const e=this.getRegion(d);return e?ya(e.regionRef?.widgetsRef||[]):[]},getWidget(d){const e=Cl.get(d);if(!e){xe.warn(`widget [ ${d} ] is not exsit`);return}return this.getWidgets(e.region).find(l=>l.widget.name===d)},openPreview(d){this.skeletonRef&&(this.skeletonRef.isPreview=!0)},closePreview(){this.skeletonRef&&(this.skeletonRef.isPreview=!1)}}}),N=j({name:"SetterWrapper",props:{context:{type:Object,default:null},current:{type:Object,default:null},name:String,label:String,title:String,value:{type:[String,Object,Array,Number,Boolean],default:void 0},setters:{type:[String,Object,Array],required:!0,default(){return[]}},options:{type:Array,default(){return[]}},variable:{type:Boolean,default:!0},removable:{type:Boolean,default:!1}},computed:{computedSetters(){return(Array.isArray(this.setters)?this.setters:[this.setters]).map(d=>{let e;if(typeof d=="string")return e=this.getSetter(d),{component:Bt(e.component),name:e.name,label:d,props:e.props||{}};{const l=d;return e=this.getSetter(l.name),{component:Bt(l.component||e.component),name:l.name,label:l.label||l.name,props:Object.assign(e.props||{},l.props)}}})},computedOptions(){return(this.options||[]).map(d=>typeof d=="string"?{label:d,value:d}:d)},defaultSetter(){const{value:d,computedSetters:e}=this;let l=typeof d;l==="Object"&&(Array.isArray(d)?l="Array":Ne(d)?l="Object":wa(d)&&(l="Function"));const a=Ke.getByType(l)||[];return a.length?(e.find(n=>a.includes(n.name))||e[0])?.name:e[0]?.name}},render(){const{context:d,current:e,name:l,label:a,title:n,value:o,computedSetters:i,computedOptions:s,variable:r,changeValue:v,defaultSetter:m,removable:h,onRemove:b}=this;return Te(lu,{context:d,current:e,name:l,label:a,title:n,setters:i,defaultSetter:m,variable:r,value:o,removable:h,options:s,onChange:v,onRemove:b})},emits:["change","remove"],methods:{getSetter(d){return typeof d=="string"?Ke.get(d)||Ke.defaultSetter:d},changeValue(d){this.$emit("change",this.name,d)},onRemove(d){this.$emit("remove",d)}}}),Xr=j({name:"Skeletion",__name:"skeleton",props:{headerHeight:{default:"36px"},leftWidth:{default:"400px"},rightWidth:{default:"350px"},footerHeight:{default:"20px"}},setup(d,{expose:e}){const l=d,a=k(!1),n=k(parseInt(l.leftWidth)),o=k(parseInt(l.rightWidth)),i={dirs:["e"],maxWidth:600,minWidth:49,onResizing(P,B){n.value=B.elementWidth.value},onEnd(P,B){n.value=B.elementWidth.value}},s={dirs:["w"],maxWidth:600,minWidth:2,onResizing(P,B){o.value=B.elementWidth.value},onEnd(P,B){o.value=B.elementWidth.value}},r=k(),v=k(),m=k(),h=k(),b=k(),g=k(),p=k(),w=k(),S=k(!1),D=k(!1);return e({brand:r,toolbar:v,actions:m,apps:h,workspace:b,settings:g,status:p,collapsed:S,settable:D,leftWidth:n,rightWidth:o,preview:w,isPreview:a}),(P,B)=>(u(),y(t(Tl),{locale:t(Jl)},{default:f(()=>[c(t(Vt),{class:"v-skeleton"},{default:f(()=>[c(t(Bl),{class:"v-skeleton__header",height:P.headerHeight},{default:f(()=>[c(t(Ae),{ref_key:"brand",ref:r,region:"Brand"},null,512),c(t(Ae),{ref_key:"toolbar",ref:v,region:"Toolbar",preview:a.value},null,8,["preview"]),c(t(Ae),{ref_key:"actions",ref:m,region:"Actions"},null,512)]),_:1},8,["height"]),c(t(Vt),{class:"v-skeleton__wrapper"},{default:f(()=>[a.value?C("",!0):Pe((u(),y(t(jt),{key:0,width:l.leftWidth,class:I(["v-skeleton__left",{"is-collapsed":S.value}])},{default:f(()=>[c(t(Ae),{ref_key:"apps",ref:h,region:"Apps"},null,512)]),_:1},8,["width","class"])),[[t(Pt),i]]),c(t(Rl),{class:"v-skeleton__main"},{default:f(()=>[a.value?(u(),y(t(Ae),{key:0,ref_key:"preview",ref:w,region:"Preview",preview:a.value},null,8,["preview"])):C("",!0),Pe(c(t(Ae),{ref_key:"workspace",ref:b,region:"Workspace"},null,512),[[ze,!a.value]])]),_:1}),a.value?C("",!0):Pe((u(),y(t(jt),{key:1,width:l.rightWidth,class:"v-skeleton__right"},{default:f(()=>[c(t(Ae),{ref_key:"settings",ref:g,region:"Settings"},null,512)]),_:1},8,["width"])),[[ze,D.value],[t(Pt),s]])]),_:1}),a.value?C("",!0):(u(),y(t(Fl),{key:0,class:"v-skeleton__footer",height:P.footerHeight},{default:f(()=>[c(t(Ae),{ref_key:"status",ref:p,region:"Status"},null,512)]),_:1},8,["height"]))]),_:1})]),_:1},8,["locale"]))}}),Kr={key:1},$r={class:"v-setter__content"},Yr={key:0,class:"v-setter__input"},Zr={class:"v-setter__action"},eu="{{",tu="}}",lu=j({__name:"setter",props:{context:{},current:{},name:{},label:{default:""},title:{},setters:{},variable:{type:Boolean,default:!0},value:{},options:{default:()=>[]},defaultSetter:{},removable:{type:Boolean}},emits:["change","remove"],setup(d,{emit:e}){const l=d,a=e,n=k(!1),o=k(""),i=k(l.setters.find(D=>D.name===l.defaultSetter)||l.setters[0]),s=k(l.value),r=x(()=>!!Ne(s.value)),v={[i.value.name]:s.value},m=D=>{v[i.value.name]=s.value,i.value=D,s.value=v[D.name]??void 0,h(s.value)};H(()=>l.value,()=>{s.value=l.value}),H(()=>l.defaultSetter,()=>{i.value=l.setters.find(D=>D.name===l.defaultSetter)||l.setters[0]});const h=D=>{a("change",D)},b=()=>{a("remove",l.name)},g=()=>{n.value=!0,o.value=Ne(s.value)?s.value.value:""},p=()=>{n.value=!1,o.value=""},w=async D=>ie(D,l.context,!0)?(v[i.value.name]=s.value,s.value=D,a("change",D),!0):!1,S=async()=>{await We("确定要解除绑定吗？")&&(p(),s.value=void 0,a("change",""))};return(D,P)=>(u(),y(t(Mt),{class:"v-setter",size:"small","label-positon":"left"},{label:f(()=>[l.title?(u(),y(t(Nt),{key:0,placement:"top-start",content:l.title},{default:f(()=>[q(T(l.label||l.name),1)]),_:1},8,["content"])):(u(),V("span",Kr,T(l.label||l.name),1))]),default:f(()=>[_("div",$r,[i.value?(u(),V("div",Yr,[r.value?C("",!0):(u(),y(cl(i.value.component),re({key:0,current:l.current,context:l.context},i.value.props,{options:l.options,modelValue:s.value,"onUpdate:modelValue":P[0]||(P[0]=B=>s.value=B),onChange:h,disabled:r.value}),null,16,["current","context","options","modelValue","disabled"])),r.value?(u(),y(t(ye),{key:1,class:"v-expression-setter",disabled:"","model-value":"JSExpression"},{prefix:f(()=>[q(T(eu))]),suffix:f(()=>[q(T(tu))]),_:1})):C("",!0)])):C("",!0),_("div",Zr,[l.variable?(u(),y(t(ka),{key:0,onClick:g,class:I(["v-icon-vars",{"is-active":r.value}]),title:"绑定变量"},null,8,["class"])):C("",!0),l.setters.length>1?(u(),y(t(Lt),{key:1,disabled:r.value,size:"small","popper-class":"v-setter-switch",onCommand:m},{dropdown:f(()=>[c(t(Ot),null,{default:f(()=>[(u(!0),V(J,null,W(l.setters,B=>(u(),y(t(st),{command:B,key:B.name},{default:f(()=>[c(t($t),{class:I({"is-placeholder":B.name!==i.value.name})},null,8,["class"]),q(" "+T(B.label),1)]),_:2},1032,["command"]))),128))]),_:1})]),default:f(()=>[c(t(Sa),{title:"切换设置器"})]),_:1},8,["disabled"])):C("",!0),l.removable?(u(),y(t(Ye),{key:2,onClick:b,title:"删除"})):C("",!0)])]),n.value?(u(),y(t(To),{key:0,current:l.current,context:l.context,value:o.value,modelValue:n.value,"onUpdate:modelValue":P[1]||(P[1]=B=>n.value=B),submitMethod:w,onUnbind:S},null,8,["current","context","value","modelValue"])):C("",!0)]),_:1}))}}),au={class:"v-empty-region"},nu=j({name:"EmptyRegion",__name:"empty",props:{region:{}},setup(d){return(e,l)=>(u(),V("div",au,"找不到符合【"+T(e.region)+"】名称的区域组件",1))}}),su={class:"v-brand-region"},ou=j({name:"BrandRegion",inheritAttrs:!1,__name:"brand",props:{region:{}},setup(d,{expose:e}){const l=d,{widgets:a,widgetsRef:n}=De(l.region);return e({widgets:a,widgetsRef:n}),(o,i)=>(u(),V("div",su,[(u(!0),V(J,null,W(t(a),s=>(u(),y(t(Ee),{ref_for:!0,ref_key:"widgetsRef",ref:n,region:o.region,widget:s},null,8,["region","widget"]))),256))]))}}),iu={class:"v-toolbar-region"},ru=j({name:"ToolbarRegion",__name:"toolbar",props:{region:{},preview:{type:Boolean}},setup(d,{expose:e}){const l=d,{widgets:a,widgetsRef:n}=De(l.region);return e({widgets:a,widgetsRef:n}),(o,i)=>(u(),V("div",iu,[(u(!0),V(J,null,W(t(a),s=>(u(),y(t(Ee),{ref_for:!0,ref_key:"widgetsRef",ref:n,region:o.region,widget:s,preview:o.preview},null,8,["region","widget","preview"]))),256))]))}}),uu={class:"v-actions-region"},du=j({name:"ActionsRegion",inheritAttrs:!1,__name:"actions",props:{region:{}},setup(d,{expose:e}){const l=d,{widgets:a,widgetsRef:n}=De(l.region);return e({widgets:a,widgetsRef:n}),(o,i)=>(u(),V("div",uu,[(u(!0),V(J,null,W(t(a),s=>(u(),y(t(Ee),{ref_for:!0,ref_key:"widgetsRef",ref:n,region:o.region,widget:s},null,8,["region","widget"]))),256))]))}}),cu={class:"v-apps-region"},mu={class:"v-apps-region__header"},pu={class:"v-apps-region__top"},vu={class:"v-apps-region__bottom"},gu={class:"v-apps-region__panels"},hu=j({name:"AppsRegion",inheritAttrs:!1,__name:"apps",props:{region:{},index:{default:0}},setup(d,{expose:e}){const l=d,a=ce(),{widgets:n,widgetsRef:o}=De(l.region),i=x(()=>n.value.filter(g=>g.openType==="panel")),s=x(()=>n.value.filter(g=>g.openType!=="panel")),r=i.value[l.index],v=k(r),m=k(r),h=g=>{v.value=g,m.value=m.value?.name===g.name?null:g},b=g=>{g.openType==="link"&&g.url&&window.open(g.url),g.openType==="dialog"&&qn({title:g.label,icon:g.icon,...g.props,content:g.component})};return H(m,g=>{a.skeleton?.toggleCollapse(!g)}),e({widgets:n,widgetsRef:o,setActive:g=>{const p=i.value.find(w=>w.name===g);v.value=p,m.value=p}}),(g,p)=>(u(),V("div",cu,[_("div",mu,[_("div",pu,[(u(!0),V(J,null,W(i.value,w=>(u(),y(t(Jt),{key:`icon-${w.name}`,icon:w.icon,label:w.label,active:v.value?.name===w.name,open:m.value?.name===w.name,onClick:S=>h(w)},null,8,["icon","label","active","open","onClick"]))),128))]),_("div",vu,[(u(!0),V(J,null,W(s.value,w=>(u(),y(t(Jt),{key:`icon-${w.name}`,icon:w.icon,label:w.label,onClick:S=>b(w)},null,8,["icon","label","onClick"]))),128))])]),_("div",gu,[(u(!0),V(J,null,W(i.value,w=>(u(),y(vl,{key:w.name},[v.value?.name===w.name?(u(),y(t(Ee),{key:0,ref_for:!0,ref_key:"widgetsRef",ref:o,region:g.region,widget:w},null,8,["region","widget"])):C("",!0)],1024))),128))])]))}}),bu=j({name:"WorkspaceRegion",__name:"workspace",props:{region:{}},setup(d,{expose:e}){const l=d,{widgets:a,widgetsRef:n}=De(l.region),o=Ie(a.value.map(b=>({name:b.name,command:b.name,label:b.label,closable:!!b.closable,props:b.props||{},checked:!b.closable}))),i=x(()=>o.filter(b=>!b.closable||b.checked)),s=x(()=>o.map(b=>({...b,disabled:!b.closable}))),r=k(i.value[0]?.name),v=x(()=>o.find(b=>b.name===r.value)?.props||{}),m=b=>{const g=o.find(p=>p.name===b);g&&(g.checked=!1),r.value===b&&(r.value=i.value[0]?.name)},h=b=>{const g=o.find(p=>p.name===b.name);g&&g.closable&&(g.checked=!g.checked,g.checked&&(r.value=g.name),!g.checked&&r.value===g.name&&(r.value=i.value[0]?.name))};return e({currentTab:r,widgets:a,widgetsRef:n,openTab:(b,g={})=>{const p=o.find(w=>w.name===b);p&&(p.props=Object.assign({},p.props,g),p.checked=!0,r.value=p.name)}}),(b,g)=>(u(),y(t(tt),{class:"v-workspace-region",items:i.value,menus:s.value,modelValue:r.value,"onUpdate:modelValue":g[0]||(g[0]=p=>r.value=p),checkable:"",onRemove:m,onCommand:h},{default:f(()=>[(u(!0),V(J,null,W(t(a),p=>(u(),V(J,{key:p.name},[r.value===p.name?(u(),y(t(Ee),{key:0,ref_for:!0,ref_key:"widgetsRef",ref:n,region:b.region,widget:{...p,props:v.value}},null,8,["region","widget"])):C("",!0)],64))),128))]),_:1},8,["items","menus","modelValue"]))}}),fu=j({name:"SettingsRegion",__name:"settings",props:{region:{}},setup(d,{expose:e}){const l=d,a=ce(),{current:n}=ue(),{selected:o,isSelectBlock:i}=we(),s=x(()=>i.value?be.Block:be.Node),{widgets:r,widgetsRef:v}=De(l.region,s),m=k(),h=k(!1),b=x(()=>r.value.map(S=>({name:S.name,label:S.label,actions:S.name==="Style"?[{name:"switch",icon:ms,background:"hover"}]:void 0}))),g=x(()=>{const S=o.value?.model;return S?a.assets.componentMap.get(S.name)?.doc:null});H(n,S=>{a.skeleton?.settable(!!S)}),H(s,()=>{m.value=b.value[0]?.name},{immediate:!0}),H(m,()=>{h.value=!1});const p=()=>{if(g.value){const S=a.skeleton?.getRegion("Workspace");S&&S.regionRef.openTab("Docs",{url:g.value})}},w=S=>{S.name==="switch"&&(h.value=!h.value)};return e({widgets:r,widgetsRef:v}),(S,D)=>t(n)?(u(),y(t(M),{key:0,class:"v-settings-region",fit:"",direction:"column"},{default:f(()=>[t(o)?(u(),y(t(M),{key:0,flex:"",justify:"space-between",align:"center",class:"v-settings-region__header"},{default:f(()=>[c(t(M),{class:"v-settings-region__title"},{default:f(()=>[c(t(ll)),_("span",null,[q(T(t(o)?.model.name)+": ",1),_("i",null,T(t(o)?.model.id),1)])]),_:1}),g.value?(u(),y(t(M),{key:0},{default:f(()=>[c(t(fe),{onClick:p,icon:t(al),mode:"text",label:"帮助"},null,8,["icon"])]),_:1})):C("",!0)]),_:1})):C("",!0),t(o)&&!t(o).model.locked?(u(),y(t(M),{key:1,grow:"",padding:!1},{default:f(()=>[c(t(tt),{items:b.value,modelValue:m.value,"onUpdate:modelValue":D[0]||(D[0]=P=>m.value=P),stretch:"",body:{padding:!1},onActionClick:w},{default:f(()=>[(u(!0),V(J,null,W(t(r),P=>(u(),V(J,{key:P.name},[m.value===P.name?(u(),y(t(Ee),{key:0,ref_for:!0,ref_key:"widgetsRef",ref:v,region:S.region,widget:t(yt)({props:{isStyleCodeMode:h.value}},P)},null,8,["region","widget"])):C("",!0)],64))),128))]),_:1},8,["items","modelValue"])]),_:1})):C("",!0),t(o)?C("",!0):(u(),y(t(oe),{key:2,description:"请在左侧画布选中节点"})),t(o)&&t(o).model.locked?(u(),y(t(oe),{key:3,"image-size":1,description:"节点已被锁定, 禁止编辑"})):C("",!0)]),_:1})):C("",!0)}}),yu={class:"v-status-region"},wu=j({name:"StatusRegion",inheritAttrs:!1,__name:"status",props:{region:{}},setup(d,{expose:e}){const l=d,{widgets:a,widgetsRef:n}=De(l.region);return e({widgets:a,widgetsRef:n}),(o,i)=>(u(),V("div",yu,[(u(!0),V(J,null,W(t(a),s=>(u(),y(t(Ee),{ref_for:!0,ref_key:"widgetsRef",ref:n,region:o.region,widget:s},null,8,["region","widget"]))),256))]))}}),ku=j({name:"PreviewRegion",__name:"preview",props:{region:{}},setup(d,{expose:e}){const l=d,{widgets:a,widgetsRef:n}=De(l.region),o=Ie(a.value.map(r=>({name:r.name,command:r.name,label:r.label,closable:!!r.closable,checked:!1}))),i=x(()=>o.filter(r=>!r.closable||r.checked)),s=k(i.value[0]?.name);return e({currentTab:s,widgets:a,widgetsRef:n}),(r,v)=>(u(),y(t(tt),{class:"v-workspace-region",items:i.value,modelValue:s.value,"onUpdate:modelValue":v[0]||(v[0]=m=>s.value=m)},{default:f(()=>[(u(!0),V(J,null,W(t(a),m=>(u(),y(vl,{key:m.name},[s.value===m.name?(u(),y(t(Ee),{key:0,ref_for:!0,ref_key:"widgetsRef",ref:n,region:r.region,widget:m},null,8,["region","widget"])):C("",!0)],1024))),128))]),_:1},8,["items","modelValue"]))}}),Tt={EmptyRegion:nu,Brand:ou,Toolbar:ru,Actions:du,Apps:hu,Workspace:bu,Settings:fu,Status:wu,Preview:ku};class Bu extends Qn{publish(e){return ge.warning({title:"提示",message:"在线演示版本不支持发布功能，如需体验请下载本地版本。"}),Promise.resolve(!1)}publishFile(e,l){return ge.warning({title:"提示",message:"在线演示版本不支持发布功能，如需体验请下载本地版本。"}),Promise.resolve(!1)}genVueContent(e,l){return ge.warning({title:"提示",message:"在线演示版本不支持源码生成功能，如需体验请下载本地版本。"}),Promise.resolve("")}async createRawPage(e){return ge.warning({title:"提示",message:"在线演示版本不支持源码模式页面，如需体验请下载本地版本。"}),Promise.resolve(!1)}async removeRawPage(e){return ge.warning({title:"提示",message:"在线演示版本不支持源码模式页面，如需体验请下载本地版本。"}),Promise.resolve(!1)}async uploadStaticFile(e,l){return ge.warning({title:"提示",message:"在线演示版本不支持文件上传，如需体验请下载本地版本。"}),Promise.resolve(null)}async getStaticFiles(e){return ge.warning({title:"提示",message:"在线演示版本不支持文件上传，如需体验请下载本地版本。"}),Promise.resolve([])}async getPluginMaterial(e){return ge.warning({title:"提示",message:"在线演示版本不支持引用和插件，如需体验请下载本地版本。"}),Promise.resolve(null)}}export{zu as D,Bu as L,Pu as M,Du as P,Eu as a,Cl as j};
