function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./Editor-BKlikwSl-CuqorJtj.js","./monaco-editor-DioPL3jn.js","./monaco-editor-BoaUnmrp.css","./@vue-DbHY7CtS.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{c as bt,d as ue,e as Qe,f as Tt,g as Al,h as Ot,i as st,j as Nt,k as ft,l as ot,m as it,b as ne,n as Se,o as jl,p as El,q as ge,r as Dl,s as zl,t as Pl,u as Vt,v as Bl,w as At,x as Rl,y as Jl,z as Fl,E as Wl,A as Lt,B as It,a as Ye,C as Tl,D as Mt,F as Ut,G as Ol,H as ye,I as yt,J as qt,K as Nl,L as Ll,M as Il,N as Ml,O as Ul}from"./element-plus-D_G25apP.js";import{i as ql,a as Hl,p as Ql,s as Gl,r as Kl,b as Xl,c as Yl,R as Ht,$ as $l,H as xe,Q as wt,o as Zl,d as ea,L as ta,M as la,e as aa,k as na,y as sa,f as oa,g as rt,h as Ce,j as z,v as ia,t as kt,l as Qt,n as Gt,V as I,m as $,u as St,q as Kt,x as ee,z as ra,w as ut,O as ua,A as da,B as ca,C as ma,D as pa,P as dt,J as va,G as ga,F as ct,K as Ne,N as ha,S as ba,T as jt,U as fa,W as ya,X as Le,Y as wa,_ as Et,a0 as ka,a1 as Xt,a2 as Sa,a3 as $e,a4 as Yt,a5 as be,a6 as $t,a7 as xa,a8 as Ze,a9 as _e,aa as Zt,ab as et,ac as el,ad as Fe,ae as tl,af as _a,ag as Re,ah as Ca,ai as Ie,aj as Va,ak as Aa,al as ja,am as Dt,an as mt,ao as zt,ap as Ea,aq as Da,ar as za,as as Pa,at as Ba,au as ll,av as Ra,aw as Ja,ax as al,ay as Fa,az as Wa,aA as Ta,aB as Oa,aC as Na,aD as La,aE as Ia,aF as Ma,aG as Ua,aH as qa,aI as Ha,aJ as Qa,aK as Ga,aL as Ka,aM as Xa,aN as Ya,aO as $a,aP as Za,aQ as en,aR as nl,aS as tn,aT as ln,aU as an,aV as nn,aW as sn,aX as on,aY as rn,aZ as un,a_ as dn,a$ as cn,b0 as mn,b1 as pn,b2 as vn,b3 as gn,b4 as hn,b5 as sl,b6 as bn,b7 as fn,b8 as yn,b9 as wn,ba as kn,bb as Sn,bc as xn,bd as _n,be as Cn,bf as Vn,bg as An,bh as jn,bi as En,bj as Dn,bk as zn,bl as Pn,bm as Bn,bn as Rn,bo as Jn,bp as Fn,bq as Pt,br as Wn,bs as Tn,bt as On,bu as ol,bv as Nn,bw as Ln,bx as In,by as Mn,bz as Un,bA as qn,bB as lt,bC as Hn,bD as Qn}from"./index-CL9flPW5.js";import{_ as Gn}from"./monaco-editor-DioPL3jn.js";import{d as C,j as x,o as u,c as V,Z as F,_ as c,U as b,u as t,a as _,S as y,X as A,r as k,Y as H,F as R,a9 as W,m as pt,f as q,O as U,P as Ge,aa as Ke,a5 as Oe,i as il,I as rl,at as ul,av as Kn,n as we,bD as Ae,J as Je,an as Bt,V as Ee,$ as Pe,W as dl,Q as de,a1 as Ue,w as Xn,ab as Yn,M as ke,bB as vt,aU as $n,L as Zn,s as gt,G as xt,ad as cl,ae as ml,aC as pl,af as es}from"./@vue-DbHY7CtS.js";import{n as Me,p as ts,q as ls}from"./@vueuse-DrUKsxYo.js";import{d as as}from"./mockjs-DCYLE3qz.js";import{n as ns,D as ss,T as os,P as is,k as vl,j as rs,B as us,M as gl,E as _t,d as ds,U as cs}from"./@element-plus-mH6lrfSY.js";const Vu="/vtj/",Au="LCDP",ju="低代码开发平台";/**!
 * Copyright (c) 2024, VTJ.PRO All rights reserved.
 * @name @vtj/designer 
 * @author CHC chenhuachun1549@dingtalk.com 
 * @version 0.7.33
 * @license <a href="https://vtj.pro/license.html">MIT License</a>
 */const ms="0.7.33",Rt={width:390,height:844},Jt={width:1180,height:820},Ve=/^[A-Za-z_$][\w_-]*$/,ps=["click","dblclick","mouseenter","mouseleave","mousedown","mouseup","mouseover","contextmenu"],vs=["keydown","keyup","keypress"],gs=["GET","POST","PUT","PATCH","DELETE","JSONP"],hs=["stop","prevent","capture","self","once","passive"];var he=(d=>(d.Block="block",d.Node="node",d))(he||{});function hl(){const d=ce(),e=x(()=>d.project.value?.dependencies??[]),l=x(()=>d.project.value?.apis??[]);return{engine:d,dependencies:e,apis:l}}function De(d,e){const l=x(()=>Cl.getWidgets(t(d),t(e)).filter(n=>!n.invisible)),a=k();return{widgets:l,widgetsRef:a}}function bl(){const d=ce();return{span:x(()=>{const e=d.skeleton?.skeletonRef.leftWidth||400,l=Math.min(Math.floor((e-50)/120),24);return Math.floor(24/l)}),engine:d}}function bs(){const d=ce(),e=x(()=>d.project.value?.blocks??[]);return{engine:d,blocks:e}}const fs=(d=[])=>d.map(e=>e.name);function ys(){const d=ce(),{components:e,groups:l,componentMap:a}=d.assets,n=Ue({}),i=x(()=>{const f={};return l.value&&l.value.forEach(h=>{f[h.name]=h}),f}),s=x(()=>l.value?l.value.map(f=>({label:`${f.label} (${f.count})`,name:f.name,disabled:!f.children?.length})):[]),o=k(s.value[0]?.name),r=k(""),p=x(()=>i.value[o.value]);Xn(()=>{const f=s.value.reduce((h,g)=>(h[g.name]=fs(i.value[g.name].children),h),{});Object.assign(n,f)}),q(s,f=>{f.length&&!o.value&&(o.value=f[0].name)},{immediate:!0});const m=x(()=>{const f=r.value.toLowerCase();return!f||!e?[]:e.filter(h=>h.name.toLowerCase().includes(f)||h.label?.toLowerCase().includes(f))});return{components:e,groups:l,componentMap:a,groupMap:i,tabs:s,model:n,currentTab:o,currentGroup:p,searchKey:r,searchResult:m}}function oe(){const d=ce(),e=x(()=>d.current.value),l=x(()=>d.simulator.renderer?.context??null),a=x(()=>d.isEmptyCurrent.value);return{engine:d,current:e,isEmpty:a,context:l}}function ws(d,e,l,a){const n=ce();n.simulator.init(d,e,l,a);const i=x(()=>n.simulator.designer.value),s=x(()=>at("hover",i.value?.hover.value)),o=x(()=>at("dropping",i.value?.dropping.value)),r=x(()=>at("selected",i.value?.selected.value));return q(n.changed,()=>{i.value?.updateRect()}),{designer:i,dropping:o,hover:s,selected:r}}function ks(d,e=!0){const{top:l,height:a,width:n,left:i}=d||{};if(a>100&&n>200)return"inner";let s,o;return o=l>30?"top":"bottom",s=e||i<300&&n<300?"left":"right",[s,o].join("-")}function Ss(d){const{rect:e,type:l}=d,{left:a,width:n,top:i,height:s}=e,o={left:a,width:n,top:i,height:s};switch(l){case"left":o.left=0,o.width=0;break;case"right":o.left=o.left+o.width-4,o.width=0;break;case"bottom":o.top=o.top+o.height-4,o.height=0;break;case"top":o.height=0;break}return o}function at(d,e){if(!e)return null;const{left:l,top:a,width:n,height:i}=d==="dropping"?Ss(e):e.rect,s={left:`${l}px`,top:`${a}px`,width:`${n}px`,height:`${i}px`,visibility:n||i?"visible":"hidden"};return{...e,style:s,position:ks(e.rect,d!=="selected")}}function fe(){const d=ce(),e=x(()=>d.simulator.designer.value),l=x(()=>e.value?.selected.value),a=x(()=>$(l.value?.model));return{engine:d,designer:e,selected:l,isSelectBlock:a}}function xs(d,e){const l=k(""),{selected:a,isSelectBlock:n}=fe(),i=x(()=>a.value?.model.id),s=x(()=>{const r=vt(d),p=vt(e),m=[];if(!r)return m;const f=p?.__contextRefs[i.value||""],h=p===f||n.value?[]:Object.keys(f?.context||{}).filter(D=>!["context","ref"].includes(D)).map(D=>`this.context.${D}`);h.length&&m.push({title:"上下文",items:h});const g=r.inject.map(D=>`this.${D.name}`);g.length&&m.push({title:"注入",items:g});const v=r.props.map(D=>typeof D=="string"?`this.$props.${D}`:`this.$props.${D.name}`);v.length&&m.push({title:"属性",items:v});const w=Object.keys(r.state).map(D=>`this.state.${D}`);w.length&&m.push({title:"状态",items:w});const S=Object.keys(r.computed).map(D=>`this.${D}.value`);S.length&&m.push({title:"计算属性",items:S});const j=Object.keys(r.methods).map(D=>`this.${D}`);j.length&&m.push({title:"方法",items:j});const E=Object.keys(r.dataSources).map(D=>`this.${D}`);E.length&&m.push({title:"数据源",items:E});const P=Object.keys(p?.$refs||{}).map(D=>`this.$refs.${D}`);return P.length&&m.push({title:"refs",items:P}),m}),o=x(()=>{if(!l.value)return s.value;const r=l.value.toLowerCase(),p=[];return s.value.forEach(m=>{const f=m.items.filter(h=>h.toLowerCase().includes(r));f.length&&p.push({title:m.title,items:f})}),p});return{keyword:l,options:s,searchResult:o}}const He=[{name:"StringSetter",label:"文本"},{name:"ExpressionSetter",label:"表达式"}];function _s(d){const e=ce(),l=x(()=>{const r=d.value?.model||null;return $(r)?null:r}),a=k();q(l,async r=>{r?.from?a.value=await e.assets.getBlockMaterial(r.from)||void 0:a.value=void 0},{immediate:!0});const n=x(()=>l.value?[{name:"key",setters:He,value:l.value.getPropValue("key")},{name:"ref",setters:He,value:l.value.getPropValue("ref")},{name:"class",label:"class",setters:He,value:l.value.getPropValue("class")},{name:"children",label:"文本",title:"如设置组件文本，将清空子组件",setters:He,value:Array.isArray(l.value.children)?"":l.value.children}]:[]),i=x(()=>{if(!l.value)return[];const r=a.value||e.assets.componentMap.get(l.value.name);return r?(r.props||[]).map(p=>({...p,value:l.value?.getPropValue(p.name)??p.defaultValue})):[]}),s=r=>n.value.some(p=>p.name===r)||i.value.some(p=>p.name===r)||r==="style",o=x(()=>l.value?Object.keys(l.value.props).filter(r=>!s(r)).map(r=>({name:r,setters:"InputSetter",value:l.value?.getPropValue(r)})):[]);return{commonProps:n,componentProps:i,customProps:o,node:l,change:(r,p)=>{l.value&&(r==="children"?l.value.setChildren(p):l.value.setProp(r,p))},addCustom:r=>{r&&l.value?.setProp(r,"")},removeCustom:r=>{l.value?.removeProp(r)},isExist:s}}function ae(d,e="提示"){return ye.warning({title:e,message:d})}async function We(d){return await yt.confirm(d,"提示",{type:"warning"}).catch(()=>!1)}function me(d,e="success"){return Ye({message:d,type:e})}function se(d,e,l=!1){let a=!0;try{d.type==="JSExpression"?Ie(d,e,l,!0):Ba(d,e,l,!0)}catch(n){a=!1,ye.error({title:"代码错误",message:n.message})}return a}function fl(){const d=ce(),e=x(()=>d.simulator.designer.value),l=x(()=>d.current.value?d.history.value:null),a=x(()=>l.value?.items.length||0),n=()=>{e.value?.cleanHelper(),l.value?.forward()},i=()=>{l.value?.backward(),e.value?.cleanHelper()},s=p=>{e.value?.cleanHelper(),l.value?.load(p),me("已载入历史记录","success")},o=x(()=>a.value<=1?!0:(l.value?.index||-1)<=0),r=x(()=>a.value<=1?!0:(l.value?.index||-1)>=a.value-1);return{engine:d,history:l,total:a,forward:n,backward:i,load:s,forwardDisabled:o,backwardDisabled:r}}function Te(){const d=ce(),e=x(()=>d.project.value);return{engine:d,project:e}}function Cs(d){const e=ce(),l=x(()=>{const o=d.value?.model||null;return!o||$(o)?null:o}),a=k();q(l,async o=>{o?.from?a.value=await e.assets.getBlockMaterial(o.from)||void 0:a.value=void 0},{immediate:!0});const n=x(()=>{if($(l.value))return[];const o=l.value?.events||{};return ps.map(r=>({name:r,event:o[r]}))}),i=x(()=>{if($(l.value))return[];const o=l.value?.events||{};return vs.map(r=>({name:r,event:o[r]}))}),s=x(()=>{if(!l.value||$(l.value))return[];const o=l.value.events||{};return(a.value?.events||e.assets.componentMap.get(l.value.name)?.events||[]).map(r=>{const p=typeof r=="string"?r:r.name;return{name:p,event:o[p]}})});return{mouseEventList:n,keyboardEventList:i,componentEventList:s}}const Vs=(d,e)=>new ol({name:d,value:void 0,iterator:e}),As=(d="modelValue")=>new ol({name:"vModel",value:void 0,arg:d});function js(d){if(!d)return[];const{props:e=[],events:l=[]}=d;if(e.length&&l.length){const a=l.filter(n=>(typeof n=="string"?n:n.name).startsWith("update:")).map(n=>n=typeof n=="string"?n:n.name);return a.length?e.filter(n=>a.some(i=>i.includes(n.name))):[]}return[]}function Es(d){const e=ce(),l=x(()=>{const f=d.value?.model||null;return $(f)?null:f}),a=f=>x(()=>l.value&&(l.value.directives||[]).find(h=>h.name===f)||Vs(f)),n=()=>x(()=>{if(!l.value)return[];const f=e.assets.componentMap.get(l.value.name||"");return(f?js(f):[]).map(h=>(l.value?.directives||[]).find(g=>g.name==="vModel"&&g.arg==h.name)||As(h.name))}),i=a("vIf"),s=a("vShow"),o=a("vBind"),r=a("vFor"),p=n(),m={vIf:i,vShow:s,vBind:o,vFor:r};return{engine:e,node:l,vIf:i,vShow:s,vBind:o,vFor:r,vModels:p,onValueChange:(f,h)=>{const g=m[f];l.value&&(h?(g.value.value=h,l.value.setDirective(g.value)):(g.value.value=void 0,l.value.removeDirective(g.value)))},onForChange:(f,h)=>{if(l.value){if(f==="value"){h?(r.value.value=h,l.value.setDirective(r.value)):l.value.removeDirective(r.value);return}(f==="item"||f==="index")&&(r.value.iterator={...r.value.iterator,[f]:h||void 0},l.value.setDirective(r.value))}},onModelChange:(f,h)=>{if(!l.value)return;const g=parseInt(f),v=p.value[g];v&&(h?(v.value=h,l.value.setDirective(v)):(v.value=void 0,l.value.removeDirective(v)))}}}function Ds(){const{engine:d,project:e}=Te(),l=x(()=>e.value?.apis||[]);return{engine:d,project:e,apis:l}}const zs="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1711803009570'%20class='icon'%20viewBox='0%200%201280%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='1500'%20width='320'%20height='256'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cpath%20d='M557.85%201023l-122-35.4c-12.8-3.6-20-17-16.4-29.8L692.45%2017.4c3.6-12.8%2017-20%2029.8-16.4l122%2035.4c12.8%203.6%2020%2017%2016.4%2029.8L587.65%201006.6c-3.8%2012.8-17%2020.2-29.8%2016.4z%20m-228-224.4l87-92.8c9.2-9.8%208.6-25.4-1.6-34.4L234.05%20512l181.2-159.4c10.2-9%2011-24.6%201.6-34.4l-87-92.8c-9-9.6-24.2-10.2-34-1L7.65%20494.4c-10.2%209.4-10.2%2025.6%200%2035l288.2%20270.2c9.8%209.2%2025%208.8%2034-1z%20m654.4%201.2l288.2-270.2c10.2-9.4%2010.2-25.6%200-35L984.25%20224.2c-9.6-9-24.8-8.6-34%201L863.25%20318c-9.2%209.8-8.6%2025.4%201.6%2034.4L1046.05%20512l-181.2%20159.4c-10.2%209-11%2024.6-1.6%2034.4l87%2092.8c9%209.8%2024.2%2010.2%2034%201.2z'%20fill='%230157fe'%20p-id='1501'%3e%3c/path%3e%3c/svg%3e",Ps=["title","src"],Bs={key:1},Rs=C({name:"LogoWidget",inheritAttrs:!1,__name:"index",props:{icon:{},text:{default:"VTJ"},link:{}},setup(d){const{engine:e}=oe(),l=d,a=x(()=>l.icon||e.project.value?.config?.logo||zs),n=()=>{l.link&&(location.href=l.link)};return(i,s)=>(u(),V("div",{class:"v-logo-widget",onClick:n},[a.value?(u(),V("img",{key:0,title:l.text,class:"v-logo-widget__icon",src:a.value},null,8,Ps)):(u(),V("span",Bs,F(l.text),1))]))}}),Js={class:"v-empty-widget"},Fs=C({name:"EmptyWidget",__name:"index",setup(d){return(e,l)=>(u(),V("div",Js,"EmptyWidget"))}}),Ws={class:"v-switcher-widget"},Ts={key:1},Os=C({name:"SwitcherWidget",inheritAttrs:!1,__name:"index",emits:["click"],setup(d,{emit:e}){const l=e,{engine:a}=oe(),n=x(()=>a.project.value?.config?.title||a.project.value?.name),i=x(()=>a.project.value?.currentFile?.title),s=()=>{l("click",a.project.value)};return(o,r)=>(u(),V("div",Ws,[c(t(ue),{size:"small",round:"",onClick:s},{default:b(()=>[c(t(Zl),{class:"v-switcher-widget__back"}),_("span",null,F(n.value),1),i.value?(u(),y(t(bt),{key:0,direction:"vertical"})):A("",!0),i.value?(u(),V("span",Ts,F(i.value),1)):A("",!0)]),_:1})]))}}),Ns={class:"v-toolbar-widget"},Ls=C({name:"ToolbarWidget",inheritAttrs:!1,__name:"index",props:{preview:{type:Boolean}},setup(d,{expose:e}){const l=d,{forward:a,backward:n,forwardDisabled:i,backwardDisabled:s}=fl(),o=k("pc");return e({mode:o}),(r,p)=>(u(),V("div",Ns,[c(t(Tt),{size:"small",modelValue:o.value,"onUpdate:modelValue":p[0]||(p[0]=m=>o.value=m)},{default:b(()=>[c(t(Qe),{label:"pc",value:"pc"},{default:b(()=>[c(t(ea))]),_:1}),c(t(Qe),{label:"mobile",value:"mobile"},{default:b(()=>[c(t(ta))]),_:1}),c(t(Qe),{label:"pad",value:"pad"},{default:b(()=>[c(t(la))]),_:1})]),_:1},8,["modelValue"]),A("",!0),c(t(Al),null,{default:b(()=>[c(t(ue),{type:"default",size:"small",onClick:t(n),disabled:t(s)||!!l.preview},{default:b(()=>[c(t(aa))]),_:1},8,["onClick","disabled"]),c(t(ue),{type:"default",size:"small",onClick:t(a),disabled:t(i)||!!l.preview},{default:b(()=>[c(t(na))]),_:1},8,["onClick","disabled"])]),_:1})]))}}),Is={class:"v-actions-widget"},Ms=_("span",null,"发布",-1),Us=C({name:"ActionsWidget",inheritAttrs:!1,__name:"index",props:{coder:{type:Boolean,default:!0}},setup(d){const{engine:e,designer:l}=fe(),a=k(!1),n=()=>{e.current.value?(a.value?e.skeleton?.getWidget("Previewer")?.widgetRef.refresh():(l.value?.setSelected(null),e.simulator.refresh()),me("刷新完成","success")):me("请先打开文件","warning")},i=async()=>{e.current.value?(a.value&&(e.skeleton?.closePreview(),a.value=!1,await Yt(1e3)),l.value?.setSelected(e.current.value)):me("请先打开文件","warning")},s=()=>{if(e.project.value)if(e.current.value){if(a.value){e.skeleton?.closePreview(),a.value=!1;return}e.skeleton?.openPreview(""),a.value=!0}else me("请先打开文件","warning")},o=()=>{const p=e.project.value;p&&(p.currentFile?p.publish(p.currentFile):me("请先打开文件","warning"))},r=p=>{const m=e.project.value;m&&(p==="current"?o():m.publish())};return(p,m)=>(u(),V("div",Is,[A("",!0),A("",!0),c(t(ue),{onClick:s,type:a.value?"warning":"default",size:"small",title:"预览"},{default:b(()=>[c(t(sa))]),_:1},8,["type"]),c(t(ue),{onClick:n,type:"default",size:"small",title:"刷新"},{default:b(()=>[c(t(oa))]),_:1}),c(t(ue),{type:"default",size:"small",title:"页面设置",onClick:i},{default:b(()=>[c(t(Ht))]),_:1}),c(t(bt),{direction:"vertical"}),c(t(Nt),{"split-button":"",type:"primary",size:"small",onClick:o,onCommand:r},{dropdown:b(()=>[c(t(Ot),null,{default:b(()=>[c(t(st),{command:"current"},{default:b(()=>[H("发布页面")]),_:1}),c(t(st),{command:"project"},{default:b(()=>[H("整站发布")]),_:1})]),_:1})]),default:b(()=>[Ms]),_:1})]))}}),qs={class:"v-icon-setter"},Hs={class:"v-icon-setter__content"},Qs={class:"v-icon-setter__list"},yl=C({name:"IconSetter",__name:"icon",props:{modelValue:{default:""},size:{default:"small"}},emits:["change","update:modelValue"],setup(d,{emit:e}){const l=d,a=e,n=k(!1),i=k(l.modelValue),s=k(""),o=x(()=>rt[l.modelValue]||l.modelValue),r=x(()=>{const g=Object.entries(rt);return s.value?g.filter(v=>v[0].toLowerCase().includes(s.value)):g}),p=g=>{i.value=g},m=()=>{a("change",i.value),a("update:modelValue",i.value),n.value=!1},f=()=>{i.value="",a("change",""),a("update:modelValue",""),n.value=!1},h=()=>{n.value=!0};return(g,v)=>(u(),V("div",qs,[c(t(Se),{size:l.size,readonly:"",placeholder:"请选择图标","model-value":l.modelValue,"suffix-icon":t(vl),onFocus:h},{prepend:b(()=>[c(t(_e),{icon:o.value},null,8,["icon"])]),_:1},8,["size","model-value","suffix-icon"]),n.value?(u(),y(t(Fe),{key:0,title:"图标选择器",width:"1000px",height:"600px",cancel:"",submit:"",clear:"",modelValue:n.value,"onUpdate:modelValue":v[1]||(v[1]=w=>n.value=w),onSubmit:m},{extra:b(()=>[c(t(ue),{size:"default",type:"warning",onClick:f},{default:b(()=>[H(" 清除绑定 ")]),_:1})]),default:b(()=>[_("div",Hs,[c(t(Se),{size:l.size,"prefix-icon":t(gl),clearable:"",modelValue:s.value,"onUpdate:modelValue":v[0]||(v[0]=w=>s.value=w),placeholder:"请输入查询关键字"},null,8,["size","prefix-icon","modelValue"]),_("div",Qs,[(u(!0),V(R,null,W(r.value,w=>(u(),y(t(_e),{icon:w[1],onClick:S=>p(w[0]),class:U({"is-active":i.value===w[0]})},null,8,["icon","onClick","class"]))),256)),r.value.length===0?(u(),y(t(ne),{key:0})):A("",!0)])])]),_:1},8,["modelValue"])):A("",!0)]))}}),Gs=C({name:"PageForm",__name:"form",props:{item:{},parentId:{}},setup(d){const e=d,{project:l}=Te(),a=x(()=>e.item?"编辑页面":"新增页面"),n=()=>({dir:!1,name:"",title:"",icon:"",mask:!0,hidden:!1,raw:!1}),i=k(e.item||n()),s=[{label:"页面",value:!1},{label:"目录",value:!0}],o=p=>{i.value&&(i.value.name=el(p))},r=async p=>l.value?.existPageName(p.name,[p.id])?(ae("页面名称已存在，请更换"),!1):(e.item?l.value?.updatePage(p):l.value?.createPage(p,e.parentId),!0);return(p,m)=>(u(),y(t(Ce),{title:a.value,width:"800px",height:"500px","form-props":{tooltipMessage:!1},model:i.value,"submit-method":r},{default:b(()=>[c(t(z),{name:"dir",label:"类型",editor:"radio",options:s,props:{button:!0,size:"small"},disabled:!!e.item,required:""},null,8,["disabled"]),c(t(z),{name:"name",label:"名称",required:"",onChange:o,rules:{pattern:t(Ve),message:"名称格式不正确"}},null,8,["rules"]),c(t(z),{name:"title",label:"标题",required:""}),c(t(z),{name:"icon",label:"菜单图标",editor:"none"},{editor:b(()=>[c(yl,{modelValue:i.value.icon,"onUpdate:modelValue":m[0]||(m[0]=f=>i.value.icon=f),size:"default"},null,8,["modelValue"])]),_:1}),c(t(z),{visible:{dir:!1},name:"mask",label:"包含母版",editor:"switch"}),c(t(z),{name:"hidden",label:"隐藏菜单",editor:"switch"}),c(t(z),{visible:{dir:!1},disabled:!!e.item,inline:"",name:"raw",label:"源码模式",editor:"switch",tip:"页面是非低代码开发，不能在线编辑"},null,8,["disabled"])]),_:1},8,["title","model"]))}}),Ft=C({name:"VIcon",__name:"Icon",props:{icon:{},label:{},active:{type:Boolean,default:!1},open:{type:Boolean,default:!1}},emits:["click"],setup(d,{emit:e}){const l=d,a=e,n=x(()=>({"is-active":l.active,"is-open":l.open})),i=()=>{a("click")};return(s,o)=>(u(),y(t(Lt),{effect:"dark",placement:"right",content:s.label,"show-after":600},{default:b(()=>[_("div",{class:U(["v-apps-region__icon",n.value]),onClick:i},[(u(),y(dl(s.icon)))],2)]),_:1},8,["content"]))}}),M=C({name:"VPanel",__name:"panel",props:{title:{},subtitle:{},plus:{type:Boolean},back:{type:Boolean},edit:{type:Boolean},remove:{type:Boolean},save:{type:Boolean},header:{type:Boolean,default:!0},collapsable:{type:Boolean}},emits:["plus","back","remove","save","edit"],setup(d,{emit:e}){const l=d,a=e,n=k(!1),i=x(()=>({"is-collapsed":!!n.value})),s=()=>{a("plus")},o=()=>{a("edit")},r=()=>{a("back")},p=()=>{a("remove")},m=()=>{a("save")},f=x(()=>l.header?{content:l.title,subtitle:l.subtitle,icon:l.back?ss:void 0,onClickBack:l.back?r:void 0,onClick:l.collapsable?()=>{n.value=!n.value}:void 0}:null),h=g=>{n.value=g};return(g,v)=>(u(),y(t(Ze),{class:U(["v-panel",i.value]),border:!1,header:f.value,fit:""},Yn({actions:b(()=>[l.plus?(u(),y(t(be),{key:0,size:g.$attrs.size,mode:"icon",icon:t($t),background:"hover",title:"新增",onClick:s},null,8,["size","icon"])):A("",!0),l.edit?(u(),y(t(be),{key:1,size:g.$attrs.size,mode:"icon",icon:t(os),background:"hover",title:"编辑",onClick:o},null,8,["size","icon"])):A("",!0),l.remove?(u(),y(t(be),{key:2,size:g.$attrs.size,mode:"icon",icon:t(is),background:"hover",title:"清除",onClick:p},null,8,["size","icon"])):A("",!0),l.save?(u(),y(t(be),{key:3,size:g.$attrs.size,mode:"icon",icon:t(xa),background:"hover",title:"保存",onClick:m},null,8,["size","icon"])):A("",!0),l.collapsable?Ee((u(),y(t(be),{key:4,size:g.$attrs.size,mode:"icon",icon:t(vl),background:"hover",title:"展开",onClick:v[0]||(v[0]=w=>h(!1))},null,8,["size","icon"])),[[Pe,n.value]]):A("",!0),l.collapsable?Ee((u(),y(t(be),{key:5,size:g.$attrs.size,mode:"icon",icon:t(rs),background:"hover",title:"收起",onClick:v[1]||(v[1]=w=>h(!0))},null,8,["size","icon"])),[[Pe,!n.value]]):A("",!0),ke(g.$slots,"actions")]),default:b(()=>[ke(g.$slots,"default")]),_:2},[g.$slots.footer?{name:"footer",fn:b(()=>[ke(g.$slots,"footer")]),key:"0"}:void 0]),1032,["class","header"]))}}),Ks={class:"v-tabs__header"},Xs={key:0,class:"v-tabs__actions"},tt=C({__name:"tabs",props:{items:{default:()=>[]},menus:{},modelValue:{},stretch:{type:Boolean},checkable:{type:Boolean}},emits:["update:modelValue","command","remove","action-click"],setup(d,{emit:e}){const l=d,a=e,n=k((l.modelValue||l.items[0]?.name)??"");q(n,()=>{a("update:modelValue",n.value)}),q(()=>l.modelValue,r=>{n.value=r});const i=r=>{a("command",r)},s=r=>{a("remove",r)},o=r=>{a("action-click",r)};return(r,p)=>(u(),y(t(Ze),{class:"v-tabs",border:!1,fit:"",radius:!1},{header:b(()=>[_("div",Ks,[c(t(kt),{class:"v-tabs__tabs",items:l.items,type:"card",modelValue:n.value,"onUpdate:modelValue":p[0]||(p[0]=m=>n.value=m),onTabRemove:s,onActionClick:o,stretch:l.stretch},null,8,["items","modelValue","stretch"]),l.menus&&l.menus.length?(u(),V("div",Xs,[l.menus&&l.menus.length?(u(),y(t(be),{key:0,mode:"icon",size:"small",icon:t(_t),background:"hover",dropdown:{size:"small",placement:"bottom-end"},menus:l.menus,onCommand:i},{item:b(({item:m})=>[_("span",null,[l.checkable?(u(),y(t(Xt),{key:0,class:U({"v-tabs__checked":!0,"is-checked":m.checked})},null,8,["class"])):A("",!0),H(" "+F(m.label),1)])]),_:1},8,["icon","menus"])):A("",!0)])):A("",!0)])]),default:b(()=>[ke(r.$slots,"default")]),_:3}))}}),Ys={key:2,class:"v-item__index"},$s={class:"v-item__content"},Zs={key:3,class:"v-item__subtitle"},re=C({name:"VItem",__name:"item",props:{icon:{},index:{},tag:{},tagType:{},title:{},subtitle:{},actions:{default:()=>[]},background:{type:Boolean},border:{type:Boolean},switch:{type:Boolean},modelValue:{},active:{type:Boolean},hover:{type:Boolean},small:{type:Boolean}},emits:["click","action","update:modelValue","switch"],setup(d,{emit:e}){const l={add:{label:"创建",icon:$t},copy:{label:"复制",icon:al},edit:{label:"编辑",icon:Zt},remove:{label:"删除",icon:$e},lock:{label:"锁定",icon:Qt},unlock:{label:"解锁",icon:Nn},invisible:{label:"隐藏",icon:Gt},visible:{label:"显示",icon:Ln},home:{label:"主页",icon:In}},a=d,n=e,i=k(!!a.modelValue),s=x(()=>a.actions.map(m=>{const f=l[m];return{name:m,...f}})),o=x(()=>({"is-background":a.background,"is-border":a.border,"is-active":a.active,"is-hover":a.hover,"is-small":a.small})),r=()=>{n("click",a.modelValue)},p=async m=>{m==="remove"?await yt.confirm("确定删除吗？","提示",{type:"warning"}).catch(()=>!1)&&n("action",{name:m,modelValue:a.modelValue}):n("action",{name:m,modelValue:a.modelValue})};return q(i,m=>{n("update:modelValue",m),n("switch",m)}),q(()=>a.modelValue,m=>{i.value=!!m}),(m,f)=>(u(),y(t(I),{class:U(["v-item",o.value]),justify:"space-between",align:"center",onClick:r},{default:b(()=>[c(t(I),{class:"v-item__title",align:"center"},{default:b(()=>[ke(m.$slots,"default",{},()=>[m.icon?(u(),y(t(_e),{key:0,icon:m.icon},null,8,["icon"])):A("",!0),a.tag?(u(),y(t(Tl),{key:1,class:"v-item__tag",size:"small",type:a.tagType},{default:b(()=>[H(F(a.tag),1)]),_:1},8,["type"])):A("",!0),m.index!==void 0?(u(),V("span",Ys," # "+F(m.index),1)):A("",!0),_("span",$s,F(m.title),1),m.subtitle?(u(),V("span",Zs,F(m.subtitle),1)):A("",!0)])]),_:3}),c(t(I),{class:"v-item__actions",onClick:f[1]||(f[1]=Oe(()=>{},["stop"]))},{default:b(()=>[(u(!0),V(R,null,W(s.value,h=>(u(),y(t(be),{name:h.name,title:h.label,mode:"icon",size:"small",background:"none",type:"info",icon:h.icon,onClick:g=>p(h.name)},null,8,["name","title","icon","onClick"]))),256)),a.switch?(u(),y(t(Mt),{key:0,modelValue:i.value,"onUpdate:modelValue":f[0]||(f[0]=h=>i.value=h),class:"v-item__switch",size:"small"},null,8,["modelValue"])):A("",!0),ke(m.$slots,"status")]),_:3})]),_:3},8,["class"]))}}),eo=["draggable"],to={class:"v-box__name"},lo={class:"v-box__label"},ht=C({name:"VBox",__name:"box",props:{name:{},title:{},editable:{type:Boolean},active:{type:Boolean},draggable:{type:Boolean}},emits:["edit","remove","dragstart","dragend"],setup(d,{emit:e}){const l=d,a=e,n=()=>{a("edit")},i=async()=>{await yt.confirm("确认删除？","提示",{type:"warning"}).catch(()=>!1)&&a("remove")},s=x(()=>({"is-active":l.active,"is-draggable":l.draggable})),o=()=>{a("dragstart",l)},r=()=>{a("dragend",l)};return(p,m)=>(u(),V("div",{class:U(["v-box",s.value]),draggable:p.draggable,onDragstart:o,onDragend:r},[c(t(I),{direction:"column",justify:"center",align:"center"},{default:b(()=>[_("span",to,F(l.name),1),_("span",lo,F(l.title),1)]),_:1}),l.editable?(u(),y(t(I),{key:0,class:"v-box__footer",justify:"flex-end",align:"center"},{default:b(()=>[c(t(_e),{icon:t(Zt),onClick:n},null,8,["icon"]),c(t(_e),{icon:t($e),onClick:i},null,8,["icon"])]),_:1})):A("",!0)],42,eo))}}),ao={class:"v-context-viewer"},no=C({__name:"viewer",props:{context:{}},emits:["pick","copy"],setup(d,{emit:e}){const l=d,a=e,n=["$provider","$apis","$components","context"],i=m=>{const f=m.value,h=lt(f);return h==="Object"||h==="Module"?Object.keys(f||{}).length===0:h==="Array"?f.length===0:!0},s=(m,f="this")=>typeof m=="object"?Array.isArray(m)?m.map((h,g)=>{const v=`[${g}]`;return{label:v,value:h,type:lt(h),path:`${f}${v}`}}):Object.entries(m).map(([h,g])=>({label:h,value:g,type:lt(g),path:`${f}.${h}`})).filter(h=>!h.label.startsWith("__")&&!n.includes(h.label)):[],o=(m,f)=>{if(m.level===0)f(s(l.context));else{const h=es(m.data.value);f(s(h,m.data.path))}},r=m=>{a("copy",m.path)},p=m=>{a("pick",m.path)};return(m,f)=>(u(),V("div",ao,[m.context?(u(),y(t(ft),{key:0,lazy:"",load:o,"expand-on-click-node":!1,props:{isLeaf:i}},{default:b(({data:h})=>[c(re,{title:h.label,clickable:"",onClick:g=>p(h),background:"",actions:["copy"],onAction:g=>r(h),grow:"",small:""},null,8,["title","onClick","onAction"])]),_:1},8,["props"])):A("",!0)]))}}),Ct=C({__name:"binder",props:{title:{},context:{},block:{},model:{},rules:{},modelValue:{type:Boolean},submitMethod:{type:Function},unbindEnabled:{type:Boolean}},emits:["unbind","submit","cancel","pick","update:modelValue","close"],setup(d,{emit:e}){const l=d,a=e,{searchResult:n,keyword:i}=xs(l.block,l.context),{copy:s}=ts({}),o=[{name:"normal",label:"常用"},{name:"viewer",label:"高级"}],r=k("normal"),p=k(),m=async j=>{a("submit",j),l.submitMethod?await l.submitMethod(j)&&f():f()},f=()=>{a("update:modelValue",!1),a("close")},h=()=>{a("unbind")},g=()=>{f()},v=async()=>{p.value?.submit()},w=j=>{a("pick",j)},S=j=>{s(j),Ye.success({message:"已经复制到粘贴板"})};return(j,E)=>(u(),y(t(Fe),{"model-value":l.modelValue,class:"v-binder",title:j.title,width:"1000px",height:"600px","body-padding":!1,maximizable:!1,minimizable:!1,onClose:f},{default:b(()=>[c(t(I),{fit:"",direction:"row",overflow:"hidden"},{default:b(()=>[c(t(I),{width:"30%",height:"100%"},{default:b(()=>[c(tt,{class:"v-binder__tabs",items:o,modelValue:r.value,"onUpdate:modelValue":E[1]||(E[1]=P=>r.value=P)},{default:b(()=>[c(t(I),{class:"v-binder__tab-content",fit:"",padding:"",flex:!1},{default:b(()=>[Ee(_("div",null,[c(t(Se),{modelValue:t(i),"onUpdate:modelValue":E[0]||(E[0]=P=>pt(i)?i.value=P:null),size:"small",clearable:"","prefix-icon":t(gl),placeholder:"筛选可用项"},null,8,["modelValue","prefix-icon"]),(u(!0),V(R,null,W(t(n),P=>(u(),V("div",null,[c(t(bt),{"border-style":"dotted"},{default:b(()=>[H(F(P.title),1)]),_:2},1024),(u(!0),V(R,null,W(P.items,D=>(u(),y(re,{title:D,background:"",actions:["copy"],small:"",onClick:ie=>w(D),onAction:ie=>S(D)},null,8,["title","onClick","onAction"]))),256))]))),256)),t(n).length?A("",!0):(u(),y(t(ne),{key:0}))],512),[[Pe,r.value==="normal"]]),Ee(c(no,{context:l.context,onCopy:S,onPick:w},null,8,["context"]),[[Pe,r.value==="viewer"]])]),_:1})]),_:1},8,["modelValue"])]),_:1}),c(t(Ze),{grow:"",header:null,border:!1},{footer:b(()=>[c(t(I),{justify:"space-between"},{default:b(()=>[c(t(I),null,{default:b(()=>[j.unbindEnabled?(u(),y(t(ue),{key:0,type:"warning",size:"default",onClick:h},{default:b(()=>[H(" 移除绑定 ")]),_:1})):A("",!0)]),_:1}),c(t(I),null,{default:b(()=>[c(t(ue),{type:"default",size:"default",onClick:g},{default:b(()=>[H(" 取消 ")]),_:1}),c(t(ue),{type:"primary",size:"default",onClick:v},{default:b(()=>[H(" 确定 ")]),_:1})]),_:1})]),_:1})]),default:b(()=>[c(t(St),{ref_key:"formRef",ref:p,class:"v-binder__form",footer:!1,"label-position":"top","tooltip-message":!1,model:l.model,rules:l.rules,"submit-method":m},{default:b(()=>[ke(j.$slots,"default")]),_:3},8,["model","rules"])]),_:3})]),_:3})]),_:3},8,["model-value","title"]))}}),so={class:"v-slots-picker__sn"},oo=C({__name:"slots",props:{slots:{default:()=>[]}},emits:["submit","update:modelValue"],setup(d,{emit:e}){const l=d,a=e,n=k(),i=x(()=>`${50*Math.ceil(l.slots.length/4)+180}px`),s=r=>{n.value=r},o=()=>{n.value?(a("submit",n.value),a("update:modelValue",!1)):ae("请选择插槽")};return(r,p)=>(u(),y(t(Fe),de({class:"v-slots-picker",title:"选择插槽",width:"600px",height:i.value,submit:"",cancel:"",onSubmit:o},r.$attrs),{default:b(()=>[c(t(qt),{title:"该组件支持多个插槽，请选择放置到其中一个",type:"warning",closable:!1}),c(t(I),{class:"v-slots-picker__content",justify:"space-around",alignContent:"flex-start",gap:"",wrap:"wrap"},{default:b(()=>[(u(!0),V(R,null,W(l.slots,(m,f)=>(u(),y(t(I),{class:U(["v-slots-picker__item",{"is-active":m.name===n.value?.name}]),grow:"",flex:!1,onClick:h=>s(m)},{default:b(()=>[_("span",so,"#"+F(f+1),1),H(" "+F(m.name),1)]),_:2},1032,["class","onClick"]))),256))]),_:1})]),_:1},16,["height"]))}}),wl=C({name:"Viewport",__name:"viewport",props:{mode:{default:"pc"},width:{},height:{}},setup(d){const e=d,l=x(()=>[`is-${e.mode}`]),a=x(()=>{if(e.mode==="pc")return 1;const i=e.mode==="mobile"?Rt:Jt,{width:s,height:o}=i,r=s>0?(e.width||0)/s:1,p=o>0?(e.height||0)/o:1;return Math.min(r,p)}),n=x(()=>{if(e.mode==="pc")return{};const i=e.mode==="mobile"?Rt:Jt,{width:s,height:o}=i;return{width:`${s}px`,height:`${o}px`,left:"50%",top:"50%",transform:`translate(-50%, -50%) scale(${a.value})`}});return(i,s)=>(u(),V("div",{class:U(["v-viewport",l.value]),style:Ge(n.value)},[ke(i.$slots,"default")],6))}}),io=C({name:"PagesWidget",__name:"index",setup(d){const{project:e,engine:l}=Te(),a=x(()=>e.value?.pages||[]),{current:n}=oe(),i=k(!1),s=k(),o=k(),r=()=>{o.value=void 0,s.value=void 0,i.value=!0},p=async g=>{const{name:v,modelValue:w}=g,{data:S,node:j}=w;if(v==="add"&&(s.value=void 0,o.value=S.id,i.value=!0),v==="edit"&&(s.value=et(S),o.value=void 0,i.value=!0),v==="remove"){if(S.dir){const E=e.value?.getPage(S.id);if(E&&E.children?.length){ae("请先删除子页面");return}}e.value?.removePage(S.id)}if(v==="copy"){const E=j.parent?.data.id;e.value?.clonePage(S,E)}v==="home"&&(e.value?.setHomepage(S.id),me("设置主页成功","success"))},m=async g=>{g.raw&&me("这是源码模式页面，不能低代码设计","warning"),g.dir||g.raw?l.project.value?.deactivate():l.project.value?.active(g)},f=(g,v,w)=>w==="inner"?!!v.data.dir:!0,h=()=>{e.value?.update({pages:vt(a)})};return(g,v)=>(u(),y(t(M),{class:"v-pages-widget",title:"页面管理",plus:"",subtitle:"(共 0 条)",onPlus:r},{default:b(()=>[c(t(ft),{data:a.value,"node-key":"id","default-expand-all":"",draggable:"","allow-drop":f,onNodeDrop:h},{default:b(({data:w,node:S})=>[c(t(re),{class:"v-pages-widget__item",icon:t(rt)[w.icon],title:w.title,subtitle:w.name,"model-value":{data:w,node:S},actions:w.dir?["add","edit","remove"]:w.raw?["home","edit","remove"]:["home","copy","edit","remove"],onAction:p,onClick:j=>m(w),active:t(n)?.id===w.id,tag:t(e)?.homepage===w.id?"主页":void 0,"tag-type":"success",grow:"",small:"",background:"",hover:""},null,8,["icon","title","subtitle","model-value","actions","onClick","active","tag"])]),_:1},8,["data"]),i.value?(u(),y(Gs,{key:0,modelValue:i.value,"onUpdate:modelValue":v[0]||(v[0]=w=>i.value=w),item:s.value,"parent-id":o.value},null,8,["modelValue","item","parent-id"])):A("",!0)]),_:1}))}}),ro=C({name:"BlocksWidget",__name:"index",setup(d){const{span:e}=bl(),{blocks:l,engine:a}=bs(),n=k(void 0),{current:i}=oe(),s=k(!1),o=x(()=>n.value?.id?"编辑":"新增"),r=x(()=>`(共 ${l.value.length} 个)`),p=()=>({name:"",title:"",type:"block"}),m=async E=>{const P=E,D=a.project.value;if(!D)return!1;if(E.id)if(!D.existBlockName(P.name,[P.id]))D.updateBlock(P);else return ae(`名称【${P.name}】已经存在，请更换名称`),!1;else if(!D.existBlockName(P.name))D.createBlock(P);else return ae(`名称【${P.name}】已经存在，请更换名称`),!1;return!0},f=()=>{n.value=p(),s.value=!0},h=E=>{n.value=et(E),s.value=!0},g=E=>{a.project.value?.removeBlock(E.id)},v=E=>{n.value&&(n.value.name=el(E))},w=async E=>{a.project.value?.active(E)},S=async E=>{const P={type:"Schema",id:E.id},D=await a.assets.getBlockMaterial(P),ie=a.skeleton?.getWidget("Designer")?.widgetRef?.designer;ie&&D&&ie.setDragging(D)},j=()=>{const E=a.skeleton?.getWidget("Designer")?.widgetRef?.designer;E&&E.setDragging(null)};return(E,P)=>(u(),y(t(M),{class:"v-blocks-widget",title:"区块管理",subtitle:r.value,plus:"",onPlus:f},{default:b(()=>[c(t(ot),{wrap:"wrap",gutter:5},{default:b(()=>[(u(!0),V(R,null,W(t(l),D=>(u(),y(t(it),{key:D.id,span:t(e)},{default:b(()=>[c(t(ht),{name:D.name,title:D.title,active:t(i)?.id===D.id,editable:"",onEdit:ie=>h(D),onRemove:ie=>g(D),onClick:ie=>w(D),draggable:t(i)?.id!==D.id,onDragstart:ie=>S(D),onDragend:j},null,8,["name","title","active","onEdit","onRemove","onClick","draggable","onDragstart"])]),_:2},1032,["span"]))),128))]),_:1}),t(l).length?A("",!0):(u(),y(t(ne),{key:0})),c(t(Ce),{modelValue:s.value,"onUpdate:modelValue":P[0]||(P[0]=D=>s.value=D),title:o.value,model:n.value,width:"600px",height:"250px","form-props":{tooltipMessage:!1},"submit-method":m},{default:b(()=>[c(t(z),{name:"name",label:"名称",required:"",tip:"名称为英文驼峰格式",rules:{message:"名称格式错误",pattern:t(Ve)},onChange:v},null,8,["rules"]),c(t(z),{name:"title",label:"标题",required:""})]),_:1},8,["modelValue","title","model"])]),_:1},8,["subtitle"]))}}),uo={class:"v-components-widget__search"},co={key:0,class:"v-components-widget__result"},mo={class:"v-components-widget__list"},po=C({name:"ComponentsWidget",__name:"index",setup(d){const{span:e,engine:l}=bl(),{tabs:a,currentTab:n,currentGroup:i,model:s,searchKey:o,searchResult:r}=ys(),p=f=>{const h=l.skeleton?.getWidget("Designer")?.widgetRef?.designer;h&&h.setDragging(f)},m=()=>{const f=l.skeleton?.getWidget("Designer")?.widgetRef?.designer;f&&f.setDragging(null)};return(f,h)=>(u(),y(t(M),{class:"v-components-widget",title:"组件库",body:{flex:!0,direction:"column"}},{default:b(()=>[_("div",uo,[c(t(Se),{modelValue:t(o),"onUpdate:modelValue":h[0]||(h[0]=g=>pt(o)?o.value=g:null),placeholder:"搜索组件",clearable:"",size:"small"},{prefix:b(()=>[c(t(ia))]),_:1},8,["modelValue"])]),t(o)?(u(),V("div",co,[c(t(ot),{wrap:"wrap",gutter:5},{default:b(()=>[(u(!0),V(R,null,W(t(r),g=>(u(),y(t(it),{span:t(e),key:g.name},{default:b(()=>[c(t(ht),{name:g.name,title:g.label||g.name,draggable:"",onDragstart:v=>p(g),onDragend:m},null,8,["name","title","onDragstart"])]),_:2},1032,["span"]))),128))]),_:1}),t(r).length?A("",!0):(u(),y(t(ne),{key:0}))])):(u(),y(t(kt),{key:1,items:t(a),modelValue:t(n),"onUpdate:modelValue":h[2]||(h[2]=g=>pt(n)?n.value=g:null)},{default:b(()=>[_("div",mo,[t(i)?(u(),y(t(jl),{key:0,modelValue:t(s)[t(n)],"onUpdate:modelValue":h[1]||(h[1]=g=>t(s)[t(n)]=g)},{default:b(()=>[(u(!0),V(R,null,W(t(i).children,g=>(u(),y(t(El),{key:g.name,name:g.name,title:`${g.label} (${g.count})`},{default:b(()=>[g.components?(u(),y(t(ot),{key:0,wrap:"wrap",gutter:5},{default:b(()=>[(u(!0),V(R,null,W(g.components,v=>(u(),y(t(it),{span:t(e),key:v.name},{default:b(()=>[c(t(ht),{name:v.name,title:v.label||v.name,draggable:"",onDragstart:w=>p(v),onDragend:m},null,8,["name","title","onDragstart"])]),_:2},1032,["span"]))),128))]),_:2},1024)):A("",!0)]),_:2},1032,["name","title"]))),128))]),_:1},8,["modelValue"])):A("",!0)])]),_:1},8,["items","modelValue"]))]),_:1}))}}),vo=C({name:"OutlineWidget",__name:"index",setup(d){const{engine:e,designer:l,selected:a}=fe(),{current:n}=oe(),i=k([]),s=(J,L)=>{if(L==="slot")return[];if($(J))return J.locked?["unlock"]:["lock"];const B=J.parent;return B&&(B.locked||B.invisible)?[]:n.value?.locked?[]:J.locked?["unlock"]:J.invisible?["visible"]:["lock","invisible","copy","remove"]},o=(J,L)=>{const B={};if(!J.some(le=>le.slot))return r(J);for(const le of J){const O=le.slot?.name||"default";B[O]||(B[O]=[]),B[O].push(le)}const Y=[];for(const[le,O]of Object.entries(B))Y.push({id:`${L.id}-${le}`,label:`#${le}`,type:"slot",model:L,disabled:!0,children:r(O)});return Y},r=J=>{const L=[];return J.forEach(B=>{const Y={id:B.id,label:B.name,type:B.id,model:B};Array.isArray(B.children)&&(Y.children=o(B.children,B)),L.push(Y)}),L},p=()=>{if(!n.value)return[];const{id:J,name:L,nodes:B}=n.value;return[{id:J,label:L,type:J,model:n.value,children:r(B)}]},m=async()=>{i.value=p(),a.value?.model&&(await we(),l.value?.setSelected(a.value.model))},f=x(()=>a.value?.model.id),h=J=>{const L=J.data;if(L.type==="slot"||$(L.model)||L.model.locked||L.model.name==="template")return!1;const B=e.assets.componentMap.get(L.model.name);return B?(l.value?.setDragging(B),!0):!1},g=async(J,L,B)=>{const Y=L.data,le={prev:"top",next:"bottom",inner:"inner"}[B];let O=!1;if($(Y.model))O=B==="inner",l.value?.setDropping(O?Y.model:null,"inner");else{const G=Y.model;O=!!await l.value?.allowDrop(G,le),l.value?.setDropping(O?G:null,"inner")}return O},v=J=>{const L=J?.model;if(!L||L.invisible||J.type==="slot"){l.value?.setSelected(null),l.value?.setHover(null);return}l.value?.setSelected(L),l.value?.setHover(null)},w=async(J,L,B)=>{const Y=J.data,le=L.data;if($(le.model)){l.value?.setDropping(null),l.value?.setDragging(null);return}const O=le.model,G={before:"left",after:"right"}[B]||"inner";if(!await l.value?.allowDrop(O,G)){l.value?.setDropping(null),m(),Ye.warning({message:`${Y.model.name}不能放置到该位置`}),l.value?.setDragging(null);return}const T=await l.value?.getDropSlot(B==="inner"?O:O.parent);if(T!==null){const Be=Y.model;Be.slot=T,n.value?.move(Be,O,G)}else m();l.value?.setDropping(null),l.value?.setDragging(null),e.simulator.refresh()},S=J=>{if(J.type==="slot"){l.value?.setHover(null);return}$(J.model)?l.value?.setHover(J.model):(l.value?.setHover(J.model),J.model.invisible&&l.value?.setHover(null),J.model.name==="slot"&&l.value?.setHover(null))},j=()=>{l.value?.setHover(null)},E=J=>{const L=J.data;L.dragging=!0;const B=e.assets.componentMap.get(L.model.name);B&&l.value?.setDragging(B)},P=async J=>{const L=J.data;L.dragging=!1},D=(J,L)=>{J&&((J.id===L.id||!$(J)&&L.isChild(J))&&l.value?.setSelected(null),l.value?.setHover(null))},ie=J=>{const{name:L,modelValue:B}=J,Y=a.value?.model;switch(L){case"lock":D(Y,B),B.lock();break;case"unlock":D(Y,B),B.unlock();break;case"invisible":D(Y,B),B.setVisible(!1);break;case"visible":B.setVisible(!0);break;case"copy":const le=n.value?.cloneNode(B);le&&l.value?.setSelected(le);break;case"remove":D(Y,B),n.value?.removeNode(B);break}};return q(e.changed,m,{immediate:!0}),(J,L)=>(u(),y(t(M),{class:"v-outline-widget",title:"大纲树"},{default:b(()=>[(u(),y(t(ft),{key:t(e).changed.value,data:i.value,"node-key":"id","default-expand-all":"",draggable:"","empty-text":"请新建或打开文件","current-node-key":f.value,"highlight-current":!0,"expand-on-click-node":!1,"allow-drop":g,"allow-drag":h,onCurrentChange:v,onNodeDrop:w,onNodeDragStart:E,onNodeDragEnd:P},{default:b(({data:B,node:Y})=>[c(t(re),{class:U(["v-outline-widget__item",{"is-locked":B.model.locked,"is-invisible":B.model.invisible,"is-dragging":B.dragging,"is-slot":B.type==="slot"}]),active:!B.model.invisible&&Y.isCurrent&&B.type!=="slot",grow:"",small:"",background:"",hover:"","model-value":B.model,icon:B.model.locked?t(Qt):B.model.invisible?t(Gt):void 0,title:B.label,subtitle:B.type,actions:s(B.model,B.type),onAction:ie,onMouseenter:le=>S(B),onMouseleave:j},null,8,["class","active","model-value","icon","title","subtitle","actions","onMouseenter"])]),_:1},8,["data","current-node-key"]))]),_:1}))}}),go=C({name:"HistoryWidget",__name:"index",setup(d){const{history:e,load:l,total:a}=fl(),n=x(()=>`(共 ${a.value} 条)`),i=o=>{o.name==="remove"&&e.value?.remove(o.modelValue.id)},s=async()=>{await We("确定要清空历史记录吗？")&&e.value?.clear()};return(o,r)=>(u(),y(t(M),{class:"v-history-widget",title:"历史记录",subtitle:n.value,remove:!!t(a),onRemove:s},{default:b(()=>[t(a)===0?(u(),y(t(ne),{key:0,"image-size":50})):A("",!0),t(e)?(u(!0),V(R,{key:1},W(t(e).items,(p,m)=>(u(),y(t(re),{index:m+1,title:p.label,"model-value":p,active:m==t(e).index,small:"",background:"",actions:["remove"],onAction:i,onClick:f=>t(l)(p.id)},null,8,["index","title","model-value","active","onClick"]))),256)):A("",!0)]),_:1},8,["subtitle","remove"]))}}),ho=C({__name:"base-info",setup(d){const e=gs.map(l=>({label:l,value:l.toLowerCase()}));return(l,a)=>(u(),V("div",null,[c(t(z),{name:"method",label:"请求类型",required:"",editor:"radio",options:t(e)},null,8,["options"]),c(t(z),{name:"name",label:"接口名称",required:"",rules:{pattern:t(Ve),message:"名称格式不正确"}},null,8,["rules"]),c(t(z),{name:"label",label:"备注说明",required:""}),c(t(z),{name:"url",label:"接口URL",required:""})]))}}),te=$n({loader:()=>Gn(()=>import("./Editor-BKlikwSl-CuqorJtj.js"),__vite__mapDeps([0,1,2,3]),import.meta.url),loadingComponent:C({render(){return Je("div","正在拼命加载...")}}),errorComponent:C({render(){return Je("div","组件加载失败！")}})}),bo=C({__name:"request-settings",setup(d){const e=[{label:"表单",value:"form"},{label:"JSON",value:"json"},{label:"文件",value:"data"}],l=xt("currentModel",null);return(a,n)=>(u(),V("div",null,[c(t(I),{justify:"space-between"},{default:b(()=>[c(t(z),{name:"settings.loading",size:"small",label:"加载提示",editor:"switch"}),c(t(z),{size:"small",name:"settings.failMessage",label:"失败提示",editor:"switch"}),c(t(z),{size:"small",name:"settings.validSuccess",label:"校验成功",editor:"switch"}),c(t(z),{size:"small",name:"settings.originResponse",label:"原始响应",editor:"switch"}),c(t(z),{size:"small",name:"settings.injectHeaders",label:"注入请求头",editor:"switch"})]),_:1}),c(t(z),{size:"small",name:"settings.type",label:"发送数据类型",editor:"radio",options:e,props:{button:!0}}),c(t(z),{size:"small",name:"headers.value",label:"请求头配置",tip:"支持 JSExpression 或 JSFunction"},{editor:b(()=>[c(t(te),{dark:"",height:"260px",modelValue:t(l).headers.value,"onUpdate:modelValue":n[0]||(n[0]=i=>t(l).headers.value=i)},null,8,["modelValue"])]),_:1})]))}}),fo=C({__name:"jsonp-options",setup(d){return(e,l)=>(u(),V("div",null,[c(t(z),{name:"jsonpOptions.jsonpCallback",size:"small",label:"jsonpCallback"}),c(t(z),{name:"jsonpOptions.jsonpCallbackFunction",size:"small",label:"jsonpCallbackFunction"}),c(t(z),{name:"jsonpOptions.timeout",size:"small",label:"timeout",editor:"number"}),c(t(z),{name:"jsonpOptions.crossorigin",size:"small",label:"crossorigin",editor:"switch"})]))}}),yo=_("span",null,"模拟数据模板",-1),wo=C({__name:"mock-template",setup(d){const e=xt("currentModel",null),{project:l}=Te(),a=x(()=>l.value?.config||{}),n=()=>{window.open("https://vtj.pro/help/mock.html")};return(i,s)=>(u(),V("div",null,[a.value.mock?A("",!0):(u(),y(t(qt),{key:0,type:"warning",title:"需要在项目配置中开启模拟数据",closable:!1,style:{"margin-bottom":"20px"}})),c(t(z),{size:"small",name:"mock",label:"开启模拟数据",disabled:!a.value.mock,editor:"switch"},null,8,["disabled"]),c(t(I),{justify:"space-between"},{default:b(()=>[yo,c(t(be),{icon:t(ll),mode:"text",label:"帮助",onClick:n},null,8,["icon"])]),_:1}),c(t(z),{size:"small",name:"mockTemplate.value",label:" "},{editor:b(()=>[c(t(te),{dark:"",height:a.value.mock?"330px":"280px",lang:"typescript",disabled:!a.value.mock,readonly:!a.value.mock,modelValue:t(e).mockTemplate.value,"onUpdate:modelValue":s[0]||(s[0]=o=>t(e).mockTemplate.value=o)},null,8,["height","disabled","readonly","modelValue"])]),_:1})]))}}),ko={key:0},So=C({__name:"form",props:{model:{},project:{}},setup(d){const e=d,l=x(()=>e.model?"编辑API":"新增API"),a=k("base"),n=k(),i=k(),s=k(e.model||{}),o=k(!1),r=k(""),p=[{label:"基础信息",value:"base"},{label:"请求配置",value:"settings"},{label:"模拟数据",value:"mock"}];Zn("currentModel",s);const m=x(()=>s.value?.method==="jsonp");q(()=>e.model,w=>{s.value=Object.assign({},w||{}),a.value="base"},{immediate:!0}),q(a,async()=>{i.value?.formRef.validate(async w=>{w||(await we(),a.value="base")})});const f=()=>{n.value?.cancel()},h=()=>{i.value?.submit()},g=async w=>e.project?.existApiName(s.value.name,e.model?[s.value.id]:[])?(ae(`API名称 [ ${s.value.name} ] 已存在`),!1):s.value.headers&&!se(s.value.headers,window)||s.value.mockTemplate&&!se(s.value.mockTemplate,window)?!1:(e.project?.setApi(s.value),n.value?.close(),!0),v=()=>{if(s.value.mockTemplate){const w=Ie(s.value.mockTemplate,{},!0),{url:S,method:j}=s.value,E=as.mock(w({url:S,type:j}));r.value=JSON.stringify(E,null,2),o.value=!0}};return(w,S)=>(u(),y(t(Fe),{ref_key:"dialogRef",ref:n,title:l.value,width:"1000px",height:"600px"},{default:b(()=>[c(t(I),{fit:""},{default:b(()=>[c(t(I),{width:"100px",shrink:!1},{default:b(()=>[c(t(kt),{modelValue:a.value,"onUpdate:modelValue":S[0]||(S[0]=j=>a.value=j),items:p,"tab-position":"left",border:"",fit:""},null,8,["modelValue"])]),_:1}),c(t(Ze),{header:null,border:!1,overflow:"auto",grow:"",shrink:!0,fit:""},{footer:b(()=>[c(t(I),{justify:"space-between"},{default:b(()=>[_("div",null,[a.value==="mock"?(u(),y(t(ue),{key:0,disabled:!e.project?.config?.mock,type:"warning",onClick:v},{default:b(()=>[H(" 预览 ")]),_:1},8,["disabled"])):A("",!0)]),_("div",null,[c(t(ue),{onClick:f},{default:b(()=>[H("取消")]),_:1}),c(t(ue),{type:"primary",onClick:h},{default:b(()=>[H("保存")]),_:1})])]),_:1})]),default:b(()=>[c(t(St),{ref_key:"formRef",ref:i,footer:!1,labelPosition:"top",tooltipMessage:!1,model:s.value,submitMethod:g},{default:b(()=>[Ee(c(ho,null,null,512),[[Pe,a.value==="base"]]),a.value==="settings"?(u(),V("div",ko,[m.value?(u(),y(fo,{key:0})):(u(),y(bo,{key:1}))])):A("",!0),a.value==="mock"?(u(),y(wo,{key:1})):A("",!0)]),_:1},8,["model"])]),_:1})]),_:1}),o.value?(u(),y(t(Ut),{key:0,class:"v-drawer",modelValue:o.value,"onUpdate:modelValue":S[1]||(S[1]=j=>o.value=j),title:"模拟数据结果",direction:"btt","append-to-body":"",size:"80%"},{default:b(()=>[c(t(te),{"model-value":r.value,border:"",dark:"",height:"100%",lang:"json"},null,8,["model-value"])]),_:1},8,["modelValue"])):A("",!0)]),_:1},8,["title"]))}}),xo=C({name:"ApisWidget",__name:"index",setup(d){const e=k(!1),l=k(null),a=k(!1),n=x(()=>i.value?.apis||[]),{project:i}=Te(),s=()=>({id:"",method:"get",name:"",label:"",url:"",settings:{loading:!0,failMessage:!0,validSuccess:!0,originResponse:!1,injectHeaders:!1,type:"form"},headers:{type:"JSExpression",value:"({})"},jsonpOptions:{},mock:!1,mockTemplate:{type:"JSFunction",value:`(req) => {
  return {
    code: 0,
    data: null
  }
}`}}),o=()=>{e.value=!0,a.value=!1,l.value=s()},r={get:"success",post:"primary",put:"warning",delete:"danger",patch:"warning",jsonp:"info"},p=f=>{f.name==="edit"&&m(f.modelValue),f.name==="remove"&&i.value?.removeApi(f.modelValue.name)},m=f=>{a.value=!0,l.value=et(f),e.value=!0};return(f,h)=>(u(),y(t(M),{class:"v-apis-widget",title:"API管理",plus:"",onPlus:o},{default:b(()=>[(u(!0),V(R,null,W(n.value,g=>(u(),y(t(re),{key:g.id,small:"",title:g.name,subtitle:g.label,"model-value":g,tag:g.method?.toUpperCase(),"tag-type":r[g.method||"get"],background:"",actions:["edit","remove"],onClick:v=>m(g),onAction:p},null,8,["title","subtitle","model-value","tag","tag-type","onClick"]))),128)),n.value.length===0?(u(),y(t(ne),{key:0,"image-size":50})):A("",!0),c(So,{modelValue:e.value,"onUpdate:modelValue":h[0]||(h[0]=g=>e.value=g),model:l.value,project:t(i)},null,8,["modelValue","model","project"])]),_:1}))}}),_o=C({name:"DepsWidget",__name:"index",setup(d){const{dependencies:e,engine:l}=hl(),a=k(!1),n=k(!1),i=k({}),s=x(()=>n.value?"查看依赖":i.value?"编辑依赖":"新增依赖"),o=v=>v.required||v.official?[]:["edit","remove"],r=v=>v.official&&!v.required,p=async v=>(v.urls=v.urls.split(`
`),l.project.value?.setDeps(v),!0),m=v=>{l.project.value?.setDeps(v)},f=()=>{n.value=!1,a.value=!0,i.value=null},h=v=>{n.value=!0,i.value={...v,urls:v.urls.join(`
`)},a.value=!0},g=(v,w)=>{w.name==="edit"&&(i.value={...v,urls:v.urls.join(`
`)},n.value=!1,a.value=!0),w.name==="remove"&&l.project.value?.removeDeps(v)};return(v,w)=>(u(),y(t(M),{class:"v-deps-widget",title:"依赖管理",plus:"",onPlus:f},{default:b(()=>[(u(!0),V(R,null,W(t(e),S=>(u(),y(t(re),{key:S.package,title:S.package,subtitle:S.version,actions:o(S),background:"",switch:r(S),modelValue:S.enabled,"onUpdate:modelValue":j=>S.enabled=j,onSwitch:j=>m(S),onClick:j=>h(S),onAction:j=>g(S,j)},null,8,["title","subtitle","actions","switch","modelValue","onUpdate:modelValue","onSwitch","onClick","onAction"]))),128)),c(t(Ce),{modelValue:a.value,"onUpdate:modelValue":w[0]||(w[0]=S=>a.value=S),width:"600px",height:"500px",title:s.value,model:i.value,submitMethod:p,formProps:{disabled:n.value,tooltipMessage:!1}},{default:b(()=>[c(t(z),{name:"package",label:"包名",required:"",disabled:!!i.value},null,8,["disabled"]),c(t(z),{name:"version",label:"版本",required:""}),c(t(z),{name:"library",label:"导出名称",required:""}),c(t(z),{name:"urls",label:"资源文件",editor:"textarea",props:{rows:3},tip:"多个资源可以换行输入",required:""}),c(t(z),{name:"assetsUrl",label:"物料URL"}),c(t(z),{name:"assetsLibrary",label:"物料名称"})]),_:1},8,["modelValue","title","model","formProps"])]),_:1}))}}),Co=C({__name:"actions",props:{position:{},model:{},path:{default:()=>[]}},emits:["action"],setup(d,{emit:e}){const l=d,a=e,n=x(()=>l.model.name),i=x(()=>!$(l.model)&&!l.model.locked),s=x(()=>l.path.map(m=>({command:m,label:m.name,onMouseenter:()=>{a("action",{type:"hover",model:m})}}))),o=[{name:"prev",icon:Ra,title:"向前移动"},{name:"next",icon:Ja,title:"向后移动"},{name:"copy",icon:al,title:"复制"},{name:"remove",icon:$e,title:"删除"}],r=m=>{a("action",{type:"selected",model:m.command})},p=async m=>{m.name==="remove"?await We("确定删除?")&&a("action",{type:m.name,model:l.model}):a("action",{type:m.name,model:l.model})};return(m,f)=>(u(),V("div",{class:U(["v-actions",[`is-${l.position}`]])},[c(t(be),{mode:"icon",size:"small",icon:t(tl),label:n.value,menus:s.value,background:"none",onCommand:r},null,8,["icon","label","menus"]),c(t(_a),{disabled:!i.value,mode:"icon",size:"small",items:o,background:"none",onClick:p},null,8,["disabled"])],2))}}),Vo={key:1,class:"v-designer__placeholder"},Ao=C({name:"VDesigner",inheritAttrs:!1,__name:"index",setup(d,{expose:e}){const l=k(),a=k(),{width:n,height:i}=Me(l),{dependencies:s,engine:o,apis:r}=hl(),{current:p,isEmpty:m}=oe(),f=x(()=>o.skeleton?.getWidget("Toolbar")?.widgetRef.mode??"pc"),h=x(()=>o.project.value?.config||{}),{designer:g,hover:v,dropping:w,selected:S}=ws(a,s,r,h),j=E=>{const P=E.type,D=E.model;if(p.value)switch(P){case"remove":p.value.removeNode(D),g.value?.setSelected(null);break;case"copy":const ie=p.value.cloneNode(D);g.value?.setSelected(ie);break;case"prev":p.value.movePrev(D),g.value?.setSelected(D);break;case"next":p.value.moveNext(D),g.value?.setSelected(D);break;case"hover":g.value?.setHover(D);break;case"selected":g.value?.setSelected(D);break}};return e({designer:g,mode:f}),(E,P)=>(u(),V("div",{ref_key:"container",ref:l,class:"v-designer"},[c(t(wl),{mode:f.value,width:t(n),height:t(i)},{default:b(()=>[_("iframe",{ref_key:"iframe",ref:a,frameborder:"0"},null,512),t(w)?(u(),V("div",{key:0,class:U(["v-designer__dropping","is-inner"]),style:Ge(t(w).style)},null,4)):A("",!0),t(v)?(u(),V("div",{key:1,class:"v-designer__hover",style:Ge(t(v).style)},[_("span",{class:U(`is-${t(v).position}`)},[H(F(t(v).model.name)+": ",1),_("i",null,F(t(v).model.id),1)],2)],4)):A("",!0),t(S)?(u(),V("div",{key:2,class:"v-designer__selected",style:Ge(t(S).style)},[c(Co,{position:t(S).position,model:t(S).model,path:t(S).path,onAction:j},null,8,["position","model","path"])],4)):A("",!0)]),_:1},8,["mode","width","height"]),t(p)?A("",!0):(u(),y(t(ne),{key:0,description:"请新建或打开文件"})),t(p)&&t(m)?(u(),V("div",Vo," 您可以拖拽组件放置到这里 ")):A("",!0)],512))}}),qe=C({__name:"group",props:{context:{},current:{},title:{},nameLabel:{},valueLabel:{},createEmpty:{},list:{},remove:{},submit:{},itemTitle:{type:Function,default:d=>d.name}},setup(d){const e=d,l=k(),a=k(),n=k(!1),i=k(e.createEmpty()),s=k(!1),o=x(()=>s.value?`编辑${e.title}`:`新增${e.title}`),r=()=>{s.value=!1,i.value=e.createEmpty(),n.value=!0},p=(v,w)=>{switch(w.name){case"edit":f(v);break;case"remove":e.remove(v);break}},m=v=>{i.value.value=v},f=v=>{s.value=!0,i.value={...v},n.value=!0},h=async v=>e.submit(v,s.value),g=()=>{a.value?.itemRef.validate()};return(v,w)=>(u(),y(t(M),{title:e.title,class:"v-sub-panel",size:"small",fit:!1,plus:"",onPlus:r},{default:b(()=>[(u(!0),V(R,null,W(v.list,S=>(u(),y(t(re),{title:e.itemTitle(S),border:"",actions:["edit","remove"],onAction:j=>p(S,j),onClick:j=>f(S)},null,8,["title","onAction","onClick"]))),256)),v.list.length?A("",!0):(u(),y(t(ne),{key:0,"image-size":40})),c(t(Ct),{modelValue:n.value,"onUpdate:modelValue":w[1]||(w[1]=S=>n.value=S),title:o.value,"submit-method":h,model:i.value,block:v.current,context:v.context,onPick:m},{default:b(()=>[ke(v.$slots,"fields",cl(ml({model:i.value,isEdit:s.value,nameLabel:v.nameLabel,valueLabel:v.valueLabel})),()=>[c(t(z),{name:"name",label:v.nameLabel,required:"",disabled:s.value},null,8,["label","disabled"]),c(t(z),{ref_key:"codeFieldRef",ref:a,name:"value",label:v.valueLabel,required:""},{editor:b(()=>[c(t(te),{ref_key:"editorRef",ref:l,dark:"",height:"350px",modelValue:i.value.value,"onUpdate:modelValue":w[0]||(w[0]=S=>i.value.value=S),onBlur:g},null,8,["modelValue"])]),_:1},8,["label"])])]),_:3},8,["modelValue","title","model","block","context"])]),_:3},8,["title"]))}}),jo=C({__name:"state",props:{context:{},current:{}},setup(d){const e=d,l=x(()=>Object.entries(e.current?.state||{}).map(([s,o])=>({name:s,value:Re(o)}))),a=()=>({name:"",value:""}),n=s=>e.current?.removeState(s.name),i=async(s,o)=>{const{name:r,value:p}=s;if(!o&&e.current?.state[r])return ae(`名称 ${r} 已存在，请更换！`),!1;const m={type:"JSExpression",value:p};return se(m,e.context,!0)?(e.current?.setState(r,m),!0):!1};return(s,o)=>(u(),y(qe,{title:"状态数据",current:e.current,context:e.context,list:l.value,nameLabel:"状态数据名称",valueLabel:"状态初始值 [ JSExpression ]",createEmpty:a,remove:n,submit:i},null,8,["current","context","list"]))}}),Eo=C({__name:"computed",props:{context:{},current:{}},setup(d){const e=d,l=x(()=>Object.entries(e.current?.computed||{}).map(([s,o])=>({name:s,value:Re(o)}))),a=()=>({name:"",value:"() => { }"}),n=s=>e.current?.removeFunction("computed",s.name),i=async(s,o)=>{const{name:r,value:p}=s;if(!o&&e.current?.computed[r])return ae(`名称 ${r} 已存在，请更换！`),!1;const m={type:"JSFunction",value:p};return se(m,e.context,!0)?(e.current?.setFunction("computed",r,m),!0):!1};return(s,o)=>(u(),y(qe,{title:"计算属性",current:e.current,context:e.context,list:l.value,nameLabel:"计算属性名称",valueLabel:"计算函数 [ JSFunction ]",createEmpty:a,remove:n,submit:i},null,8,["current","context","list"]))}}),Do=C({__name:"methods",props:{context:{},current:{}},setup(d){const e=d,l=x(()=>Object.entries(e.current?.methods||{}).map(([s,o])=>({name:s,value:Re(o)}))),a=()=>({name:"",value:"() => { }"}),n=s=>e.current?.removeFunction("methods",s.name),i=async(s,o)=>{const{name:r,value:p}=s;if(!o&&e.current?.methods[r])return ae(`名称 ${r} 已存在，请更换！`),!1;const m={type:"JSFunction",value:p};return se(m,e.context,!0)?(e.current?.setFunction("methods",r,m),!0):!1};return(s,o)=>(u(),y(qe,{title:"组件方法",current:e.current,context:e.context,list:l.value,nameLabel:"方法名称",valueLabel:"方法函数 [ JSFunction ]",createEmpty:a,remove:n,submit:i},null,8,["current","context","list"]))}}),zo=C({__name:"lifeCycles",props:{context:{},current:{}},setup(d){const e=d,l=x(()=>Ca.map(o=>({label:o,value:o}))),a=x(()=>Object.entries(e.current?.lifeCycles||{}).map(([o,r])=>({name:o,value:Re(r)}))),n=()=>({name:"",value:"() => { }"}),i=o=>e.current?.removeFunction("lifeCycles",o.name),s=async(o,r)=>{const{name:p,value:m}=o;if(!r&&e.current?.lifeCycles[p])return ae(`名称 ${p} 已存在，请更换！`),!1;const f={type:"JSFunction",value:m};return se(f,e.context,!0)?(e.current?.setFunction("lifeCycles",p,f),!0):!1};return(o,r)=>(u(),y(qe,{title:"生命周期",current:e.current,context:e.context,list:a.value,nameLabel:"名称",valueLabel:"函数 [ JSFunction ]",createEmpty:n,remove:i,submit:s},{fields:b(({model:p,nameLabel:m,isEdit:f,valueLabel:h})=>[c(t(z),{name:"name",label:m,editor:"select",options:l.value,required:"",disabled:f},null,8,["label","options","disabled"]),c(t(z),{name:"value",label:h,required:""},{editor:b(()=>[c(t(te),{ref:"editorRef",dark:"",height:"350px",modelValue:p.value,"onUpdate:modelValue":g=>p.value=g},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"])]),_:1},8,["current","context","list"]))}}),Po=C({__name:"watch",props:{context:{},current:{}},setup(d){const e=d,l=x(()=>(e.current?.watch||[]).map(o=>({...o,source:Re(o.source),handler:Re(o.handler)}))),a=()=>({source:"() => { }",deep:!1,immediate:!1,handler:"() => { }"}),n=o=>o.source,i=o=>e.current?.removeWatch(o),s=async(o,r)=>{const p={type:"JSFunction",value:o.source},m={type:"JSFunction",value:o.handler};if(!se(p,e.context,!0)||!se(m,e.context,!0))return!1;const f={...o,source:p,handler:m};return e.current?.setWatch(f),!0};return(o,r)=>(u(),y(qe,{title:"侦听器",current:e.current,context:e.context,list:l.value,nameLabel:"侦听源 [ JSFunction ]",valueLabel:"处理函数 [ JSFunction ]",createEmpty:a,remove:i,submit:s,itemTitle:n,grow:""},{fields:b(({model:p,nameLabel:m,valueLabel:f})=>[c(t(z),{name:"source",label:m,required:""},{editor:b(()=>[c(t(te),{dark:"",height:"100px",modelValue:p.source,"onUpdate:modelValue":h=>p.source=h},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"]),c(t(z),{name:"deep",modelValue:p.deep,"onUpdate:modelValue":h=>p.deep=h,label:"深度监听",editor:"switch"},null,8,["modelValue","onUpdate:modelValue"]),c(t(z),{name:"immediate",modelValue:p.immediate,"onUpdate:modelValue":h=>p.immediate=h,label:"立即执行",editor:"switch"},null,8,["modelValue","onUpdate:modelValue"]),c(t(z),{name:"handler",label:f,required:""},{editor:b(()=>[c(t(te),{dark:"",height:"130px",modelValue:p.handler,"onUpdate:modelValue":h=>p.handler=h},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"])]),_:1},8,["current","context","list"]))}}),Bo=C({__name:"index",setup(d){const{current:e,context:l}=oe();return(a,n)=>(u(),y(t(I),{class:"v-scripts-widget",direction:"column",fit:""},{default:b(()=>[c(jo,{current:t(e),context:t(l)},null,8,["current","context"]),c(Eo,{current:t(e),context:t(l)},null,8,["current","context"]),c(Do,{current:t(e),context:t(l)},null,8,["current","context"]),c(zo,{current:t(e),context:t(l)},null,8,["current","context"]),c(Po,{current:t(e),context:t(l)},null,8,["current","context"])]),_:1}))}}),nt=C({__name:"setters",props:{context:{},current:{},title:{},items:{},node:{},removable:{type:Boolean}},emits:["change","remove"],setup(d,{emit:e}){const l=d,a=e,n=(s,o)=>{a("change",s,o)},i=s=>{a("remove",s)};return(s,o)=>(u(),y(t(M),{title:l.title,class:"v-sub-panel",size:"small",fit:!1},{default:b(()=>[c(t(ge),{class:"v-properties-widget__form",size:"small","label-width":"90px",onKeydown:o[0]||(o[0]=Ke(Oe(()=>{},["prevent","stop"]),["enter"]))},{default:b(()=>[(u(!0),V(R,null,W(l.items,r=>(u(),y(t(N),de(r,{key:`${r.name}_${l.node.id}`,current:l.current,context:l.context,removable:l.removable,onChange:n,onRemove:i}),null,16,["current","context","removable"]))),128))]),_:1})]),_:1},8,["title"]))}}),Ro=C({name:"PropertiesWidget",__name:"index",setup(d){const{current:e,context:l}=oe(),{selected:a}=fe(),{node:n,commonProps:i,change:s,componentProps:o,customProps:r,addCustom:p,removeCustom:m,isExist:f}=_s(a),h=k(!1),g=k(),v=()=>{h.value=!0,g.value={name:""}},w=async j=>{const E=Object.keys(n.value?.props||{});return!f(j.name)&&!E.includes(j.name)?(p(j.name),!0):(ae("已存在该属性名称"),!1)},S=async j=>{await We("确定删除？")&&m(j)};return(j,E)=>t(e)?(u(),y(t(I),{key:0,class:"v-properties-widget",direction:"column",fit:""},{default:b(()=>[t(n)?(u(),y(nt,{key:0,title:"通用属性",current:t(e),context:t(l),node:t(n),items:t(i),onChange:t(s)},null,8,["current","context","node","items","onChange"])):A("",!0),t(n)&&t(o).length?(u(),y(nt,{key:1,title:"组件属性",current:t(e),context:t(l),node:t(n),items:t(o),onChange:t(s)},null,8,["current","context","node","items","onChange"])):A("",!0),t(n)?(u(),y(nt,{key:2,title:"自定义属性",current:t(e),context:t(l),node:t(n),items:t(r),onChange:t(s),removable:"",plus:"",grow:"",onPlus:v,onRemove:S},null,8,["current","context","node","items","onChange"])):A("",!0),c(t(Ce),{modelValue:h.value,"onUpdate:modelValue":E[0]||(E[0]=P=>h.value=P),title:"新增自定义属性",width:"400px",height:"150px","submit-method":w,formProps:{tooltipMessage:!1},model:g.value},{default:b(()=>[c(t(z),{name:"name",label:"属性名称",required:"",rules:{message:"名称格式错误",pattern:t(Ve)}},null,8,["rules"])]),_:1},8,["modelValue","model"])]),_:1})):A("",!0)}}),Jo=C({name:"VariableBinder",__name:"variable",props:{context:{},current:{},value:{}},setup(d){const e=d,l=k(),a=Ue({type:"JSExpression",value:e.value}),n=i=>{l.value.getEditor().setValue(i),a.value=i};return(i,s)=>(u(),y(t(Ct),{title:"绑定变量","unbind-enabled":"",block:e.current,context:e.context,model:a,onPick:n},{default:b(()=>[c(t(z),{name:"value",label:"绑定内容 [ JSExpression ]",required:""},{editor:b(()=>[c(t(te),{ref_key:"editorRef",ref:l,modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=o=>a.value=o),dark:"",height:"450px"},null,8,["modelValue"])]),_:1})]),_:1},8,["block","context","model"]))}}),Fo=C({name:"EventBinder",__name:"event",props:{context:{},current:{},name:{},event:{}},setup(d){const e=d,l=k(),a=Ue({name:e.name,...e.event,modifiers:Object.keys(e.event?.modifiers||{}),handler:{type:"JSFunction",value:e.event?.handler?.value||"() => {}"}}),n=hs.map(s=>({label:s,value:s})),i=s=>{l.value.getEditor().setValue(s),a.handler.value=s};return(s,o)=>(u(),y(t(Ct),{title:"绑定事件","unbind-enabled":"",block:e.current,context:e.context,model:a,onPick:i},{default:b(()=>[c(t(z),{name:"modifiers",label:"事件修饰符",editor:"checkbox",options:t(n)},null,8,["options"]),c(t(z),{name:"handler.value",label:"事件处理函数 [ JSFunction ]",required:""},{editor:b(()=>[c(t(te),{ref_key:"editorRef",ref:l,modelValue:a.handler.value,"onUpdate:modelValue":o[0]||(o[0]=r=>a.handler.value=r),dark:"",height:"350px"},null,8,["modelValue"])]),_:1})]),_:1},8,["block","context","model"]))}}),Wo=C({name:"EventsWidget",__name:"index",setup(d){const{current:e,context:l}=oe(),{selected:a}=fe(),{mouseEventList:n,keyboardEventList:i,componentEventList:s}=Cs(a),o=k({name:"",event:void 0}),r=k(!1),p=v=>{o.value=et(v),r.value=!0},m=async v=>{const w={...v,modifiers:v.modifiers.reduce((S,j)=>(S[j]=!0,S),{})};return se(w.handler,l.value,!0)?((a.value?.model).setEvent(w),!0):!1},f=async v=>{const w=a.value?.model;v.name&&(w.removeEvent(v.name),r.value=!1)},h=async()=>{o.value.name&&await We("确定要删除该事件吗？")&&f(o.value)},g=v=>{const{name:w,modelValue:S}=v;w==="edit"&&p(S),w==="remove"&&f(S)};return(v,w)=>(u(),y(t(I),{class:"v-events-widget",direction:"column",fit:""},{default:b(()=>[c(t(M),{title:"组件事件",class:"v-sub-panel",size:"small",fit:!1},{default:b(()=>[t(s).length?A("",!0):(u(),y(t(ne),{key:0,"image-size":50,description:"该组件无自带事件"})),(u(!0),V(R,null,W(t(s),S=>(u(),y(t(re),{key:`component_${S.name}`,title:S.name,"model-value":S,border:"",small:"",actions:S.event?["edit","remove"]:["edit"],active:!!S.event,onClick:j=>p(S),onAction:g},null,8,["title","model-value","actions","active","onClick"]))),128))]),_:1}),c(t(M),{title:"鼠标事件",class:"v-sub-panel",size:"small",fit:!1},{default:b(()=>[(u(!0),V(R,null,W(t(n),S=>(u(),y(t(re),{key:`mouse_${S.name}`,title:S.name,"model-value":S,border:"",small:"",actions:S.event?["edit","remove"]:["edit"],active:!!S.event,onClick:j=>p(S),onAction:g},null,8,["title","model-value","actions","active","onClick"]))),128))]),_:1}),c(t(M),{title:"键盘事件",class:"v-sub-panel",size:"small",grow:"",fit:!1},{default:b(()=>[(u(!0),V(R,null,W(t(i),S=>(u(),y(t(re),{key:`keyboard_${S.name}`,title:S.name,"model-value":S,border:"",small:"",actions:S.event?["edit","remove"]:["edit"],active:!!S.event,onClick:j=>p(S),onAction:g},null,8,["title","model-value","actions","active","onClick"]))),128))]),_:1}),r.value?(u(),y(t(Fo),{key:0,modelValue:r.value,"onUpdate:modelValue":w[0]||(w[0]=S=>r.value=S),context:t(l),current:t(e),name:o.value.name,event:o.value.event,submitMethod:m,onUnbind:h},null,8,["modelValue","context","current","name","event"])):A("",!0)]),_:1}))}}),To=C({name:"CssWidget",__name:"index",setup(d){const{current:e}=oe(),l=k(),a=x(()=>e.value?.css||""),n=s=>{e.value?.setCss(s)},i=()=>{const s=(l.value?.getEditor()).getValue();n(s),me("保存成功")};return(s,o)=>(u(),y(t(M),{class:"v-css-widget v-sub-panel",title:"lang:css scoped",size:"small",fit:"",save:"",onSave:i},{default:b(()=>[c(t(te),{ref_key:"editorRef",ref:l,"model-value":a.value,height:"100%",lang:"css",dark:"",onBlur:n},null,8,["model-value"])]),_:1}))}}),Oo=C({name:"DirectivesWidget",__name:"index",setup(d){const{current:e,context:l}=oe(),{selected:a}=fe(),{vIf:n,vShow:i,vBind:s,vFor:o,vModels:r,onValueChange:p,onForChange:m,onModelChange:f}=Es(a),h=g=>g.arg?typeof g.arg=="string"?g.arg:Ie(g.arg,{}):"modelValue";return(g,v)=>(u(),y(t(I),{class:"v-directives-widget",direction:"column",fit:""},{default:b(()=>[c(t(M),{class:"v-sub-panel",title:"内置指令",size:"small",fit:!1},{default:b(()=>[c(t(ge),{size:"small","label-width":"80px",onKeydown:v[0]||(v[0]=Ke(Oe(()=>{},["prevent","stop"]),["enter"]))},{default:b(()=>[c(t(N),{name:"vIf",label:"v-if",setters:"ExpressionSetter",current:t(e),context:t(l),value:t(n).value,onChange:t(p)},null,8,["current","context","value","onChange"]),c(t(N),{name:"vShow",label:"v-show",setters:"ExpressionSetter",current:t(e),context:t(l),value:t(i).value,onChange:t(p)},null,8,["current","context","value","onChange"]),c(t(N),{name:"vBind",label:"v-bind",setters:"ExpressionSetter",current:t(e),context:t(l),value:t(s).value,onChange:t(p)},null,8,["current","context","value","onChange"])]),_:1})]),_:1}),c(t(M),{class:"v-sub-panel",title:"循环",size:"small",fit:!1},{default:b(()=>[c(t(ge),{size:"small","label-width":"80px",onKeydown:v[1]||(v[1]=Ke(Oe(()=>{},["prevent","stop"]),["enter"]))},{default:b(()=>[c(t(N),{name:"value",label:"循环数据",setters:"ExpressionSetter",current:t(e),context:t(l),value:t(o).value,onChange:t(m)},null,8,["current","context","value","onChange"]),c(t(N),{name:"item",label:"迭代变量名",setters:{name:"StringSetter",props:{placeholder:"item"}},current:t(e),context:t(l),value:t(o).iterator?.item,onChange:t(m)},null,8,["current","context","value","onChange"]),c(t(N),{name:"index",label:"索引变量名",setters:{name:"StringSetter",props:{placeholder:"index"}},current:t(e),context:t(l),value:t(o).iterator?.index,onChange:t(m)},null,8,["current","context","value","onChange"])]),_:1})]),_:1}),c(t(M),{class:"v-sub-panel",title:"双向绑定",size:"small",fit:!1,grow:""},{default:b(()=>[(u(!0),V(R,null,W(t(r),(w,S)=>(u(),y(t(M),{card:"",border:"",class:"v-sub-panel",size:"small",title:`v-model: ${h(w)}`,body:{grow:!1},fit:!1},{default:b(()=>[c(t(ge),{size:"small","label-width":"60px",onKeydown:v[2]||(v[2]=Ke(Oe(()=>{},["prevent","stop"]),["enter"]))},{default:b(()=>[c(t(N),{name:S.toString(),label:"绑定变量",setters:"ExpressionSetter",current:t(e),context:t(l),value:w.value,onChange:t(f)},null,8,["name","current","context","value","onChange"])]),_:2},1024)]),_:2},1032,["title"]))),256)),t(r).length?A("",!0):(u(),y(t(ne),{key:0,description:"当前组件没有双向绑定属性","image-size":50}))]),_:1})]),_:1}))}}),No=C({name:"DefinedPropsDialog",__name:"props",props:{item:{},current:{},context:{}},setup(d){const e=d,l=x(()=>e.item?"编辑定义属性":"新增定义属性"),a=k(Object.assign({default:{type:"JSExpression",value:""}},e.item)),n=Object.keys(Va).map(s=>({label:s,value:s})),i=async s=>{const o=s.default;return o&&!se(o,e.context,!0)?!1:(e.current.setProp(s),!0)};return(s,o)=>(u(),y(t(Ce),{title:l.value,width:"800px",height:"500px",model:a.value,"form-props":{tooltipMessage:!1},"submit-method":i},{default:b(()=>[c(t(z),{name:"name",label:"属性名称",required:"",tip:"名称为英文驼峰格式",disabled:!!e.item,rules:{message:"名称格式错误",pattern:t(Ve)}},null,8,["disabled","rules"]),c(t(z),{name:"type",label:"数据类型",editor:"checkbox",props:{button:!0,size:"small"},options:t(n),required:""},null,8,["options"]),c(t(z),{name:"required",label:"必须",editor:"switch"}),c(t(z),{name:"default.value",label:"默认值",editor:"none"},{default:b(()=>[c(t(te),{modelValue:a.value.default.value,"onUpdate:modelValue":o[0]||(o[0]=r=>a.value.default.value=r),height:"200px",dark:""},null,8,["modelValue"])]),_:1})]),_:1},8,["title","model"]))}}),Lo=C({name:"DefinedEventsDialog",__name:"events",props:{item:{},current:{},context:{}},setup(d){const e=d,l=x(()=>e.item?"编辑定义事件":"新增定义事件"),a=k({name:e.item}),n=async i=>(e.item&&e.current.removeEmit(e.item,!0),e.current.setEmit(i.name),!0);return(i,s)=>(u(),y(t(Ce),{title:l.value,width:"600px",height:"200px",model:a.value,"form-props":{tooltipMessage:!1},"submit-method":n},{default:b(()=>[c(t(z),{name:"name",label:"事件名称",required:"",disabled:!!e.item,rules:{message:"名称格式错误",pattern:t(Ve)}},null,8,["disabled","rules"])]),_:1},8,["title","model"]))}}),Io=C({name:"DefinedSlotsDialog",__name:"slots",props:{item:{},current:{},context:{}},setup(d){const e=d,l=x(()=>e.item?"编辑定义插槽":"新增定义插槽"),a=k({name:e.item}),n=async i=>(e.item&&e.current.removeSlot(e.item,!0),e.current.setSlot(i.name),!0);return(i,s)=>(u(),y(t(Ce),{title:l.value,width:"600px",height:"200px",model:a.value,"form-props":{tooltipMessage:!1},"submit-method":n},{default:b(()=>[c(t(z),{name:"name",label:"插槽名称",disabled:!!e.item,required:"",rules:{message:"名称格式错误",pattern:t(Ve)}},null,8,["disabled","rules"])]),_:1},8,["title","model"]))}}),Mo=C({name:"DefinedInjectsDialog",__name:"injects",props:{item:{},current:{},context:{}},setup(d){const e=d,l=x(()=>e.item?"编辑注入":"新增注入"),a=k(Object.assign({default:{type:"JSExpression",value:""}},e.item)),n=async i=>{const s=i.default;return s&&!se(s,e.context,!0)?!1:(e.current.setInject(i),!0)};return(i,s)=>(u(),y(t(Ce),{title:l.value,width:"800px",height:"500px",model:a.value,"form-props":{tooltipMessage:!1},"submit-method":n},{default:b(()=>[c(t(z),{name:"name",label:"注入名称",required:"",tip:"名称为英文驼峰格式",disabled:!!e.item,rules:{message:"名称格式错误",pattern:t(Ve)}},null,8,["disabled","rules"]),c(t(z),{name:"from",label:"来源名称",tip:"默认和注入名称一致"}),c(t(z),{name:"default.value",label:"默认值",editor:"none"},{default:b(()=>[c(t(te),{modelValue:a.value.default.value,"onUpdate:modelValue":s[0]||(s[0]=o=>a.value.default.value=o),height:"200px",dark:""},null,8,["modelValue"])]),_:1})]),_:1},8,["title","model"]))}}),Uo=C({name:"DefinedWidget",__name:"index",setup(d){const{current:e,context:l}=oe(),a=x(()=>(e.value?.props||[]).map(O=>typeof O=="string"?{name:O}:O)),n=x(()=>e.value?.emits||[]),i=x(()=>e.value?.slots||[]),s=x(()=>e.value?.inject||[]),o=k(!1),r=k(),p=k(!1),m=k(),f=k(!1),h=k(),g=k(!1),v=k(),w=()=>{r.value=void 0,o.value=!0},S=O=>{const{name:G,modelValue:T}=O;G==="edit"&&j(T),G==="remove"&&e.value?.removeProp(T)},j=O=>{r.value=O,o.value=!0},E=()=>{m.value=void 0,p.value=!0},P=O=>{m.value=O,p.value=!0},D=O=>{const{name:G,modelValue:T}=O;G==="edit"&&P(T),G==="remove"&&e.value?.removeEmit(T)},ie=()=>{h.value=void 0,f.value=!0},J=O=>{h.value=O,f.value=!0},L=O=>{const{name:G,modelValue:T}=O;G==="edit"&&J(T),G==="remove"&&e.value?.removeSlot(T)},B=()=>{v.value=void 0,g.value=!0},Y=O=>{v.value=O,g.value=!0},le=O=>{const{name:G,modelValue:T}=O;G==="edit"&&Y(T),G==="remove"&&e.value?.removeInject(T)};return(O,G)=>t(e)&&t(l)?(u(),y(t(I),{key:0,class:"v-defined-widget",direction:"column",fit:""},{default:b(()=>[c(t(M),{class:"v-sub-panel",title:"定义属性",size:"small",plus:"",fit:!1,onPlus:w},{default:b(()=>[(u(!0),V(R,null,W(a.value,T=>(u(),y(t(re),{"model-value":T,title:T.name,border:"",actions:["edit","remove"],onClick:Be=>j(T),onAction:S},null,8,["model-value","title","onClick"]))),256)),a.value.length?A("",!0):(u(),y(t(ne),{key:0,"image-size":50})),o.value?(u(),y(No,{key:1,current:t(e),context:t(l),modelValue:o.value,"onUpdate:modelValue":G[0]||(G[0]=T=>o.value=T),item:r.value},null,8,["current","context","modelValue","item"])):A("",!0)]),_:1}),c(t(M),{class:"v-sub-panel",title:"定义事件",size:"small",plus:"",fit:!1,onPlus:E},{default:b(()=>[(u(!0),V(R,null,W(n.value,T=>(u(),y(t(re),{"model-value":T,title:T,border:"",actions:["remove"],onClick:Be=>P(T),onAction:D},null,8,["model-value","title","onClick"]))),256)),n.value.length?A("",!0):(u(),y(t(ne),{key:0,"image-size":50})),p.value?(u(),y(Lo,{key:1,modelValue:p.value,"onUpdate:modelValue":G[1]||(G[1]=T=>p.value=T),current:t(e),context:t(l),item:m.value},null,8,["modelValue","current","context","item"])):A("",!0)]),_:1}),c(t(M),{class:"v-sub-panel",title:"定义插槽",size:"small",plus:"",fit:!1,onPlus:ie},{default:b(()=>[(u(!0),V(R,null,W(i.value,T=>(u(),y(t(re),{"model-value":T,title:T,border:"",actions:["remove"],onClick:Be=>J(T),onAction:L},null,8,["model-value","title","onClick"]))),256)),i.value.length?A("",!0):(u(),y(t(ne),{key:0,"image-size":50})),f.value?(u(),y(Io,{key:1,modelValue:f.value,"onUpdate:modelValue":G[2]||(G[2]=T=>f.value=T),current:t(e),context:t(l),item:h.value},null,8,["modelValue","current","context","item"])):A("",!0)]),_:1}),c(t(M),{class:"v-sub-panel",title:"注入",size:"small",plus:"",fit:!1,grow:"",onPlus:B},{default:b(()=>[(u(!0),V(R,null,W(s.value,T=>(u(),y(t(re),{"model-value":T,title:T.name,border:"",actions:["remove"],onClick:Be=>Y(T),onAction:le},null,8,["model-value","title","onClick"]))),256)),s.value.length?A("",!0):(u(),y(t(ne),{key:0,"image-size":50})),g.value?(u(),y(Mo,{key:1,modelValue:g.value,"onUpdate:modelValue":G[3]||(G[3]=T=>g.value=T),current:t(e),context:t(l),item:v.value},null,8,["modelValue","current","context","item"])):A("",!0)]),_:1})]),_:1})):A("",!0)}}),qo=C({name:"DataSourceDialogForm",__name:"form",props:{context:{},current:{},item:{}},setup(d){const e=d,{apis:l}=Ds(),a=k(Object.assign({type:"api",ref:"",name:"",label:"",transform:{type:"JSFunction",value:`(res) => {
    /* 在这里可对接口返回数据进行转换  */
    return res;
}`},test:{type:"JSFunction",value:`() => this.runApi({
    /* 在这里可输入接口参数  */
})`}},e.item)),n=k(!1),i=k(""),s=k(!1),o=x(()=>l.value.map(h=>({label:h.label||"",value:h.id,data:h}))),r=x(()=>e.item?"编辑数据源":"新增数据源"),p=h=>{const g=l.value.find(v=>v.id===h);g&&(a.value.name=g.name,a.value.label=g.label||"")},m=async h=>{const{transform:g,test:v,name:w}=h;if(!e.current)return!1;if(!e.item&&e.current.dataSources[w])return ae(`名称【${w}】已经存在，请更换名称`),!1;if(g?.value){if(!se(g,e.context,!0))return!1}else h.transform=void 0;if(v?.value){if(!se(v,e.context,!0))return!1}else h.test=void 0;return e.current?.setDataSource(h),!0},f=async()=>{if(!e.context)return;if(!a.value.ref){ae("请先选择API");return}if(!a.value.test?.value){ae("请先填写测试用例");return}if(!se(a.value.test,e.context,!0))return;const h=async(...w)=>{const S=e.context?.$apis[a.value.ref];if(S)return await S.apply(S,w);xe.warn(`API【${a.value.ref}】不存在`)},g=Ie(a.value.test,{runApi:h}),v=a.value.transform?.value?Ie(a.value.transform,{},!0):w=>w;n.value=!0;try{const w=await g();i.value=JSON.stringify(await v(w),null,2)}catch(w){xe.error(w)}n.value=!1,s.value=!0};return(h,g)=>(u(),y(t(Ce),{width:"1000px",height:"600px",title:r.value,model:a.value,"form-props":{tooltipMessage:!1},"submit-method":m},{extra:b(()=>[c(t(ue),{loading:n.value,type:"warning",onClick:f},{default:b(()=>[H(" 运行测试用例 ")]),_:1},8,["loading"])]),default:b(()=>[c(t(z),{name:"ref",label:"引用API",editor:"select",required:"",disabled:!!e.item,options:o.value,props:{filterable:!0},onChange:p},{option:b(({option:v})=>[H(F(v.data.label)+" ",1),_("i",null,"[ "+F(v.data.name)+" ]",1)]),_:1},8,["disabled","options"]),c(t(z),{name:"name",label:"调用名称",required:"",tip:"名称为英文驼峰格式",disabled:!!e.item,rules:{message:"名称格式错误",pattern:t(Ve)}},null,8,["disabled","rules"]),c(t(z),{name:"label",label:"备注说明",required:""}),c(t(z),{name:"transform.value",label:"转换函数",editor:"none"},{default:b(()=>[c(t(te),{modelValue:a.value.transform.value,"onUpdate:modelValue":g[0]||(g[0]=v=>a.value.transform.value=v),height:"200px",dark:""},null,8,["modelValue"])]),_:1}),c(t(z),{name:"test.value",label:"测试用例",editor:"none"},{default:b(()=>[c(t(te),{modelValue:a.value.test.value,"onUpdate:modelValue":g[1]||(g[1]=v=>a.value.test.value=v),height:"100px",dark:""},null,8,["modelValue"])]),_:1}),s.value?(u(),y(t(Ut),{key:0,class:"v-drawer",modelValue:s.value,"onUpdate:modelValue":g[2]||(g[2]=v=>s.value=v),title:"测试用例运行结果",direction:"btt","append-to-body":"",size:"80%"},{default:b(()=>[c(t(te),{"model-value":i.value,border:"",dark:"",height:"100%",lang:"json"},null,8,["model-value"])]),_:1},8,["modelValue"])):A("",!0)]),_:1},8,["title","model"]))}}),Ho=C({name:"DataSourcesWidget",__name:"index",setup(d){const{current:e,context:l}=oe(),a=k(!1),n=k(),i=x(()=>Object.values(e.value?.dataSources||{}).filter(p=>p.type==="api")),s=()=>{n.value=void 0,a.value=!0},o=p=>{n.value=p,a.value=!0},r=p=>{const{name:m,modelValue:f}=p;m==="edit"&&o(f),m==="remove"&&e.value?.removeDataSource(f.name)};return(p,m)=>(u(),y(t(I),{class:"v-data-sources-widget",direction:"column",fit:""},{default:b(()=>[c(t(M),{title:"API",class:"v-sub-panel",size:"small",plus:"",onPlus:s},{default:b(()=>[(u(!0),V(R,null,W(i.value,f=>(u(),y(t(re),{border:"",title:f.name,subtitle:f.label,"model-value":f,actions:["edit","remove"],onAction:r,onClick:h=>o(f)},null,8,["title","subtitle","model-value","onClick"]))),256)),i.value.length?A("",!0):(u(),y(t(ne),{key:0,"image-size":50}))]),_:1}),a.value?(u(),y(qo,{key:0,modelValue:a.value,"onUpdate:modelValue":m[0]||(m[0]=f=>a.value=f),current:t(e),context:t(l),item:n.value},null,8,["modelValue","current","context","item"])):A("",!0)]),_:1}))}}),Qo=C({__name:"layout",props:{styleJson:{},setStyle:{type:Function}},setup(d){const e=d,l=k();q(()=>e.styleJson.display,p=>{l.value=p==="flex"},{immediate:!0});const a=[{label:"block-块级布局",value:"block",svg:Fa},{label:"flex-弹性布局",value:"flex",svg:Wa},{label:"inline-block-行内块级布局",value:"inline-block",svg:Ta},{label:"inline-行内布局",value:"inline",svg:Oa},{label:"invisible-不可见",value:"none",svg:Na}],n=[{label:"row-水平",value:"row",svg:La},{label:"row-reverse-水平",value:"row-reverse",svg:Ia},{label:"column-垂直",value:"column",svg:Ma},{label:"column-reverse-垂直",value:"column-reverse",svg:Ua}],i=[{label:"flex-start",value:"flex-start",svg:qa},{label:"flex-end",value:"flex-end",svg:Ha},{label:"center",value:"center",svg:Qa},{label:"space-between",value:"space-between",svg:Ga},{label:"space-around",value:"space-around",svg:Ka}],s=[{label:"不换行",value:"nowrap"},{label:"正换行",value:"wrap"},{label:"逆换行",value:"wrap-reverse"}],o=[{label:"flex-start",value:"flex-start",svg:Xa},{label:"flex-end",value:"flex-end",svg:Ya},{label:"center",value:"center",svg:$a},{label:"baseline",value:"baseline",svg:Za},{label:"stretch",value:"stretch",svg:en}],r=(p,m)=>{l.value=m==="flex",e.setStyle("display",m),l.value||(e.setStyle("flex-direction",void 0),e.setStyle("justify-content",void 0),e.setStyle("align-items",void 0),e.setStyle("flex-wrap",void 0))};return(p,m)=>(u(),y(t(M),{title:"布局",class:"v-sub-panel",size:"small",fit:!1,collapsable:""},{default:b(()=>[c(t(ge),{size:"small","label-width":"80px"},{default:b(()=>[c(t(N),{name:"display",label:"排布",setters:{name:"TagSetter"},options:a,variable:!1,value:e.styleJson.display,onChange:r},null,8,["value"]),l.value?(u(),V(R,{key:0},[c(t(N),{name:"flex-direction",label:"主轴方向",setters:{name:"TagSetter"},options:n,variable:!1,value:e.styleJson["flex-direction"],onChange:e.setStyle},null,8,["value","onChange"]),c(t(N),{name:"justify-content",label:"主轴对齐",setters:{name:"TagSetter"},options:i,variable:!1,value:e.styleJson["justify-content"],onChange:e.setStyle},null,8,["value","onChange"]),c(t(N),{name:"align-items",label:"辅轴对齐",setters:{name:"TagSetter"},options:o,variable:!1,value:e.styleJson["align-items"],onChange:e.setStyle},null,8,["value","onChange"]),c(t(N),{name:"flex-wrap",label:"换行模式",setters:{name:"TagSetter"},options:s,variable:!1,value:e.styleJson["flex-wrap"],onChange:e.setStyle},null,8,["value","onChange"])],64)):A("",!0)]),_:1})]),_:1}))}}),Go=C({name:"StyleWidget",__name:"JsonMode",setup(d){const{selected:e}=fe(),l=k(),a=x(()=>{const o=e.value?.model||null;return $(o)?null:o}),n=x(()=>JSON.stringify(a.value?.getPropValue("style")||{},null,2)),i=o=>{try{const r=JSON.parse(o);a.value?.setProp("style",r)}catch{ae("JSON格式错误")}},s=()=>{const o=(l.value?.getEditor()).getValue();i(o),me("保存成功")};return(o,r)=>(u(),y(t(M),{class:"v-css-widget v-sub-panel",title:"JSON",size:"small",fit:"",save:"",onSave:s},{default:b(()=>[c(t(te),{ref_key:"editorRef",ref:l,"model-value":n.value,height:"100%",lang:"json",dark:"",onBlur:i},null,8,["model-value"])]),_:1}))}}),Ko={class:"v-spacing-input"},Xo=_("div",{class:"v-spacing-input__modal"},null,-1),Yo={class:"v-spacing-input__content"},$o=["onClick"],kl=C({__name:"spacing-input",props:{name:{},modelValue:{},auto:{type:Boolean}},emits:["close","update:modelValue","submit"],setup(d,{emit:e}){const l=[0,10,20,40,60,100,140,220],a=d,n=e,i=x(()=>a.auto||a.name.includes("margin")),s=k(),o=k(a.modelValue),r=k("px");ls(s,()=>{n("close")});const p=g=>{o.value=typeof g=="number"?`${g}px`:"auto",m(o.value)},m=g=>{r.value=g==="auto"?void 0:"px"},f=()=>{o.value?(n("update:modelValue",o.value),n("submit",a.name,o.value),n("close")):ae("请输入有效值","提示")},h=()=>{o.value=void 0,n("update:modelValue",o.value),n("submit",a.name,void 0),n("close")};return(g,v)=>(u(),V("div",Ko,[Xo,_("div",Yo,[c(t(I),{class:"v-spacing-input__body",ref_key:"bodyRef",ref:s,direction:"column"},{default:b(()=>[c(t(I),null,{default:b(()=>[c(t(nl),{modelValue:o.value,"onUpdate:modelValue":v[0]||(v[0]=w=>o.value=w),size:"small","with-unit":!!r.value,unit:r.value,format:r.value?"0":void 0,onChange:m},null,8,["modelValue","with-unit","unit","format"])]),_:1}),c(t(I),null,{default:b(()=>[i.value?(u(),y(t(I),{key:0,class:"v-spacing-input__auto",width:"20%"},{default:b(()=>[_("span",{onClick:v[1]||(v[1]=w=>p("auto"))},"auto")]),_:1})):A("",!0),c(t(I),{grow:"",class:"v-spacing-input__values",align:"center",wrap:"wrap"},{default:b(()=>[(u(),V(R,null,W(l,w=>_("span",{onClick:S=>p(w)},F(w),9,$o)),64))]),_:1})]),_:1}),c(t(I),null,{default:b(()=>[c(t(ue),{size:"small",type:"primary",round:"",style:{width:"100%"},onClick:f},{default:b(()=>[H(" 确定 ")]),_:1}),c(t(ue),{size:"small",round:"",style:{width:"100%"},onClick:h},{default:b(()=>[H(" 重置 ")]),_:1})]),_:1})]),_:1},512)])]))}}),Zo={class:"spacing-wrap"},ei={class:"spacing-max-icon"},ti=["width","height"],li=["d"],ai=["d"],ni=["d"],si=["d"],oi={id:"margin-outer"},ii=["width","height"],ri=["width","height"],ui={id:"margin-inner"},di=["width","height"],ci=["width","height"],mi=["width","height"],pi=["d"],vi=["d"],gi=["d"],hi=["d"],bi={id:"padding-outer"},fi=["width","height"],yi=["width","height"],wi={id:"padding-inner"},ki=["width","height"],Si=["width","height"],xi={xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",style:{"grid-area":"3 / 3 / span 3 / span 3","pointer-events":"none"}},_i=_("text",{x:"6",y:"4",fill:"#a6a6a6","font-style":"italic","font-weight":"bold","font-size":"8","dominant-baseline":"hanging"}," padding ",-1),Ci=[_i],Vi={xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",style:{"grid-area":"1 / 1 / -1 / -1","pointer-events":"none"}},Ai=_("text",{x:"6",y:"4",fill:"#a6a6a6","font-style":"italic","font-weight":"bold","font-size":"8","dominant-baseline":"hanging"}," margin ",-1),ji=[Ai],K=36,X=24,Ei=C({__name:"spacing",props:{styleJson:{},setStyle:{type:Function}},setup(d){const e=d,l=k(),a=k(),{width:n,height:i}=Me(l),{width:s,height:o}=Me(a),r=k(!1),p=k(),m=k(),f=()=>{r.value=!1,p.value=void 0,m.value=void 0},h=g=>{p.value=g,m.value=e.styleJson[g],r.value=!0};return(g,v)=>(u(),y(t(M),{title:"间距",class:"v-sub-panel",size:"small",fit:!1,collapsable:""},{default:b(()=>[_("div",{class:"v-style-widget__spacing",ref_key:"container",ref:l},[_("div",Zo,[_("div",ei,[t(n)&&t(i)?(u(),V("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",width:t(n),height:t(i),style:{"grid-area":"1 / 1 / -1 / -1"}},[_("g",null,[_("g",null,[_("path",{mode:"delta",fill:"currentColor",d:`
              m1,1
              h${t(n)-1}
              l-${K},${X}
              h-${t(n)-2*K}
              l-${K},-${X}z`,"data-automation-id":"margin-top-button","aria-label":"Margin top button",class:"tb-path-color",onClick:v[0]||(v[0]=w=>h("margin-top"))},null,8,li)])]),_("g",null,[_("g",null,[_("path",{mode:"delta",fill:"currentColor",d:`
              m${t(n)-1},1
              v${t(i)-1}
              l-${K},-${X}
              v-${t(i)-2*X}
              l${K},-${X}z`,"data-automation-id":"margin-right-button","aria-label":"Margin right button",class:"lr-path-color",onClick:v[1]||(v[1]=w=>h("margin-right"))},null,8,ai)])]),_("g",null,[_("g",null,[_("path",{mode:"delta",fill:"currentColor",d:`
              m1,${t(i)-1}
              h${t(n)-1}
              l-${K},-${X}
              h-${t(n)-2*K}
              l-${K},${X}z`,"data-automation-id":"margin-bottom-button","aria-label":"Margin bottom button",class:"tb-path-color",onClick:v[2]||(v[2]=w=>h("margin-bottom"))},null,8,ni)])]),_("g",null,[_("g",null,[_("path",{mode:"delta",fill:"currentColor",d:`
              m1,1
              v${t(i)-1}
              l${K},-${X}
              v-${t(i)-2*X}
              l-${K},-${X}z`,"data-automation-id":"margin-left-button","aria-label":"Margin left button",class:"lr-path-color",onClick:v[3]||(v[3]=w=>h("margin-left"))},null,8,si)])]),_("clipPath",oi,[_("rect",{x:"0",y:"0",width:t(n),height:t(i),fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none"}},null,8,ii)]),_("rect",{class:"stroke","clip-path":"url(#margin-outer)",x:"0",y:"0",width:t(n),height:t(i),fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none","stroke-width":"2px"}},null,8,ri),_("clipPath",ui,[_("rect",{x:"36",y:"24",width:t(n)-2*K+1,height:t(i)-2*X+1,fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none"}},null,8,di)]),_("rect",{class:"stroke","clip-path":"url(#margin-inner)",x:"36",y:"24",width:t(n)-2*K+1,height:t(i)-2*X+1,fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none","stroke-width":"2px"}},null,8,ci)],8,ti)):A("",!0),_("div",{class:U(["spacing-edit margin-top",{"is-setting":e.styleJson["margin-top"]}]),onClick:v[4]||(v[4]=w=>h("margin-top"))},F(e.styleJson["margin-top"]||"-"),3),_("div",{class:U(["spacing-edit margin-right",{"is-setting":e.styleJson["margin-right"]}]),onClick:v[5]||(v[5]=w=>h("margin-right"))},F(e.styleJson["margin-right"]||"-"),3),_("div",{class:U(["spacing-edit margin-bottom",{"is-setting":e.styleJson["margin-bottom"]}]),onClick:v[6]||(v[6]=w=>h("margin-bottom"))},F(e.styleJson["margin-bottom"]||"-"),3),_("div",{class:U(["spacing-edit margin-left",{"is-setting":e.styleJson["margin-left"]}]),onClick:v[7]||(v[7]=w=>h("margin-left"))},F(e.styleJson["margin-left"]||"-"),3)]),_("div",{ref_key:"inner",ref:a,class:"spacing-min-icon"},[t(n)&&t(i)?(u(),V("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",width:t(s),height:t(o),style:{"grid-area":"1 / 1 / -1 / -1"}},[_("g",null,[_("g",null,[_("path",{mode:"delta",fill:"currentColor",d:`
              m1,1
              h${t(s)-1}
              l-${K},${X}
              h-${t(s)-2*K}
              l-${K},-${X}z`,"data-automation-id":"padding-top-button","aria-label":"Padding top button",class:"tb-path-color",onClick:v[8]||(v[8]=w=>h("padding-top"))},null,8,pi)])]),_("g",null,[_("g",null,[_("path",{mode:"delta",fill:"currentColor",d:`
              m${t(s)-1},1
              v${t(o)-1}
              l-${K},-${X}
              v-${t(o)-2*X}
              l${K},-${X}z`,"data-automation-id":"padding-right-button","aria-label":"Padding right button",class:"lr-path-color",onClick:v[9]||(v[9]=w=>h("padding-right"))},null,8,vi)])]),_("g",null,[_("g",null,[_("path",{mode:"delta",fill:"currentColor",d:`
              m1,${t(o)-1}
              h${t(s)-1}
              l-${K},-${X}
              h-${t(s)-2*K}
              l-${K},${X}z`,"data-automation-id":"padding-bottom-button","aria-label":"Padding bottom button",class:"tb-path-color",onClick:v[10]||(v[10]=w=>h("padding-bottom"))},null,8,gi)])]),_("g",null,[_("g",null,[_("path",{mode:"delta",fill:"currentColor",d:`
              m1,1
              v${t(o)-1}
              l${K},-${X}
              v-${t(o)-2*X}
              l-${K},-${X}z`,"data-automation-id":"padding-left-button","aria-label":"Padding left button",class:"lr-path-color",onClick:v[11]||(v[11]=w=>h("padding-left"))},null,8,hi)])]),_("clipPath",bi,[_("rect",{x:"0",y:"0",width:t(s),height:t(o),fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none"}},null,8,fi)]),_("rect",{class:"stroke","clip-path":"url(#padding-outer)",x:"0",y:"0",width:t(s),height:t(o),fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none","stroke-width":"2px"}},null,8,yi),_("clipPath",wi,[_("rect",{x:"36",y:"24",width:t(s)-2*K+1,height:t(o)-2*X+1,fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none"}},null,8,ki)]),_("rect",{class:"stroke","clip-path":"url(#padding-inner)",x:"36",y:"24",width:t(s)-2*K+1,height:t(o)-2*X+1,fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none","stroke-width":"2px"}},null,8,Si)],8,mi)):A("",!0),_("div",{class:U(["spacing-edit padding-top",{"is-setting":e.styleJson["padding-top"]}]),onClick:v[12]||(v[12]=w=>h("padding-top"))},F(e.styleJson["padding-top"]||"-"),3),_("div",{class:U(["spacing-edit padding-right",{"is-setting":e.styleJson["padding-right"]}]),onClick:v[13]||(v[13]=w=>h("padding-right"))},F(e.styleJson["padding-right"]||"-"),3),_("div",{class:U(["spacing-edit padding-bottom",{"is-setting":e.styleJson["padding-bottom"]}]),onClick:v[14]||(v[14]=w=>h("padding-bottom"))},F(e.styleJson["padding-bottom"]||"-"),3),_("div",{class:U(["spacing-edit padding-left",{"is-setting":e.styleJson["padding-left"]}]),onClick:v[15]||(v[15]=w=>h("padding-left"))},F(e.styleJson["padding-left"]||"-"),3)],512),(u(),V("svg",xi,Ci)),(u(),V("svg",Vi,ji))]),r.value?(u(),y(kl,{key:0,name:p.value,modelValue:m.value,"onUpdate:modelValue":v[16]||(v[16]=w=>m.value=w),onClose:f,onSubmit:e.setStyle},null,8,["name","modelValue","onSubmit"])):A("",!0)],512)]),_:1}))}}),Di=C({__name:"sizing",props:{styleJson:{},setStyle:{type:Function}},setup(d){const e=d,l=[{name:"width",label:"宽(W)",setter:"SizeSetter"},{name:"height",label:"高(H)",setter:"SizeSetter"},{name:"min-width",label:"最小宽",setter:"SizeSetter"},{name:"min-height",label:"最小高",setter:"SizeSetter"},{name:"max-width",label:"最大宽",setter:"SizeSetter"},{name:"max-height",label:"最大高",setter:"SizeSetter"},{name:"overflow",label:"溢出",setter:"SelectSetter",options:[{label:"自动",value:"auto"},{label:"隐藏",value:"hidden"},{label:"滚动",value:"scroll"},{label:"显示",value:"visible"}]},{name:"object-fit",label:"适应",setter:"SelectSetter",options:[{label:"填充",value:"fill"},{label:"适应",value:"contain"},{label:"覆盖",value:"cover"},{label:"拉伸",value:"scale-down"},{label:"原始",value:"none"}]}];return(a,n)=>(u(),y(t(M),{title:"尺寸",class:"v-sub-panel v-",size:"small",fit:!1,collapsable:""},{default:b(()=>[c(t(ge),{class:"v-style-widget__sizing",size:"small","label-width":"60px",inline:""},{default:b(()=>[(u(),V(R,null,W(l,i=>c(t(N),{name:i.name,label:i.label,setters:{name:i.setter},options:i.options,variable:!1,value:e.styleJson[i.name],onChange:a.setStyle},null,8,["name","label","setters","options","value","onChange"])),64))]),_:1})]),_:1}))}}),zi={class:"v-style-widget__positioning"},Pi={class:"spacing-wrap"},Bi=["width","height"],Ri=["d"],Ji=["d"],Fi=["d"],Wi=["d"],Ti={id:"margin-outer"},Oi=["width","height"],Ni=["width","height"],Li={id:"margin-inner"},Ii=["width","height"],Mi=["width","height"],pe=36,ve=24,Ui=C({__name:"positioning",props:{styleJson:{},setStyle:{type:Function}},setup(d){const e=d,l=k(),{width:a,height:n}=Me(l),i=k(!1),s=k(),o=k(),r=[{label:"静态",value:"static"},{label:"相对",value:"relative"},{label:"绝对",value:"absolute"},{label:"固定",value:"fixed"},{label:"粘性",value:"sticky"}],p=[{label:"左上",svg:tn,value:"0% auto auto 0%"},{label:"右上",svg:ln,value:"0% 0% auto auto"},{label:"左下",svg:an,value:"auto auto 0% 0%"},{label:"右下",svg:nn,value:"auto 0% 0% auto"},{label:"左",svg:sn,value:"0% auto 0% 0%"},{label:"右",svg:on,value:"0% 0% 0% auto"},{label:"上",svg:rn,value:"auto 0% 0% 0%"},{label:"下",svg:un,value:"0% 0% auto 0%"},{label:"填充",svg:dn,value:"0% 0% 0% 0%"}],m=x(()=>(e.styleJson.inset||"").split(" ")),f=g=>{s.value=g,o.value=e.styleJson[g],i.value=!0},h=()=>{i.value=!1,s.value=void 0,o.value=void 0};return(g,v)=>(u(),y(t(M),{title:"定位",class:"v-sub-panel",size:"small",fit:!1,collapsable:""},{default:b(()=>[_("div",zi,[c(t(ge),{"label-width":"60px",size:"small"},{default:b(()=>[c(t(N),{name:"position",label:"定位",setters:{name:"SelectSetter"},options:r,variable:!1,value:e.styleJson.position,onChange:e.setStyle},null,8,["value","onChange"]),c(t(N),{name:"inset",label:" ",setters:{name:"TagSetter"},options:p,variable:!1,value:e.styleJson.inset,onChange:e.setStyle},null,8,["value","onChange"]),c(t(It),{label:" "},{default:b(()=>[_("div",Pi,[_("div",{ref_key:"inner",ref:l,class:"spacing-min-icon"},[t(a)&&t(a)?(u(),V("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",width:t(a),height:t(n),style:{"grid-area":"1 / 1 / -1 / -1"}},[_("g",null,[_("g",null,[_("path",{mode:"delta",fill:"currentColor",d:`
              m1,1
              h${t(a)-1}
              l-${pe},${ve}
              h-${t(a)-2*pe}
              l-${pe},-${ve}z`,"data-automation-id":"padding-top-button","aria-label":"Padding top button",class:"tb-path-color",onClick:v[0]||(v[0]=w=>f("top"))},null,8,Ri)])]),_("g",null,[_("g",null,[_("path",{mode:"delta",fill:"currentColor",d:`
              m${t(a)-1},1
              v${t(n)-1}
              l-${pe},-${ve}
              v-${t(n)-2*ve}
              l${pe},-${ve}z`,"data-automation-id":"padding-right-button","aria-label":"Padding right button",class:"lr-path-color",onClick:v[1]||(v[1]=w=>f("right"))},null,8,Ji)])]),_("g",null,[_("g",null,[_("path",{mode:"delta",fill:"currentColor",d:`
              m1,${t(n)-1}
              h${t(a)-1}
              l-${pe},-${ve}
              h-${t(a)-2*pe}
              l-${pe},${ve}z`,"data-automation-id":"padding-bottom-button","aria-label":"Padding bottom button",class:"tb-path-color",onClick:v[2]||(v[2]=w=>f("bottom"))},null,8,Fi)])]),_("g",null,[_("g",null,[_("path",{mode:"delta",fill:"currentColor",d:`
              m1,1
              v${t(n)-1}
              l${pe},-${ve}
              v-${t(n)-2*ve}
              l-${pe},-${ve}z`,"data-automation-id":"padding-left-button","aria-label":"Padding left button",class:"lr-path-color",onClick:v[3]||(v[3]=w=>f("left"))},null,8,Wi)])]),_("clipPath",Ti,[_("rect",{x:"0",y:"0",width:t(a),height:t(n),fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none"}},null,8,Oi)]),_("rect",{class:"stroke","clip-path":"url(#margin-outer)",x:"0",y:"0",width:t(a),height:t(n),fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none","stroke-width":"2px"}},null,8,Ni),_("clipPath",Li,[_("rect",{x:"36",y:"24",width:t(a)-2*pe+1,height:t(n)-2*ve+1,fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none"}},null,8,Ii)]),_("rect",{class:"stroke","clip-path":"url(#margin-inner)",x:"36",y:"24",width:t(a)-2*pe+1,height:t(n)-2*ve+1,fill:"transparent",rx:"2",ry:"2",style:{"pointer-events":"none","stroke-width":"2px"}},null,8,Mi)],8,Bi)):A("",!0),_("div",{class:U(["spacing-edit padding-top",{"is-setting":e.styleJson.top}]),onClick:v[4]||(v[4]=w=>f("top"))},F(e.styleJson.top||m.value[0]||"-"),3),_("div",{class:U(["spacing-edit padding-right",{"is-setting":e.styleJson.right}]),onClick:v[5]||(v[5]=w=>f("right"))},F(e.styleJson.right||m.value[1]||"-"),3),_("div",{class:U(["spacing-edit padding-bottom",{"is-setting":e.styleJson.bottom}]),onClick:v[6]||(v[6]=w=>f("bottom"))},F(e.styleJson.bottom||m.value[2]||"-"),3),_("div",{class:U(["spacing-edit padding-left",{"is-setting":e.styleJson.left}]),onClick:v[7]||(v[7]=w=>f("left"))},F(e.styleJson.left||m.value[3]||"-"),3)],512),i.value?(u(),y(kl,{key:0,auto:"",name:s.value,modelValue:o.value,"onUpdate:modelValue":v[8]||(v[8]=w=>o.value=w),onClose:h,onSubmit:e.setStyle},null,8,["name","modelValue","onSubmit"])):A("",!0)])]),_:1}),c(t(N),{name:"z-index",label:"层级",setters:{name:"NumberSetter"},variable:!1,value:e.styleJson["z-index"],onChange:e.setStyle},null,8,["value","onChange"])]),_:1})])]),_:1}))}}),qi=C({__name:"texting",props:{styleJson:{},setStyle:{type:Function}},setup(d){const e=d,l=[{name:"font-size",label:"字号",setter:"SizeSetter"},{name:"font-family",label:"字体",setter:"SelectSetter",options:["Arial","Verdana","Georgia",'"Times New Roman"','"Microsoft YaHei"',"SimSun","SimHei","KaiTi","FangSong","STSong","STKaiti","STFangsong","STCaiyun","STHupo","STLiti","STXingkai","STXinwei","STXinwei","STZhongsong"]},{name:"line-height",label:"行高",setter:"SizeSetter"},{name:"font-weight",label:"字重",setter:"SelectSetter",options:[{label:"正常",value:"normal"},{label:"粗体",value:"bold"},{label:"更粗",value:"bolder"},{label:"更细",value:"lighter"}]}],a=[{label:"左",value:"left",svg:cn},{label:"中",value:"center",svg:mn},{label:"右",value:"right",svg:pn},{label:"两端",value:"justify",svg:vn}],n=[{label:"正常",value:"normal",svg:gn},{label:"斜体",value:"italic",svg:hn}],i=[{label:"无",value:"none",svg:sl},{label:"下划线",value:"underline",svg:bn},{label:"删除线",value:"line-through",svg:fn},{label:"上划线",value:"overline",svg:yn}];return(s,o)=>(u(),y(t(M),{title:"文本",class:"v-sub-panel",size:"small",fit:!1,collapsable:""},{default:b(()=>[c(t(ge),{class:"v-style-widget__texting",size:"small","label-width":"60px",inline:""},{default:b(()=>[(u(),V(R,null,W(l,r=>c(t(N),{name:r.name,label:r.label,setters:{name:r.setter},options:r.options,variable:!1,value:e.styleJson[r.name],onChange:s.setStyle},null,8,["name","label","setters","options","value","onChange"])),64))]),_:1}),c(t(ge),{size:"small","label-width":"60px"},{default:b(()=>[c(t(N),{name:"color",label:"颜色",setters:{name:"ColorSetter"},variable:!1,value:e.styleJson.color,onChange:s.setStyle},null,8,["value","onChange"]),c(t(N),{name:"text-align",label:"对齐",setters:{name:"TagSetter"},variable:!1,options:a,value:e.styleJson["text-align"],onChange:s.setStyle},null,8,["value","onChange"]),c(t(N),{name:"font-style",label:"风格",setters:{name:"TagSetter"},variable:!1,options:n,value:e.styleJson["font-style"],onChange:s.setStyle},null,8,["value","onChange"]),c(t(N),{name:"text-decoration",label:"修饰",setters:{name:"TagSetter"},variable:!1,options:i,value:e.styleJson["text-decoration"],onChange:s.setStyle},null,8,["value","onChange"])]),_:1})]),_:1}))}}),Hi=C({__name:"backgound",props:{styleJson:{},setStyle:{type:Function}},setup(d){const e=d,l=(r,p)=>{p?e.setStyle("background-image",`url(${p})`):e.setStyle("background-image",void 0)},a=r=>{const p=/^url\(([\w\W]+)\)$/;return r?.match(p)?.[1]},n=[{label:"重复",value:"repeat",svg:wn},{label:"水平重复",value:"repeat-x",svg:kn},{label:"垂直重复",value:"repeat-y",svg:Sn},{label:"不重复",value:"no-repeat",svg:xn}],i=[{label:"固定",value:"fixed"},{label:"滚动",value:"scroll"}],s=[{label:"裁剪到填充",value:"padding-box"},{label:"裁剪到内容",value:"content-box"},{label:"裁剪到文字",value:"text"}],o=[{label:"自动",value:"auto"},{label:"长度",value:"length"},{label:"百分比",value:"percentage"},{label:"覆盖",value:"cover"},{label:"填充",value:"contain"}];return(r,p)=>(u(),y(t(M),{title:"背景",class:"v-sub-panel",size:"small",fit:!1,collapsable:""},{default:b(()=>[c(t(ge),{"label-width":"60px",size:"small"},{default:b(()=>[c(t(N),{name:"background-image",label:"图片",setters:{name:"ImageSetter"},variable:!1,value:a(e.styleJson["background-image"]),onChange:l},null,8,["value"]),c(t(N),{name:"background-color",label:"颜色",setters:{name:"ColorSetter"},variable:!1,value:e.styleJson["background-color"],onChange:e.setStyle},null,8,["value","onChange"]),c(t(N),{name:"background-repeat",label:"重复",setters:{name:"TagSetter"},variable:!1,value:e.styleJson["background-repeat"],options:n,onChange:e.setStyle},null,8,["value","onChange"]),c(t(N),{name:"background-attachment",label:"固定",setters:{name:"RadioSetter"},variable:!1,value:e.styleJson["background-attachment"],options:i,onChange:e.setStyle},null,8,["value","onChange"]),c(t(N),{name:"background-position",label:"位置",setters:{name:"SectionSetter",props:{sections:2}},variable:!1,value:e.styleJson["background-position"],onChange:e.setStyle},null,8,["value","onChange"]),c(t(N),{name:"background-size",label:"大小",setters:{name:"SelectSetter"},variable:!1,value:e.styleJson["background-size"],options:o,onChange:e.setStyle},null,8,["value","onChange"]),c(t(N),{name:"background-clip",label:"裁剪",setters:{name:"SelectSetter"},variable:!1,value:e.styleJson["background-clip"],options:s,onChange:e.setStyle},null,8,["value","onChange"])]),_:1})]),_:1}))}}),Qi=C({__name:"border",props:{styleJson:{},setStyle:{type:Function}},setup(d){const e=d,l=k("border"),a=[{label:"全边框",svg:_n,value:"border"},{label:"左边框",svg:Cn,value:"border-left"},{label:"上边框",svg:Vn,value:"border-top"},{label:"下边框",svg:An,value:"border-bottom"},{label:"右边框",svg:jn,value:"border-right"}],n=[{label:"无",value:"none",svg:sl},{label:"实线",value:"solid",svg:En},{label:"虚线",value:"dashed",svg:Dn},{label:"点线",value:"dotted",svg:zn}],i=(s,o)=>{l.value=o};return(s,o)=>(u(),y(t(M),{title:"边框",class:"v-sub-panel",size:"small",fit:!1,collapsable:""},{default:b(()=>[c(t(ge),{"label-width":"60px",size:"small"},{default:b(()=>[c(t(N),{name:"border-radius",label:"圆角",setters:{name:"SectionSetter",props:{sections:4}},variable:!1,value:e.styleJson["border-radius"],onChange:e.setStyle},null,8,["value","onChange"]),c(t(N),{name:"borders",label:"边框",setters:{name:"TagSetter"},variable:!1,options:a,value:l.value,onChange:i},null,8,["value"]),l.value?(u(),V(R,{key:0},[(u(),y(t(N),{name:`${l.value}-width`,key:`${l.value}-width`,label:"宽度",setters:{name:"SizeSetter"},variable:!1,value:e.styleJson[`${l.value}-width`],onChange:e.setStyle},null,8,["name","value","onChange"])),(u(),y(t(N),{name:`${l.value}-style`,key:`${l.value}-style`,label:"样式",setters:{name:"TagSetter"},options:n,variable:!1,value:e.styleJson[`${l.value}-style`],onChange:e.setStyle},null,8,["name","value","onChange"])),(u(),y(t(N),{name:`${l.value}-color`,key:`${l.value}-color`,label:"颜色",setters:{name:"ColorSetter"},variable:!1,value:e.styleJson[`${l.value}-color`],onChange:e.setStyle},null,8,["name","value","onChange"]))],64)):A("",!0)]),_:1})]),_:1}))}}),Gi=C({__name:"effect",props:{styleJson:{},setStyle:{type:Function}},setup(d){const e=d,l=[{label:"自动",value:"auto",svg:Pn},{label:"Pointer",value:"pointer",svg:Bn},{label:"NotAllowed",value:"not-allowed",svg:Rn},{label:"无",value:"none",svg:Jn}],a=[{label:"Basic",value:"var(--el-box-shadow)"},{label:"Light",value:"var(--el-box-shadow-light)"},{label:"Lighter",value:"var(--el-box-shadow-lighter)"},{label:"Dark",value:"var(--el-box-shadow-dark)"}],n=(s,o)=>{e.setStyle("opacity",o!==void 0?(Number(o)||0)/100:void 0)},i=()=>Number(e.styleJson.opactiy||0)*100;return(s,o)=>(u(),y(t(M),{title:"效果",class:"v-sub-panel",size:"small",fit:!1,collapsable:""},{default:b(()=>[c(t(ge),{"label-width":"60px",size:"small"},{default:b(()=>[c(t(N),{name:"opacity",label:"透明度",setters:{name:"SliderSetter"},variable:!1,value:i(),onChange:n},null,8,["value"]),c(t(N),{name:"box-shadow",label:"阴影",setters:{name:"SelectSetter"},variable:!1,options:a,value:e.styleJson["box-shadow"],onChange:e.setStyle},null,8,["value","onChange"]),c(t(N),{name:"cursor",label:"光标",setters:{name:"TagSetter"},variable:!1,options:l,value:e.styleJson.cursor,onChange:e.setStyle},null,8,["value","onChange"])]),_:1})]),_:1}))}}),Ki=C({name:"StyleWidget",__name:"index",props:{isStyleCodeMode:{type:Boolean}},setup(d){const e=d,{selected:l}=fe(),a=x(()=>{const s=l.value?.model||null;return $(s)?null:s}),n=x(()=>a.value?.getPropValue("style")||{}),i=(s,o)=>{const r=a.value?.getPropValue("style")||{};o!==void 0?r[s]=o:delete r[s],a.value?.setProp("style",r)};return(s,o)=>e.isStyleCodeMode?(u(),y(Go,{key:0})):(u(),y(t(I),{key:`widget-style-${a.value?.id}`,class:"v-style-widget",direction:"column",fit:""},{default:b(()=>[(u(),y(Qo,{key:`Layout${a.value?.id}`,"style-json":n.value,setStyle:i},null,8,["style-json"])),(u(),y(Ei,{key:`Spacing${a.value?.id}`,"style-json":n.value,setStyle:i},null,8,["style-json"])),(u(),y(Di,{key:`Sizing${a.value?.id}`,"style-json":n.value,setStyle:i},null,8,["style-json"])),(u(),y(Ui,{key:`Positioning${a.value?.id}`,"style-json":n.value,setStyle:i},null,8,["style-json"])),(u(),y(qi,{key:`Texting${a.value?.id}`,"style-json":n.value,setStyle:i},null,8,["style-json"])),(u(),y(Hi,{key:`Backgound${a.value?.id}`,"style-json":n.value,setStyle:i},null,8,["style-json"])),(u(),y(Qi,{key:`Border${a.value?.id}`,"style-json":n.value,setStyle:i},null,8,["style-json"])),(u(),y(Gi,{key:`Effect${a.value?.id}`,"style-json":n.value,setStyle:i},null,8,["style-json"]))]),_:1}))}}),Xi=["src"],Yi=C({name:"PreviewerWidget",__name:"index",props:{path:{type:Function}},setup(d,{expose:e}){const l=d,a=k(),n=k(Symbol()),{current:i,engine:s}=oe(),{width:o,height:r}=Me(a),p=x(()=>i.value&&l.path?l.path(i.value):null),m=x(()=>s.skeleton?.getWidget("Toolbar")?.widgetRef.mode??"pc");return e({refresh:()=>{n.value=Symbol()}}),(f,h)=>(u(),V("div",{ref_key:"container",ref:a,class:"v-previewer",key:n.value},[c(t(wl),{mode:m.value,width:t(o),height:t(r)},{default:b(()=>[p.value?(u(),V("iframe",{key:0,ref:"iframe",frameborder:"0",src:p.value},null,8,Xi)):A("",!0)]),_:1},8,["mode","width","height"])]))}}),$i=C({name:"NodePathWidget",inheritAttrs:!1,__name:"index",setup(d){const{selected:e,designer:l}=fe(),a=x(()=>(e.value?.path||[]).slice(0).reverse()),n=s=>{l.value?.setSelected(s)},i=s=>{l.value?.setHover(s)};return(s,o)=>t(e)?(u(),y(t(zl),{key:0,class:"v-nodepath-widget","separator-icon":t(ns)},{default:b(()=>[(u(!0),V(R,null,W(a.value,r=>(u(),y(t(Dl),{onClick:p=>n(r),onMouseover:p=>i(r)},{default:b(()=>[H(F(r.name),1)]),_:2},1032,["onClick","onMouseover"]))),256))]),_:1},8,["separator-icon"])):A("",!0)}}),Zi=C({name:"SchemaWidget",__name:"index",setup(d){const{current:e}=oe(),l=k(),a=x(()=>JSON.stringify(e.value?.toDsl()||{},null,2)),n=x(()=>e.value?e.value.name:""),i=async()=>{const s=(l.value?.getEditor()).getValue();if(s&&await We("手动修改DSL有风险，可能导致页面无法加载，请确认您的操作无误。"))try{const o=JSON.parse(s);e.value?.update(o),me("保存成功")}catch(o){ae(o?.message)}};return(s,o)=>(u(),y(t(M),{class:"v-schema-widget",title:n.value,subtitle:"手动修改DSL有风险，可能导致页面无法加载，请确认您的操作无误。",size:"small",fit:"",save:"",onSave:i},{default:b(()=>[c(t(te),{ref_key:"editorRef",ref:l,"model-value":a.value,height:"100%",lang:"json",dark:""},null,8,["model-value"])]),_:1},8,["title"]))}}),er=C({name:"SchemaWidget",__name:"index",setup(d){const{current:e,engine:l}=oe(),a=k(),n=k(""),i=x(()=>e.value?`$vtj/vue/${e.value.id}.vue`:""),s=x(()=>e.value?e.value.name:"");return q(e,async o=>{const r=l.project.value;r&&o?n.value=await l.service.genVueContent(r.toDsl(),o.toDsl()):n.value=""},{immediate:!0,deep:!0}),(o,r)=>(u(),y(t(M),{class:"v-raw-widget",title:s.value,subtitle:i.value,size:"small",fit:""},{default:b(()=>[c(t(te),{ref_key:"editorRef",ref:a,"model-value":n.value,height:"100%",lang:"html",dark:"",readonly:""},null,8,["model-value"])]),_:1},8,["title","subtitle"]))}}),tr=["src"],lr=C({name:"DocsWidget",__name:"index",props:{url:{default:"https://newgateway.gitee.io/vtj/help/index.html"}},setup(d){const e=d,l=k();let a=null;il(()=>{a||(a=Pl.service({target:l.value?.$el}))}),rl(()=>{n(),a=null});const n=()=>{a?.close()};return(i,s)=>(u(),y(t(M),{class:"v-docs-widget",size:"small",fit:"",body:{padding:!1},header:!1,ref_key:"panel",ref:l},{default:b(()=>[_("iframe",{ref:"frame",src:e.url,onLoad:n},null,40,tr)]),_:1},512))}}),Sl="data:image/png;base64,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",ar={class:"v-about-widget"},nr={class:"v-about-widget__logo"},sr=["src"],or=_("div",{class:"v-about-widget__name"},"VTJ.PRO",-1),ir={class:"v-about-widget__version"},rr=C({name:"AboutWidget",__name:"index",setup(d){return(e,l)=>(u(),V("div",ar,[_("div",nr,[_("img",{src:t(Sl)},null,8,sr)]),or,_("div",ir,"版本："+F(t(ms)),1)]))}}),ur={class:"v-image-setter__plus"},xl=C({name:"ImageSetter",__name:"image",props:{modelValue:{},limit:{default:1}},emits:["change","update:modelValue"],setup(d,{emit:e}){const l=d,a=e,n=k([]),i=x(()=>n.value.length<l.limit),s=r=>r.type.includes("image")?(Fn(r).then(p=>{n.value=[{name:r.name,url:p}]}),!1):(Ye.error("只能上传图片"),!1),o=()=>{n.value=[]};return q(()=>l.modelValue,r=>{n.value=r?[{name:"",url:r}]:[]},{immediate:!0}),q(n,()=>{const r=n.value[0]?.url;a("change",r),a("update:modelValue",r)}),(r,p)=>(u(),y(t(Ol),de({class:["v-image-setter",{"v-image-setter--addable":i.value}],"list-type":"picture-card",limit:1,action:"#","file-list":n.value,"onUpdate:fileList":p[0]||(p[0]=m=>n.value=m),"before-upload":s,"auto-upload":!0,"on-remove":o},r.$attrs),{default:b(()=>[_("span",ur,[c(t(_e),{icon:t(us)},null,8,["icon"])])]),_:1},16,["class","file-list"]))}}),dr=C({name:"ProjectConfigWidget",__name:"index",setup(d){const{project:e}=Te(),l=a=>{e.value?.setConfig(a)};return(a,n)=>(u(),y(t(M),{class:"v-project-config-widget",title:"项目配置"},{default:b(()=>[t(e)?(u(),y(t(St),{key:0,footer:!1,size:"small","label-position":"top",model:t(e).config,onChange:l},{default:b(()=>[c(t(z),{label:"站点名称",name:"title"}),c(t(z),{label:"Logo",name:"logo",editor:xl}),c(t(z),{label:"主题切换",name:"themeSwitchable",editor:"switch"}),c(t(z),{label:"模拟数据",name:"mock",editor:"switch"})]),_:1},8,["model"])):A("",!0)]),_:1}))}}),Q={Logo:Rs,EmptyWidget:Fs,Switcher:Os,Toolbar:Ls,Actions:Us,Pages:io,Blocks:ro,Components:po,Outline:vo,History:go,Apis:xo,Deps:_o,Designer:Ao,Scripts:Bo,Properties:Ro,Events:Wo,Css:To,Directives:Oo,Defined:Uo,DataSources:Ho,Style:Ki,Previewer:Yi,NodePath:$i,Schema:Zi,Raw:er,Docs:lr,About:rr,ProjectConfig:dr},cr=[{name:"Logo",region:"Brand",component:Q.Logo},{name:"Switcher",region:"Brand",component:Q.Switcher},{name:"Toolbar",region:"Toolbar",component:Q.Toolbar},{name:"Actions",region:"Actions",component:Q.Actions},{name:"Pages",region:"Apps",component:Q.Pages,type:"app",openType:"panel",icon:ql,label:"页面管理"},{name:"Blocks",region:"Apps",component:Q.Blocks,type:"app",openType:"panel",icon:Hl,label:"区块管理"},{name:"Components",region:"Apps",component:Q.Components,type:"app",openType:"panel",icon:Ql,label:"组件库"},{name:"Outline",region:"Apps",component:Q.Outline,type:"app",openType:"panel",icon:Gl,label:"大纲树"},{name:"History",region:"Apps",component:Q.History,type:"app",openType:"panel",icon:Kl,label:"历史记录"},{name:"Apis",region:"Apps",component:Q.Apis,type:"app",openType:"panel",icon:Xl,label:"API管理"},{name:"Deps",region:"Apps",component:Q.Deps,type:"app",openType:"panel",icon:Yl,label:"依赖管理"},{name:"ProjectConfig",region:"Apps",component:Q.ProjectConfig,type:"app",openType:"panel",icon:Ht,label:"项目配置"},{name:"About",region:"Apps",component:Q.About,type:"app",openType:"dialog",icon:$l,label:"关于",props:{width:500,height:300}},{name:"Designer",region:"Workspace",component:Q.Designer,type:"tab",closable:!1,label:"设计视图"},{name:"Previewer",region:"Preview",component:Q.Previewer,type:"tab",closable:!1,label:"预览视图"},{name:"Schema",region:"Workspace",component:Q.Schema,type:"tab",closable:!0,label:"DSL视图"},{name:"Raw",region:"Workspace",component:Q.Raw,type:"tab",closable:!0,label:"源码视图"},{name:"Docs",region:"Workspace",component:Q.Docs,type:"tab",closable:!0,label:"帮助中心"},{name:"Scripts",region:"Settings",component:Q.Scripts,type:"tab",group:he.Block,label:"设置"},{name:"Css",region:"Settings",component:Q.Css,type:"tab",group:he.Block,label:"CSS"},{name:"DataSources",region:"Settings",component:Q.DataSources,type:"tab",group:he.Block,label:"数据源"},{name:"Defined",region:"Settings",component:Q.Defined,type:"tab",group:he.Block,label:"定义"},{name:"Properties",region:"Settings",component:Q.Properties,type:"tab",group:he.Node,label:"属性"},{name:"Style",region:"Settings",component:Q.Style,type:"tab",group:he.Node,label:"样式"},{name:"Events",region:"Settings",component:Q.Events,type:"tab",group:he.Node,label:"事件"},{name:"Directives",region:"Settings",component:Q.Directives,type:"tab",group:he.Node,label:"指令"},{name:"NodePath",region:"Status",component:Q.NodePath}],mr=[{package:"vue",version:"latest",library:"Vue",urls:["@vtj/materials/deps/vue/vue.global.prod.js"],assetsLibrary:Mn,required:!0,official:!0,enabled:!0},{package:"vue-router",version:"latest",library:"VueRouter",urls:["@vtj/materials/deps/vue-router/vue-router.global.prod.js"],assetsLibrary:Un,required:!0,official:!0,enabled:!0},{package:"@vtj/utils",version:"latest",library:"VtjUtils",urls:["@vtj/materials/deps/@vtj/utils/index.umd.js"],required:!0,official:!0,enabled:!0},{package:"@vtj/icons",version:"latest",library:"VtjIcons",urls:["@vtj/materials/deps/@vtj/icons/style.css","@vtj/materials/deps/@vtj/icons/index.umd.js"],required:!0,official:!0,enabled:!0},{package:"element-plus",version:"latest",library:"ElementPlus",urls:["@vtj/materials/deps/element-plus/dark/css-vars.css","@vtj/materials/deps/element-plus/index.css","@vtj/materials/deps/element-plus/index.full.min.js"],assetsUrl:"@vtj/materials/assets/element/index.umd.js",assetsLibrary:"ElementPlusMaterial",required:!1,official:!0,enabled:!0},{package:"@vtj/ui",version:"latest",library:"VtjUI",urls:["@vtj/materials/deps/echarts/echarts.min.js","@vtj/materials/deps/@ckeditor/ckeditor5-build-classic/ckeditor.js","@vtj/materials/deps/@ckeditor/ckeditor5-build-classic/zh-cn.js","@vtj/materials/deps/@ckeditor/ckeditor5-vue/ckeditor.js","@vtj/materials/deps/@vtj/ui/style.css","@vtj/materials/deps/@vtj/ui/index.umd.js"],assetsUrl:"@vtj/materials/assets/ui/index.umd.js",assetsLibrary:"VtjUIMaterial",required:!1,official:!0,enabled:!0},{package:"ant-design-vue",version:"latest",library:"antd",urls:["@vtj/materials/deps/ant-design-vue/reset.css","@vtj/materials/deps/ant-design-vue/dayjs/dayjs.min.js","@vtj/materials/deps/ant-design-vue/dayjs/plugin/customParseFormat.js","@vtj/materials/deps/ant-design-vue/dayjs/plugin/weekday.js","@vtj/materials/deps/ant-design-vue/dayjs/plugin/localeData.js","@vtj/materials/deps/ant-design-vue/dayjs/plugin/weekOfYear.js","@vtj/materials/deps/ant-design-vue/dayjs/plugin/weekYear.js","@vtj/materials/deps/ant-design-vue/dayjs/plugin/advancedFormat.js","@vtj/materials/deps/ant-design-vue/dayjs/plugin/quarterOfYear.js","@vtj/materials/deps/ant-design-vue/antd.min.js"],assetsUrl:"@vtj/materials/assets/antdv/index.umd.js",assetsLibrary:"AntdvMaterial",required:!1,official:!0,enabled:!1}],pr=[{id:"html",category:"HTML"},{id:"elements",category:"特殊元素"},{id:"components",category:"内置组件"}],vr=[{name:"div",label:"容器",categoryId:"html",snippet:{children:"容器文本内容示例"}},{name:"span",label:"内联",categoryId:"html",snippet:{children:"内联容器文本内容示例"}},{name:"a",label:"链接",categoryId:"html",props:[{name:"href",label:"href",setters:"InputSetter"}],snippet:{children:"链接文本内容示例",props:{href:"#"}}},{name:"img",label:"图片",categoryId:"html",childIncludes:!1,props:[{name:"src",label:"src",setters:"InputSetter"},{name:"width",label:"width",setters:"InputSetter"},{name:"height",label:"height",setters:"InputSetter"}],snippet:{props:{src:Sl,width:"200",height:"200"}}},{name:"h1",label:"大标题",categoryId:"html",snippet:{children:"标题"}},{name:"h2",label:"中标题",categoryId:"html",snippet:{children:"标题"}},{name:"h3",label:"小标题",categoryId:"html",snippet:{children:"标题"}},{name:"p",label:"段落",categoryId:"html",snippet:{children:"段落文本"}},{name:"component",label:"动态组件",categoryId:"elements",doc:"https://cn.vuejs.org/api/built-in-special-elements.html#component",props:[{name:"is",label:"组件名",setters:"InputSetter"}],snippet:{children:"组件文本内容示例",props:{is:"div"}}},{name:"slot",label:"插槽",categoryId:"elements",doc:"https://cn.vuejs.org/api/built-in-special-elements.html#slot",props:[{name:"name",label:"名称",defaultValue:"default",setters:"InputSetter"}],snippet:{children:"默认插槽内容"}}],gr=[...vr,{name:"Transition",label:"过渡效果",categoryId:"components",doc:"https://cn.vuejs.org/api/built-in-components.html#transition",package:"vue",props:[{name:"name",label:"名称",defaultValue:"",title:"用于自动生成过渡 CSS class 名",setters:"InputSetter"},{name:"css",label:"应用CSS",defaultValue:!0,title:"是否应用 CSS 过渡 class",setters:"BooleanSetter"},{name:"type",label:"事件类型",defaultValue:void 0,title:"指定要等待的过渡事件类型来确定过渡结束的时间，默认情况下会自动检测持续时间较长的类型",setters:"SelectSetter",options:["transition","animation"]},{name:"duration",label:"持续时间",defaultValue:void 0,title:"显式指定过渡的持续时间",setters:["NumberSetter","JSONSetter"]},{name:"mode",label:"时序",defaultValue:"default",title:"控制离开/进入过渡的时序。",setters:"SelectSetter",options:["in-out","out-in","default"]},{name:"appear",label:"使用过渡",defaultValue:!1,title:"是否对初始渲染使用过渡",setters:"BooleanSetter"},{name:"enterFromClass",label:"enterFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"enterActiveClass",label:"enterActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"enterToClass",label:"enterToClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearFromClass",label:"appearFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearActiveClass",label:"appearActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearToClass",label:"appearToClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveFromClass",label:"leaveFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveActiveClass",label:"leaveActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveToClass",label:"leaveToClass",defaultValue:void 0,setters:"InputSetter"}],events:["before-enter","before-leave","enter","leave","appear","after-enter","after-leave","after-appear","enter-cancelled","leave-cancelled","ppear-cancelled"],snippet:{children:"Transition"}},{name:"TransitionGroup",label:"过渡效果组",categoryId:"components",doc:"https://cn.vuejs.org/api/built-in-components.html#transitiongroup",package:"vue",props:[{name:"name",label:"名称",defaultValue:"",title:"用于自动生成过渡 CSS class 名",setters:"InputSetter"},{name:"tag",label:"标签名",defaultValue:void 0,title:"如果未定义，则渲染为片段 (fragment)",setters:"InputSetter"},{name:"moveClass",label:"moveClass",defaultValue:void 0,title:"用于自定义过渡期间被应用的 CSS class。",setters:"InputSetter"},{name:"css",label:"应用CSS",defaultValue:!0,title:"是否应用 CSS 过渡 class",setters:"BooleanSetter"},{name:"type",label:"事件类型",defaultValue:void 0,title:"指定要等待的过渡事件类型来确定过渡结束的时间，默认情况下会自动检测持续时间较长的类型",setters:"SelectSetter",options:["transition","animation"]},{name:"duration",label:"持续时间",defaultValue:void 0,title:"显式指定过渡的持续时间",setters:["NumberSetter","JSONSetter"]},{name:"appear",label:"使用过渡",defaultValue:!1,title:"是否对初始渲染使用过渡",setters:"BooleanSetter"},{name:"enterFromClass",label:"enterFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"enterActiveClass",label:"enterActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"enterToClass",label:"enterToClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearFromClass",label:"appearFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearActiveClass",label:"appearActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"appearToClass",label:"appearToClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveFromClass",label:"leaveFromClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveActiveClass",label:"leaveActiveClass",defaultValue:void 0,setters:"InputSetter"},{name:"leaveToClass",label:"leaveToClass",defaultValue:void 0,setters:"InputSetter"}],events:["before-enter","before-leave","enter","leave","appear","after-enter","after-leave","after-appear","enter-cancelled","leave-cancelled","ppear-cancelled"],snippet:{children:"TransitionGroup"}},{name:"KeepAlive",label:"缓存切换组件",categoryId:"components",doc:"https://cn.vuejs.org/api/built-in-components.html#keepalive",package:"vue",props:[{name:"include",label:"匹配包含",title:"如果指定，则只有与 `include` 名称, 匹配的组件才会被缓存。",setters:["InputSetter","JSONSetter"]},{name:"exclude",label:"匹配排除",title:"任何名称与 `exclude` 匹配的组件都不会被缓存。",setters:["InputSetter","JSONSetter"]},{name:"max",label:"最大缓存数",title:"最多可以缓存多少组件实例。",setters:["InputSetter"]}]},{name:"Teleport",label:"传送组件",categoryId:"components",doc:"https://cn.vuejs.org/api/built-in-components.html#teleport",package:"vue",props:[{name:"to",label:"目标容器",title:"指定目标容器,可以是选择器或实际元素",setters:["InputSetter"]},{name:"disabled",label:"禁用",title:"当值为 `true` 时，内容将保留在其原始位置, 而不是移动到目标容器中, 可以动态更改",setters:["BooleanSetter"]}]},{name:"Suspense",label:"异步依赖",categoryId:"components",doc:"https://cn.vuejs.org/api/built-in-components.html#suspense",package:"vue",props:[{name:"timeout",label:"timeout",setters:["InputSetter"]}]},{name:"RouterLink",label:"路由链接",categoryId:"components",doc:"https://router.vuejs.org/zh/api/interfaces/RouterLinkProps.html",package:"vue-router",props:[{name:"to",label:"to",setters:["InputSetter"]},{name:"replace",label:"replace",setters:["BooleanSetter"]}],snippet:{children:"RouterLink",props:{to:"/"}}}],hr=[{name:mt,version:"latest",label:"内置",library:mt,order:0,categories:pr,components:gr}],br=C({name:"StringSetter",__name:"string",setup(d){return(e,l)=>(u(),y(t(Se),de({clearable:""},e.$attrs),null,16))}}),fr=C({name:"BooleanSetter",__name:"boolean",setup(d){return(e,l)=>(u(),y(t(Mt),de(e.$attrs,{"model-value":!!e.$attrs.modelValue}),null,16,["model-value"]))}}),yr="{{",wr="}}",kr=C({name:"ExpressionSetter",__name:"expression",props:{modelValue:{},context:{}},emits:["change"],setup(d,{emit:e}){const l=(r="")=>({type:"JSExpression",value:Le(r)?r.value:r}),a=d,n=e,i=r=>se(r,a.context,!0),s=k(l(a.modelValue).value);q(()=>a.modelValue,r=>{s.value=l(r).value},{immediate:!0});const o=r=>{const p={type:"JSExpression",value:r};i(p)&&n("change",p)};return(r,p)=>(u(),y(t(Se),{class:"v-expression-setter",modelValue:s.value,"onUpdate:modelValue":p[0]||(p[0]=m=>s.value=m),onChange:o},{prefix:b(()=>[H(F(yr))]),suffix:b(()=>[H(F(wr))]),_:1},8,["modelValue"]))}}),Sr=C({name:"SelectSetter",__name:"select",props:{options:{default:()=>[]}},setup(d){const e=d;return(l,a)=>(u(),y(t(Ll),de({clearable:""},l.$attrs),{default:b(()=>[(u(!0),V(R,null,W(e.options,n=>(u(),y(t(Nl),de({key:n.label},n),null,16))),128))]),_:1},16))}}),xr=C({name:"NumberSetter",__name:"number",props:{modelValue:{}},emits:["change"],setup(d,{emit:e}){const l=d,a=e,n=x(()=>Le(l.modelValue)?void 0:Number(l.modelValue||0)),i=s=>{a("change",s)};return(s,o)=>(u(),y(t(Il),de({class:"v-number-setter","controls-position":"right","model-value":n.value},s.$attrs,{onChange:i}),null,16,["model-value"]))}}),_r=C({name:"ColorSetter",__name:"color",setup(d){return(e,l)=>(u(),y(t(Ml),cl(ml(e.$attrs)),null,16))}}),Cr=C({name:"JsonSetter",__name:"json",props:{modelValue:{default:void 0},type:{default:"JSON"}},emits:["change"],setup(d,{emit:e}){const l=d,a=k(),n=k(typeof l.modelValue=="object"?JSON.stringify(l.modelValue,null,2):void 0),i=x(()=>!!n.value),s=k(!1),o=e,r=h=>{let g=!0;try{const v=JSON.parse(h);if(l.type==="Array"&&!Array.isArray(v))throw new Error(`"${h}" is not a Array`);if(l.type==="Object"&&!Hn(v))throw new Error(`"${h}" is not a PlainObject`);if(typeof v!="object")throw new Error(`"${h}" is not a ${l.type}`)}catch(v){g=!1,ye.error({title:"代码错误",message:v?.message||v})}return g},p=()=>{const h=a.value?.getEditor();if(h){const g=h.getValue();r(g)&&(n.value=g,o("change",JSON.parse(g)),s.value=!1)}},m=()=>{n.value="",o("change",void 0),s.value=!1},f=()=>{s.value=!0};return(h,g)=>(u(),V("div",{class:U(["v-json-setter",{"is-active":i.value}])},[c(t(Se),de({readonly:"",onFocus:f,"model-value":l.type,"suffix-icon":t(_t)},h.$attrs),null,16,["model-value","suffix-icon"]),s.value?(u(),y(t(Fe),{key:0,modelValue:s.value,"onUpdate:modelValue":g[0]||(g[0]=v=>s.value=v),title:l.type,width:"1000px",height:"600px",cancel:"",submit:"",clear:"",onSubmit:p,onClear:m},{default:b(()=>[c(t(te),{ref_key:"codeEditor",ref:a,height:"100%",lang:"json",dark:"","model-value":n.value},null,8,["model-value"])]),_:1},8,["modelValue","title"])):A("",!0)],2))}}),Vr=C({name:"FunctionSetter",__name:"function",props:{modelValue:{default:()=>({type:"JSFunction",value:""})}},emits:["change"],setup(d,{emit:e}){const l=d,a=k(),n=k(l.modelValue.value),i=k(!1),s=x(()=>!!n.value),o=e,r=()=>{const f=a.value?.getEditor();if(f){const h=f.getValue(),g={type:"JSFunction",value:h};se(g,{})&&(n.value=h,o("change",g),i.value=!1)}},p=()=>{n.value="",o("change",void 0),i.value=!1},m=()=>{i.value=!0};return(f,h)=>(u(),V("div",{class:U(["v-function-setter",{"is-active":s.value}])},[c(t(Se),de({readonly:"",onFocus:m,"model-value":"JSFunction","suffix-icon":t(_t)},f.$attrs),null,16,["suffix-icon"]),i.value?(u(),y(t(Fe),{key:0,modelValue:i.value,"onUpdate:modelValue":h[0]||(h[0]=g=>i.value=g),title:"JSFunction",width:"1000px",height:"600px",cancel:"",submit:"",clear:"",onSubmit:r,onClear:p},{default:b(()=>[c(t(te),{ref_key:"codeEditor",ref:a,height:"100%","model-value":n.value,dark:""},null,8,["model-value"])]),_:1},8,["modelValue"])):A("",!0)],2))}}),Ar=C({name:"RadioSetter",__name:"radio",props:{options:{default:()=>[]}},setup(d){const e=d;return(l,a)=>(u(),y(t(Tt),de({class:"v-radio-setter",size:"small"},l.$attrs),{default:b(()=>[(u(!0),V(R,null,W(e.options,n=>(u(),y(t(Qe),{label:n.label,value:n.value,title:n.label},{default:b(()=>[n.svg?(u(),y(t(_e),{key:0,src:n.svg},null,8,["src"])):(u(),V(R,{key:1},[H(F(n.label),1)],64))]),_:2},1032,["label","value","title"]))),256))]),_:1},16))}}),jr=["label","title","onClick"],Er=C({name:"TagSetter",__name:"tag",props:{options:{default:()=>[]},modelValue:{}},emits:["update:modelValue","change"],setup(d,{emit:e}){const l=d,a=e,n=i=>{i.value===l.modelValue?(a("update:modelValue",void 0),a("change",void 0)):(a("update:modelValue",i.value),a("change",i.value))};return(i,s)=>(u(),V("div",de({class:"v-tag-setter",size:"small"},i.$attrs),[(u(!0),V(R,null,W(l.options,o=>(u(),V("span",{label:o.value,title:o.label,class:U({"is-active":l.modelValue===o.value}),onClick:r=>n(o)},[o.svg?(u(),y(t(_e),{key:0,src:o.svg,size:16},null,8,["src"])):(u(),V(R,{key:1},[H(F(o.label),1)],64))],10,jr))),256))],16))}}),_l=C({name:"SizeSetter",__name:"size",props:{modelValue:{}},emits:["change"],setup(d,{emit:e}){const l=d,a=e,n=k(!0),i=x(()=>n.value?"px":void 0),s=k(l.modelValue),o=r=>{n.value=!!Number(r)};return q(s,r=>{a("change",r)}),q(()=>l.modelValue,r=>{r&&(n.value=r.endsWith("px"),s.value=r)},{immediate:!0}),(r,p)=>(u(),y(t(nl),de({clearable:"",unit:i.value,"with-unit":!!i.value,modelValue:s.value,"onUpdate:modelValue":p[0]||(p[0]=m=>s.value=m),onChange:o},r.$attrs),null,16,["unit","with-unit","modelValue"]))}}),Dr={class:"v-section-setter"},zr=C({name:"SectionSetter",__name:"section",props:{modelValue:{},sections:{default:4}},emits:["change"],setup(d,{emit:e}){const l=d,a=e,n=k(new Array(l.sections).fill(""));q(()=>l.modelValue,s=>{n.value=s?s.split(" "):new Array(l.sections).fill("")},{immediate:!0});const i=()=>{a("change",n.value.join(" ").trim())};return(s,o)=>(u(),V("div",Dr,[(u(!0),V(R,null,W(l.sections,r=>(u(),y(_l,{name:r-1,modelValue:n.value[r-1],"onUpdate:modelValue":p=>n.value[r-1]=p,onChange:i,class:"v-section-setter__item"},null,8,["name","modelValue","onUpdate:modelValue"]))),256))]))}}),Pr={class:"v-slider-setter"},Br=C({name:"SliderSetter",__name:"slider",props:{modelValue:{default:void 0}},emits:["change","update:modelValue"],setup(d,{emit:e}){const l=d,a=e,n=k();q(()=>l.modelValue,s=>{n.value=s},{immediate:!0}),q(n,s=>{a("change",s),a("update:modelValue",s)});const i=()=>{n.value=void 0,a("change",void 0),a("update:modelValue",void 0)};return(s,o)=>(u(),V("div",Pr,[c(t(Ul),de({size:"small"},s.$attrs,{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=r=>n.value=r)}),null,16,["modelValue"]),c(t(_e),{onClick:i,class:"v-slider-setter__close",size:16,icon:t(ds)},null,8,["icon"])]))}}),Z={StringSetter:br,BooleanSetter:fr,ExpressionSetter:kr,SelectSetter:Sr,NumberSetter:xr,ColorSetter:_r,IconSetter:yl,JsonSetter:Cr,FunctionSetter:Vr,RadioSetter:Ar,TagSetter:Er,SizeSetter:_l,ImageSetter:xl,SectionSetter:zr,SliderSetter:Br},Rr={name:"StringSetter",component:Z.StringSetter,type:"String"},Jr=[{name:"InputSetter",component:Z.StringSetter,type:"String"},{name:"StringSetter",component:Z.StringSetter,type:"String"},{name:"BooleanSetter",component:Z.BooleanSetter,type:"Boolean"},{name:"ExpressionSetter",component:Z.ExpressionSetter,type:"Object"},{name:"SelectSetter",component:Z.SelectSetter,type:"String"},{name:"NumberSetter",component:Z.NumberSetter,type:"Number"},{name:"ColorSetter",component:Z.ColorSetter,type:"String"},{name:"IconSetter",component:Z.IconSetter,type:"String"},{name:"ObjectSetter",component:Z.JsonSetter,type:"Object",props:{type:"Object"}},{name:"ArraySetter",component:Z.JsonSetter,type:"Array",props:{type:"Array"}},{name:"JsonSetter",component:Z.JsonSetter,type:"Object",props:{type:"JSON"}},{name:"JSONSetter",component:Z.JsonSetter,type:"Object",props:{type:"JSON"}},{name:"FunctionSetter",component:Z.FunctionSetter,type:"Function"},{name:"RadioSetter",component:Z.RadioSetter,type:"String"},{name:"TagSetter",component:Z.TagSetter,type:"String"},{name:"SizeSetter",component:Z.SizeSetter,type:"String"},{name:"ImageSetter",component:Z.ImageSetter,type:"String"},{name:"SectionSetter",component:Z.SectionSetter,type:"String"},{name:"SliderSetter",component:Z.SliderSetter,type:"Number"},{name:"RangeSetter",component:Z.SliderSetter,type:"Array",props:{range:!0}}];class Fr{widgets={};constructor(){this.widgets=this.createWidgets()}createWidgets(){const e={};for(const l of cr)e[l.name]=l;return e}register(e){this.widgets[e.name]=e}get(e){return this.widgets[e]}set(e,l){const a=this.widgets[e];if(!a){xe.warn(`widget '${e}' is not found`);return}wt(a,l),l.component&&(a.component=l.component)}getWidgets(e,l){const a=Object.values(this.widgets);return e?a.filter(n=>n.region===e&&(!l||l&&l===n.group)):a}}const Cl=new Fr;class Wr{constructor(e=mr){this.deps=e}get(){return this.deps}set(e){this.deps=e}add(e){const l=this.deps.find(a=>a.package===e.package);l?Object.assign(l,e):this.deps.push(e)}merge(e){const l=[];for(const a of this.deps){const n=e.find(i=>i.package===a.package);l.push(n?{...n,...a,enabled:n.enabled}:a)}for(const a of e)this.deps.find(n=>n.package===a.package)||l.push(a);return l}remove(e){const l=this.deps.findIndex(a=>a.package===e);l>-1&&this.deps.splice(l,1)}}const Tr=new Wr;class Or{setters={};defaultSetter=Rr;constructor(){this.setters=this.createSetters()}createSetters(){const e={};for(const l of Jr)e[l.name]=l;return e}register(e){this.setters[e.name]=e}get(e){return this.setters[e]}set(e,l){const a=this.setters[e];if(!a){xe.warn(`setter '${e}' is not found`);return}wt(a,l),l.component&&(a.component=l.component)}getByType(e){return Object.values(this.setters).filter(l=>l.type===e).map(l=>l.name)}}const Xe=new Or;function Nr(d){return new Promise((e,l)=>{const a=ul(oo,{slots:d,onClose:()=>{a.unmount(),l(null)},onSubmit:n=>{a.unmount(),e(n)}});a.mount(document.createElement("div"))})}class Lr{constructor(e,l,a){this.engine=e,this.contentWindow=l,this.dependencies=a,this.document=this.contentWindow.document,this.bindEvents(l,this.document)}proxied={};document=null;hover=gt(null);dropping=gt(null);selected=k(null);dragging=null;bind(e,l){let a=this.proxied[l];return a||(a=e.bind(this),this.proxied[l]=a),a}bindEvents(e,l){l.addEventListener("mouseover",this.bind(this.onMouseOver,"onMouseOver")),l.addEventListener("scroll",this.bind(this.onViewChange,"onViewChange")),e.addEventListener("resize",this.bind(this.onViewChange,"onViewChange")),l.addEventListener("mouseleave",this.bind(this.onLeave,"onLeave")),l.addEventListener("dragleave",this.bind(this.onLeave,"onLeave")),l.addEventListener("dragover",this.bind(this.onDragOver,"onDragOver")),l.addEventListener("drop",this.bind(this.onDrop,"onDrop")),l.addEventListener("click",this.bind(this.onSelected,"onSelected")),ee.on(dt,this.bind(this.onActiveChange,"onActiveChange")),ee.on(Ne,this.bind(this.onViewChange,"onViewChange"))}unbindEvents(e,l){l.removeEventListener("mouseover",this.bind(this.onMouseOver,"onMouseOver")),l.removeEventListener("scroll",this.bind(this.onViewChange,"onViewChange")),e.removeEventListener("resize",this.bind(this.onViewChange,"onViewChange")),l.removeEventListener("mouseleave",this.bind(this.onLeave,"onLeave")),l.removeEventListener("dragleave",this.bind(this.onLeave,"onLeave")),l.removeEventListener("dragover",this.bind(this.onDragOver,"onDragOver")),l.removeEventListener("drop",this.bind(this.onDrop,"onDrop")),l.removeEventListener("click",this.bind(this.onSelected,"onSelected")),ee.off(dt,this.bind(this.onActiveChange,"onActiveChange")),ee.off(Ne,this.bind(this.onViewChange,"onViewChange"))}onMouseOver(e){const l=this.getHelper(e);l?.model.id!==this.selected.value?.model.id&&(this.hover.value=l)}onViewChange(){this.updateRect()}onLeave(e){this.hover.value=null,this.dropping.value=null}onActiveChange(){this.hover.value=null,this.dropping.value=null,this.selected.value=null}async getDropSlot(e){if(!e)return;const{engine:l}=this,a=l.assets,n=a.componentMap,i=await a.getBlockMaterial(e.from)||n.get(e.name);if(!i?.slots)return;const s=(i?.slots||["default"]).map(r=>typeof r=="string"?{name:r,params:[]}:{name:r.name,params:r.params||[]});if(s.length===0)return;if(s.length===1)return s[0];const o=await Nr(s).catch(()=>null);if(!(o&&o.name==="default"&&(!o.params||o.params?.length===0)))return o}async onDrop(e){e.preventDefault();const{engine:l,dragging:a,dropping:n}=this,i=l.current.value,s=this.getHelper(e);if(!i||!a||!n.value||!s)return;const o=s.model,r=n.value.type;if(!await this.allowDrop(o,r))return;const p=this.createNodeDsl(a),m=new Pt(p);if($(o))i.addNode(m,void 0,r);else{const f=await this.getDropSlot(r==="inner"?o:o.parent);if(f===null){this.dropping.value=null;return}m.slot=f,i.addNode(m,o,r)}this.dropping.value=null,l.assets.clearCaches()}onSelected(e){this.setHover(null),this.selected.value=this.getHelper(e)}async onDragOver(e){const l=this.getHelper(e);if(!l)return;const{model:a,type:n}=l;a&&await this.allowDrop(a,n)?(e.preventDefault(),this.dropping.value=l):this.dropping.value=null}isVtjElement(e){return!!e.__vtj__&&!!e.__context__}findVtjElement(e){return e.find(l=>this.isVtjElement(l))}getNodeByElement(e){const l=e.__vtj__??"";return Pt.nodes[l]||null}getDropType(e,l,a){const{left:n,top:i,width:s,height:o}=e;return l>=n&&l<=n+s*.2?"left":l>=n+s*.8&&l<=n+s?"right":a>=i&&a<=i+o*.2?"top":a>=i+o*.8&&a<=i+o?"bottom":"inner"}getNodePath(e=[]){const l=e.filter(n=>this.isVtjElement(n)),a=this.engine.current.value;return[...l.map(n=>this.getNodeByElement(n)).filter(n=>!!n),a]}setDslFrom(e){const l=this.engine.assets.componentMap.get(e.name);if(e.from=e.from||l?.package,Array.isArray(e.children))for(const a of e.children)this.setDslFrom(a)}createNodeDsl(e){const{name:l,snippet:a={},from:n}=e,i={...a,name:l,from:n||e.package};return this.setDslFrom(i),i}getElmenetByModel(e){return!this.document||!e?null:$(e)?this.document.body:Array.from(this.document.querySelectorAll("*")).find(l=>l.__vtj__===e.id)}findPathByNode(e){const l=[e];let a=e;for(;a.parent&&a.parent!==a;)a=a.parent,a!==e&&l.unshift(a);const n=this.engine.current.value;return l.unshift(n),l.reverse()}getHelper(e){const l=e.composedPath()||[],a=this.findVtjElement(l)||this.document?.body;if(!a)return null;const n=this.getNodeByElement(a)||this.engine.current.value;if(!n)return null;const i=a.getBoundingClientRect(),s=this.getDropType(i,e.clientX,e.clientY),o=this.getNodePath(l);return{el:a,model:n,rect:i,type:s,path:o}}cleanHelper(){this.setSelected(null),this.setHover(null),this.setDragging(null),this.setDropping(null)}async updateRect(){await Yt(100);const e=t(this.selected),l=t(this.hover);if(e){const a=e.el.getBoundingClientRect();this.selected.value={...e,rect:a}}if(l){const a=l.el.getBoundingClientRect();this.hover.value={...l,rect:a}}}setDragging(e){this.dragging=e}async setHover(e){if(await we(),e){const l=this.getElmenetByModel(e);if(!l)return;const a=l.getBoundingClientRect(),n=$(e)?[]:this.findPathByNode(e);this.hover.value={el:l,model:e,rect:a,type:"inner",path:n}}else this.hover.value=null}async setSelected(e){if(await we(),e){const l=this.getElmenetByModel(e)||this.document?.createElement("span");if(!l)return;const a=l.getBoundingClientRect(),n=$(e)?[]:this.findPathByNode(e);this.selected.value={el:l,model:e,rect:a,type:"inner",path:n}}else this.selected.value=null}async setDropping(e,l="inner"){if(await we(),e){const a=this.getElmenetByModel(e);if(!a)return;const n=a.getBoundingClientRect(),i=$(e)?[]:this.findPathByNode(e);this.dropping.value={el:a,model:e,rect:n,type:l,path:i}}else this.dropping.value=null}async allowDrop(e,l="inner"){const{dragging:a,engine:n}=this,i=n.current.value;if(!a||!i)return!1;if($(e))return!0;const s=n.assets.componentMap,o=l!=="inner"&&e.parent||e,r=await n.assets.getBlockMaterial(o.from)||s.get(o.name);if(!r)return!1;const{parentIncludes:p=!0,name:m}=a,{childIncludes:f=!0}=r,h=p===!0||Array.isArray(p)&&p.includes(o.name),g=f===!0||Array.isArray(f)&&f.includes(m);return h&&g}dispose(){const{contentWindow:e,document:l}=this;this.setSelected(null),this.setHover(null),this.setDragging(null),e&&l&&this.unbindEvents(e,l),this.document=null}}class Ir{constructor(e,l,a=null){this.env=e,this.service=l,this.designer=a,this.nodeChange=this.__onNodeChange.bind(this),this.blockChange=this.__onBlockChange.bind(this)}app=null;dsl=null;nodeChange;blockChange;context=null;install(e){const{library:l,globals:a,VueRouter:n}=this.env;if(n){const s=n.createRouter({history:n.createWebHashHistory(),routes:[]});e.use(s)}const i=Object.values(l);Object.assign(e.config.globalProperties,a),e.config.errorHandler=(s,o,r)=>{const p=o?.$options.name,m=s?.message||s?.msg||"未知错误",f=`[ ${p} ] ${m}`;console.error({err:s,instance:o,info:r}),ye.error({title:"运行错误",message:f})},i.forEach(s=>{(typeof s=="function"||typeof s.install=="function")&&e?.use(s)})}render(e){const{window:l,container:a,Vue:n,components:i,library:s,apis:o}=this.env,r=l.document.createElement("div");r.id="app",a.appendChild(r),this.dsl=n.reactive(e.toDsl());const p=Wn({getDsl:async h=>await this.service.getFile(h)||null,options:{mode:ut.Design,Vue:n,components:i,libs:s,apis:o,window:l}}),{renderer:m,context:f}=Tn({Vue:n,mode:ut.Design,dsl:this.dsl,components:i,libs:s,apis:o,loader:p,window:l});this.app=n.createApp(m),this.install(this.app);try{this.app.mount(r)}catch(h){ae(h.message||"未知错误","运行时错误"),console.error(h)}this.context=f,ee.on(Ne,this.nodeChange),ee.on(ct,this.blockChange)}dispose(){if(this.app){this.app.unmount();const e=this.app._container;e&&e.parentNode&&(e.parentNode.removeChild(e),this.app._container=null),this.app=null}this.dsl=null,this.context=null,ee.off(Ne,this.nodeChange),ee.off(ct,this.blockChange)}updateChild(e,l){const a=l.children||l.nodes||[];if(Array.isArray(a))for(let n=0;n<a.length;n++){const i=a[n];if(i.id===e.id){a.splice(n,1,e);return}else this.updateChild(e,i)}}__onNodeChange(e){this.dsl&&this.updateChild(e.toDsl(),this.dsl)}__onBlockChange(e){this.dispose(),this.render(e),this.designer?.selected.value&&this.designer.setSelected(e)}}class Mr extends Kt{contentWindow=null;renderer=null;designer=gt(null);engine;materialPath;constructor(e){super();const{engine:l,materialPath:a}=e;this.engine=l,this.materialPath=a,q(this.engine.current,()=>{this.refresh()})}init(e,l,a,n){q([e,l,a,n],()=>{e.value&&l.value.length&&(this.resetReady(),this.renderer?.dispose(),this.renderer=null,this.setup(e.value,l.value),this.contentWindow&&(this.designer.value?.dispose(),this.designer.value=new Lr(this.engine,this.contentWindow,l)))},{immediate:!0,deep:!0})}setup(e,l){const a=e.contentWindow;if(!a){xe.warn("Simulator contentWindow is null");return}a.__simulator__=this;const n=a.document;a.CKEDITOR_VERSION=void 0,this.contentWindow=a;const{scripts:i,css:s,materials:o,libraryExports:r,materialExports:p,materialMapLibrary:m}=Aa(l,this.materialPath);n.open(),n.write(`
     <!DOCTYPE html>
     <html lang="zh-CN">
       <head>
       <meta charset="utf-8">
       <meta name="viewport"
             content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0,viewport-fit=cover"/>
         <style>
            html, body, #app {
              padding: 0;
              margin: 0;
              min-height: 100vh;
              width: 100%;
              height: 100%;
              background: #fff;
            }
         </style>
         ${ja(s)}
         ${Dt(i)}
         ${Dt(o)}
       </head>
       <body> 
       </body>
       <script>
       __simulator__.emitReady(${JSON.stringify(r)},
        ${JSON.stringify(p)}, 
    ${JSON.stringify(m)});
     <\/script> 
     </html>
    `),n.close()}async emitReady(e=[],l=[],a={}){this.renderer?.dispose(),this.renderer=null;const n=this.contentWindow,{assets:i,service:s,current:o,provider:r}=this.engine,p=r.materials||{},m=[];for(const h of l){const g=p[h]?(await p[h]()).default:n[h];m.push(g)}i.load(m);const f=this.createEnv(e,a,m);this.renderer=new Ir(f,s,this.designer.value),o.value&&this.renderer.render(o.value),this.triggerReady()}createEnv(e=[],l={},a=[]){const n=this.contentWindow,{engine:i}=this,{project:s,assets:o,provider:r}=i,p=e.reduce((S,j)=>(S[j]=n[j],S),{}),m={},{groups:f,componentMap:h}=o;for(const S of f.value){const j=S.names||[];if(S.name===mt)j.forEach(E=>{const P=h.get(E),D=P?.package||"",ie=On[D],J=p[ie];J&&P&&(m[E]=zt(P,J))});else{const E=p[l[S.library||""]];E&&j.forEach(P=>{const D=h.get(P);D?m[P]=zt(D,E):m[P]=E[P]})}}const{adapter:g,globals:v}=r,w=Ea(s.value?.apis,g);return Da(),s.value?.config?.mock&&za(s.value?.apis),{window:n,Vue:n.Vue,VueRouter:n.VueRouter,library:p,materials:a,components:m,container:n.document.body,apis:w,globals:v}}refresh(){this.renderer?.dispose();const e=this.engine.current.value;e&&this.renderer?.render(e)}dispose(){this.renderer?.dispose(),this.designer.value?.dispose(),this.contentWindow=null,this.renderer=null,this.designer.value=null,this.resetReady()}}class Ur{constructor(e){this.service=e}components=[];componentMap=new Map;groups=k([]);caches={};getCateoryComponents(e,l){const a=l.filter(n=>n.categoryId===e.id&&n.hidden!==!0);return{name:e.id,label:e.category,count:a.length,components:a}}parseGroups(e){const l=[];for(let a of e){const{categories:n,components:i,label:s,name:o,library:r}=a;if(!n||!i)continue;const p=i.filter(g=>!!g.package).map(g=>g.name),m=n.map(g=>this.getCateoryComponents(g,i)),f=m.reduce((g,v)=>v.count+g,0),h={name:a.name,label:s||o,count:f,names:p,library:r,children:m};l.push(h)}return l}load(e){const l=[...hr,...e].filter(a=>!!a);l.sort((a,n)=>a.order-n.order);for(let a of l)a.components&&(this.components=this.components.concat(a.components));this.groups.value=this.parseGroups(l),this.componentMap=Pa(this.components,"name")}async getBlockMaterial(e){if(!e||typeof e=="string")return null;const l=e.type==="Schema"?e.id:null;if(!l)return null;const a=this.caches[l]||await this.service.getFile(l);if(!a)return null;this.caches[l]=a;const{id:n,name:i,slots:s,props:o,emits:r}=a,p=m=>{const f=Array.isArray(m)?m:[m];let h=[];for(const g of f)h=h.concat(Xe.getByType(g));return h};return{id:n,name:i,childIncludes:s?.length?void 0:!1,props:(o||[]).map(m=>typeof m=="string"?{name:m}:{name:m.name,type:m.type,setters:p(m.type)}),events:r,slots:s,from:e}}clearCaches(){this.caches={}}}const Vl=Symbol("VtjEngine");class Eu extends Kt{app;skeleton;container;service;assets;simulator;emitter=ee;project=k(null);current=k(null);context=k(null);isEmptyCurrent=k(!1);history=k(null);provider;changed=k(Symbol());constructor(e){super();const{container:l,service:a,project:n={},globals:i={},dependencies:s,materials:o,materialPath:r="./"}=e;this.container=l,this.service=a,this.provider=new ra({mode:ut.Design,globals:i,project:n,service:a,dependencies:s,materials:o,materialPath:r}),this.assets=new Ur(this.service),this.simulator=new Mr({engine:this,materialPath:r}),this.bindEvents(),this.init(n),il(this.render.bind(this)),rl(this.dispose.bind(this))}async init(e){const l=await this.service.init(e).catch(a=>(xe.warn("VTJEngine service init fail.",a),null));l&&(l.dependencies=Tr.merge(l.dependencies||[]),this.project.value=new ua(l),this.saveMaterials(),this.triggerReady())}render(){const e=t(this.container);if(e){const l=ul(qr);l.provide(Vl,Kn(this)),l.mount(e),this.app=l}else xe.warn("VTJEngine constructor param [ container ] is undefined")}bindEvents(){ee.on(da,e=>this.saveProject(e)),ee.on(ca,e=>this.saveBlockFile(e)),ee.on(ma,e=>this.saveBlockFile(e)),ee.on(pa,()=>this.saveMaterials()),ee.on(dt,e=>this.activeFile(e)),ee.on(va,()=>this.publish()),ee.on(ga,()=>this.publishCurrent()),ee.on(ct,e=>this.changeFile(e)),ee.on(Ne,()=>this.changeCurrentFile()),ee.on(ha,e=>this.saveHistory(e)),ee.on(ba,e=>this.loadHistory(e))}async activeFile(e){await we();const l=e.model,a=e.model.currentFile;if(a){if(l.isPageFile(a)&&a.raw)return;const n=await this.service.getFile(a.id);n&&(a.dsl=n)}if(a?.dsl){const n=new jt(a.dsl);this.updateCurrent(n),this.initHistory(n)}else this.updateCurrent(null);Ae(this.project)}async changeFile(e){await we();const l=e.toDsl();this.service.saveFile(l),this.updateCurrent(e),this.history.value?.add(l),Ae(this.history)}changeCurrentFile(){this.saveCurrentFile(),this.current.value&&(this.history.value?.add(this.current.value.toDsl()),Ae(this.history))}async updateCurrent(e,l=!0){this.current.value=e,await we(),this.context.value=this.simulator.renderer?.context||null,this.isEmptyCurrent.value=this.current.value?.nodes.length===0,this.changed.value=Symbol(),l&&Ae(this.context)}async saveProject(e){const l=e.model.toDsl();await this.service.saveProject(l),Ae(this.project)}async saveBlockFile(e){const l=e.type,a=e.model;if(l==="create"){const n=e.data;a.isPageFile(n)&&n.raw?(await this.service.createRawPage(n),me(`源码文件已经生成：/.vtj/vue/${n.id}.vue`,"success")):n.dsl&&await this.service.saveFile(n.dsl)}if(l==="update"){const n=e.data;if(a.isPageFile(n)&&(n.dir||n.raw))return;const i=await this.service.getFile(n.id);i&&(i.name=n.name,await this.service.saveFile(i))}if(l==="delete"){const n=e.data;n&&a.isPageFile(n)&&n.raw?await this.service.removeRawPage(n.id):n.dir||(await this.service.removeFile(n.id),await this.service.removeHistory(n.id))}if(l==="clone"){const{page:n,newPage:i}=e.data,s=await this.service.getFile(n.id);s&&(s.id=i.id,s.name=i.name,await this.service.saveFile(s))}Ae(this.project)}async saveMaterials(){await we(),this.simulator.ready(()=>{const e=this.project.value;if(e){const l=this.assets.componentMap;this.service.saveMaterials(e.toDsl(),l)}})}saveCurrentFile(){const e=this.current.value;e&&(this.updateCurrent(e),this.service.saveFile(e.toDsl()))}async initHistory(e){if(e){const l=await this.service.getHistory(e.id).catch(()=>null);this.history.value=new fa(Object.assign(l||{},{id:e.id}))}else this.history.value=null}async saveHistory(e){const l=e.type,a=e.model;l==="create"&&await this.service.saveHistoryItem(a.id,e.data),l==="delete"&&await this.service.removeHistoryItem(a.id,e.data),l==="clear"&&await this.service.removeHistoryItem(a.id,e.data);const n=a.toDsl();await this.service.saveHistory(n),Ae(this.history)}async loadHistory(e){const l=e.model,a=e.data,n=await this.service.getHistoryItem(l.id,a.id);if(n&&n.dsl){const i=new jt(n.dsl);await this.updateCurrent(i),Ae(this.history)}}async publish(){const e=this.project.value;if(e){const l={...e.toDsl(),pages:e.getPages()};await this.service.publish(l)&&me("整站发布成功","success")}}async publishCurrent(){const e=this.project.value,l=e?.currentFile;if(e&&l){const a={...e.toDsl(),pages:e.getPages()};await this.service.publishFile(a,l)&&me("发布成功","success")}}dispose(){this.emitter.all.clear(),this.simulator.dispose(),this.app&&(this.app.unmount(),this.container=void 0)}async openFile(e){const l=this.project.value,a=this.skeleton?.getRegion("Apps"),n=e||l?.homepage;if(!l||!a||!n)return;const i=l.getPage(n);i&&!i.raw&&(a.regionRef?.setActive("Pages"),this.simulator.ready(()=>{l.active(i)}));const s=l.getBlock(n);s&&(a.regionRef?.setActive("Blocks"),this.simulator?.ready(()=>{l.active(s)}))}}function ce(){const d=xt(Vl,null);return d||xe.error("VTJEngine is not exist"),d}const je=C({name:"RegionWrapper",props:{region:{type:String,required:!0}},setup(){return{regionRef:k()}},render(){const d=Wt[this.region]||Wt.EmptyRegion;return Je(d,{...this.$props,...this.$attrs,ref:"regionRef"})}}),ze=C({name:"WidgetWrapper",props:{region:{type:String,required:!0},widget:{type:Object,required:!0}},setup(){return{widgetRef:k()}},render(){return Je(this.widget.component,{...this.widget.props,...this.$props,...this.$attrs,ref:"widgetRef"})}}),qr=C({name:"SkeletonWrapper",setup(){const d=k(),e=ce(),l=k({});return{skeletonRef:d,engine:e,widgets:l}},mounted(){this.engine.skeleton=this},render(){return Je(Hr,{...this.$props,...this.$attrs,ref:"skeletonRef"})},methods:{getRegion(d){return this.skeletonRef[d.toLowerCase()]},toggleCollapse(d){if(this.skeletonRef){const e=this.skeletonRef.collapsed;this.skeletonRef.collapsed=d??!e}},settable(d){this.skeletonRef&&(this.skeletonRef.settable=d)},getWidgets(d){const e=this.getRegion(d);return e?ya(e.regionRef?.widgetsRef||[]):[]},getWidget(d){const e=Cl.get(d);if(!e){xe.warn(`widget [ ${d} ] is not exsit`);return}return this.getWidgets(e.region).find(l=>l.widget.name===d)},openPreview(d){this.skeletonRef&&(this.skeletonRef.isPreview=!0)},closePreview(){this.skeletonRef&&(this.skeletonRef.isPreview=!1)}}}),N=C({name:"SetterWrapper",props:{context:{type:Object,default:null},current:{type:Object,default:null},name:String,label:String,title:String,value:{type:[String,Object,Array,Number,Boolean],default:void 0},setters:{type:[String,Object,Array],required:!0,default(){return[]}},options:{type:Array,default(){return[]}},variable:{type:Boolean,default:!0},removable:{type:Boolean,default:!1}},computed:{computedSetters(){return(Array.isArray(this.setters)?this.setters:[this.setters]).map(d=>{let e;if(typeof d=="string")return e=this.getSetter(d),{component:Bt(e.component),name:e.name,label:d,props:e.props||{}};{const l=d;return e=this.getSetter(l.name),{component:Bt(l.component||e.component),name:l.name,label:l.label||l.name,props:Object.assign(e.props||{},l.props)}}})},computedOptions(){return(this.options||[]).map(d=>typeof d=="string"?{label:d,value:d}:d)},defaultSetter(){const{value:d,computedSetters:e}=this;let l=typeof d;l==="Object"&&(Array.isArray(d)?l="Array":Le(d)?l="Object":wa(d)&&(l="Function"));const a=Xe.getByType(l)||[];return a.length?(e.find(n=>a.includes(n.name))||e[0])?.name:e[0]?.name}},render(){const{context:d,current:e,name:l,label:a,title:n,value:i,computedSetters:s,computedOptions:o,variable:r,changeValue:p,defaultSetter:m,removable:f,onRemove:h}=this;return Je(Zr,{context:d,current:e,name:l,label:a,title:n,setters:s,defaultSetter:m,variable:r,value:i,removable:f,options:o,onChange:p,onRemove:h})},emits:["change","remove"],methods:{getSetter(d){return typeof d=="string"?Xe.get(d)||Xe.defaultSetter:d},changeValue(d){this.$emit("change",this.name,d)},onRemove(d){this.$emit("remove",d)}}}),Hr=C({name:"Skeletion",__name:"skeleton",props:{headerHeight:{default:"36px"},leftWidth:{default:"400px"},rightWidth:{default:"350px"},footerHeight:{default:"20px"}},setup(d,{expose:e}){const l=d,a=k(!1),n=k(parseInt(l.leftWidth)),i=k(parseInt(l.rightWidth)),s={dirs:["e"],maxWidth:600,minWidth:49,onResizing(E,P){n.value=P.elementWidth.value},onEnd(E,P){n.value=P.elementWidth.value}},o={dirs:["w"],maxWidth:600,minWidth:2,onResizing(E,P){i.value=P.elementWidth.value},onEnd(E,P){i.value=P.elementWidth.value}},r=k(),p=k(),m=k(),f=k(),h=k(),g=k(),v=k(),w=k(),S=k(!1),j=k(!1);return e({brand:r,toolbar:p,actions:m,apps:f,workspace:h,settings:g,status:v,collapsed:S,settable:j,leftWidth:n,rightWidth:i,preview:w,isPreview:a}),(E,P)=>(u(),y(t(Wl),{locale:t(Fl)},{default:b(()=>[c(t(Vt),{class:"v-skeleton"},{default:b(()=>[c(t(Bl),{class:"v-skeleton__header",height:E.headerHeight},{default:b(()=>[c(t(je),{ref_key:"brand",ref:r,region:"Brand"},null,512),c(t(je),{ref_key:"toolbar",ref:p,region:"Toolbar",preview:a.value},null,8,["preview"]),c(t(je),{ref_key:"actions",ref:m,region:"Actions"},null,512)]),_:1},8,["height"]),c(t(Vt),{class:"v-skeleton__wrapper"},{default:b(()=>[a.value?A("",!0):Ee((u(),y(t(At),{key:0,width:l.leftWidth,class:U(["v-skeleton__left",{"is-collapsed":S.value}])},{default:b(()=>[c(t(je),{ref_key:"apps",ref:f,region:"Apps"},null,512)]),_:1},8,["width","class"])),[[t(Et),s]]),c(t(Rl),{class:"v-skeleton__main"},{default:b(()=>[a.value?(u(),y(t(je),{key:0,ref_key:"preview",ref:w,region:"Preview",preview:a.value},null,8,["preview"])):A("",!0),Ee(c(t(je),{ref_key:"workspace",ref:h,region:"Workspace"},null,512),[[Pe,!a.value]])]),_:1}),a.value?A("",!0):Ee((u(),y(t(At),{key:1,width:l.rightWidth,class:"v-skeleton__right"},{default:b(()=>[c(t(je),{ref_key:"settings",ref:g,region:"Settings"},null,512)]),_:1},8,["width"])),[[Pe,j.value],[t(Et),o]])]),_:1}),a.value?A("",!0):(u(),y(t(Jl),{key:0,class:"v-skeleton__footer",height:E.footerHeight},{default:b(()=>[c(t(je),{ref_key:"status",ref:v,region:"Status"},null,512)]),_:1},8,["height"]))]),_:1})]),_:1},8,["locale"]))}}),Qr={key:1},Gr={class:"v-setter__content"},Kr={key:0,class:"v-setter__input"},Xr={class:"v-setter__action"},Yr="{{",$r="}}",Zr=C({__name:"setter",props:{context:{},current:{},name:{},label:{default:""},title:{},setters:{},variable:{type:Boolean,default:!0},value:{},options:{default:()=>[]},defaultSetter:{},removable:{type:Boolean}},emits:["change","remove"],setup(d,{emit:e}){const l=d,a=e,n=k(!1),i=k(""),s=k(l.setters.find(j=>j.name===l.defaultSetter)||l.setters[0]),o=k(l.value),r=x(()=>!!Le(o.value)),p={[s.value.name]:o.value},m=j=>{p[s.value.name]=o.value,s.value=j,o.value=p[j.name]??void 0,f(o.value)};q(()=>l.value,()=>{o.value=l.value}),q(()=>l.defaultSetter,()=>{s.value=l.setters.find(j=>j.name===l.defaultSetter)||l.setters[0]});const f=j=>{a("change",j)},h=()=>{a("remove",l.name)},g=()=>{n.value=!0,i.value=Le(o.value)?o.value.value:""},v=()=>{n.value=!1,i.value=""},w=async j=>se(j,l.context,!0)?(p[s.value.name]=o.value,o.value=j,a("change",j),!0):!1,S=async()=>{await We("确定要解除绑定吗？")&&(v(),o.value=void 0,a("change",""))};return(j,E)=>(u(),y(t(It),{class:"v-setter",size:"small","label-positon":"left"},{label:b(()=>[l.title?(u(),y(t(Lt),{key:0,placement:"top-start",content:l.title},{default:b(()=>[H(F(l.label||l.name),1)]),_:1},8,["content"])):(u(),V("span",Qr,F(l.label||l.name),1))]),default:b(()=>[_("div",Gr,[s.value?(u(),V("div",Kr,[r.value?A("",!0):(u(),y(dl(s.value.component),de({key:0,current:l.current,context:l.context},s.value.props,{options:l.options,modelValue:o.value,"onUpdate:modelValue":E[0]||(E[0]=P=>o.value=P),onChange:f,disabled:r.value}),null,16,["current","context","options","modelValue","disabled"])),r.value?(u(),y(t(Se),{key:1,class:"v-expression-setter",disabled:"","model-value":"JSExpression"},{prefix:b(()=>[H(F(Yr))]),suffix:b(()=>[H(F($r))]),_:1})):A("",!0)])):A("",!0),_("div",Xr,[l.variable?(u(),y(t(ka),{key:0,onClick:g,class:U(["v-icon-vars",{"is-active":r.value}]),title:"绑定变量"},null,8,["class"])):A("",!0),l.setters.length>1?(u(),y(t(Nt),{key:1,disabled:r.value,size:"small","popper-class":"v-setter-switch",onCommand:m},{dropdown:b(()=>[c(t(Ot),null,{default:b(()=>[(u(!0),V(R,null,W(l.setters,P=>(u(),y(t(st),{command:P,key:P.name},{default:b(()=>[c(t(Xt),{class:U({"is-placeholder":P.name!==s.value.name})},null,8,["class"]),H(" "+F(P.label),1)]),_:2},1032,["command"]))),128))]),_:1})]),default:b(()=>[c(t(Sa),{title:"切换设置器"})]),_:1},8,["disabled"])):A("",!0),l.removable?(u(),y(t($e),{key:2,onClick:h,title:"删除"})):A("",!0)])]),n.value?(u(),y(t(Jo),{key:0,current:l.current,context:l.context,value:i.value,modelValue:n.value,"onUpdate:modelValue":E[1]||(E[1]=P=>n.value=P),submitMethod:w,onUnbind:S},null,8,["current","context","value","modelValue"])):A("",!0)]),_:1}))}}),eu={class:"v-empty-region"},tu=C({name:"EmptyRegion",__name:"empty",props:{region:{}},setup(d){return(e,l)=>(u(),V("div",eu,"找不到符合【"+F(e.region)+"】名称的区域组件",1))}}),lu={class:"v-brand-region"},au=C({name:"BrandRegion",inheritAttrs:!1,__name:"brand",props:{region:{}},setup(d,{expose:e}){const l=d,{widgets:a,widgetsRef:n}=De(l.region);return e({widgets:a,widgetsRef:n}),(i,s)=>(u(),V("div",lu,[(u(!0),V(R,null,W(t(a),o=>(u(),y(t(ze),{ref_for:!0,ref_key:"widgetsRef",ref:n,region:i.region,widget:o},null,8,["region","widget"]))),256))]))}}),nu={class:"v-toolbar-region"},su=C({name:"ToolbarRegion",__name:"toolbar",props:{region:{},preview:{type:Boolean}},setup(d,{expose:e}){const l=d,{widgets:a,widgetsRef:n}=De(l.region);return e({widgets:a,widgetsRef:n}),(i,s)=>(u(),V("div",nu,[(u(!0),V(R,null,W(t(a),o=>(u(),y(t(ze),{ref_for:!0,ref_key:"widgetsRef",ref:n,region:i.region,widget:o,preview:i.preview},null,8,["region","widget","preview"]))),256))]))}}),ou={class:"v-actions-region"},iu=C({name:"ActionsRegion",inheritAttrs:!1,__name:"actions",props:{region:{}},setup(d,{expose:e}){const l=d,{widgets:a,widgetsRef:n}=De(l.region);return e({widgets:a,widgetsRef:n}),(i,s)=>(u(),V("div",ou,[(u(!0),V(R,null,W(t(a),o=>(u(),y(t(ze),{ref_for:!0,ref_key:"widgetsRef",ref:n,region:i.region,widget:o},null,8,["region","widget"]))),256))]))}}),ru={class:"v-apps-region"},uu={class:"v-apps-region__header"},du={class:"v-apps-region__top"},cu={class:"v-apps-region__bottom"},mu={class:"v-apps-region__panels"},pu=C({name:"AppsRegion",inheritAttrs:!1,__name:"apps",props:{region:{},index:{default:0}},setup(d,{expose:e}){const l=d,a=ce(),{widgets:n,widgetsRef:i}=De(l.region),s=x(()=>n.value.filter(g=>g.openType==="panel")),o=x(()=>n.value.filter(g=>g.openType!=="panel")),r=s.value[l.index],p=k(r),m=k(r),f=g=>{p.value=g,m.value=m.value?.name===g.name?null:g},h=g=>{g.openType==="link"&&g.url&&window.open(g.url),g.openType==="dialog"&&qn({title:g.label,icon:g.icon,...g.props,content:g.component})};return q(m,g=>{a.skeleton?.toggleCollapse(!g)}),e({widgets:n,widgetsRef:i,setActive:g=>{const v=s.value.find(w=>w.name===g);p.value=v,m.value=v}}),(g,v)=>(u(),V("div",ru,[_("div",uu,[_("div",du,[(u(!0),V(R,null,W(s.value,w=>(u(),y(t(Ft),{key:`icon-${w.name}`,icon:w.icon,label:w.label,active:p.value?.name===w.name,open:m.value?.name===w.name,onClick:S=>f(w)},null,8,["icon","label","active","open","onClick"]))),128))]),_("div",cu,[(u(!0),V(R,null,W(o.value,w=>(u(),y(t(Ft),{key:`icon-${w.name}`,icon:w.icon,label:w.label,onClick:S=>h(w)},null,8,["icon","label","onClick"]))),128))])]),_("div",mu,[(u(!0),V(R,null,W(s.value,w=>(u(),y(pl,{key:w.name},[p.value?.name===w.name?(u(),y(t(ze),{key:0,ref_for:!0,ref_key:"widgetsRef",ref:i,region:g.region,widget:w},null,8,["region","widget"])):A("",!0)],1024))),128))])]))}}),vu=C({name:"WorkspaceRegion",__name:"workspace",props:{region:{}},setup(d,{expose:e}){const l=d,{widgets:a,widgetsRef:n}=De(l.region),i=Ue(a.value.map(h=>({name:h.name,command:h.name,label:h.label,closable:!!h.closable,props:h.props||{},checked:!h.closable}))),s=x(()=>i.filter(h=>!h.closable||h.checked)),o=x(()=>i.map(h=>({...h,disabled:!h.closable}))),r=k(s.value[0]?.name),p=x(()=>i.find(h=>h.name===r.value)?.props||{}),m=h=>{const g=i.find(v=>v.name===h);g&&(g.checked=!1),r.value===h&&(r.value=s.value[0]?.name)},f=h=>{const g=i.find(v=>v.name===h.name);g&&g.closable&&(g.checked=!g.checked,g.checked&&(r.value=g.name),!g.checked&&r.value===g.name&&(r.value=s.value[0]?.name))};return e({currentTab:r,widgets:a,widgetsRef:n,openTab:(h,g={})=>{const v=i.find(w=>w.name===h);v&&(v.props=Object.assign({},v.props,g),v.checked=!0,r.value=v.name)}}),(h,g)=>(u(),y(t(tt),{class:"v-workspace-region",items:s.value,menus:o.value,modelValue:r.value,"onUpdate:modelValue":g[0]||(g[0]=v=>r.value=v),checkable:"",onRemove:m,onCommand:f},{default:b(()=>[(u(!0),V(R,null,W(t(a),v=>(u(),V(R,{key:v.name},[r.value===v.name?(u(),y(t(ze),{key:0,ref_for:!0,ref_key:"widgetsRef",ref:n,region:h.region,widget:{...v,props:p.value}},null,8,["region","widget"])):A("",!0)],64))),128))]),_:1},8,["items","menus","modelValue"]))}}),gu=C({name:"SettingsRegion",__name:"settings",props:{region:{}},setup(d,{expose:e}){const l=d,a=ce(),{current:n}=oe(),{selected:i,isSelectBlock:s}=fe(),o=x(()=>s.value?he.Block:he.Node),{widgets:r,widgetsRef:p}=De(l.region,o),m=k(),f=k(!1),h=x(()=>r.value.map(S=>({name:S.name,label:S.label,actions:S.name==="Style"?[{name:"switch",icon:cs,background:"hover"}]:void 0}))),g=x(()=>{const S=i.value?.model;return S?a.assets.componentMap.get(S.name)?.doc:null});q(n,S=>{a.skeleton?.settable(!!S)}),q(o,()=>{m.value=h.value[0]?.name},{immediate:!0}),q(m,()=>{f.value=!1});const v=()=>{if(g.value){const S=a.skeleton?.getRegion("Workspace");S&&S.regionRef.openTab("Docs",{url:g.value})}},w=S=>{S.name==="switch"&&(f.value=!f.value)};return e({widgets:r,widgetsRef:p}),(S,j)=>t(n)?(u(),y(t(I),{key:0,class:"v-settings-region",fit:"",direction:"column"},{default:b(()=>[t(i)?(u(),y(t(I),{key:0,flex:"",justify:"space-between",align:"center",class:"v-settings-region__header"},{default:b(()=>[c(t(I),{class:"v-settings-region__title"},{default:b(()=>[c(t(tl)),_("span",null,[H(F(t(i)?.model.name)+": ",1),_("i",null,F(t(i)?.model.id),1)])]),_:1}),g.value?(u(),y(t(I),{key:0},{default:b(()=>[c(t(be),{onClick:v,icon:t(ll),mode:"text",label:"帮助"},null,8,["icon"])]),_:1})):A("",!0)]),_:1})):A("",!0),t(i)&&!t(i).model.locked?(u(),y(t(I),{key:1,grow:"",padding:!1},{default:b(()=>[c(t(tt),{items:h.value,modelValue:m.value,"onUpdate:modelValue":j[0]||(j[0]=E=>m.value=E),stretch:"",body:{padding:!1},onActionClick:w},{default:b(()=>[(u(!0),V(R,null,W(t(r),E=>(u(),V(R,{key:E.name},[m.value===E.name?(u(),y(t(ze),{key:0,ref_for:!0,ref_key:"widgetsRef",ref:p,region:S.region,widget:t(wt)({props:{isStyleCodeMode:f.value}},E)},null,8,["region","widget"])):A("",!0)],64))),128))]),_:1},8,["items","modelValue"])]),_:1})):A("",!0),t(i)?A("",!0):(u(),y(t(ne),{key:2,description:"请在左侧画布选中节点"})),t(i)&&t(i).model.locked?(u(),y(t(ne),{key:3,"image-size":1,description:"节点已被锁定, 禁止编辑"})):A("",!0)]),_:1})):A("",!0)}}),hu={class:"v-status-region"},bu=C({name:"StatusRegion",inheritAttrs:!1,__name:"status",props:{region:{}},setup(d,{expose:e}){const l=d,{widgets:a,widgetsRef:n}=De(l.region);return e({widgets:a,widgetsRef:n}),(i,s)=>(u(),V("div",hu,[(u(!0),V(R,null,W(t(a),o=>(u(),y(t(ze),{ref_for:!0,ref_key:"widgetsRef",ref:n,region:i.region,widget:o},null,8,["region","widget"]))),256))]))}}),fu=C({name:"PreviewRegion",__name:"preview",props:{region:{}},setup(d,{expose:e}){const l=d,{widgets:a,widgetsRef:n}=De(l.region),i=Ue(a.value.map(r=>({name:r.name,command:r.name,label:r.label,closable:!!r.closable,checked:!1}))),s=x(()=>i.filter(r=>!r.closable||r.checked)),o=k(s.value[0]?.name);return e({currentTab:o,widgets:a,widgetsRef:n}),(r,p)=>(u(),y(t(tt),{class:"v-workspace-region",items:s.value,modelValue:o.value,"onUpdate:modelValue":p[0]||(p[0]=m=>o.value=m)},{default:b(()=>[(u(!0),V(R,null,W(t(a),m=>(u(),y(pl,{key:m.name},[o.value===m.name?(u(),y(t(ze),{key:0,ref_for:!0,ref_key:"widgetsRef",ref:n,region:r.region,widget:m},null,8,["region","widget"])):A("",!0)],1024))),128))]),_:1},8,["items","modelValue"]))}}),Wt={EmptyRegion:tu,Brand:au,Toolbar:su,Actions:iu,Apps:pu,Workspace:vu,Settings:gu,Status:bu,Preview:fu};class Du extends Qn{publish(e){return ye.warning({title:"提示",message:"在线演示版本不支持发布功能，如需体验请下载本地版本。"}),Promise.resolve(!1)}publishFile(e,l){return ye.warning({title:"提示",message:"在线演示版本不支持发布功能，如需体验请下载本地版本。"}),Promise.resolve(!1)}genVueContent(e,l){return ye.warning({title:"提示",message:"在线演示版本不支持源码生成功能，如需体验请下载本地版本。"}),Promise.resolve("")}async createRawPage(e){return ye.warning({title:"提示",message:"在线演示版本不支持源码模式页面，如需体验请下载本地版本。"}),Promise.resolve(!1)}async removeRawPage(e){return ye.warning({title:"提示",message:"在线演示版本不支持源码模式页面，如需体验请下载本地版本。"}),Promise.resolve(!1)}}export{Eu as E,Du as L,Vu as M,Au as P,ju as a,Cl as j};
